var i=class extends HTMLElement{static observedAttributes=["checked","disabled"];connectedCallback(){this.#t(),this.#s();}#t(){this.setAttribute("role","switch"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.addEventListener("click",this.#i),this.addEventListener("keydown",this.#e);}disconnectedCallback(){this.removeEventListener("click",this.#i),this.removeEventListener("keydown",this.#e);}attributeChangedCallback(t,e,s){this.isConnected&&this.#s();}#i=()=>{this.disabled||this.toggle();};#e=t=>{this.disabled||(t.key===" "||t.key==="Enter")&&(t.preventDefault(),this.toggle());};#s(){this.setAttribute("aria-checked",String(this.checked)),this.setAttribute("aria-disabled",String(this.disabled));}toggle(){let t=!this.checked;t?this.setAttribute("checked",""):this.removeAttribute("checked"),this.dispatchEvent(new CustomEvent("change",{bubbles:true,detail:{checked:t}}));}get checked(){return this.hasAttribute("checked")}set checked(t){t?this.setAttribute("checked",""):this.removeAttribute("checked");}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled");}};customElements.define("ytz-toggle",i);var c="yetzirah-theme",h="dark-mode",d="data-theme",a=class extends HTMLElement{static observedAttributes=["storage-key","no-persist"];#t=null;connectedCallback(){this.#i(),this.#e();}disconnectedCallback(){this.#t?.removeEventListener("change",this.#s);}attributeChangedCallback(t,e,s){this.isConnected&&t==="storage-key"&&this.#e();}#i(){if(!this.#t){for(this.#t=document.createElement("ytz-toggle"),this.#t.setAttribute("aria-label","Toggle dark mode");this.firstChild;)this.#t.appendChild(this.firstChild);this.#t.hasChildNodes()||(this.#t.textContent="Dark mode"),this.appendChild(this.#t);}this.#t.addEventListener("change",this.#s);}#e(){let t=this.#r(),e=window.matchMedia("(prefers-color-scheme: dark)").matches,s=t==="dark"||t===null&&e;this.#h(s),this.#a(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",r=>{this.#r()||(this.#h(r.matches),this.#a(r.matches));});}#s=t=>{let e=t.detail.checked;this.#h(e),this.#d(e?"dark":"light"),this.dispatchEvent(new CustomEvent("themechange",{bubbles:true,detail:{theme:e?"dark":"light",isDark:e}}));};#h(t){let e=document.documentElement;t?(e.classList.add(h),e.setAttribute(d,"dark")):(e.classList.remove(h),e.setAttribute(d,"light"));}#a(t){this.#t&&(t?this.#t.setAttribute("checked",""):this.#t.removeAttribute("checked"));}#r(){if(this.hasAttribute("no-persist"))return null;try{return localStorage.getItem(this.storageKey)}catch{return null}}#d(t){if(!this.hasAttribute("no-persist"))try{localStorage.setItem(this.storageKey,t);}catch{}}get storageKey(){return this.getAttribute("storage-key")||c}set storageKey(t){this.setAttribute("storage-key",t);}get theme(){return document.documentElement.classList.contains(h)?"dark":"light"}set theme(t){let e=t==="dark";this.#h(e),this.#a(e),this.#d(t);}get isDark(){return this.theme==="dark"}toggle(){this.theme=this.isDark?"light":"dark";}};customElements.define("ytz-theme-toggle",a);export{a as YtzThemeToggle};//# sourceMappingURL=theme-toggle.js.map
//# sourceMappingURL=theme-toggle.js.map