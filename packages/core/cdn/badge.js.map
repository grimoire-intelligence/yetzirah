{"version":3,"sources":["../src/utils/register.js","../src/badge.js"],"names":["register","name","constructor","VALID_POSITIONS","YtzBadge","#indicator","#createIndicator","#update","oldVal","newVal","rawValue","max","pos","isHidden","mode","displayValue","numValue","val","attr","num"],"mappings":"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","file":"badge.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-badge - Notification badge Web Component.\n * Overlays a count or dot indicator on slotted content.\n *\n * @module @grimoire/yetzirah-core/badge\n * @example\n * // Dot badge (no value)\n * <ytz-badge>\n *   <button>Messages</button>\n * </ytz-badge>\n *\n * @example\n * // Count badge\n * <ytz-badge value=\"5\">\n *   <button>Notifications</button>\n * </ytz-badge>\n *\n * @example\n * // Max cap badge\n * <ytz-badge value=\"150\" max=\"99\">\n *   <button>Inbox</button>\n * </ytz-badge>\n */\n\nimport { register } from './utils/register.js'\n\n/** Valid position values */\nconst VALID_POSITIONS = ['top-right', 'top-left', 'bottom-right', 'bottom-left']\n\n/**\n * @class YtzBadge\n * @extends HTMLElement\n */\nclass YtzBadge extends HTMLElement {\n  static observedAttributes = ['value', 'max', 'position', 'hidden']\n\n  /** @type {HTMLSpanElement|null} */\n  #indicator = null\n\n  connectedCallback() {\n    this.#createIndicator()\n    this.#update()\n  }\n\n  disconnectedCallback() {\n    this.#indicator?.remove()\n    this.#indicator = null\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected) {\n      this.#update()\n    }\n  }\n\n  #createIndicator() {\n    this.#indicator = document.createElement('span')\n    this.#indicator.className = 'ytz-badge-indicator'\n    this.#indicator.setAttribute('aria-hidden', 'true')\n    this.appendChild(this.#indicator)\n  }\n\n  #update() {\n    if (!this.#indicator) return\n\n    const rawValue = this.getAttribute('value')\n    const max = this.max\n    const pos = this.position\n    const isHidden = this.hasAttribute('hidden')\n\n    // Determine mode and display value\n    let mode\n    let displayValue = ''\n\n    if (rawValue === null) {\n      // No value = dot mode\n      mode = 'dot'\n    } else if (rawValue === '0') {\n      // Zero = hidden\n      mode = 'hidden'\n    } else {\n      // Count mode\n      mode = 'count'\n      const numValue = parseInt(rawValue, 10)\n\n      if (!isNaN(numValue) && max !== null && numValue > max) {\n        displayValue = `${max}+`\n      } else {\n        displayValue = rawValue\n      }\n    }\n\n    // Apply visibility\n    if (mode === 'hidden' || isHidden) {\n      this.#indicator.hidden = true\n    } else {\n      this.#indicator.hidden = false\n    }\n\n    // Set data attributes for styling\n    this.#indicator.setAttribute('data-mode', mode)\n    this.#indicator.setAttribute('data-position', pos)\n\n    // Set content for count mode\n    this.#indicator.textContent = mode === 'count' ? displayValue : ''\n  }\n\n  // Property getters/setters\n\n  /**\n   * Get/set the badge value. Null/undefined = dot mode, \"0\" = hidden.\n   * @type {string|number|null}\n   */\n  get value() {\n    return this.getAttribute('value')\n  }\n\n  set value(val) {\n    if (val === null || val === undefined) {\n      this.removeAttribute('value')\n    } else {\n      this.setAttribute('value', String(val))\n    }\n  }\n\n  /**\n   * Get/set the maximum displayed value. Shows \"max+\" when exceeded.\n   * @type {number|null}\n   */\n  get max() {\n    const attr = this.getAttribute('max')\n    if (attr === null) return null\n    const num = parseInt(attr, 10)\n    return isNaN(num) ? null : num\n  }\n\n  set max(val) {\n    if (val === null || val === undefined) {\n      this.removeAttribute('max')\n    } else {\n      this.setAttribute('max', String(val))\n    }\n  }\n\n  /**\n   * Get/set the badge position relative to child content.\n   * @type {string}\n   */\n  get position() {\n    const pos = this.getAttribute('position')\n    return VALID_POSITIONS.includes(pos) ? pos : 'top-right'\n  }\n\n  set position(val) {\n    if (VALID_POSITIONS.includes(val)) {\n      this.setAttribute('position', val)\n    }\n  }\n}\n\nregister('ytz-badge', YtzBadge)\n\nexport { YtzBadge }\n"]}