{"version":3,"sources":["../src/utils/position.js","../src/utils/key-nav.js","../src/utils/register.js","../src/select.js"],"names":["position","anchor","floating","options","placement","offset","anchorRect","floatingRect","viewport","x","y","finalPlacement","createKeyNav","getItems","orientation","wrap","autoActivate","onActivate","prevKey","nextKey","e","items","currentIndex","newIndex","register","name","constructor","selectId","YtzSelect","#trigger","#listbox","#keyNav","#selected","#id","#customTrigger","#setup","#show","#updateDisabledState","#cleanup","oldVal","newVal","#hide","v","val","#updateSelectedState","#updateTriggerText","opt","#handleTriggerClick","#handleTriggerKeyDown","#handleListboxKeyDown","#handleOptionClick","#handleOutsideClick","#handleEscape","focused","#selectOption","option","value","isSelected","selected","o","#updatePosition","first"],"mappings":"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","file":"select.js","sourcesContent":["/**\r\n * Position utility for tooltips, menus, popovers.\r\n * Places an element relative to an anchor with flip/shift logic.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/position\r\n * @internal Not exported from package\r\n *\r\n * Limitations (by design):\r\n * - Does not handle nested scroll containers\r\n * - Does not support virtual elements\r\n * - No middleware system\r\n */\r\n\r\n/**\r\n * Position a floating element relative to an anchor.\r\n *\r\n * @param {HTMLElement} anchor - Element to position relative to\r\n * @param {HTMLElement} floating - Element to position\r\n * @param {Object} [options] - Positioning options\r\n * @param {'top'|'bottom'|'left'|'right'} [options.placement='top'] - Preferred placement\r\n * @param {number} [options.offset=8] - Gap between anchor and floating element\r\n * @returns {{ x: number, y: number, placement: string }}\r\n */\r\nexport function position(anchor, floating, options = {}) {\r\n  const { placement = 'top', offset = 8 } = options\r\n\r\n  const anchorRect = anchor.getBoundingClientRect()\r\n  const floatingRect = floating.getBoundingClientRect()\r\n  const viewport = { width: window.innerWidth, height: window.innerHeight }\r\n\r\n  let x, y\r\n  let finalPlacement = placement\r\n\r\n  // Calculate position based on placement\r\n  switch (placement) {\r\n    case 'top':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.top - floatingRect.height - offset\r\n      break\r\n    case 'bottom':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.bottom + offset\r\n      break\r\n    case 'left':\r\n      x = anchorRect.left - floatingRect.width - offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n    case 'right':\r\n      x = anchorRect.right + offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n  }\r\n\r\n  // Flip if outside viewport\r\n  if (placement === 'top' && y < 0) {\r\n    y = anchorRect.bottom + offset\r\n    finalPlacement = 'bottom'\r\n  } else if (placement === 'bottom' && y + floatingRect.height > viewport.height) {\r\n    y = anchorRect.top - floatingRect.height - offset\r\n    finalPlacement = 'top'\r\n  } else if (placement === 'left' && x < 0) {\r\n    x = anchorRect.right + offset\r\n    finalPlacement = 'right'\r\n  } else if (placement === 'right' && x + floatingRect.width > viewport.width) {\r\n    x = anchorRect.left - floatingRect.width - offset\r\n    finalPlacement = 'left'\r\n  }\r\n\r\n  // Shift to stay in viewport\r\n  if (finalPlacement === 'top' || finalPlacement === 'bottom') {\r\n    x = Math.max(0, Math.min(x, viewport.width - floatingRect.width))\r\n  } else {\r\n    y = Math.max(0, Math.min(y, viewport.height - floatingRect.height))\r\n  }\r\n\r\n  return { x, y, placement: finalPlacement }\r\n}\r\n","/**\r\n * Keyboard navigation utility for arrow key navigation.\r\n * @module @grimoire/yetzirah-core/utils/key-nav\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates keyboard navigation for a set of elements.\r\n * @param {() => HTMLElement[]} getItems - Function returning navigable elements\r\n * @param {Object} options\r\n * @param {'horizontal'|'vertical'} [options.orientation='horizontal']\r\n * @param {boolean} [options.wrap=true]\r\n * @param {boolean} [options.autoActivate=true]\r\n * @param {(item: HTMLElement) => void} [options.onActivate]\r\n * @returns {{ handleKeyDown: (e: KeyboardEvent) => void }}\r\n */\r\nexport function createKeyNav(getItems, options = {}) {\r\n  const { orientation = 'horizontal', wrap = true, autoActivate = true, onActivate } = options\r\n  const prevKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\r\n  const nextKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\r\n\r\n  return {\r\n    handleKeyDown(e) {\r\n      const items = getItems()\r\n      const currentIndex = items.indexOf(document.activeElement)\r\n      if (currentIndex === -1) return\r\n\r\n      let newIndex = currentIndex\r\n      if (e.key === prevKey) {\r\n        newIndex = currentIndex - 1\r\n        if (newIndex < 0) newIndex = wrap ? items.length - 1 : 0\r\n      } else if (e.key === nextKey) {\r\n        newIndex = currentIndex + 1\r\n        if (newIndex >= items.length) newIndex = wrap ? 0 : items.length - 1\r\n      } else if (e.key === 'Home') {\r\n        newIndex = 0\r\n      } else if (e.key === 'End') {\r\n        newIndex = items.length - 1\r\n      } else {\r\n        return\r\n      }\r\n\r\n      e.preventDefault()\r\n      items[newIndex].focus()\r\n      if (autoActivate && onActivate) onActivate(items[newIndex])\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Idempotent custom element registration utility.\r\n * Prevents duplicate registration errors when scripts load multiple times.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/register\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Register a custom element if not already registered.\r\n * Safe to call multiple times with the same name.\r\n *\r\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\r\n * @param {CustomElementConstructor} constructor - The element class\r\n */\r\nexport function register(name, constructor) {\r\n  if (!customElements.get(name)) {\r\n    customElements.define(name, constructor)\r\n  }\r\n}\r\n","/**\r\n * ytz-select - Dropdown select with trigger button and listbox.\r\n * @module @grimoire/yetzirah-core/select\r\n */\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet selectId = 0\r\n\r\nclass YtzSelect extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'disabled', 'placeholder']\r\n  #trigger = null\r\n  #listbox = null\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n  #customTrigger = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    if (this.hasAttribute('open')) this.#show()\r\n    if (this.disabled) this.#updateDisabledState()\r\n  }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') newVal !== null ? this.#show() : this.#hide()\r\n    if (name === 'multiple') this.#listbox?.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n  get placeholder() { return this.getAttribute('placeholder') || 'Select...' }\r\n  set placeholder(v) { this.setAttribute('placeholder', v) }\r\n\r\n  get value() { return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '') }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n    this.#updateTriggerText()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-select-${++selectId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    this.#customTrigger = !!this.#trigger\r\n    if (!this.#trigger) {\r\n      this.#trigger = document.createElement('button')\r\n      this.#trigger.setAttribute('slot', 'trigger')\r\n      this.#trigger.className = this.getAttribute('trigger-class') || ''\r\n      this.prepend(this.#trigger)\r\n    }\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.id = `${this.#id}-listbox`\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    this.querySelectorAll('ytz-option').forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n    this.#trigger.setAttribute('aria-haspopup', 'listbox')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#listbox.id)\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (val) this.#selected.add(val)\r\n    })\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger.addEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox.addEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger?.removeEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox?.removeEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => { if (this.disabled) return; e.stopPropagation(); this.open = !this.open }\r\n  #handleTriggerKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    if (['ArrowDown', 'ArrowUp', 'Enter', ' '].includes(e.key)) { e.preventDefault(); this.open = true }\r\n  }\r\n\r\n  #handleListboxKeyDown = (e) => {\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#listbox.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) { e.preventDefault(); this.#selectOption(focused) }\r\n    }\r\n    if (e.key === 'Tab') { e.preventDefault(); this.open = false; this.#trigger?.focus() }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #handleOutsideClick = (e) => { if (!this.contains(e.target)) this.open = false }\r\n  #handleEscape = (e) => { if (e.key === 'Escape' && this.open) { e.preventDefault(); this.open = false; this.#trigger?.focus() } }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n    }\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(val)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateTriggerText() {\r\n    if (!this.#trigger || this.#customTrigger) return\r\n    const selected = this.selectedOptions\r\n    if (selected.length === 0) this.#trigger.textContent = this.placeholder\r\n    else if (this.multiple) this.#trigger.textContent = selected.map(o => o.textContent?.trim()).join(', ')\r\n    else this.#trigger.textContent = selected[0]?.textContent?.trim() || this.placeholder\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) { this.#trigger?.setAttribute('disabled', ''); this.#trigger?.setAttribute('aria-disabled', 'true') }\r\n    else { this.#trigger?.removeAttribute('disabled'); this.#trigger?.removeAttribute('aria-disabled') }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#listbox || this.disabled) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n    this.#listbox.hidden = false\r\n    this.#updatePosition()\r\n    setTimeout(() => document.addEventListener('click', this.#handleOutsideClick), 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n    requestAnimationFrame(() => {\r\n      const selected = this.#listbox.querySelector('ytz-option[selected]:not([disabled])')\r\n      const first = this.#listbox.querySelector('ytz-option:not([disabled])')\r\n      ;(selected || first)?.focus()\r\n    })\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#listbox) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n    this.#listbox.hidden = true\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#listbox) return\r\n    const { x, y, placement } = position(this.#trigger, this.#listbox, { placement: 'bottom', offset: 4 })\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#trigger.offsetWidth}px`\r\n    this.#listbox.dataset.placement = placement\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n}\r\n\r\nregister('ytz-select', YtzSelect)\r\nexport { YtzSelect }\r\n"]}