{"version":3,"sources":["../src/utils/position.js","../src/utils/key-nav.js","../src/select.js"],"names":["position","anchor","floating","options","placement","offset","anchorRect","floatingRect","viewport","x","y","finalPlacement","createKeyNav","getItems","orientation","wrap","autoActivate","onActivate","prevKey","nextKey","e","items","currentIndex","newIndex","selectId","YtzSelect","#trigger","#listbox","#keyNav","#selected","#id","#customTrigger","#setup","#show","#updateDisabledState","#cleanup","name","oldVal","newVal","#hide","v","val","#updateSelectedState","#updateTriggerText","opt","#handleTriggerClick","#handleTriggerKeyDown","#handleListboxKeyDown","#handleOptionClick","#handleOutsideClick","#handleEscape","focused","#selectOption","option","value","isSelected","selected","o","#updatePosition","first"],"mappings":"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","file":"select.js","sourcesContent":["/**\r\n * Position utility for tooltips, menus, popovers.\r\n * Places an element relative to an anchor with flip/shift logic.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/position\r\n * @internal Not exported from package\r\n *\r\n * Limitations (by design):\r\n * - Does not handle nested scroll containers\r\n * - Does not support virtual elements\r\n * - No middleware system\r\n */\r\n\r\n/**\r\n * Position a floating element relative to an anchor.\r\n *\r\n * @param {HTMLElement} anchor - Element to position relative to\r\n * @param {HTMLElement} floating - Element to position\r\n * @param {Object} [options] - Positioning options\r\n * @param {'top'|'bottom'|'left'|'right'} [options.placement='top'] - Preferred placement\r\n * @param {number} [options.offset=8] - Gap between anchor and floating element\r\n * @returns {{ x: number, y: number, placement: string }}\r\n */\r\nexport function position(anchor, floating, options = {}) {\r\n  const { placement = 'top', offset = 8 } = options\r\n\r\n  const anchorRect = anchor.getBoundingClientRect()\r\n  const floatingRect = floating.getBoundingClientRect()\r\n  const viewport = { width: window.innerWidth, height: window.innerHeight }\r\n\r\n  let x, y\r\n  let finalPlacement = placement\r\n\r\n  // Calculate position based on placement\r\n  switch (placement) {\r\n    case 'top':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.top - floatingRect.height - offset\r\n      break\r\n    case 'bottom':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.bottom + offset\r\n      break\r\n    case 'left':\r\n      x = anchorRect.left - floatingRect.width - offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n    case 'right':\r\n      x = anchorRect.right + offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n  }\r\n\r\n  // Flip if outside viewport\r\n  if (placement === 'top' && y < 0) {\r\n    y = anchorRect.bottom + offset\r\n    finalPlacement = 'bottom'\r\n  } else if (placement === 'bottom' && y + floatingRect.height > viewport.height) {\r\n    y = anchorRect.top - floatingRect.height - offset\r\n    finalPlacement = 'top'\r\n  } else if (placement === 'left' && x < 0) {\r\n    x = anchorRect.right + offset\r\n    finalPlacement = 'right'\r\n  } else if (placement === 'right' && x + floatingRect.width > viewport.width) {\r\n    x = anchorRect.left - floatingRect.width - offset\r\n    finalPlacement = 'left'\r\n  }\r\n\r\n  // Shift to stay in viewport\r\n  if (finalPlacement === 'top' || finalPlacement === 'bottom') {\r\n    x = Math.max(0, Math.min(x, viewport.width - floatingRect.width))\r\n  } else {\r\n    y = Math.max(0, Math.min(y, viewport.height - floatingRect.height))\r\n  }\r\n\r\n  return { x, y, placement: finalPlacement }\r\n}\r\n","/**\r\n * Keyboard navigation utility for arrow key navigation.\r\n * @module @grimoire/yetzirah-core/utils/key-nav\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates keyboard navigation for a set of elements.\r\n * @param {() => HTMLElement[]} getItems - Function returning navigable elements\r\n * @param {Object} options\r\n * @param {'horizontal'|'vertical'} [options.orientation='horizontal']\r\n * @param {boolean} [options.wrap=true]\r\n * @param {boolean} [options.autoActivate=true]\r\n * @param {(item: HTMLElement) => void} [options.onActivate]\r\n * @returns {{ handleKeyDown: (e: KeyboardEvent) => void }}\r\n */\r\nexport function createKeyNav(getItems, options = {}) {\r\n  const { orientation = 'horizontal', wrap = true, autoActivate = true, onActivate } = options\r\n  const prevKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\r\n  const nextKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\r\n\r\n  return {\r\n    handleKeyDown(e) {\r\n      const items = getItems()\r\n      const currentIndex = items.indexOf(document.activeElement)\r\n      if (currentIndex === -1) return\r\n\r\n      let newIndex = currentIndex\r\n      if (e.key === prevKey) {\r\n        newIndex = currentIndex - 1\r\n        if (newIndex < 0) newIndex = wrap ? items.length - 1 : 0\r\n      } else if (e.key === nextKey) {\r\n        newIndex = currentIndex + 1\r\n        if (newIndex >= items.length) newIndex = wrap ? 0 : items.length - 1\r\n      } else if (e.key === 'Home') {\r\n        newIndex = 0\r\n      } else if (e.key === 'End') {\r\n        newIndex = items.length - 1\r\n      } else {\r\n        return\r\n      }\r\n\r\n      e.preventDefault()\r\n      items[newIndex].focus()\r\n      if (autoActivate && onActivate) onActivate(items[newIndex])\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-select - Dropdown select with trigger button and listbox.\r\n * @module @grimoire/yetzirah-core/select\r\n */\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\n\r\nlet selectId = 0\r\n\r\nclass YtzSelect extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'disabled', 'placeholder']\r\n  #trigger = null\r\n  #listbox = null\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n  #customTrigger = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    if (this.hasAttribute('open')) this.#show()\r\n    if (this.disabled) this.#updateDisabledState()\r\n  }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') newVal !== null ? this.#show() : this.#hide()\r\n    if (name === 'multiple') this.#listbox?.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n  get placeholder() { return this.getAttribute('placeholder') || 'Select...' }\r\n  set placeholder(v) { this.setAttribute('placeholder', v) }\r\n\r\n  get value() { return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '') }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n    this.#updateTriggerText()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-select-${++selectId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    this.#customTrigger = !!this.#trigger\r\n    if (!this.#trigger) {\r\n      this.#trigger = document.createElement('button')\r\n      this.#trigger.setAttribute('slot', 'trigger')\r\n      this.#trigger.className = this.getAttribute('trigger-class') || ''\r\n      this.prepend(this.#trigger)\r\n    }\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.id = `${this.#id}-listbox`\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    this.querySelectorAll('ytz-option').forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n    this.#trigger.setAttribute('aria-haspopup', 'listbox')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#listbox.id)\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (val) this.#selected.add(val)\r\n    })\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger.addEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox.addEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger?.removeEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox?.removeEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => { if (this.disabled) return; e.stopPropagation(); this.open = !this.open }\r\n  #handleTriggerKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    if (['ArrowDown', 'ArrowUp', 'Enter', ' '].includes(e.key)) { e.preventDefault(); this.open = true }\r\n  }\r\n\r\n  #handleListboxKeyDown = (e) => {\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#listbox.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) { e.preventDefault(); this.#selectOption(focused) }\r\n    }\r\n    if (e.key === 'Tab') { e.preventDefault(); this.open = false; this.#trigger?.focus() }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #handleOutsideClick = (e) => { if (!this.contains(e.target)) this.open = false }\r\n  #handleEscape = (e) => { if (e.key === 'Escape' && this.open) { e.preventDefault(); this.open = false; this.#trigger?.focus() } }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n    }\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(val)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateTriggerText() {\r\n    if (!this.#trigger || this.#customTrigger) return\r\n    const selected = this.selectedOptions\r\n    if (selected.length === 0) this.#trigger.textContent = this.placeholder\r\n    else if (this.multiple) this.#trigger.textContent = selected.map(o => o.textContent?.trim()).join(', ')\r\n    else this.#trigger.textContent = selected[0]?.textContent?.trim() || this.placeholder\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) { this.#trigger?.setAttribute('disabled', ''); this.#trigger?.setAttribute('aria-disabled', 'true') }\r\n    else { this.#trigger?.removeAttribute('disabled'); this.#trigger?.removeAttribute('aria-disabled') }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#listbox || this.disabled) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n    this.#listbox.hidden = false\r\n    this.#updatePosition()\r\n    setTimeout(() => document.addEventListener('click', this.#handleOutsideClick), 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n    requestAnimationFrame(() => {\r\n      const selected = this.#listbox.querySelector('ytz-option[selected]:not([disabled])')\r\n      const first = this.#listbox.querySelector('ytz-option:not([disabled])')\r\n      ;(selected || first)?.focus()\r\n    })\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#listbox) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n    this.#listbox.hidden = true\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#listbox) return\r\n    const { x, y, placement } = position(this.#trigger, this.#listbox, { placement: 'bottom', offset: 4 })\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#trigger.offsetWidth}px`\r\n    this.#listbox.dataset.placement = placement\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n}\r\n\r\ncustomElements.define('ytz-select', YtzSelect)\r\nexport { YtzSelect }\r\n"]}