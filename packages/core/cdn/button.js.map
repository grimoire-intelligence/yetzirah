{"version":3,"sources":["../src/utils/register.js","../src/button.js"],"names":["register","name","constructor","ANCHOR_DEFAULTS","BUTTON_DEFAULTS","YtzButton","#render","href","userClass","isAnchor","el","defaults","attr","#contentCache"],"mappings":"AAeO,SAASA,CAAAA,CAASC,CAAAA,CAAMC,CAAAA,CAAa,CACrC,eAAe,GAAA,CAAID,CAAI,CAAA,EAC1B,cAAA,CAAe,MAAA,CAAOA,CAAAA,CAAMC,CAAW,EAE3C,CCFA,IAAMC,CAAAA,CAAkB,uCAAA,CAGlBC,CAAAA,CAAkB,qCAAA,CAMlBC,CAAAA,CAAN,cAAwB,WAAY,CAClC,iBAAA,EAAoB,CAClB,IAAA,CAAKC,EAAAA,GACP,CAEA,WAAW,kBAAA,EAAqB,CAC9B,OAAO,CAAC,MAAA,CAAQ,UAAA,CAAY,MAAA,CAAQ,OAAO,CAC7C,CAEA,0BAA2B,CACrB,IAAA,CAAK,WAAA,EAAa,IAAA,CAAKA,EAAAA,GAC7B,CAEAA,EAAAA,EAAU,CACR,IAAMC,CAAAA,CAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAC/BC,CAAAA,CAAY,IAAA,CAAK,aAAa,OAAO,CAAA,EAAK,EAAA,CAC1CC,CAAAA,CAAWF,GAAQ,IAAA,CAEnBG,CAAAA,CAAK,QAAA,CAAS,aAAA,CAAcD,EAAW,GAAA,CAAM,QAAQ,CAAA,CACrDE,CAAAA,CAAWF,CAAAA,CAAWN,CAAAA,CAAkBC,CAAAA,CAC9CM,CAAAA,CAAG,UAAYC,CAAAA,EAAYH,CAAAA,CAAY,GAAA,CAAMA,CAAAA,CAAY,EAAA,CAAA,CAErDC,CAAAA,CACFC,CAAAA,CAAG,IAAA,CAAOH,GAEVG,CAAAA,CAAG,IAAA,CAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,EAAK,QAAA,CACnC,IAAA,CAAK,aAAa,UAAU,CAAA,GAAGA,CAAAA,CAAG,QAAA,CAAW,IAAA,CAAA,CAAA,CAInD,IAAA,IAAWE,CAAAA,IAAQ,IAAA,CAAK,YAClBA,CAAAA,CAAK,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA,EAAKA,CAAAA,CAAK,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA,GAC/DF,CAAAA,CAAG,YAAA,CAAaE,CAAAA,CAAK,IAAA,CAAMA,CAAAA,CAAK,KAAK,CAAA,CAIzCF,EAAG,SAAA,CAAY,IAAA,CAAKG,EAAAA,EAAiB,IAAA,CAAK,SAAA,CAC1C,IAAA,CAAKA,EAAAA,CAAgBH,CAAAA,CAAG,UAExB,IAAA,CAAK,eAAA,CAAgBA,CAAE,EACzB,CAGAG,EAAAA,CAAgB,IAClB,EAEAb,CAAAA,CAAS,aAAcK,CAAS,CAAA","file":"button.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-button - Polymorphic button/anchor Web Component.\n * Renders <a> when href provided, <button> otherwise.\n *\n * @module @grimoire/yetzirah-core/button\n * @example\n * // Link button\n * <ytz-button href=\"/dashboard\" class=\"ph3 pv2 br2 white bg-blue\">Dashboard</ytz-button>\n *\n * @example\n * // Action button\n * <ytz-button onclick=\"handleSubmit()\" class=\"ph3 pv2 br2 white bg-blue\">Submit</ytz-button>\n */\n\nimport { register } from './utils/register.js'\n\n/** @type {string} Default classes for anchor elements */\nconst ANCHOR_DEFAULTS = 'pointer font-inherit no-underline dib'\n\n/** @type {string} Default classes for button elements (no border reset - user controls borders) */\nconst BUTTON_DEFAULTS = 'pointer font-inherit bg-transparent'\n\n/**\n * @class YtzButton\n * @extends HTMLElement\n */\nclass YtzButton extends HTMLElement {\n  connectedCallback() {\n    this.#render()\n  }\n\n  static get observedAttributes() {\n    return ['href', 'disabled', 'type', 'class']\n  }\n\n  attributeChangedCallback() {\n    if (this.isConnected) this.#render()\n  }\n\n  #render() {\n    const href = this.getAttribute('href')\n    const userClass = this.getAttribute('class') || ''\n    const isAnchor = href != null\n\n    const el = document.createElement(isAnchor ? 'a' : 'button')\n    const defaults = isAnchor ? ANCHOR_DEFAULTS : BUTTON_DEFAULTS\n    el.className = defaults + (userClass ? ' ' + userClass : '')\n\n    if (isAnchor) {\n      el.href = href\n    } else {\n      el.type = this.getAttribute('type') || 'button'\n      if (this.hasAttribute('disabled')) el.disabled = true\n    }\n\n    // Copy aria-* and data-* attributes\n    for (const attr of this.attributes) {\n      if (attr.name.startsWith('aria-') || attr.name.startsWith('data-')) {\n        el.setAttribute(attr.name, attr.value)\n      }\n    }\n\n    el.innerHTML = this.#contentCache || this.innerHTML\n    this.#contentCache = el.innerHTML\n\n    this.replaceChildren(el)\n  }\n\n  /** @type {string|null} Cache innerHTML to preserve across re-renders */\n  #contentCache = null\n}\n\nregister('ytz-button', YtzButton)\n\nexport { YtzButton }\n"]}