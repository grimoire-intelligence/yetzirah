{"version":3,"sources":["../src/utils/register.js","../src/button.js"],"names":["register","name","constructor","ANCHOR_DEFAULTS","BUTTON_DEFAULTS","YtzButton","#render","href","userClass","isAnchor","el","defaults","attr","#contentCache"],"mappings":"AAeO,SAASA,CAAAA,CAASC,CAAAA,CAAMC,CAAAA,CAAa,CACrC,eAAe,GAAA,CAAID,CAAI,CAAA,EAC1B,cAAA,CAAe,MAAA,CAAOA,CAAAA,CAAMC,CAAW,EAE3C,CCFA,IAAMC,CAAAA,CAAkB,uCAAA,CAGlBC,CAAAA,CAAkB,qCAAA,CAMlBC,CAAAA,CAAN,cAAwB,WAAY,CAClC,iBAAA,EAAoB,CAClB,IAAA,CAAKC,EAAAA,GACP,CAEA,WAAW,kBAAA,EAAqB,CAC9B,OAAO,CAAC,MAAA,CAAQ,UAAA,CAAY,MAAA,CAAQ,OAAO,CAC7C,CAEA,0BAA2B,CACrB,IAAA,CAAK,WAAA,EAAa,IAAA,CAAKA,EAAAA,GAC7B,CAEAA,EAAAA,EAAU,CACR,IAAMC,CAAAA,CAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAC/BC,CAAAA,CAAY,IAAA,CAAK,aAAa,OAAO,CAAA,EAAK,EAAA,CAC1CC,CAAAA,CAAWF,GAAQ,IAAA,CAEnBG,CAAAA,CAAK,QAAA,CAAS,aAAA,CAAcD,EAAW,GAAA,CAAM,QAAQ,CAAA,CACrDE,CAAAA,CAAWF,CAAAA,CAAWN,CAAAA,CAAkBC,CAAAA,CAC9CM,CAAAA,CAAG,UAAYC,CAAAA,EAAYH,CAAAA,CAAY,GAAA,CAAMA,CAAAA,CAAY,EAAA,CAAA,CAErDC,CAAAA,CACFC,CAAAA,CAAG,IAAA,CAAOH,GAEVG,CAAAA,CAAG,IAAA,CAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,EAAK,QAAA,CACnC,IAAA,CAAK,aAAa,UAAU,CAAA,GAAGA,CAAAA,CAAG,QAAA,CAAW,IAAA,CAAA,CAAA,CAInD,IAAA,IAAWE,CAAAA,IAAQ,IAAA,CAAK,YAClBA,CAAAA,CAAK,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA,EAAKA,CAAAA,CAAK,IAAA,CAAK,UAAA,CAAW,OAAO,CAAA,GAC/DF,CAAAA,CAAG,YAAA,CAAaE,CAAAA,CAAK,IAAA,CAAMA,CAAAA,CAAK,KAAK,CAAA,CAIzCF,EAAG,SAAA,CAAY,IAAA,CAAKG,EAAAA,EAAiB,IAAA,CAAK,SAAA,CAC1C,IAAA,CAAKA,EAAAA,CAAgBH,CAAAA,CAAG,UAExB,IAAA,CAAK,eAAA,CAAgBA,CAAE,EACzB,CAGAG,EAAAA,CAAgB,IAClB,EAEAb,CAAAA,CAAS,aAAcK,CAAS,CAAA","file":"button.js","sourcesContent":["/**\r\n * Idempotent custom element registration utility.\r\n * Prevents duplicate registration errors when scripts load multiple times.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/register\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Register a custom element if not already registered.\r\n * Safe to call multiple times with the same name.\r\n *\r\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\r\n * @param {CustomElementConstructor} constructor - The element class\r\n */\r\nexport function register(name, constructor) {\r\n  if (!customElements.get(name)) {\r\n    customElements.define(name, constructor)\r\n  }\r\n}\r\n","/**\r\n * ytz-button - Polymorphic button/anchor Web Component.\r\n * Renders <a> when href provided, <button> otherwise.\r\n *\r\n * @module @grimoire/yetzirah-core/button\r\n * @example\r\n * // Link button\r\n * <ytz-button href=\"/dashboard\" class=\"ph3 pv2 br2 white bg-blue\">Dashboard</ytz-button>\r\n *\r\n * @example\r\n * // Action button\r\n * <ytz-button onclick=\"handleSubmit()\" class=\"ph3 pv2 br2 white bg-blue\">Submit</ytz-button>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Default classes for anchor elements */\r\nconst ANCHOR_DEFAULTS = 'pointer font-inherit no-underline dib'\r\n\r\n/** @type {string} Default classes for button elements (no border reset - user controls borders) */\r\nconst BUTTON_DEFAULTS = 'pointer font-inherit bg-transparent'\r\n\r\n/**\r\n * @class YtzButton\r\n * @extends HTMLElement\r\n */\r\nclass YtzButton extends HTMLElement {\r\n  connectedCallback() {\r\n    this.#render()\r\n  }\r\n\r\n  static get observedAttributes() {\r\n    return ['href', 'disabled', 'type', 'class']\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.isConnected) this.#render()\r\n  }\r\n\r\n  #render() {\r\n    const href = this.getAttribute('href')\r\n    const userClass = this.getAttribute('class') || ''\r\n    const isAnchor = href != null\r\n\r\n    const el = document.createElement(isAnchor ? 'a' : 'button')\r\n    const defaults = isAnchor ? ANCHOR_DEFAULTS : BUTTON_DEFAULTS\r\n    el.className = defaults + (userClass ? ' ' + userClass : '')\r\n\r\n    if (isAnchor) {\r\n      el.href = href\r\n    } else {\r\n      el.type = this.getAttribute('type') || 'button'\r\n      if (this.hasAttribute('disabled')) el.disabled = true\r\n    }\r\n\r\n    // Copy aria-* and data-* attributes\r\n    for (const attr of this.attributes) {\r\n      if (attr.name.startsWith('aria-') || attr.name.startsWith('data-')) {\r\n        el.setAttribute(attr.name, attr.value)\r\n      }\r\n    }\r\n\r\n    el.innerHTML = this.#contentCache || this.innerHTML\r\n    this.#contentCache = el.innerHTML\r\n\r\n    this.replaceChildren(el)\r\n  }\r\n\r\n  /** @type {string|null} Cache innerHTML to preserve across re-renders */\r\n  #contentCache = null\r\n}\r\n\r\nregister('ytz-button', YtzButton)\r\n\r\nexport { YtzButton }\r\n"]}