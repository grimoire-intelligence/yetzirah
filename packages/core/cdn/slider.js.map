{"version":3,"sources":["../src/slider.js"],"names":["YtzSlider","#track","#thumb","#dragging","#setup","#updateDisplay","#handleKeydown","#handleMouseDown","#handleMouseMove","#handleMouseUp","#handleTouchStart","#handleTouchMove","#handleTouchEnd","name","oldVal","newVal","#handleTrackClick","e","step","bigStep","newValue","#dispatchChange","#updateValueFromPointer","touch","clientX","rect","percent","range","val","num"],"mappings":"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","file":"slider.js","sourcesContent":["/**\r\n * ytz-slider - Slider/Range Web Component.\r\n * An accessible slider with keyboard control and optional range support.\r\n *\r\n * @module @grimoire/yetzirah-core/slider\r\n * @example\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\"></ytz-slider>\r\n *\r\n * @example\r\n * // With step\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" step=\"10\"></ytz-slider>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" disabled></ytz-slider>\r\n */\r\n\r\n/**\r\n * @class YtzSlider\r\n * @extends HTMLElement\r\n */\r\nclass YtzSlider extends HTMLElement {\r\n  static observedAttributes = ['min', 'max', 'value', 'step', 'disabled']\r\n\r\n  /** @type {HTMLDivElement|null} */\r\n  #track = null\r\n  /** @type {HTMLDivElement|null} */\r\n  #thumb = null\r\n  /** @type {boolean} */\r\n  #dragging = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateDisplay()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb?.removeEventListener('mousedown', this.#handleMouseDown)\r\n    document.removeEventListener('mousemove', this.#handleMouseMove)\r\n    document.removeEventListener('mouseup', this.#handleMouseUp)\r\n    this.#thumb?.removeEventListener('touchstart', this.#handleTouchStart)\r\n    document.removeEventListener('touchmove', this.#handleTouchMove)\r\n    document.removeEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected && oldVal !== newVal) {\r\n      this.#updateDisplay()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Set up ARIA\r\n    this.setAttribute('role', 'slider')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Create track and thumb if not present\r\n    if (!this.#track) {\r\n      this.#track = document.createElement('div')\r\n      this.#track.className = 'ytz-slider-track'\r\n      this.appendChild(this.#track)\r\n    }\r\n\r\n    if (!this.#thumb) {\r\n      this.#thumb = document.createElement('div')\r\n      this.#thumb.className = 'ytz-slider-thumb'\r\n      this.appendChild(this.#thumb)\r\n    }\r\n\r\n    // Event listeners\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb.addEventListener('mousedown', this.#handleMouseDown)\r\n    this.#thumb.addEventListener('touchstart', this.#handleTouchStart, { passive: false })\r\n    this.addEventListener('click', this.#handleTrackClick)\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    const step = this.step\r\n    const bigStep = step * 10\r\n    let newValue = this.value\r\n\r\n    switch (e.key) {\r\n      case 'ArrowRight':\r\n      case 'ArrowUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + step)\r\n        break\r\n      case 'ArrowLeft':\r\n      case 'ArrowDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - step)\r\n        break\r\n      case 'PageUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + bigStep)\r\n        break\r\n      case 'PageDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - bigStep)\r\n        break\r\n      case 'Home':\r\n        e.preventDefault()\r\n        newValue = this.min\r\n        break\r\n      case 'End':\r\n        e.preventDefault()\r\n        newValue = this.max\r\n        break\r\n      default:\r\n        return\r\n    }\r\n\r\n    if (newValue !== this.value) {\r\n      this.value = newValue\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleMouseDown = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('mousemove', this.#handleMouseMove)\r\n    document.addEventListener('mouseup', this.#handleMouseUp)\r\n  }\r\n\r\n  #handleMouseMove = (e) => {\r\n    if (!this.#dragging) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n  }\r\n\r\n  #handleMouseUp = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('mousemove', this.#handleMouseMove)\r\n      document.removeEventListener('mouseup', this.#handleMouseUp)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTouchStart = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('touchmove', this.#handleTouchMove, { passive: false })\r\n    document.addEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  #handleTouchMove = (e) => {\r\n    if (!this.#dragging) return\r\n    e.preventDefault()\r\n    const touch = e.touches[0]\r\n    this.#updateValueFromPointer(touch.clientX)\r\n  }\r\n\r\n  #handleTouchEnd = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('touchmove', this.#handleTouchMove)\r\n      document.removeEventListener('touchend', this.#handleTouchEnd)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTrackClick = (e) => {\r\n    if (this.disabled) return\r\n    if (e.target === this.#thumb) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n    this.#dispatchChange()\r\n  }\r\n\r\n  #updateValueFromPointer(clientX) {\r\n    const rect = this.getBoundingClientRect()\r\n    const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width))\r\n    const range = this.max - this.min\r\n    let newValue = this.min + percent * range\r\n\r\n    // Snap to step\r\n    const step = this.step\r\n    newValue = Math.round(newValue / step) * step\r\n    newValue = Math.max(this.min, Math.min(this.max, newValue))\r\n\r\n    this.value = newValue\r\n  }\r\n\r\n  #updateDisplay() {\r\n    const percent = ((this.value - this.min) / (this.max - this.min)) * 100\r\n\r\n    // Update ARIA attributes\r\n    this.setAttribute('aria-valuemin', String(this.min))\r\n    this.setAttribute('aria-valuemax', String(this.max))\r\n    this.setAttribute('aria-valuenow', String(this.value))\r\n    this.setAttribute('aria-disabled', String(this.disabled))\r\n\r\n    // Position thumb\r\n    if (this.#thumb) {\r\n      this.#thumb.style.left = `${percent}%`\r\n    }\r\n\r\n    // Update track fill (via CSS custom property)\r\n    this.style.setProperty('--slider-percent', `${percent}%`)\r\n  }\r\n\r\n  #dispatchChange() {\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { value: this.value }\r\n    }))\r\n  }\r\n\r\n  // Property getters/setters\r\n  get min() {\r\n    return parseFloat(this.getAttribute('min')) || 0\r\n  }\r\n\r\n  set min(val) {\r\n    this.setAttribute('min', String(val))\r\n  }\r\n\r\n  get max() {\r\n    return parseFloat(this.getAttribute('max')) || 100\r\n  }\r\n\r\n  set max(val) {\r\n    this.setAttribute('max', String(val))\r\n  }\r\n\r\n  get value() {\r\n    const val = parseFloat(this.getAttribute('value'))\r\n    if (isNaN(val)) return this.min\r\n    return Math.max(this.min, Math.min(this.max, val))\r\n  }\r\n\r\n  set value(val) {\r\n    const num = Math.max(this.min, Math.min(this.max, parseFloat(val) || 0))\r\n    this.setAttribute('value', String(num))\r\n  }\r\n\r\n  get step() {\r\n    return parseFloat(this.getAttribute('step')) || 1\r\n  }\r\n\r\n  set step(val) {\r\n    this.setAttribute('step', String(val))\r\n  }\r\n\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(val) {\r\n    if (val) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\ncustomElements.define('ytz-slider', YtzSlider)\r\n\r\nexport { YtzSlider }\r\n"]}