{"version":3,"sources":["../src/utils/register.js","../src/slider.js"],"names":["register","name","constructor","YtzSlider","#track","#thumb","#dragging","#setup","#updateDisplay","#handleKeydown","#handleMouseDown","#handleMouseMove","#handleMouseUp","#handleTouchStart","#handleTouchMove","#handleTouchEnd","oldVal","newVal","#handleTrackClick","e","step","bigStep","newValue","#dispatchChange","#updateValueFromPointer","touch","clientX","rect","percent","range","val","num"],"mappings":"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","file":"slider.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-slider - Slider/Range Web Component.\n * An accessible slider with keyboard control and optional range support.\n *\n * @module @grimoire/yetzirah-core/slider\n * @example\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\"></ytz-slider>\n *\n * @example\n * // With step\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" step=\"10\"></ytz-slider>\n *\n * @example\n * // Disabled\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" disabled></ytz-slider>\n */\n\nimport { register } from './utils/register.js'\n\n/**\n * @class YtzSlider\n * @extends HTMLElement\n */\nclass YtzSlider extends HTMLElement {\n  static observedAttributes = ['min', 'max', 'value', 'step', 'disabled']\n\n  /** @type {HTMLDivElement|null} */\n  #track = null\n  /** @type {HTMLDivElement|null} */\n  #thumb = null\n  /** @type {boolean} */\n  #dragging = false\n\n  connectedCallback() {\n    this.#setup()\n    this.#updateDisplay()\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('keydown', this.#handleKeydown)\n    this.#thumb?.removeEventListener('mousedown', this.#handleMouseDown)\n    document.removeEventListener('mousemove', this.#handleMouseMove)\n    document.removeEventListener('mouseup', this.#handleMouseUp)\n    this.#thumb?.removeEventListener('touchstart', this.#handleTouchStart)\n    document.removeEventListener('touchmove', this.#handleTouchMove)\n    document.removeEventListener('touchend', this.#handleTouchEnd)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected && oldVal !== newVal) {\n      this.#updateDisplay()\n    }\n  }\n\n  #setup() {\n    // Set up ARIA\n    this.setAttribute('role', 'slider')\n    if (!this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', '0')\n    }\n\n    // Create track and thumb if not present\n    if (!this.#track) {\n      this.#track = document.createElement('div')\n      this.#track.className = 'ytz-slider-track'\n      this.appendChild(this.#track)\n    }\n\n    if (!this.#thumb) {\n      this.#thumb = document.createElement('div')\n      this.#thumb.className = 'ytz-slider-thumb'\n      this.appendChild(this.#thumb)\n    }\n\n    // Event listeners\n    this.addEventListener('keydown', this.#handleKeydown)\n    this.#thumb.addEventListener('mousedown', this.#handleMouseDown)\n    this.#thumb.addEventListener('touchstart', this.#handleTouchStart, { passive: false })\n    this.addEventListener('click', this.#handleTrackClick)\n  }\n\n  #handleKeydown = (e) => {\n    if (this.disabled) return\n\n    const step = this.step\n    const bigStep = step * 10\n    let newValue = this.value\n\n    switch (e.key) {\n      case 'ArrowRight':\n      case 'ArrowUp':\n        e.preventDefault()\n        newValue = Math.min(this.max, this.value + step)\n        break\n      case 'ArrowLeft':\n      case 'ArrowDown':\n        e.preventDefault()\n        newValue = Math.max(this.min, this.value - step)\n        break\n      case 'PageUp':\n        e.preventDefault()\n        newValue = Math.min(this.max, this.value + bigStep)\n        break\n      case 'PageDown':\n        e.preventDefault()\n        newValue = Math.max(this.min, this.value - bigStep)\n        break\n      case 'Home':\n        e.preventDefault()\n        newValue = this.min\n        break\n      case 'End':\n        e.preventDefault()\n        newValue = this.max\n        break\n      default:\n        return\n    }\n\n    if (newValue !== this.value) {\n      this.value = newValue\n      this.#dispatchChange()\n    }\n  }\n\n  #handleMouseDown = (e) => {\n    if (this.disabled) return\n    e.preventDefault()\n    this.#dragging = true\n    document.addEventListener('mousemove', this.#handleMouseMove)\n    document.addEventListener('mouseup', this.#handleMouseUp)\n  }\n\n  #handleMouseMove = (e) => {\n    if (!this.#dragging) return\n    this.#updateValueFromPointer(e.clientX)\n  }\n\n  #handleMouseUp = () => {\n    if (this.#dragging) {\n      this.#dragging = false\n      document.removeEventListener('mousemove', this.#handleMouseMove)\n      document.removeEventListener('mouseup', this.#handleMouseUp)\n      this.#dispatchChange()\n    }\n  }\n\n  #handleTouchStart = (e) => {\n    if (this.disabled) return\n    e.preventDefault()\n    this.#dragging = true\n    document.addEventListener('touchmove', this.#handleTouchMove, { passive: false })\n    document.addEventListener('touchend', this.#handleTouchEnd)\n  }\n\n  #handleTouchMove = (e) => {\n    if (!this.#dragging) return\n    e.preventDefault()\n    const touch = e.touches[0]\n    this.#updateValueFromPointer(touch.clientX)\n  }\n\n  #handleTouchEnd = () => {\n    if (this.#dragging) {\n      this.#dragging = false\n      document.removeEventListener('touchmove', this.#handleTouchMove)\n      document.removeEventListener('touchend', this.#handleTouchEnd)\n      this.#dispatchChange()\n    }\n  }\n\n  #handleTrackClick = (e) => {\n    if (this.disabled) return\n    if (e.target === this.#thumb) return\n    this.#updateValueFromPointer(e.clientX)\n    this.#dispatchChange()\n  }\n\n  #updateValueFromPointer(clientX) {\n    const rect = this.getBoundingClientRect()\n    const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width))\n    const range = this.max - this.min\n    let newValue = this.min + percent * range\n\n    // Snap to step\n    const step = this.step\n    newValue = Math.round(newValue / step) * step\n    newValue = Math.max(this.min, Math.min(this.max, newValue))\n\n    this.value = newValue\n  }\n\n  #updateDisplay() {\n    const percent = ((this.value - this.min) / (this.max - this.min)) * 100\n\n    // Update ARIA attributes\n    this.setAttribute('aria-valuemin', String(this.min))\n    this.setAttribute('aria-valuemax', String(this.max))\n    this.setAttribute('aria-valuenow', String(this.value))\n    this.setAttribute('aria-disabled', String(this.disabled))\n\n    // Position thumb\n    if (this.#thumb) {\n      this.#thumb.style.left = `${percent}%`\n    }\n\n    // Update track fill (via CSS custom property)\n    this.style.setProperty('--slider-percent', `${percent}%`)\n  }\n\n  #dispatchChange() {\n    this.dispatchEvent(new CustomEvent('change', {\n      bubbles: true,\n      detail: { value: this.value }\n    }))\n  }\n\n  // Property getters/setters\n  get min() {\n    return parseFloat(this.getAttribute('min')) || 0\n  }\n\n  set min(val) {\n    this.setAttribute('min', String(val))\n  }\n\n  get max() {\n    return parseFloat(this.getAttribute('max')) || 100\n  }\n\n  set max(val) {\n    this.setAttribute('max', String(val))\n  }\n\n  get value() {\n    const val = parseFloat(this.getAttribute('value'))\n    if (isNaN(val)) return this.min\n    return Math.max(this.min, Math.min(this.max, val))\n  }\n\n  set value(val) {\n    const num = Math.max(this.min, Math.min(this.max, parseFloat(val) || 0))\n    this.setAttribute('value', String(num))\n  }\n\n  get step() {\n    return parseFloat(this.getAttribute('step')) || 1\n  }\n\n  set step(val) {\n    this.setAttribute('step', String(val))\n  }\n\n  get disabled() {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled(val) {\n    if (val) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n  }\n}\n\nregister('ytz-slider', YtzSlider)\n\nexport { YtzSlider }\n"]}