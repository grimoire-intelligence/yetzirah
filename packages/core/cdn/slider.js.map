{"version":3,"sources":["../src/utils/register.js","../src/slider.js"],"names":["register","name","constructor","YtzSlider","#track","#thumb","#dragging","#setup","#updateDisplay","#handleKeydown","#handleMouseDown","#handleMouseMove","#handleMouseUp","#handleTouchStart","#handleTouchMove","#handleTouchEnd","oldVal","newVal","#handleTrackClick","e","step","bigStep","newValue","#dispatchChange","#updateValueFromPointer","touch","clientX","rect","percent","range","val","num"],"mappings":"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","file":"slider.js","sourcesContent":["/**\r\n * Idempotent custom element registration utility.\r\n * Prevents duplicate registration errors when scripts load multiple times.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/register\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Register a custom element if not already registered.\r\n * Safe to call multiple times with the same name.\r\n *\r\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\r\n * @param {CustomElementConstructor} constructor - The element class\r\n */\r\nexport function register(name, constructor) {\r\n  if (!customElements.get(name)) {\r\n    customElements.define(name, constructor)\r\n  }\r\n}\r\n","/**\r\n * ytz-slider - Slider/Range Web Component.\r\n * An accessible slider with keyboard control and optional range support.\r\n *\r\n * @module @grimoire/yetzirah-core/slider\r\n * @example\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\"></ytz-slider>\r\n *\r\n * @example\r\n * // With step\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" step=\"10\"></ytz-slider>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" disabled></ytz-slider>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzSlider\r\n * @extends HTMLElement\r\n */\r\nclass YtzSlider extends HTMLElement {\r\n  static observedAttributes = ['min', 'max', 'value', 'step', 'disabled']\r\n\r\n  /** @type {HTMLDivElement|null} */\r\n  #track = null\r\n  /** @type {HTMLDivElement|null} */\r\n  #thumb = null\r\n  /** @type {boolean} */\r\n  #dragging = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateDisplay()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb?.removeEventListener('mousedown', this.#handleMouseDown)\r\n    document.removeEventListener('mousemove', this.#handleMouseMove)\r\n    document.removeEventListener('mouseup', this.#handleMouseUp)\r\n    this.#thumb?.removeEventListener('touchstart', this.#handleTouchStart)\r\n    document.removeEventListener('touchmove', this.#handleTouchMove)\r\n    document.removeEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected && oldVal !== newVal) {\r\n      this.#updateDisplay()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Set up ARIA\r\n    this.setAttribute('role', 'slider')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Create track and thumb if not present\r\n    if (!this.#track) {\r\n      this.#track = document.createElement('div')\r\n      this.#track.className = 'ytz-slider-track'\r\n      this.appendChild(this.#track)\r\n    }\r\n\r\n    if (!this.#thumb) {\r\n      this.#thumb = document.createElement('div')\r\n      this.#thumb.className = 'ytz-slider-thumb'\r\n      this.appendChild(this.#thumb)\r\n    }\r\n\r\n    // Event listeners\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb.addEventListener('mousedown', this.#handleMouseDown)\r\n    this.#thumb.addEventListener('touchstart', this.#handleTouchStart, { passive: false })\r\n    this.addEventListener('click', this.#handleTrackClick)\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    const step = this.step\r\n    const bigStep = step * 10\r\n    let newValue = this.value\r\n\r\n    switch (e.key) {\r\n      case 'ArrowRight':\r\n      case 'ArrowUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + step)\r\n        break\r\n      case 'ArrowLeft':\r\n      case 'ArrowDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - step)\r\n        break\r\n      case 'PageUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + bigStep)\r\n        break\r\n      case 'PageDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - bigStep)\r\n        break\r\n      case 'Home':\r\n        e.preventDefault()\r\n        newValue = this.min\r\n        break\r\n      case 'End':\r\n        e.preventDefault()\r\n        newValue = this.max\r\n        break\r\n      default:\r\n        return\r\n    }\r\n\r\n    if (newValue !== this.value) {\r\n      this.value = newValue\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleMouseDown = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('mousemove', this.#handleMouseMove)\r\n    document.addEventListener('mouseup', this.#handleMouseUp)\r\n  }\r\n\r\n  #handleMouseMove = (e) => {\r\n    if (!this.#dragging) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n  }\r\n\r\n  #handleMouseUp = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('mousemove', this.#handleMouseMove)\r\n      document.removeEventListener('mouseup', this.#handleMouseUp)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTouchStart = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('touchmove', this.#handleTouchMove, { passive: false })\r\n    document.addEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  #handleTouchMove = (e) => {\r\n    if (!this.#dragging) return\r\n    e.preventDefault()\r\n    const touch = e.touches[0]\r\n    this.#updateValueFromPointer(touch.clientX)\r\n  }\r\n\r\n  #handleTouchEnd = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('touchmove', this.#handleTouchMove)\r\n      document.removeEventListener('touchend', this.#handleTouchEnd)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTrackClick = (e) => {\r\n    if (this.disabled) return\r\n    if (e.target === this.#thumb) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n    this.#dispatchChange()\r\n  }\r\n\r\n  #updateValueFromPointer(clientX) {\r\n    const rect = this.getBoundingClientRect()\r\n    const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width))\r\n    const range = this.max - this.min\r\n    let newValue = this.min + percent * range\r\n\r\n    // Snap to step\r\n    const step = this.step\r\n    newValue = Math.round(newValue / step) * step\r\n    newValue = Math.max(this.min, Math.min(this.max, newValue))\r\n\r\n    this.value = newValue\r\n  }\r\n\r\n  #updateDisplay() {\r\n    const percent = ((this.value - this.min) / (this.max - this.min)) * 100\r\n\r\n    // Update ARIA attributes\r\n    this.setAttribute('aria-valuemin', String(this.min))\r\n    this.setAttribute('aria-valuemax', String(this.max))\r\n    this.setAttribute('aria-valuenow', String(this.value))\r\n    this.setAttribute('aria-disabled', String(this.disabled))\r\n\r\n    // Position thumb\r\n    if (this.#thumb) {\r\n      this.#thumb.style.left = `${percent}%`\r\n    }\r\n\r\n    // Update track fill (via CSS custom property)\r\n    this.style.setProperty('--slider-percent', `${percent}%`)\r\n  }\r\n\r\n  #dispatchChange() {\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { value: this.value }\r\n    }))\r\n  }\r\n\r\n  // Property getters/setters\r\n  get min() {\r\n    return parseFloat(this.getAttribute('min')) || 0\r\n  }\r\n\r\n  set min(val) {\r\n    this.setAttribute('min', String(val))\r\n  }\r\n\r\n  get max() {\r\n    return parseFloat(this.getAttribute('max')) || 100\r\n  }\r\n\r\n  set max(val) {\r\n    this.setAttribute('max', String(val))\r\n  }\r\n\r\n  get value() {\r\n    const val = parseFloat(this.getAttribute('value'))\r\n    if (isNaN(val)) return this.min\r\n    return Math.max(this.min, Math.min(this.max, val))\r\n  }\r\n\r\n  set value(val) {\r\n    const num = Math.max(this.min, Math.min(this.max, parseFloat(val) || 0))\r\n    this.setAttribute('value', String(num))\r\n  }\r\n\r\n  get step() {\r\n    return parseFloat(this.getAttribute('step')) || 1\r\n  }\r\n\r\n  set step(val) {\r\n    this.setAttribute('step', String(val))\r\n  }\r\n\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(val) {\r\n    if (val) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-slider', YtzSlider)\r\n\r\nexport { YtzSlider }\r\n"]}