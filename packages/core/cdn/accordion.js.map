{"version":3,"sources":["../src/accordion.js"],"names":["accordionItemId","YtzAccordion","#handleItemToggle","value","e","openedItem","item","YtzAccordionItem","#trigger","#content","#contentId","#setup","#updateState","#handleClick","name","oldVal","newVal","isOpen","willOpen"],"mappings":"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","file":"accordion.js","sourcesContent":["/**\r\n * ytz-accordion - Coordinated disclosure container.\r\n * Manages multiple accordion items with optional exclusive mode.\r\n *\r\n * @module @grimoire/yetzirah-core/accordion\r\n * @example\r\n * <ytz-accordion>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 1</button>\r\n *     <div>Content 1</div>\r\n *   </ytz-accordion-item>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 2</button>\r\n *     <div>Content 2</div>\r\n *   </ytz-accordion-item>\r\n * </ytz-accordion>\r\n *\r\n * @example\r\n * // Exclusive mode - only one item open at a time\r\n * <ytz-accordion exclusive>\r\n *   <ytz-accordion-item open>...</ytz-accordion-item>\r\n *   <ytz-accordion-item>...</ytz-accordion-item>\r\n * </ytz-accordion>\r\n */\r\n\r\nlet accordionItemId = 0\r\n\r\n/**\r\n * @class YtzAccordion\r\n * @extends HTMLElement\r\n */\r\nclass YtzAccordion extends HTMLElement {\r\n  connectedCallback() {\r\n    this.addEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  /**\r\n   * Whether exclusive mode is enabled (only one item open at a time).\r\n   * @type {boolean}\r\n   */\r\n  get exclusive() {\r\n    return this.hasAttribute('exclusive')\r\n  }\r\n\r\n  set exclusive(value) {\r\n    if (value) {\r\n      this.setAttribute('exclusive', '')\r\n    } else {\r\n      this.removeAttribute('exclusive')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all accordion items.\r\n   * @returns {YtzAccordionItem[]}\r\n   */\r\n  get items() {\r\n    return Array.from(this.querySelectorAll(':scope > ytz-accordion-item'))\r\n  }\r\n\r\n  /**\r\n   * Handle toggle event from accordion item.\r\n   * In exclusive mode, close other items when one opens.\r\n   * @param {CustomEvent} e\r\n   */\r\n  #handleItemToggle = (e) => {\r\n    if (!this.exclusive || !e.detail.open) return\r\n\r\n    const openedItem = e.target\r\n    this.items.forEach(item => {\r\n      if (item !== openedItem && item.open) {\r\n        item.open = false\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * ytz-accordion-item - Individual accordion panel.\r\n * Functions like ytz-disclosure but coordinates with parent accordion.\r\n *\r\n * @attr open - When present, content is visible\r\n *\r\n * @example\r\n * <ytz-accordion-item>\r\n *   <button>Toggle Section</button>\r\n *   <div>\r\n *     <div>Content goes here...</div>\r\n *   </div>\r\n * </ytz-accordion-item>\r\n */\r\nclass YtzAccordionItem extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-accordion-content-${++accordionItemId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Generate ID for trigger if needed (for aria-labelledby on content)\r\n    this.#trigger.id = this.#trigger.id || `ytz-accordion-trigger-${accordionItemId}`\r\n\r\n    // Set up ARIA attributes\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n    this.#content.setAttribute('aria-labelledby', this.#trigger.id)\r\n    this.#content.setAttribute('role', 'region')\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the accordion item open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\ncustomElements.define('ytz-accordion', YtzAccordion)\r\ncustomElements.define('ytz-accordion-item', YtzAccordionItem)\r\n\r\nexport { YtzAccordion, YtzAccordionItem }\r\n"]}