{"version":3,"sources":["../src/utils/register.js","../src/progress.js"],"names":["register","name","constructor","CIRCLE_SIZE","CIRCLE_RADIUS","CIRCLE_CIRCUMFERENCE","YtzProgress","#circleTrack","#circleProgress","#linearTrack","#linearBar","#render","#updateARIA","oldVal","newVal","#updateProgress","#updateSize","#renderLinear","#renderCircular","svg","value","isIndeterminate","offset","size","label","attr","num","val","clamped"],"mappings":"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","file":"progress.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-progress - Progress indicator Web Component.\n * Supports both indeterminate (spinner) and determinate (progress bar) modes,\n * with circular and linear visual variants.\n *\n * @module @grimoire/yetzirah-core/progress\n * @example\n * // Indeterminate circular spinner (default)\n * <ytz-progress></ytz-progress>\n *\n * @example\n * // Determinate circular progress\n * <ytz-progress value=\"75\"></ytz-progress>\n *\n * @example\n * // Linear progress bar\n * <ytz-progress linear value=\"50\"></ytz-progress>\n *\n * @example\n * // Indeterminate linear (loading bar)\n * <ytz-progress linear></ytz-progress>\n */\n\nimport { register } from './utils/register.js'\n\n/** SVG circle properties for circular spinner */\nconst CIRCLE_SIZE = 44\nconst CIRCLE_RADIUS = 20\nconst CIRCLE_CIRCUMFERENCE = 2 * Math.PI * CIRCLE_RADIUS\n\n/**\n * @class YtzProgress\n * @extends HTMLElement\n */\nclass YtzProgress extends HTMLElement {\n  static observedAttributes = ['value', 'linear', 'size', 'label']\n\n  /** @type {SVGCircleElement|null} */\n  #circleTrack = null\n  /** @type {SVGCircleElement|null} */\n  #circleProgress = null\n  /** @type {HTMLDivElement|null} */\n  #linearTrack = null\n  /** @type {HTMLDivElement|null} */\n  #linearBar = null\n\n  connectedCallback() {\n    this.setAttribute('role', 'progressbar')\n    this.#render()\n    this.#updateARIA()\n  }\n\n  disconnectedCallback() {\n    // Clean up internal references\n    this.#circleTrack = null\n    this.#circleProgress = null\n    this.#linearTrack = null\n    this.#linearBar = null\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n\n    if (name === 'linear') {\n      // Re-render when switching between modes\n      this.#render()\n    } else if (name === 'value') {\n      this.#updateProgress()\n    } else if (name === 'size') {\n      this.#updateSize()\n    }\n\n    // Always update ARIA on attribute changes\n    this.#updateARIA()\n  }\n\n  #render() {\n    // Clear existing content\n    this.innerHTML = ''\n\n    if (this.linear) {\n      this.#renderLinear()\n    } else {\n      this.#renderCircular()\n    }\n\n    this.#updateProgress()\n    this.#updateSize()\n  }\n\n  #renderCircular() {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n    svg.setAttribute('viewBox', `0 0 ${CIRCLE_SIZE} ${CIRCLE_SIZE}`)\n    svg.setAttribute('class', 'ytz-progress-circular')\n    svg.setAttribute('aria-hidden', 'true')\n\n    // Track circle (background)\n    this.#circleTrack = document.createElementNS('http://www.w3.org/2000/svg', 'circle')\n    this.#circleTrack.setAttribute('class', 'ytz-progress-track')\n    this.#circleTrack.setAttribute('cx', String(CIRCLE_SIZE / 2))\n    this.#circleTrack.setAttribute('cy', String(CIRCLE_SIZE / 2))\n    this.#circleTrack.setAttribute('r', String(CIRCLE_RADIUS))\n    this.#circleTrack.setAttribute('fill', 'none')\n    this.#circleTrack.setAttribute('stroke-width', '4')\n\n    // Progress circle\n    this.#circleProgress = document.createElementNS('http://www.w3.org/2000/svg', 'circle')\n    this.#circleProgress.setAttribute('class', 'ytz-progress-indicator')\n    this.#circleProgress.setAttribute('cx', String(CIRCLE_SIZE / 2))\n    this.#circleProgress.setAttribute('cy', String(CIRCLE_SIZE / 2))\n    this.#circleProgress.setAttribute('r', String(CIRCLE_RADIUS))\n    this.#circleProgress.setAttribute('fill', 'none')\n    this.#circleProgress.setAttribute('stroke-width', '4')\n    this.#circleProgress.setAttribute('stroke-linecap', 'round')\n    this.#circleProgress.setAttribute('stroke-dasharray', String(CIRCLE_CIRCUMFERENCE))\n\n    svg.appendChild(this.#circleTrack)\n    svg.appendChild(this.#circleProgress)\n    this.appendChild(svg)\n  }\n\n  #renderLinear() {\n    this.#linearTrack = document.createElement('div')\n    this.#linearTrack.className = 'ytz-progress-track'\n    this.#linearTrack.setAttribute('aria-hidden', 'true')\n\n    this.#linearBar = document.createElement('div')\n    this.#linearBar.className = 'ytz-progress-indicator'\n\n    this.#linearTrack.appendChild(this.#linearBar)\n    this.appendChild(this.#linearTrack)\n  }\n\n  #updateProgress() {\n    const value = this.value\n    const isIndeterminate = value === null\n\n    // Set data attribute for CSS styling\n    if (isIndeterminate) {\n      this.setAttribute('data-indeterminate', '')\n    } else {\n      this.removeAttribute('data-indeterminate')\n    }\n\n    // Update the visual representation\n    if (this.linear) {\n      if (this.#linearBar) {\n        if (isIndeterminate) {\n          this.#linearBar.style.width = ''\n        } else {\n          this.#linearBar.style.width = `${value}%`\n        }\n      }\n    } else {\n      if (this.#circleProgress) {\n        if (isIndeterminate) {\n          // Indeterminate: partial circle that rotates\n          this.#circleProgress.style.strokeDashoffset = String(CIRCLE_CIRCUMFERENCE * 0.75)\n        } else {\n          // Determinate: show progress as arc\n          const offset = CIRCLE_CIRCUMFERENCE * (1 - value / 100)\n          this.#circleProgress.style.strokeDashoffset = String(offset)\n        }\n      }\n    }\n\n    // Update CSS custom property for advanced styling\n    this.style.setProperty('--progress-percent', value !== null ? String(value) : '0')\n  }\n\n  #updateSize() {\n    // Size is handled via CSS using data-size attribute\n    const size = this.getAttribute('size')\n    if (size && ['small', 'medium', 'large'].includes(size)) {\n      this.setAttribute('data-size', size)\n    } else {\n      this.setAttribute('data-size', 'medium')\n    }\n  }\n\n  #updateARIA() {\n    const value = this.value\n    const label = this.getAttribute('label')\n\n    if (value === null) {\n      // Indeterminate: remove value attributes per WAI-ARIA spec\n      this.removeAttribute('aria-valuenow')\n      this.removeAttribute('aria-valuemin')\n      this.removeAttribute('aria-valuemax')\n    } else {\n      // Determinate: set value attributes\n      this.setAttribute('aria-valuenow', String(value))\n      this.setAttribute('aria-valuemin', '0')\n      this.setAttribute('aria-valuemax', '100')\n    }\n\n    // Apply label if provided\n    if (label) {\n      this.setAttribute('aria-label', label)\n    } else {\n      this.removeAttribute('aria-label')\n    }\n  }\n\n  // Property getters/setters\n\n  /**\n   * Get/set the progress value (0-100). Null means indeterminate.\n   * @type {number|null}\n   */\n  get value() {\n    const attr = this.getAttribute('value')\n    if (attr === null) return null\n    const num = parseFloat(attr)\n    if (isNaN(num)) return null\n    // Clamp to 0-100\n    return Math.min(100, Math.max(0, num))\n  }\n\n  set value(val) {\n    if (val === null || val === undefined) {\n      this.removeAttribute('value')\n    } else {\n      const clamped = Math.min(100, Math.max(0, Number(val)))\n      this.setAttribute('value', String(clamped))\n    }\n  }\n\n  /**\n   * Get/set whether this is a linear progress bar.\n   * @type {boolean}\n   */\n  get linear() {\n    return this.hasAttribute('linear')\n  }\n\n  set linear(val) {\n    if (val) {\n      this.setAttribute('linear', '')\n    } else {\n      this.removeAttribute('linear')\n    }\n  }\n\n  /**\n   * Read-only: true if no value is set (indeterminate mode).\n   * @type {boolean}\n   */\n  get indeterminate() {\n    return this.value === null\n  }\n\n  /**\n   * Get/set the size variant.\n   * @type {string}\n   */\n  get size() {\n    return this.getAttribute('size') || 'medium'\n  }\n\n  set size(val) {\n    if (['small', 'medium', 'large'].includes(val)) {\n      this.setAttribute('size', val)\n    }\n  }\n}\n\nregister('ytz-progress', YtzProgress)\n\nexport { YtzProgress }\n"]}