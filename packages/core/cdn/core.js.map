{"version":3,"sources":["../src/utils/register.js","../src/accordion.js","../src/button.js","../src/utils/focus-trap.js","../src/dialog.js","../src/disclosure.js","../src/drawer.js","../src/utils/key-nav.js","../src/tabs.js","../src/utils/position.js","../src/tooltip.js","../src/popover.js","../src/utils/click-outside.js","../src/menu.js","../src/autocomplete.js","../src/listbox.js","../src/select.js","../src/toggle.js","../src/chip.js","../src/icon-button.js","../src/slider.js","../src/utils/virtual-scroll.js","../src/datagrid.js","../src/theme-toggle.js","../src/index.js"],"names":["register","name","constructor","accordionItemId","YtzAccordion","#handleItemToggle","value","e","openedItem","item","YtzAccordionItem","#trigger","#content","#contentId","#setup","#updateState","#handleClick","oldVal","newVal","isOpen","willOpen","ANCHOR_DEFAULTS","BUTTON_DEFAULTS","YtzButton","#render","href","userClass","isAnchor","el","defaults","attr","#contentCache","FOCUSABLE","createFocusTrap","container","handleKeydown","focusable","first","last","YtzDialog","#previousFocus","#focusTrap","#previousOverflow","#handleBackdropClick","#cleanup","#open","#close","#handleEscape","firstFocusable","disclosureId","YtzDisclosure","VALID_ANCHORS","YtzDrawer","createKeyNav","getItems","options","orientation","wrap","autoActivate","onActivate","prevKey","nextKey","items","currentIndex","newIndex","tabId","YtzTabs","#keyNav","#setupKeyNav","firstTab","#updateSelection","tab","panel","#handleKeyDown","isSelected","v","YtzTab","panelId","tabs","YtzTabPanel","#linkToTab","position","anchor","floating","placement","offset","anchorRect","floatingRect","viewport","x","y","finalPlacement","tooltipId","YtzTooltip","#showTimeout","#hideTimeout","#isVisible","#updatePosition","#handleMouseEnter","#handleMouseLeave","#handleContentMouseEnter","#handleFocusIn","#handleFocusOut","#handleTouchStart","#show","#hide","popoverId","YtzPopover","#handleTriggerClick","#handleOutsideClick","clickOutside","element","callback","ignore","handleClick","menuId","YtzMenu","#popup","#menuId","#clickOutsideHandler","#lastCloseTime","#showMenu","#hideMenu","focused","basePlacement","YtzMenuItem","menu","autocompleteId","YtzAutocomplete","#input","#listbox","#listboxId","#selected","#justClosed","#showListbox","#hideListbox","#updateLoadingState","val","#updateSelectedState","opt","#handleInput","#handleInputFocus","#handleInputKeyDown","#handleOptionClick","#filterOptions","firstOption","#selectOption","option","query","text","loadingSlot","label","disabled","YtzOption","listboxId","YtzListbox","#id","#updateDisabledState","#handleFocus","selected","selectId","YtzSelect","#customTrigger","#updateTriggerText","#handleTriggerKeyDown","#handleListboxKeyDown","o","YtzToggle","#handleKeydown","willCheck","YtzChip","#deleteButton","#handleDelete","DEFAULTS","YtzIconButton","#tooltipEl","#checkAccessibility","#removeTooltip","#showTooltip","#hideTooltip","button","isNew","#setupTooltip","rect","YtzSlider","#track","#thumb","#dragging","#updateDisplay","#handleMouseDown","#handleMouseMove","#handleMouseUp","#handleTouchMove","#handleTouchEnd","#handleTrackClick","step","bigStep","newValue","#dispatchChange","#updateValueFromPointer","touch","clientX","percent","range","num","createVirtualScroller","content","itemCount","itemHeight","renderItem","buffer","scrollTop","renderedRange","rafId","totalHeight","calculateVisibleRange","containerHeight","start","visibleCount","end","render","i","handleScroll","scrollToIndex","index","targetTop","currentScrollTop","destroy","refresh","newTotalHeight","YtzDatagridColumn","YtzDatagrid","#data","#filteredData","#columns","#sortState","#filterState","#virtualScroller","#header","#body","#viewport","#focusedRow","#focusedCol","#columnWidths","#resizeState","#handleResizeMove","#handleResizeEnd","#createStructure","columns","col","#renderHeader","#applyFiltersAndSort","#initVirtualScroller","cell","storedWidth","#handleSort","indicator","input","resizeHandle","#handleResizeStart","field","headerCell","startX","startWidth","delta","newWidth","#updateBodyColumnWidths","#extractNumber","cleaned","row","colIndex","result","searchLower","direction","a","b","aVal","bVal","aNum","bNum","cmp","rowHeight","#renderRow","rowData","#updateFocus","maxRow","maxCol","#applyFocusStyling","targetRow","headers","rows","filename","csv","blob","url","link","DEFAULT_STORAGE_KEY","DARK_CLASS","THEME_ATTR","YtzThemeToggle","#toggle","#initializeTheme","#handleChange","savedTheme","#loadTheme","prefersDark","isDark","#applyTheme","#updateToggle","#saveTheme","root","theme","VERSION"],"mappings":"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","file":"core.js","sourcesContent":["/**\r\n * Idempotent custom element registration utility.\r\n * Prevents duplicate registration errors when scripts load multiple times.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/register\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Register a custom element if not already registered.\r\n * Safe to call multiple times with the same name.\r\n *\r\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\r\n * @param {CustomElementConstructor} constructor - The element class\r\n */\r\nexport function register(name, constructor) {\r\n  if (!customElements.get(name)) {\r\n    customElements.define(name, constructor)\r\n  }\r\n}\r\n","/**\r\n * ytz-accordion - Coordinated disclosure container.\r\n * Manages multiple accordion items with optional exclusive mode.\r\n *\r\n * @module @grimoire/yetzirah-core/accordion\r\n * @example\r\n * <ytz-accordion>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 1</button>\r\n *     <div>Content 1</div>\r\n *   </ytz-accordion-item>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 2</button>\r\n *     <div>Content 2</div>\r\n *   </ytz-accordion-item>\r\n * </ytz-accordion>\r\n *\r\n * @example\r\n * // Exclusive mode - only one item open at a time\r\n * <ytz-accordion exclusive>\r\n *   <ytz-accordion-item open>...</ytz-accordion-item>\r\n *   <ytz-accordion-item>...</ytz-accordion-item>\r\n * </ytz-accordion>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\nlet accordionItemId = 0\r\n\r\n/**\r\n * @class YtzAccordion\r\n * @extends HTMLElement\r\n */\r\nclass YtzAccordion extends HTMLElement {\r\n  connectedCallback() {\r\n    this.addEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  /**\r\n   * Whether exclusive mode is enabled (only one item open at a time).\r\n   * @type {boolean}\r\n   */\r\n  get exclusive() {\r\n    return this.hasAttribute('exclusive')\r\n  }\r\n\r\n  set exclusive(value) {\r\n    if (value) {\r\n      this.setAttribute('exclusive', '')\r\n    } else {\r\n      this.removeAttribute('exclusive')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all accordion items.\r\n   * @returns {YtzAccordionItem[]}\r\n   */\r\n  get items() {\r\n    return Array.from(this.querySelectorAll(':scope > ytz-accordion-item'))\r\n  }\r\n\r\n  /**\r\n   * Handle toggle event from accordion item.\r\n   * In exclusive mode, close other items when one opens.\r\n   * @param {CustomEvent} e\r\n   */\r\n  #handleItemToggle = (e) => {\r\n    if (!this.exclusive || !e.detail.open) return\r\n\r\n    const openedItem = e.target\r\n    this.items.forEach(item => {\r\n      if (item !== openedItem && item.open) {\r\n        item.open = false\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * ytz-accordion-item - Individual accordion panel.\r\n * Functions like ytz-disclosure but coordinates with parent accordion.\r\n *\r\n * @attr open - When present, content is visible\r\n *\r\n * @example\r\n * <ytz-accordion-item>\r\n *   <button>Toggle Section</button>\r\n *   <div>\r\n *     <div>Content goes here...</div>\r\n *   </div>\r\n * </ytz-accordion-item>\r\n */\r\nclass YtzAccordionItem extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-accordion-content-${++accordionItemId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Generate ID for trigger if needed (for aria-labelledby on content)\r\n    this.#trigger.id = this.#trigger.id || `ytz-accordion-trigger-${accordionItemId}`\r\n\r\n    // Set up ARIA attributes\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n    this.#content.setAttribute('aria-labelledby', this.#trigger.id)\r\n    this.#content.setAttribute('role', 'region')\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the accordion item open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-accordion', YtzAccordion)\r\nregister('ytz-accordion-item', YtzAccordionItem)\r\n\r\nexport { YtzAccordion, YtzAccordionItem }\r\n","/**\r\n * ytz-button - Polymorphic button/anchor Web Component.\r\n * Renders <a> when href provided, <button> otherwise.\r\n *\r\n * @module @grimoire/yetzirah-core/button\r\n * @example\r\n * // Link button\r\n * <ytz-button href=\"/dashboard\" class=\"ph3 pv2 br2 white bg-blue\">Dashboard</ytz-button>\r\n *\r\n * @example\r\n * // Action button\r\n * <ytz-button onclick=\"handleSubmit()\" class=\"ph3 pv2 br2 white bg-blue\">Submit</ytz-button>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Default classes for anchor elements */\r\nconst ANCHOR_DEFAULTS = 'pointer font-inherit no-underline dib'\r\n\r\n/** @type {string} Default classes for button elements (no border reset - user controls borders) */\r\nconst BUTTON_DEFAULTS = 'pointer font-inherit bg-transparent'\r\n\r\n/**\r\n * @class YtzButton\r\n * @extends HTMLElement\r\n */\r\nclass YtzButton extends HTMLElement {\r\n  connectedCallback() {\r\n    this.#render()\r\n  }\r\n\r\n  static get observedAttributes() {\r\n    return ['href', 'disabled', 'type', 'class']\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.isConnected) this.#render()\r\n  }\r\n\r\n  #render() {\r\n    const href = this.getAttribute('href')\r\n    const userClass = this.getAttribute('class') || ''\r\n    const isAnchor = href != null\r\n\r\n    const el = document.createElement(isAnchor ? 'a' : 'button')\r\n    const defaults = isAnchor ? ANCHOR_DEFAULTS : BUTTON_DEFAULTS\r\n    el.className = defaults + (userClass ? ' ' + userClass : '')\r\n\r\n    if (isAnchor) {\r\n      el.href = href\r\n    } else {\r\n      el.type = this.getAttribute('type') || 'button'\r\n      if (this.hasAttribute('disabled')) el.disabled = true\r\n    }\r\n\r\n    // Copy aria-* and data-* attributes\r\n    for (const attr of this.attributes) {\r\n      if (attr.name.startsWith('aria-') || attr.name.startsWith('data-')) {\r\n        el.setAttribute(attr.name, attr.value)\r\n      }\r\n    }\r\n\r\n    el.innerHTML = this.#contentCache || this.innerHTML\r\n    this.#contentCache = el.innerHTML\r\n\r\n    this.replaceChildren(el)\r\n  }\r\n\r\n  /** @type {string|null} Cache innerHTML to preserve across re-renders */\r\n  #contentCache = null\r\n}\r\n\r\nregister('ytz-button', YtzButton)\r\n\r\nexport { YtzButton }\r\n","/**\r\n * Focus trap utility for modals/dialogs.\r\n * Keeps focus within a container element.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/focus-trap\r\n * @internal Not exported from package\r\n */\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * Creates a focus trap for a container element.\r\n *\r\n * @param {HTMLElement} container - Element to trap focus within\r\n * @returns {{ activate: () => void, deactivate: () => void }}\r\n */\r\nexport function createFocusTrap(container) {\r\n  /** @param {KeyboardEvent} e */\r\n  function handleKeydown(e) {\r\n    if (e.key !== 'Tab') return\r\n\r\n    const focusable = [...container.querySelectorAll(FOCUSABLE)]\r\n      .filter(el => !el.hidden && !el.closest('[hidden]')) // visible only\r\n\r\n    if (focusable.length === 0) return\r\n\r\n    const first = focusable[0]\r\n    const last = focusable[focusable.length - 1]\r\n\r\n    if (e.shiftKey && document.activeElement === first) {\r\n      e.preventDefault()\r\n      last.focus()\r\n    } else if (!e.shiftKey && document.activeElement === last) {\r\n      e.preventDefault()\r\n      first.focus()\r\n    }\r\n  }\r\n\r\n  return {\r\n    activate() {\r\n      container.addEventListener('keydown', handleKeydown)\r\n    },\r\n    deactivate() {\r\n      container.removeEventListener('keydown', handleKeydown)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-dialog - Modal dialog Web Component.\r\n * Provides focus trap, scroll lock, escape-to-close, and backdrop dismiss.\r\n *\r\n * @module @grimoire/yetzirah-core/dialog\r\n * @example\r\n * <ytz-dialog id=\"my-dialog\" class=\"pa4 bg-white br3 shadow-2\">\r\n *   <h2>Dialog Title</h2>\r\n *   <p>Content goes here.</p>\r\n *   <button onclick=\"this.closest('ytz-dialog').removeAttribute('open')\">Close</button>\r\n * </ytz-dialog>\r\n *\r\n * @example\r\n * // Open dialog\r\n * document.getElementById('my-dialog').setAttribute('open', '')\r\n *\r\n * @example\r\n * // Static dialog (no backdrop dismiss)\r\n * <ytz-dialog static>...</ytz-dialog>\r\n */\r\n\r\nimport { createFocusTrap } from './utils/focus-trap.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * @class YtzDialog\r\n * @extends HTMLElement\r\n */\r\nclass YtzDialog extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #previousFocus = null\r\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\r\n  #focusTrap = null\r\n  /** @type {string} */\r\n  #previousOverflow = ''\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'dialog')\r\n    this.setAttribute('aria-modal', 'true')\r\n    this.hidden = !this.hasAttribute('open')\r\n\r\n    // Set up backdrop click handler\r\n    this.addEventListener('click', this.#handleBackdropClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleBackdropClick)\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      newVal !== null ? this.#open() : this.#close()\r\n    }\r\n  }\r\n\r\n  #open() {\r\n    // Save current focus for restoration\r\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\r\n\r\n    // Show dialog\r\n    this.hidden = false\r\n\r\n    // Lock body scroll\r\n    this.#previousOverflow = document.body.style.overflow\r\n    document.body.style.overflow = 'hidden'\r\n\r\n    // Set up focus trap\r\n    this.#focusTrap = createFocusTrap(this)\r\n    this.#focusTrap.activate()\r\n\r\n    // Add escape key listener\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    // Focus first focusable element (or dialog itself)\r\n    requestAnimationFrame(() => {\r\n      const firstFocusable = this.querySelector(FOCUSABLE)\r\n      if (firstFocusable) {\r\n        /** @type {HTMLElement} */ (firstFocusable).focus()\r\n      } else {\r\n        this.setAttribute('tabindex', '-1')\r\n        this.focus()\r\n      }\r\n    })\r\n  }\r\n\r\n  #close() {\r\n    this.hidden = true\r\n    this.#cleanup()\r\n\r\n    // Dispatch close event\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #cleanup() {\r\n    // Restore body scroll\r\n    document.body.style.overflow = this.#previousOverflow\r\n\r\n    // Deactivate focus trap\r\n    this.#focusTrap?.deactivate()\r\n    this.#focusTrap = null\r\n\r\n    // Remove escape listener\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n\r\n    // Restore focus\r\n    this.#previousFocus?.focus()\r\n    this.#previousFocus = null\r\n  }\r\n\r\n  /** @param {KeyboardEvent} e */\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\r\n      e.preventDefault()\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @param {MouseEvent} e */\r\n  #handleBackdropClick = (e) => {\r\n    // Only close if clicking directly on dialog element (backdrop), not children\r\n    if (e.target === this && !this.hasAttribute('static')) {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close the dialog programmatically.\r\n   */\r\n  close() {\r\n    this.removeAttribute('open')\r\n  }\r\n\r\n  /**\r\n   * Show the dialog programmatically.\r\n   */\r\n  showModal() {\r\n    this.setAttribute('open', '')\r\n  }\r\n}\r\n\r\nregister('ytz-dialog', YtzDialog)\r\n\r\nexport { YtzDialog }\r\n","/**\r\n * ytz-disclosure - Expandable content Web Component.\r\n * Toggles content visibility with proper ARIA attributes.\r\n *\r\n * @module @grimoire/yetzirah-core/disclosure\r\n * @example\r\n * <ytz-disclosure>\r\n *   <button>Show Details</button>\r\n *   <div>Hidden content...</div>\r\n * </ytz-disclosure>\r\n *\r\n * @example\r\n * // Initially open\r\n * <ytz-disclosure open>\r\n *   <button>Hide Details</button>\r\n *   <div>Visible content...</div>\r\n * </ytz-disclosure>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\nlet disclosureId = 0\r\n\r\n/**\r\n * @class YtzDisclosure\r\n * @extends HTMLElement\r\n */\r\nclass YtzDisclosure extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-disclosure-${++disclosureId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA linkage\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the disclosure open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-disclosure', YtzDisclosure)\r\n\r\nexport { YtzDisclosure }\r\n","/**\r\n * ytz-drawer - Slide-in panel Web Component.\r\n * Inherits modal behavior: focus trap, scroll lock, escape-to-close, backdrop dismiss.\r\n *\r\n * @module @grimoire/yetzirah-core/drawer\r\n * @example\r\n * <ytz-drawer id=\"menu\" anchor=\"left\" class=\"w5 h-100 bg-white shadow-2\">\r\n *   <nav class=\"pa4\">\r\n *     <a href=\"/home\">Home</a>\r\n *   </nav>\r\n *   <button onclick=\"this.closest('ytz-drawer').close()\">Close</button>\r\n * </ytz-drawer>\r\n *\r\n * @example\r\n * // Open drawer\r\n * document.getElementById('menu').open = true\r\n *\r\n * @example\r\n * // Different anchors\r\n * <ytz-drawer anchor=\"right\">...</ytz-drawer>\r\n * <ytz-drawer anchor=\"top\">...</ytz-drawer>\r\n * <ytz-drawer anchor=\"bottom\">...</ytz-drawer>\r\n */\r\n\r\nimport { createFocusTrap } from './utils/focus-trap.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/** @type {string[]} Valid anchor positions */\r\nconst VALID_ANCHORS = ['left', 'right', 'top', 'bottom']\r\n\r\n/**\r\n * @class YtzDrawer\r\n * @extends HTMLElement\r\n */\r\nclass YtzDrawer extends HTMLElement {\r\n  static observedAttributes = ['open', 'anchor']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #previousFocus = null\r\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\r\n  #focusTrap = null\r\n  /** @type {string} */\r\n  #previousOverflow = ''\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'dialog')\r\n    this.setAttribute('aria-modal', 'true')\r\n    this.hidden = !this.hasAttribute('open')\r\n\r\n    if (!this.hasAttribute('anchor')) {\r\n      this.setAttribute('anchor', 'left')\r\n    }\r\n\r\n    this.addEventListener('click', this.#handleBackdropClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleBackdropClick)\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      newVal !== null ? this.#open() : this.#close()\r\n    }\r\n    if (name === 'anchor' && newVal && !VALID_ANCHORS.includes(newVal)) {\r\n      this.setAttribute('anchor', 'left')\r\n    }\r\n  }\r\n\r\n  #open() {\r\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\r\n    this.hidden = false\r\n    this.#previousOverflow = document.body.style.overflow\r\n    document.body.style.overflow = 'hidden'\r\n    this.#focusTrap = createFocusTrap(this)\r\n    this.#focusTrap.activate()\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    requestAnimationFrame(() => {\r\n      const firstFocusable = this.querySelector(FOCUSABLE)\r\n      if (firstFocusable) {\r\n        /** @type {HTMLElement} */ (firstFocusable).focus()\r\n      } else {\r\n        this.setAttribute('tabindex', '-1')\r\n        this.focus()\r\n      }\r\n    })\r\n  }\r\n\r\n  #close() {\r\n    this.hidden = true\r\n    this.#cleanup()\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #cleanup() {\r\n    document.body.style.overflow = this.#previousOverflow\r\n    this.#focusTrap?.deactivate()\r\n    this.#focusTrap = null\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.#previousFocus?.focus()\r\n    this.#previousFocus = null\r\n  }\r\n\r\n  /** @param {KeyboardEvent} e */\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\r\n      e.preventDefault()\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @param {MouseEvent} e */\r\n  #handleBackdropClick = (e) => {\r\n    if (e.target === this && !this.hasAttribute('static')) {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @type {boolean} */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    value ? this.setAttribute('open', '') : this.removeAttribute('open')\r\n  }\r\n\r\n  /** @type {'left'|'right'|'top'|'bottom'} */\r\n  get anchor() {\r\n    return /** @type {'left'|'right'|'top'|'bottom'} */ (this.getAttribute('anchor') || 'left')\r\n  }\r\n\r\n  set anchor(value) {\r\n    if (VALID_ANCHORS.includes(value)) this.setAttribute('anchor', value)\r\n  }\r\n\r\n  /** Close the drawer programmatically. */\r\n  close() {\r\n    this.removeAttribute('open')\r\n  }\r\n\r\n  /** Show the drawer programmatically. */\r\n  show() {\r\n    this.setAttribute('open', '')\r\n  }\r\n}\r\n\r\nregister('ytz-drawer', YtzDrawer)\r\n\r\nexport { YtzDrawer }\r\n","/**\r\n * Keyboard navigation utility for arrow key navigation.\r\n * @module @grimoire/yetzirah-core/utils/key-nav\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates keyboard navigation for a set of elements.\r\n * @param {() => HTMLElement[]} getItems - Function returning navigable elements\r\n * @param {Object} options\r\n * @param {'horizontal'|'vertical'} [options.orientation='horizontal']\r\n * @param {boolean} [options.wrap=true]\r\n * @param {boolean} [options.autoActivate=true]\r\n * @param {(item: HTMLElement) => void} [options.onActivate]\r\n * @returns {{ handleKeyDown: (e: KeyboardEvent) => void }}\r\n */\r\nexport function createKeyNav(getItems, options = {}) {\r\n  const { orientation = 'horizontal', wrap = true, autoActivate = true, onActivate } = options\r\n  const prevKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\r\n  const nextKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\r\n\r\n  return {\r\n    handleKeyDown(e) {\r\n      const items = getItems()\r\n      const currentIndex = items.indexOf(document.activeElement)\r\n      if (currentIndex === -1) return\r\n\r\n      let newIndex = currentIndex\r\n      if (e.key === prevKey) {\r\n        newIndex = currentIndex - 1\r\n        if (newIndex < 0) newIndex = wrap ? items.length - 1 : 0\r\n      } else if (e.key === nextKey) {\r\n        newIndex = currentIndex + 1\r\n        if (newIndex >= items.length) newIndex = wrap ? 0 : items.length - 1\r\n      } else if (e.key === 'Home') {\r\n        newIndex = 0\r\n      } else if (e.key === 'End') {\r\n        newIndex = items.length - 1\r\n      } else {\r\n        return\r\n      }\r\n\r\n      e.preventDefault()\r\n      items[newIndex].focus()\r\n      if (autoActivate && onActivate) onActivate(items[newIndex])\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-tabs - Tabbed interface Web Components.\r\n * @module @grimoire/yetzirah-core/tabs\r\n * @example\r\n * <ytz-tabs>\r\n *   <ytz-tab panel=\"tab1\">Account</ytz-tab>\r\n *   <ytz-tabpanel id=\"tab1\">Account content</ytz-tabpanel>\r\n * </ytz-tabs>\r\n */\r\n\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet tabId = 0\r\n\r\n/** @class YtzTabs */\r\nclass YtzTabs extends HTMLElement {\r\n  static observedAttributes = ['value', 'orientation']\r\n  #keyNav = null\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tablist')\r\n    this.#setupKeyNav()\r\n    if (!this.hasAttribute('value')) {\r\n      const firstTab = this.querySelector('ytz-tab')\r\n      if (firstTab?.getAttribute('panel')) {\r\n        this.setAttribute('value', firstTab.getAttribute('panel'))\r\n      }\r\n    }\r\n    this.#updateSelection()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'value' && oldVal !== newVal) {\r\n      this.#updateSelection()\r\n      if (oldVal !== null) {\r\n        this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: newVal } }))\r\n      }\r\n    }\r\n    if (name === 'orientation') this.#setupKeyNav()\r\n  }\r\n\r\n  #setupKeyNav() {\r\n    const orientation = this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.querySelectorAll('ytz-tab')],\r\n      {\r\n        orientation,\r\n        wrap: true,\r\n        autoActivate: true,\r\n        onActivate: (tab) => {\r\n          const panel = tab.getAttribute('panel')\r\n          if (panel) this.value = panel\r\n        }\r\n      }\r\n    )\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n  }\r\n\r\n  #handleKeyDown = (e) => this.#keyNav?.handleKeyDown(e)\r\n\r\n  #updateSelection() {\r\n    const value = this.getAttribute('value')\r\n    this.querySelectorAll('ytz-tab').forEach((tab) => {\r\n      const isSelected = tab.getAttribute('panel') === value\r\n      tab.setAttribute('aria-selected', String(isSelected))\r\n      tab.setAttribute('tabindex', isSelected ? '0' : '-1')\r\n    })\r\n    this.querySelectorAll('ytz-tabpanel').forEach((panel) => {\r\n      panel.hidden = panel.id !== value\r\n    })\r\n  }\r\n\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n\r\n  get orientation() {\r\n    return this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n  }\r\n  set orientation(v) { this.setAttribute('orientation', v) }\r\n}\r\n\r\n/** @class YtzTab */\r\nclass YtzTab extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tab')\r\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '-1')\r\n    if (!this.id) this.id = `ytz-tab-${++tabId}`\r\n    const panelId = this.getAttribute('panel')\r\n    if (panelId) this.setAttribute('aria-controls', panelId)\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() { this.removeEventListener('click', this.#handleClick) }\r\n\r\n  #handleClick = () => {\r\n    const tabs = this.closest('ytz-tabs')\r\n    const panel = this.getAttribute('panel')\r\n    if (tabs && panel) tabs.value = panel\r\n  }\r\n\r\n  get panel() { return this.getAttribute('panel') }\r\n  set panel(v) {\r\n    if (v) {\r\n      this.setAttribute('panel', v)\r\n      this.setAttribute('aria-controls', v)\r\n    } else {\r\n      this.removeAttribute('panel')\r\n      this.removeAttribute('aria-controls')\r\n    }\r\n  }\r\n}\r\n\r\n/** @class YtzTabPanel */\r\nclass YtzTabPanel extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tabpanel')\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (tabs) {\r\n      this.hidden = this.id !== tabs.getAttribute('value')\r\n    } else {\r\n      this.hidden = true\r\n    }\r\n    this.#linkToTab()\r\n  }\r\n\r\n  #linkToTab() {\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (!tabs || !this.id) return\r\n    const tab = tabs.querySelector(`ytz-tab[panel=\"${this.id}\"]`)\r\n    if (tab) {\r\n      if (!tab.id) tab.id = `ytz-tab-${++tabId}`\r\n      this.setAttribute('aria-labelledby', tab.id)\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-tabs', YtzTabs)\r\nregister('ytz-tab', YtzTab)\r\nregister('ytz-tabpanel', YtzTabPanel)\r\n\r\nexport { YtzTabs, YtzTab, YtzTabPanel }\r\n","/**\r\n * Position utility for tooltips, menus, popovers.\r\n * Places an element relative to an anchor with flip/shift logic.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/position\r\n * @internal Not exported from package\r\n *\r\n * Limitations (by design):\r\n * - Does not handle nested scroll containers\r\n * - Does not support virtual elements\r\n * - No middleware system\r\n */\r\n\r\n/**\r\n * Position a floating element relative to an anchor.\r\n *\r\n * @param {HTMLElement} anchor - Element to position relative to\r\n * @param {HTMLElement} floating - Element to position\r\n * @param {Object} [options] - Positioning options\r\n * @param {'top'|'bottom'|'left'|'right'} [options.placement='top'] - Preferred placement\r\n * @param {number} [options.offset=8] - Gap between anchor and floating element\r\n * @returns {{ x: number, y: number, placement: string }}\r\n */\r\nexport function position(anchor, floating, options = {}) {\r\n  const { placement = 'top', offset = 8 } = options\r\n\r\n  const anchorRect = anchor.getBoundingClientRect()\r\n  const floatingRect = floating.getBoundingClientRect()\r\n  const viewport = { width: window.innerWidth, height: window.innerHeight }\r\n\r\n  let x, y\r\n  let finalPlacement = placement\r\n\r\n  // Calculate position based on placement\r\n  switch (placement) {\r\n    case 'top':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.top - floatingRect.height - offset\r\n      break\r\n    case 'bottom':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.bottom + offset\r\n      break\r\n    case 'left':\r\n      x = anchorRect.left - floatingRect.width - offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n    case 'right':\r\n      x = anchorRect.right + offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n  }\r\n\r\n  // Flip if outside viewport\r\n  if (placement === 'top' && y < 0) {\r\n    y = anchorRect.bottom + offset\r\n    finalPlacement = 'bottom'\r\n  } else if (placement === 'bottom' && y + floatingRect.height > viewport.height) {\r\n    y = anchorRect.top - floatingRect.height - offset\r\n    finalPlacement = 'top'\r\n  } else if (placement === 'left' && x < 0) {\r\n    x = anchorRect.right + offset\r\n    finalPlacement = 'right'\r\n  } else if (placement === 'right' && x + floatingRect.width > viewport.width) {\r\n    x = anchorRect.left - floatingRect.width - offset\r\n    finalPlacement = 'left'\r\n  }\r\n\r\n  // Shift to stay in viewport\r\n  if (finalPlacement === 'top' || finalPlacement === 'bottom') {\r\n    x = Math.max(0, Math.min(x, viewport.width - floatingRect.width))\r\n  } else {\r\n    y = Math.max(0, Math.min(y, viewport.height - floatingRect.height))\r\n  }\r\n\r\n  return { x, y, placement: finalPlacement }\r\n}\r\n","/**\r\n * ytz-tooltip - Positioned hint text Web Component.\r\n * Shows on hover/focus with configurable delay and placement.\r\n *\r\n * @module @grimoire/yetzirah-core/tooltip\r\n * @example\r\n * <ytz-tooltip>\r\n *   <button>Hover me</button>\r\n *   <span slot=\"content\">Tooltip text</span>\r\n * </ytz-tooltip>\r\n *\r\n * @example\r\n * // With placement and delay\r\n * <ytz-tooltip placement=\"bottom\" delay=\"200\">\r\n *   <button>Hover me</button>\r\n *   <span slot=\"content\">Bottom tooltip</span>\r\n * </ytz-tooltip>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet tooltipId = 0\r\n\r\n/**\r\n * @class YtzTooltip\r\n * @extends HTMLElement\r\n */\r\nclass YtzTooltip extends HTMLElement {\r\n  static observedAttributes = ['placement', 'delay', 'offset']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n  /** @type {number|null} */\r\n  #showTimeout = null\r\n  /** @type {number|null} */\r\n  #hideTimeout = null\r\n  /** @type {boolean} */\r\n  #isVisible = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n    clearTimeout(this.#showTimeout)\r\n    clearTimeout(this.#hideTimeout)\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.#isVisible) this.#updatePosition()\r\n  }\r\n\r\n  /** @returns {'top'|'bottom'|'left'|'right'} */\r\n  get placement() {\r\n    return this.getAttribute('placement') || 'top'\r\n  }\r\n\r\n  /** @param {'top'|'bottom'|'left'|'right'} value */\r\n  set placement(value) {\r\n    if (value) {\r\n      this.setAttribute('placement', value)\r\n    } else {\r\n      this.removeAttribute('placement')\r\n    }\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get delay() {\r\n    return parseInt(this.getAttribute('delay') || '0', 10)\r\n  }\r\n\r\n  /** @param {number} value */\r\n  set delay(value) {\r\n    if (value != null) {\r\n      this.setAttribute('delay', String(value))\r\n    } else {\r\n      this.removeAttribute('delay')\r\n    }\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get offset() {\r\n    return parseInt(this.getAttribute('offset') || '8', 10)\r\n  }\r\n\r\n  /** @param {number} value */\r\n  set offset(value) {\r\n    if (value != null) {\r\n      this.setAttribute('offset', String(value))\r\n    } else {\r\n      this.removeAttribute('offset')\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\r\n    this.#trigger = this.firstElementChild\r\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\r\n\r\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\r\n\r\n    // Generate unique ID for content\r\n    this.#contentId = this.#content.id || `ytz-tooltip-${++tooltipId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA\r\n    this.#trigger.setAttribute('aria-describedby', this.#contentId)\r\n    this.#content.setAttribute('role', 'tooltip')\r\n    this.#content.hidden = true\r\n\r\n    // Hover listeners\r\n    this.#trigger.addEventListener('mouseenter', this.#handleMouseEnter)\r\n    this.#trigger.addEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#content.addEventListener('mouseenter', this.#handleContentMouseEnter)\r\n    this.#content.addEventListener('mouseleave', this.#handleMouseLeave)\r\n\r\n    // Focus listeners\r\n    this.#trigger.addEventListener('focusin', this.#handleFocusIn)\r\n    this.#trigger.addEventListener('focusout', this.#handleFocusOut)\r\n\r\n    // Touch support\r\n    this.#trigger.addEventListener('touchstart', this.#handleTouchStart, { passive: true })\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('mouseenter', this.#handleMouseEnter)\r\n    this.#trigger?.removeEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#content?.removeEventListener('mouseenter', this.#handleContentMouseEnter)\r\n    this.#content?.removeEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#trigger?.removeEventListener('focusin', this.#handleFocusIn)\r\n    this.#trigger?.removeEventListener('focusout', this.#handleFocusOut)\r\n    this.#trigger?.removeEventListener('touchstart', this.#handleTouchStart)\r\n  }\r\n\r\n  #handleMouseEnter = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#showTimeout = setTimeout(() => this.#show(), this.delay)\r\n  }\r\n\r\n  #handleMouseLeave = () => {\r\n    clearTimeout(this.#showTimeout)\r\n    this.#hideTimeout = setTimeout(() => this.#hide(), 100)\r\n  }\r\n\r\n  #handleContentMouseEnter = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n  }\r\n\r\n  #handleFocusIn = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#show() // No delay for focus (accessibility)\r\n  }\r\n\r\n  #handleFocusOut = () => {\r\n    this.#hide()\r\n  }\r\n\r\n  #handleTouchStart = () => {\r\n    if (this.#isVisible) {\r\n      this.#hide()\r\n    } else {\r\n      this.#show()\r\n    }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#content || this.#isVisible) return\r\n\r\n    this.#content.hidden = false\r\n    this.#isVisible = true\r\n    this.#updatePosition()\r\n\r\n    // Listen for scroll/resize to reposition\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#content || !this.#isVisible) return\r\n\r\n    this.#content.hidden = true\r\n    this.#isVisible = false\r\n\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\r\n      placement: this.placement,\r\n      offset: this.offset\r\n    })\r\n\r\n    // Position tooltip fixed relative to viewport\r\n    this.#content.style.position = 'fixed'\r\n    this.#content.style.left = `${x}px`\r\n    this.#content.style.top = `${y}px`\r\n\r\n    // Set data attribute for CSS arrow styling\r\n    this.#content.dataset.placement = finalPlacement\r\n  }\r\n\r\n  // Public API\r\n\r\n  /** Show the tooltip programmatically */\r\n  show() {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#show()\r\n  }\r\n\r\n  /** Hide the tooltip programmatically */\r\n  hide() {\r\n    clearTimeout(this.#showTimeout)\r\n    this.#hide()\r\n  }\r\n}\r\n\r\nregister('ytz-tooltip', YtzTooltip)\r\n\r\nexport { YtzTooltip }\r\n","/**\r\n * ytz-popover - Click-triggered positioned content Web Component.\r\n * Shows interactive content anchored to a trigger element.\r\n *\r\n * @module @grimoire/yetzirah-core/popover\r\n * @example\r\n * <ytz-popover>\r\n *   <button>Open menu</button>\r\n *   <div slot=\"content\">\r\n *     <p>Popover content with interactive elements</p>\r\n *     <button onclick=\"this.closest('ytz-popover').open = false\">Close</button>\r\n *   </div>\r\n * </ytz-popover>\r\n *\r\n * @example\r\n * // With placement\r\n * <ytz-popover placement=\"bottom\">\r\n *   <button>Settings</button>\r\n *   <div slot=\"content\" class=\"pa3 bg-white shadow-2 br2\">\r\n *     <label class=\"db mb2\">\r\n *       <input type=\"checkbox\"> Enable notifications\r\n *     </label>\r\n *     <button>Save</button>\r\n *   </div>\r\n * </ytz-popover>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet popoverId = 0\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * @class YtzPopover\r\n * @extends HTMLElement\r\n */\r\nclass YtzPopover extends HTMLElement {\r\n  static observedAttributes = ['open', 'placement', 'offset']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    // Check initial open state\r\n    if (this.hasAttribute('open')) {\r\n      this.#show()\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#show() : this.#hide()\r\n    } else if (this.hasAttribute('open')) {\r\n      // Reposition if placement/offset changed while open\r\n      this.#updatePosition()\r\n    }\r\n  }\r\n\r\n  /** @returns {'top'|'bottom'|'left'|'right'} */\r\n  get placement() {\r\n    return this.getAttribute('placement') || 'bottom'\r\n  }\r\n\r\n  set placement(value) {\r\n    this.setAttribute('placement', value)\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get offset() {\r\n    return parseInt(this.getAttribute('offset') || '8', 10)\r\n  }\r\n\r\n  set offset(value) {\r\n    this.setAttribute('offset', String(value))\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\r\n    this.#trigger = this.firstElementChild\r\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\r\n\r\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\r\n\r\n    // Generate unique ID for content\r\n    this.#contentId = this.#content.id || `ytz-popover-${++popoverId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA - popover uses aria-expanded on trigger\r\n    this.#trigger.setAttribute('aria-haspopup', 'dialog')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n\r\n    // Content hidden initially\r\n    this.#content.hidden = true\r\n\r\n    // Click listener on trigger\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => {\r\n    e.stopPropagation()\r\n    this.open = !this.open\r\n  }\r\n\r\n  #handleOutsideClick = (e) => {\r\n    // Close if click is outside popover content and trigger\r\n    if (!this.#content?.contains(e.target) && !this.#trigger?.contains(e.target)) {\r\n      this.open = false\r\n    }\r\n  }\r\n\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.open) {\r\n      e.preventDefault()\r\n      this.open = false\r\n      // Return focus to trigger\r\n      this.#trigger?.focus()\r\n    }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#content) return\r\n\r\n    // Update ARIA\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n\r\n    // Show content\r\n    this.#content.hidden = false\r\n    this.#updatePosition()\r\n\r\n    // Add listeners for dismiss\r\n    // Use setTimeout to avoid immediate close from the same click\r\n    setTimeout(() => {\r\n      document.addEventListener('click', this.#handleOutsideClick)\r\n    }, 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    // Reposition on scroll/resize\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    // Focus first focusable element in content\r\n    requestAnimationFrame(() => {\r\n      const focusable = this.#content?.querySelector(FOCUSABLE)\r\n      if (focusable) {\r\n        /** @type {HTMLElement} */ (focusable).focus()\r\n      }\r\n    })\r\n\r\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#content) return\r\n\r\n    // Update ARIA\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n\r\n    // Hide content\r\n    this.#content.hidden = true\r\n\r\n    // Remove listeners\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\r\n      placement: this.placement,\r\n      offset: this.offset\r\n    })\r\n\r\n    // Position popover fixed relative to viewport\r\n    this.#content.style.position = 'fixed'\r\n    this.#content.style.left = `${x}px`\r\n    this.#content.style.top = `${y}px`\r\n\r\n    // Set data attribute for CSS styling based on actual placement\r\n    this.#content.dataset.placement = finalPlacement\r\n  }\r\n\r\n  // Public API\r\n\r\n  /** Show the popover programmatically */\r\n  show() {\r\n    this.open = true\r\n  }\r\n\r\n  /** Hide the popover programmatically */\r\n  hide() {\r\n    this.open = false\r\n  }\r\n\r\n  /** Toggle the popover open/closed */\r\n  toggle() {\r\n    this.open = !this.open\r\n  }\r\n}\r\n\r\nregister('ytz-popover', YtzPopover)\r\n\r\nexport { YtzPopover }\r\n","/**\r\n * Click outside utility for dismissing popups.\r\n * @module @grimoire/yetzirah-core/utils/click-outside\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates a click outside listener.\r\n * @param {HTMLElement} element - Element to detect clicks outside of\r\n * @param {Function} callback - Called when click outside occurs\r\n * @param {Object} [options]\r\n * @param {HTMLElement} [options.ignore] - Additional element to ignore clicks on (e.g., trigger)\r\n * @returns {{ destroy: () => void }}\r\n */\r\nexport function clickOutside(element, callback, options = {}) {\r\n  const { ignore } = options\r\n\r\n  const handleClick = (e) => {\r\n    if (element.contains(e.target)) return\r\n    if (ignore && ignore.contains(e.target)) return\r\n    callback(e)\r\n  }\r\n\r\n  // Use capture to catch clicks before they're stopped\r\n  document.addEventListener('click', handleClick, true)\r\n\r\n  return {\r\n    destroy() {\r\n      document.removeEventListener('click', handleClick, true)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-menu - Dropdown menu with keyboard navigation.\r\n * Opens on trigger click, positions relative to trigger, closes on click outside/escape.\r\n *\r\n * @module @grimoire/yetzirah-core/menu\r\n * @example\r\n * <ytz-menu>\r\n *   <button slot=\"trigger\">Open Menu</button>\r\n *   <ytz-menuitem>Edit</ytz-menuitem>\r\n *   <ytz-menuitem>Delete</ytz-menuitem>\r\n * </ytz-menu>\r\n *\r\n * @example\r\n * <ytz-menu placement=\"bottom-start\">\r\n *   <button slot=\"trigger\">Actions</button>\r\n *   <ytz-menuitem value=\"edit\">Edit</ytz-menuitem>\r\n *   <ytz-menuitem disabled>Archive</ytz-menuitem>\r\n * </ytz-menu>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { clickOutside } from './utils/click-outside.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet menuId = 0\r\n\r\n/**\r\n * @class YtzMenu\r\n * @extends HTMLElement\r\n */\r\nclass YtzMenu extends HTMLElement {\r\n  static observedAttributes = ['open', 'placement']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #popup = null\r\n  /** @type {string|null} */\r\n  #menuId = null\r\n  /** @type {ReturnType<typeof createKeyNav>|null} */\r\n  #keyNav = null\r\n  /** @type {ReturnType<typeof clickOutside>|null} */\r\n  #clickOutsideHandler = null\r\n  /** @type {number} */\r\n  #lastCloseTime = 0\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#showMenu() : this.#hideMenu()\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n\r\n  /** @returns {string} */\r\n  get placement() { return this.getAttribute('placement') || 'bottom-start' }\r\n  set placement(v) { v ? this.setAttribute('placement', v) : this.removeAttribute('placement') }\r\n\r\n  #setup() {\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    if (!this.#trigger) return\r\n\r\n    this.#menuId = `ytz-menu-${++menuId}`\r\n\r\n    // Create popup wrapper for menu items\r\n    this.#popup = document.createElement('div')\r\n    this.#popup.setAttribute('role', 'menu')\r\n    this.#popup.id = this.#menuId\r\n    this.#popup.hidden = true\r\n\r\n    // Move all menuitem children into popup\r\n    const items = [...this.querySelectorAll('ytz-menuitem')]\r\n    items.forEach(item => this.#popup.appendChild(item))\r\n    this.appendChild(this.#popup)\r\n\r\n    // ARIA on trigger\r\n    this.#trigger.setAttribute('aria-haspopup', 'menu')\r\n    this.#trigger.setAttribute('aria-controls', this.#menuId)\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n\r\n    // Keyboard navigation\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#popup.querySelectorAll('ytz-menuitem:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.#clickOutsideHandler?.destroy()\r\n  }\r\n\r\n  #handleTriggerClick = () => { this.open = !this.open }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (!this.open) return\r\n\r\n    if (e.key === 'Escape') {\r\n      e.preventDefault()\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n      return\r\n    }\r\n\r\n    this.#keyNav?.handleKeyDown(e)\r\n\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#popup?.querySelector('ytz-menuitem:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) {\r\n        e.preventDefault()\r\n        focused.click()\r\n      }\r\n    }\r\n  }\r\n\r\n  #showMenu() {\r\n    if (!this.#trigger || !this.#popup) return\r\n    // Prevent re-opening if we just closed (e.g., click-outside + toggle in same event)\r\n    if (performance.now() - this.#lastCloseTime < 10) {\r\n      // Remove attribute to keep state consistent since we're blocking the open\r\n      this.removeAttribute('open')\r\n      return\r\n    }\r\n\r\n    // Pre-position as fixed but invisible to get correct layout\r\n    this.#popup.style.position = 'fixed'\r\n    this.#popup.style.visibility = 'hidden'\r\n    this.#popup.hidden = false\r\n\r\n    // Force synchronous reflow so popup has layout dimensions\r\n    void this.#popup.offsetHeight\r\n\r\n    // Calculate and apply position\r\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\r\n    const { x, y } = position(this.#trigger, this.#popup, {\r\n      placement: basePlacement,\r\n      offset: 4\r\n    })\r\n    this.#popup.style.left = `${x}px`\r\n    this.#popup.style.top = `${y}px`\r\n\r\n    // Now make visible\r\n    this.#popup.style.visibility = ''\r\n    this.#trigger.setAttribute('aria-expanded', 'true')\r\n\r\n    const firstItem = this.#popup.querySelector('ytz-menuitem:not([disabled])')\r\n    firstItem?.focus()\r\n\r\n    // Defer click-outside setup to next event loop tick to avoid triggering on same click\r\n    setTimeout(() => {\r\n      // Only set up if still open (user might have closed it already)\r\n      if (!this.open) return\r\n      this.#clickOutsideHandler = clickOutside(this.#popup, () => {\r\n        this.open = false\r\n      }, { ignore: this.#trigger })\r\n    }, 0)\r\n\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hideMenu() {\r\n    if (!this.#trigger || !this.#popup) return\r\n\r\n    // Record close time to prevent re-opening in the same event\r\n    this.#lastCloseTime = performance.now()\r\n\r\n    this.#popup.hidden = true\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n\r\n    this.#clickOutsideHandler?.destroy()\r\n    this.#clickOutsideHandler = null\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#popup) return\r\n\r\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\r\n    const { x, y } = position(this.#trigger, this.#popup, {\r\n      placement: basePlacement,\r\n      offset: 4\r\n    })\r\n\r\n    this.#popup.style.position = 'fixed'\r\n    this.#popup.style.left = `${x}px`\r\n    this.#popup.style.top = `${y}px`\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n}\r\n\r\n/**\r\n * ytz-menuitem - Individual menu item.\r\n * @attr disabled - When present, item is not selectable\r\n * @attr value - Optional value for select event\r\n */\r\nclass YtzMenuItem extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'menuitem')\r\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n    if (this.hasAttribute('disabled')) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n    }\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = (e) => {\r\n    if (this.hasAttribute('disabled')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      return\r\n    }\r\n\r\n    const menu = this.closest('ytz-menu')\r\n    if (menu) {\r\n      this.dispatchEvent(new CustomEvent('select', {\r\n        bubbles: true,\r\n        detail: { value: this.getAttribute('value') || this.textContent?.trim() }\r\n      }))\r\n      menu.open = false\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) {\r\n    if (v) {\r\n      this.setAttribute('disabled', '')\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n  }\r\n\r\n  /** @returns {string|null} */\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n}\r\n\r\nregister('ytz-menu', YtzMenu)\r\nregister('ytz-menuitem', YtzMenuItem)\r\n\r\nexport { YtzMenu, YtzMenuItem }\r\n","/**\r\n * ytz-autocomplete - Text input with filterable dropdown selection.\r\n * Supports single and multi-select modes with async loading.\r\n *\r\n * @module @grimoire/yetzirah-core/autocomplete\r\n * @example\r\n * <ytz-autocomplete>\r\n *   <input slot=\"input\" placeholder=\"Search...\">\r\n *   <ytz-option value=\"apple\">Apple</ytz-option>\r\n *   <ytz-option value=\"banana\">Banana</ytz-option>\r\n * </ytz-autocomplete>\r\n *\r\n * @example\r\n * // Multi-select mode\r\n * <ytz-autocomplete multiple>\r\n *   <input slot=\"input\" placeholder=\"Select...\">\r\n *   <ytz-option value=\"a\">Option A</ytz-option>\r\n *   <ytz-option value=\"b\">Option B</ytz-option>\r\n * </ytz-autocomplete>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { clickOutside } from './utils/click-outside.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet autocompleteId = 0\r\n\r\n/**\r\n * @class YtzAutocomplete\r\n * @extends HTMLElement\r\n */\r\nclass YtzAutocomplete extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'loading']\r\n\r\n  /** @type {HTMLInputElement|null} */\r\n  #input = null\r\n  /** @type {HTMLElement|null} */\r\n  #listbox = null\r\n  /** @type {string|null} */\r\n  #listboxId = null\r\n  /** @type {ReturnType<typeof createKeyNav>|null} */\r\n  #keyNav = null\r\n  /** @type {ReturnType<typeof clickOutside>|null} */\r\n  #clickOutsideHandler = null\r\n  /** @type {Set<string>} */\r\n  #selected = new Set()\r\n  /** @type {boolean} - Flag to prevent focus from re-opening after selection */\r\n  #justClosed = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#showListbox() : this.#hideListbox()\r\n    }\r\n    if (name === 'loading') {\r\n      this.#updateLoadingState()\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n\r\n  /** @returns {boolean} */\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n\r\n  /** @returns {boolean} */\r\n  get loading() { return this.hasAttribute('loading') }\r\n  set loading(v) { v ? this.setAttribute('loading', '') : this.removeAttribute('loading') }\r\n\r\n  /** @returns {boolean} */\r\n  get filter() { return this.getAttribute('filter') !== 'false' }\r\n  set filter(v) { this.setAttribute('filter', (v && v !== 'false') ? 'true' : 'false') }\r\n\r\n  /** @returns {string|string[]} */\r\n  get value() {\r\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\r\n  }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) {\r\n      v.forEach(val => this.#selected.add(val))\r\n    } else if (v) {\r\n      this.#selected.add(v)\r\n    }\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  /** @returns {string} */\r\n  get inputValue() { return this.#input?.value || '' }\r\n  set inputValue(v) { if (this.#input) this.#input.value = v }\r\n\r\n  #setup() {\r\n    this.#input = this.querySelector('[slot=\"input\"]') || this.querySelector('input')\r\n    if (!this.#input) return\r\n\r\n    this.#listboxId = `ytz-autocomplete-${++autocompleteId}`\r\n\r\n    // Create listbox wrapper\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.id = this.#listboxId\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) {\r\n      this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    }\r\n\r\n    // Move option children into listbox\r\n    const options = [...this.querySelectorAll('ytz-option')]\r\n    options.forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n\r\n    // ARIA on input\r\n    this.#input.setAttribute('role', 'combobox')\r\n    this.#input.setAttribute('aria-autocomplete', 'list')\r\n    this.#input.setAttribute('aria-controls', this.#listboxId)\r\n    this.#input.setAttribute('aria-expanded', 'false')\r\n    this.#input.setAttribute('aria-haspopup', 'listbox')\r\n\r\n    // Keyboard navigation\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([hidden]):not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.#input.addEventListener('input', this.#handleInput)\r\n    this.#input.addEventListener('focus', this.#handleInputFocus)\r\n    this.#input.addEventListener('keydown', this.#handleInputKeyDown)\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n\r\n    // Read initial selected state from HTML\r\n    this.#listbox.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n\r\n    // Initialize loading slot visibility\r\n    this.#updateLoadingState()\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#input?.removeEventListener('input', this.#handleInput)\r\n    this.#input?.removeEventListener('focus', this.#handleInputFocus)\r\n    this.#input?.removeEventListener('keydown', this.#handleInputKeyDown)\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    this.#clickOutsideHandler?.destroy()\r\n  }\r\n\r\n  #handleInput = () => {\r\n    if (!this.open) this.open = true\r\n    if (this.filter) this.#filterOptions()\r\n    this.dispatchEvent(new CustomEvent('input-change', {\r\n      bubbles: true,\r\n      detail: { value: this.#input.value }\r\n    }))\r\n  }\r\n\r\n  #handleInputFocus = () => {\r\n    // Don't re-open if we just closed from a selection\r\n    if (this.#justClosed) {\r\n      this.#justClosed = false\r\n      return\r\n    }\r\n    const hasOptions = this.#listbox?.querySelector('ytz-option:not([hidden])')\r\n    if (hasOptions && !this.loading) this.open = true\r\n  }\r\n\r\n  #handleInputKeyDown = (e) => {\r\n    if (e.key === 'ArrowDown') {\r\n      e.preventDefault()\r\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\r\n      if (!this.open) this.open = true\r\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\r\n      firstOption?.focus()\r\n    } else if (e.key === 'ArrowUp') {\r\n      e.preventDefault()\r\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\r\n      if (!this.open) this.open = true\r\n      const options = this.#listbox?.querySelectorAll('ytz-option:not([hidden]):not([disabled])')\r\n      options?.[options.length - 1]?.focus()\r\n    } else if (e.key === 'Escape' && this.open) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      this.open = false\r\n    } else if (e.key === 'Enter' && this.open) {\r\n      // Select first visible option on Enter from input\r\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\r\n      if (firstOption) {\r\n        e.preventDefault()\r\n        this.#selectOption(firstOption)\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (!this.open) return\r\n\r\n    if (e.key === 'Escape') {\r\n      e.preventDefault()\r\n      this.open = false\r\n      this.#input?.focus()\r\n      return\r\n    }\r\n\r\n    // Handle navigation when option is focused\r\n    if (document.activeElement?.tagName === 'YTZ-OPTION') {\r\n      this.#keyNav?.handleKeyDown(e)\r\n\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        const focused = this.#listbox?.querySelector('ytz-option:focus')\r\n        if (focused && !focused.hasAttribute('disabled')) {\r\n          e.preventDefault()\r\n          this.#selectOption(focused)\r\n        }\r\n      }\r\n\r\n      if (e.key === 'Tab') {\r\n        e.preventDefault()\r\n        this.#input?.focus()\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) {\r\n      this.#selectOption(option)\r\n    }\r\n  }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n\r\n    if (this.multiple) {\r\n      if (this.#selected.has(value)) {\r\n        this.#selected.delete(value)\r\n      } else {\r\n        this.#selected.add(value)\r\n      }\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.#input.value = option.textContent?.trim() || value\r\n      this.#justClosed = true // Prevent focus from re-opening\r\n      this.open = false\r\n      this.#input?.focus()\r\n    }\r\n\r\n    this.#updateSelectedState()\r\n\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { value: this.value, option }\r\n    }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\r\n    options.forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(value)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #filterOptions() {\r\n    const query = this.#input?.value.toLowerCase() || ''\r\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\r\n\r\n    options.forEach(opt => {\r\n      const text = opt.textContent?.toLowerCase() || ''\r\n      opt.hidden = !text.includes(query)\r\n    })\r\n  }\r\n\r\n  #showListbox() {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    this.#listbox.hidden = false\r\n    this.#input.setAttribute('aria-expanded', 'true')\r\n    this.#updatePosition()\r\n\r\n    this.#clickOutsideHandler = clickOutside(this, () => {\r\n      this.open = false\r\n    })\r\n\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hideListbox() {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    this.#listbox.hidden = true\r\n    this.#input.setAttribute('aria-expanded', 'false')\r\n\r\n    this.#clickOutsideHandler?.destroy()\r\n    this.#clickOutsideHandler = null\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    const { x, y } = position(this.#input, this.#listbox, {\r\n      placement: 'bottom',\r\n      offset: 4\r\n    })\r\n\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#input.offsetWidth}px`\r\n  }\r\n\r\n  #updateLoadingState() {\r\n    const loadingSlot = this.querySelector('[slot=\"loading\"]')\r\n    if (loadingSlot) {\r\n      loadingSlot.hidden = !this.loading\r\n    }\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (this.#input) this.#input.value = ''\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n\r\n  /**\r\n   * Add options programmatically.\r\n   * @param {Array<{value: string, label: string, disabled?: boolean}>} options\r\n   */\r\n  setOptions(options) {\r\n    if (!this.#listbox) return\r\n    this.#listbox.innerHTML = ''\r\n    options.forEach(({ value, label, disabled }) => {\r\n      const opt = document.createElement('ytz-option')\r\n      opt.setAttribute('value', value)\r\n      opt.textContent = label\r\n      if (disabled) opt.setAttribute('disabled', '')\r\n      this.#listbox.appendChild(opt)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n}\r\n\r\n/**\r\n * ytz-option - Individual option in autocomplete.\r\n * @attr value - Option value\r\n * @attr disabled - When present, option is not selectable\r\n * @attr selected - When present, option is selected\r\n */\r\nclass YtzOption extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'option')\r\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n    if (this.hasAttribute('disabled')) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n    }\r\n    this.setAttribute('aria-selected', this.hasAttribute('selected') ? 'true' : 'false')\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = (e) => {\r\n    if (this.hasAttribute('disabled')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      return\r\n    }\r\n    this.dispatchEvent(new CustomEvent('option-click', {\r\n      bubbles: true,\r\n      detail: { option: this }\r\n    }))\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) {\r\n    if (v) {\r\n      this.setAttribute('disabled', '')\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get selected() { return this.hasAttribute('selected') }\r\n  set selected(v) {\r\n    v ? this.setAttribute('selected', '') : this.removeAttribute('selected')\r\n    this.setAttribute('aria-selected', String(v))\r\n  }\r\n\r\n  /** @returns {string|null} */\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n}\r\n\r\nregister('ytz-autocomplete', YtzAutocomplete)\r\nregister('ytz-option', YtzOption)\r\n\r\nexport { YtzAutocomplete, YtzOption }\r\n","/**\r\n * ytz-listbox - Keyboard-navigable list selection with single/multi-select modes.\r\n * @module @grimoire/yetzirah-core/listbox\r\n */\r\n\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet listboxId = 0\r\n\r\nclass YtzListbox extends HTMLElement {\r\n  static observedAttributes = ['multiple', 'disabled']\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n\r\n  connectedCallback() { this.#setup() }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'multiple') this.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n\r\n  get value() {\r\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\r\n  }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-listbox-${++listboxId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.setAttribute('role', 'listbox')\r\n    if (this.multiple) this.setAttribute('aria-multiselectable', 'true')\r\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '0')\r\n\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n    this.addEventListener('focus', this.#handleFocus)\r\n\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  #cleanup() {\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    this.removeEventListener('focus', this.#handleFocus)\r\n  }\r\n\r\n  #handleFocus = () => {\r\n    const selected = this.querySelector('ytz-option[selected]:not([disabled])')\r\n    const first = this.querySelector('ytz-option:not([disabled])')\r\n    ;(selected || first)?.focus()\r\n  }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) {\r\n        e.preventDefault()\r\n        this.#selectOption(focused)\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n    }\r\n    this.#updateSelectedState()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(value)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n\r\n  selectAll() {\r\n    if (!this.multiple) return\r\n    this.querySelectorAll('ytz-option:not([disabled])').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n}\r\n\r\nregister('ytz-listbox', YtzListbox)\r\n\r\nexport { YtzListbox }\r\n","/**\r\n * ytz-select - Dropdown select with trigger button and listbox.\r\n * @module @grimoire/yetzirah-core/select\r\n */\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet selectId = 0\r\n\r\nclass YtzSelect extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'disabled', 'placeholder']\r\n  #trigger = null\r\n  #listbox = null\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n  #customTrigger = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    if (this.hasAttribute('open')) this.#show()\r\n    if (this.disabled) this.#updateDisabledState()\r\n  }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') newVal !== null ? this.#show() : this.#hide()\r\n    if (name === 'multiple') this.#listbox?.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n  get placeholder() { return this.getAttribute('placeholder') || 'Select...' }\r\n  set placeholder(v) { this.setAttribute('placeholder', v) }\r\n\r\n  get value() { return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '') }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n    this.#updateTriggerText()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-select-${++selectId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    this.#customTrigger = !!this.#trigger\r\n    if (!this.#trigger) {\r\n      this.#trigger = document.createElement('button')\r\n      this.#trigger.setAttribute('slot', 'trigger')\r\n      this.#trigger.className = this.getAttribute('trigger-class') || ''\r\n      this.prepend(this.#trigger)\r\n    }\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.id = `${this.#id}-listbox`\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    this.querySelectorAll('ytz-option').forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n    this.#trigger.setAttribute('aria-haspopup', 'listbox')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#listbox.id)\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (val) this.#selected.add(val)\r\n    })\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger.addEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox.addEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger?.removeEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox?.removeEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => { if (this.disabled) return; e.stopPropagation(); this.open = !this.open }\r\n  #handleTriggerKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    if (['ArrowDown', 'ArrowUp', 'Enter', ' '].includes(e.key)) { e.preventDefault(); this.open = true }\r\n  }\r\n\r\n  #handleListboxKeyDown = (e) => {\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#listbox.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) { e.preventDefault(); this.#selectOption(focused) }\r\n    }\r\n    if (e.key === 'Tab') { e.preventDefault(); this.open = false; this.#trigger?.focus() }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #handleOutsideClick = (e) => { if (!this.contains(e.target)) this.open = false }\r\n  #handleEscape = (e) => { if (e.key === 'Escape' && this.open) { e.preventDefault(); this.open = false; this.#trigger?.focus() } }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n    }\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(val)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateTriggerText() {\r\n    if (!this.#trigger || this.#customTrigger) return\r\n    const selected = this.selectedOptions\r\n    if (selected.length === 0) this.#trigger.textContent = this.placeholder\r\n    else if (this.multiple) this.#trigger.textContent = selected.map(o => o.textContent?.trim()).join(', ')\r\n    else this.#trigger.textContent = selected[0]?.textContent?.trim() || this.placeholder\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) { this.#trigger?.setAttribute('disabled', ''); this.#trigger?.setAttribute('aria-disabled', 'true') }\r\n    else { this.#trigger?.removeAttribute('disabled'); this.#trigger?.removeAttribute('aria-disabled') }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#listbox || this.disabled) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n    this.#listbox.hidden = false\r\n    this.#updatePosition()\r\n    setTimeout(() => document.addEventListener('click', this.#handleOutsideClick), 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n    requestAnimationFrame(() => {\r\n      const selected = this.#listbox.querySelector('ytz-option[selected]:not([disabled])')\r\n      const first = this.#listbox.querySelector('ytz-option:not([disabled])')\r\n      ;(selected || first)?.focus()\r\n    })\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#listbox) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n    this.#listbox.hidden = true\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#listbox) return\r\n    const { x, y, placement } = position(this.#trigger, this.#listbox, { placement: 'bottom', offset: 4 })\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#trigger.offsetWidth}px`\r\n    this.#listbox.dataset.placement = placement\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n}\r\n\r\nregister('ytz-select', YtzSelect)\r\nexport { YtzSelect }\r\n","/**\r\n * ytz-toggle - Switch/Toggle Web Component.\r\n * A toggle switch with checkbox semantics and aria-checked.\r\n *\r\n * @module @grimoire/yetzirah-core/toggle\r\n * @example\r\n * <ytz-toggle>Enable notifications</ytz-toggle>\r\n *\r\n * @example\r\n * // Initially checked\r\n * <ytz-toggle checked>Dark mode</ytz-toggle>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-toggle disabled>Premium feature</ytz-toggle>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzToggle\r\n * @extends HTMLElement\r\n */\r\nclass YtzToggle extends HTMLElement {\r\n  static observedAttributes = ['checked', 'disabled']\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  #setup() {\r\n    // Set role and make focusable\r\n    this.setAttribute('role', 'switch')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Event listeners\r\n    this.addEventListener('click', this.#handleClick)\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #handleClick = () => {\r\n    if (this.disabled) return\r\n    this.toggle()\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    if (e.key === ' ' || e.key === 'Enter') {\r\n      e.preventDefault()\r\n      this.toggle()\r\n    }\r\n  }\r\n\r\n  #updateState() {\r\n    this.setAttribute('aria-checked', String(this.checked))\r\n    this.setAttribute('aria-disabled', String(this.disabled))\r\n  }\r\n\r\n  /**\r\n   * Toggle the checked state.\r\n   * Dispatches a 'change' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willCheck = !this.checked\r\n\r\n    if (willCheck) {\r\n      this.setAttribute('checked', '')\r\n    } else {\r\n      this.removeAttribute('checked')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { checked: willCheck }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the checked state.\r\n   * @type {boolean}\r\n   */\r\n  get checked() {\r\n    return this.hasAttribute('checked')\r\n  }\r\n\r\n  set checked(value) {\r\n    if (value) {\r\n      this.setAttribute('checked', '')\r\n    } else {\r\n      this.removeAttribute('checked')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the disabled state.\r\n   * @type {boolean}\r\n   */\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(value) {\r\n    if (value) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-toggle', YtzToggle)\r\n\r\nexport { YtzToggle }\r\n","/**\r\n * ytz-chip - Deletable tag/label Web Component.\r\n * A chip with optional delete button and keyboard support.\r\n *\r\n * @module @grimoire/yetzirah-core/chip\r\n * @example\r\n * <ytz-chip>Tag</ytz-chip>\r\n *\r\n * @example\r\n * // Deletable chip\r\n * <ytz-chip deletable>Remove me</ytz-chip>\r\n *\r\n * @example\r\n * // Disabled chip\r\n * <ytz-chip deletable disabled>Can't delete</ytz-chip>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzChip\r\n * @extends HTMLElement\r\n */\r\nclass YtzChip extends HTMLElement {\r\n  static observedAttributes = ['deletable', 'disabled']\r\n\r\n  /** @type {HTMLButtonElement|null} */\r\n  #deleteButton = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#deleteButton?.removeEventListener('click', this.#handleDelete)\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected) {\r\n      this.#setup()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Remove existing delete button if any\r\n    this.#deleteButton?.remove()\r\n    this.#deleteButton = null\r\n\r\n    // Add delete button if deletable\r\n    if (this.hasAttribute('deletable')) {\r\n      this.#deleteButton = document.createElement('button')\r\n      this.#deleteButton.type = 'button'\r\n      this.#deleteButton.setAttribute('aria-label', 'Delete')\r\n      this.#deleteButton.className = 'ytz-chip-delete'\r\n      this.#deleteButton.textContent = '\\u00D7' //  character\r\n      this.#deleteButton.disabled = this.disabled\r\n      this.#deleteButton.addEventListener('click', this.#handleDelete)\r\n      this.appendChild(this.#deleteButton)\r\n    }\r\n\r\n    // Keyboard support for delete\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    if (this.hasAttribute('deletable')) {\r\n      this.addEventListener('keydown', this.#handleKeydown)\r\n    }\r\n  }\r\n\r\n  #handleDelete = (e) => {\r\n    e.stopPropagation()\r\n    if (this.disabled) return\r\n\r\n    this.dispatchEvent(new CustomEvent('delete', {\r\n      bubbles: true,\r\n      detail: { chip: this }\r\n    }))\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    if (e.key === 'Delete' || e.key === 'Backspace') {\r\n      e.preventDefault()\r\n      this.dispatchEvent(new CustomEvent('delete', {\r\n        bubbles: true,\r\n        detail: { chip: this }\r\n      }))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the disabled state.\r\n   * @type {boolean}\r\n   */\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(value) {\r\n    if (value) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n    if (this.#deleteButton) {\r\n      this.#deleteButton.disabled = value\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the deletable state.\r\n   * @type {boolean}\r\n   */\r\n  get deletable() {\r\n    return this.hasAttribute('deletable')\r\n  }\r\n\r\n  set deletable(value) {\r\n    if (value) {\r\n      this.setAttribute('deletable', '')\r\n    } else {\r\n      this.removeAttribute('deletable')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-chip', YtzChip)\r\n\r\nexport { YtzChip }\r\n","/**\r\n * ytz-icon-button - Icon button Web Component.\r\n * A button variant requiring aria-label for accessibility.\r\n *\r\n * @module @grimoire/yetzirah-core/icon-button\r\n * @example\r\n * <ytz-icon-button aria-label=\"Close\">\r\n *   <svg>...</svg>\r\n * </ytz-icon-button>\r\n *\r\n * @example\r\n * // With tooltip integration\r\n * <ytz-icon-button aria-label=\"Settings\" tooltip>\r\n *   <svg>...</svg>\r\n * </ytz-icon-button>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-icon-button aria-label=\"Delete\" disabled>\r\n *   <svg>...</svg>\r\n * </ytz-icon-button>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Default classes for icon button */\r\nconst DEFAULTS = 'pointer bn bg-transparent pa0 dib'\r\n\r\n/**\r\n * @class YtzIconButton\r\n * @extends HTMLElement\r\n */\r\nclass YtzIconButton extends HTMLElement {\r\n  static observedAttributes = ['disabled', 'aria-label', 'tooltip', 'class']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #tooltipEl = null\r\n\r\n  connectedCallback() {\r\n    this.#render()\r\n    this.#checkAccessibility()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#removeTooltip()\r\n    this.removeEventListener('mouseenter', this.#showTooltip)\r\n    this.removeEventListener('mouseleave', this.#hideTooltip)\r\n    this.removeEventListener('focus', this.#showTooltip)\r\n    this.removeEventListener('blur', this.#hideTooltip)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected) {\r\n      this.#render()\r\n      if (name === 'aria-label') {\r\n        this.#checkAccessibility()\r\n      }\r\n    }\r\n  }\r\n\r\n  #checkAccessibility() {\r\n    if (!this.hasAttribute('aria-label')) {\r\n      console.warn('ytz-icon-button: aria-label is required for accessibility')\r\n    }\r\n  }\r\n\r\n  #render() {\r\n    const userClass = this.getAttribute('class') || ''\r\n    const button = this.querySelector('button.ytz-icon-button-inner') || document.createElement('button')\r\n    const isNew = !button.parentNode\r\n\r\n    button.type = 'button'\r\n    button.className = 'ytz-icon-button-inner ' + DEFAULTS + (userClass ? ' ' + userClass : '')\r\n    button.disabled = this.hasAttribute('disabled')\r\n\r\n    // Copy aria-label to inner button\r\n    const label = this.getAttribute('aria-label')\r\n    if (label) {\r\n      button.setAttribute('aria-label', label)\r\n    }\r\n\r\n    // Copy aria-* and data-* attributes\r\n    for (const attr of this.attributes) {\r\n      if ((attr.name.startsWith('aria-') || attr.name.startsWith('data-')) && attr.name !== 'aria-label') {\r\n        button.setAttribute(attr.name, attr.value)\r\n      }\r\n    }\r\n\r\n    if (isNew) {\r\n      // Move icon content into button\r\n      while (this.firstChild && this.firstChild !== button) {\r\n        button.appendChild(this.firstChild)\r\n      }\r\n      this.appendChild(button)\r\n    }\r\n\r\n    // Setup tooltip if requested\r\n    this.#setupTooltip()\r\n  }\r\n\r\n  #setupTooltip() {\r\n    // Remove old listeners\r\n    this.removeEventListener('mouseenter', this.#showTooltip)\r\n    this.removeEventListener('mouseleave', this.#hideTooltip)\r\n    this.removeEventListener('focus', this.#showTooltip)\r\n    this.removeEventListener('blur', this.#hideTooltip)\r\n\r\n    if (this.hasAttribute('tooltip')) {\r\n      this.addEventListener('mouseenter', this.#showTooltip)\r\n      this.addEventListener('mouseleave', this.#hideTooltip)\r\n      this.addEventListener('focus', this.#showTooltip)\r\n      this.addEventListener('blur', this.#hideTooltip)\r\n    }\r\n  }\r\n\r\n  #showTooltip = () => {\r\n    const label = this.getAttribute('aria-label')\r\n    if (!label) return\r\n\r\n    this.#tooltipEl = document.createElement('div')\r\n    this.#tooltipEl.className = 'ytz-icon-button-tooltip'\r\n    this.#tooltipEl.textContent = label\r\n    this.#tooltipEl.setAttribute('role', 'tooltip')\r\n\r\n    // Position tooltip below button\r\n    // Use inner button for rect since parent may have display:contents\r\n    const button = this.querySelector('button.ytz-icon-button-inner')\r\n    const rect = (button || this).getBoundingClientRect()\r\n    this.#tooltipEl.style.cssText = `\r\n      position: fixed;\r\n      left: ${rect.left + rect.width / 2}px;\r\n      top: ${rect.bottom + 4}px;\r\n      transform: translateX(-50%);\r\n      z-index: 9999;\r\n    `\r\n\r\n    document.body.appendChild(this.#tooltipEl)\r\n  }\r\n\r\n  #hideTooltip = () => {\r\n    this.#removeTooltip()\r\n  }\r\n\r\n  #removeTooltip() {\r\n    if (this.#tooltipEl) {\r\n      this.#tooltipEl.remove()\r\n      this.#tooltipEl = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the disabled state.\r\n   * @type {boolean}\r\n   */\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(value) {\r\n    if (value) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-icon-button', YtzIconButton)\r\n\r\nexport { YtzIconButton }\r\n","/**\r\n * ytz-slider - Slider/Range Web Component.\r\n * An accessible slider with keyboard control and optional range support.\r\n *\r\n * @module @grimoire/yetzirah-core/slider\r\n * @example\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\"></ytz-slider>\r\n *\r\n * @example\r\n * // With step\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" step=\"10\"></ytz-slider>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" disabled></ytz-slider>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzSlider\r\n * @extends HTMLElement\r\n */\r\nclass YtzSlider extends HTMLElement {\r\n  static observedAttributes = ['min', 'max', 'value', 'step', 'disabled']\r\n\r\n  /** @type {HTMLDivElement|null} */\r\n  #track = null\r\n  /** @type {HTMLDivElement|null} */\r\n  #thumb = null\r\n  /** @type {boolean} */\r\n  #dragging = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateDisplay()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb?.removeEventListener('mousedown', this.#handleMouseDown)\r\n    document.removeEventListener('mousemove', this.#handleMouseMove)\r\n    document.removeEventListener('mouseup', this.#handleMouseUp)\r\n    this.#thumb?.removeEventListener('touchstart', this.#handleTouchStart)\r\n    document.removeEventListener('touchmove', this.#handleTouchMove)\r\n    document.removeEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected && oldVal !== newVal) {\r\n      this.#updateDisplay()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Set up ARIA\r\n    this.setAttribute('role', 'slider')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Create track and thumb if not present\r\n    if (!this.#track) {\r\n      this.#track = document.createElement('div')\r\n      this.#track.className = 'ytz-slider-track'\r\n      this.appendChild(this.#track)\r\n    }\r\n\r\n    if (!this.#thumb) {\r\n      this.#thumb = document.createElement('div')\r\n      this.#thumb.className = 'ytz-slider-thumb'\r\n      this.appendChild(this.#thumb)\r\n    }\r\n\r\n    // Event listeners\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb.addEventListener('mousedown', this.#handleMouseDown)\r\n    this.#thumb.addEventListener('touchstart', this.#handleTouchStart, { passive: false })\r\n    this.addEventListener('click', this.#handleTrackClick)\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    const step = this.step\r\n    const bigStep = step * 10\r\n    let newValue = this.value\r\n\r\n    switch (e.key) {\r\n      case 'ArrowRight':\r\n      case 'ArrowUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + step)\r\n        break\r\n      case 'ArrowLeft':\r\n      case 'ArrowDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - step)\r\n        break\r\n      case 'PageUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + bigStep)\r\n        break\r\n      case 'PageDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - bigStep)\r\n        break\r\n      case 'Home':\r\n        e.preventDefault()\r\n        newValue = this.min\r\n        break\r\n      case 'End':\r\n        e.preventDefault()\r\n        newValue = this.max\r\n        break\r\n      default:\r\n        return\r\n    }\r\n\r\n    if (newValue !== this.value) {\r\n      this.value = newValue\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleMouseDown = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('mousemove', this.#handleMouseMove)\r\n    document.addEventListener('mouseup', this.#handleMouseUp)\r\n  }\r\n\r\n  #handleMouseMove = (e) => {\r\n    if (!this.#dragging) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n  }\r\n\r\n  #handleMouseUp = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('mousemove', this.#handleMouseMove)\r\n      document.removeEventListener('mouseup', this.#handleMouseUp)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTouchStart = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('touchmove', this.#handleTouchMove, { passive: false })\r\n    document.addEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  #handleTouchMove = (e) => {\r\n    if (!this.#dragging) return\r\n    e.preventDefault()\r\n    const touch = e.touches[0]\r\n    this.#updateValueFromPointer(touch.clientX)\r\n  }\r\n\r\n  #handleTouchEnd = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('touchmove', this.#handleTouchMove)\r\n      document.removeEventListener('touchend', this.#handleTouchEnd)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTrackClick = (e) => {\r\n    if (this.disabled) return\r\n    if (e.target === this.#thumb) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n    this.#dispatchChange()\r\n  }\r\n\r\n  #updateValueFromPointer(clientX) {\r\n    const rect = this.getBoundingClientRect()\r\n    const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width))\r\n    const range = this.max - this.min\r\n    let newValue = this.min + percent * range\r\n\r\n    // Snap to step\r\n    const step = this.step\r\n    newValue = Math.round(newValue / step) * step\r\n    newValue = Math.max(this.min, Math.min(this.max, newValue))\r\n\r\n    this.value = newValue\r\n  }\r\n\r\n  #updateDisplay() {\r\n    const percent = ((this.value - this.min) / (this.max - this.min)) * 100\r\n\r\n    // Update ARIA attributes\r\n    this.setAttribute('aria-valuemin', String(this.min))\r\n    this.setAttribute('aria-valuemax', String(this.max))\r\n    this.setAttribute('aria-valuenow', String(this.value))\r\n    this.setAttribute('aria-disabled', String(this.disabled))\r\n\r\n    // Position thumb\r\n    if (this.#thumb) {\r\n      this.#thumb.style.left = `${percent}%`\r\n    }\r\n\r\n    // Update track fill (via CSS custom property)\r\n    this.style.setProperty('--slider-percent', `${percent}%`)\r\n  }\r\n\r\n  #dispatchChange() {\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { value: this.value }\r\n    }))\r\n  }\r\n\r\n  // Property getters/setters\r\n  get min() {\r\n    return parseFloat(this.getAttribute('min')) || 0\r\n  }\r\n\r\n  set min(val) {\r\n    this.setAttribute('min', String(val))\r\n  }\r\n\r\n  get max() {\r\n    return parseFloat(this.getAttribute('max')) || 100\r\n  }\r\n\r\n  set max(val) {\r\n    this.setAttribute('max', String(val))\r\n  }\r\n\r\n  get value() {\r\n    const val = parseFloat(this.getAttribute('value'))\r\n    if (isNaN(val)) return this.min\r\n    return Math.max(this.min, Math.min(this.max, val))\r\n  }\r\n\r\n  set value(val) {\r\n    const num = Math.max(this.min, Math.min(this.max, parseFloat(val) || 0))\r\n    this.setAttribute('value', String(num))\r\n  }\r\n\r\n  get step() {\r\n    return parseFloat(this.getAttribute('step')) || 1\r\n  }\r\n\r\n  set step(val) {\r\n    this.setAttribute('step', String(val))\r\n  }\r\n\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(val) {\r\n    if (val) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-slider', YtzSlider)\r\n\r\nexport { YtzSlider }\r\n","/**\r\n * Virtual Scroll utility for efficient rendering of large lists.\r\n * Only renders visible items plus a buffer for smooth scrolling.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/virtual-scroll\r\n */\r\n\r\n/**\r\n * Create a virtual scroller instance.\r\n * @param {Object} options - Configuration options\r\n * @param {HTMLElement} options.container - Scrollable container element\r\n * @param {HTMLElement} options.content - Content element to hold rendered items\r\n * @param {number} options.itemCount - Total number of items\r\n * @param {number} options.itemHeight - Height of each item in pixels\r\n * @param {Function} options.renderItem - Function to render an item by index\r\n * @param {number} [options.buffer=5] - Number of items to render above/below viewport\r\n * @returns {Object} Virtual scroller instance\r\n */\r\nexport function createVirtualScroller({\r\n  container,\r\n  content,\r\n  itemCount,\r\n  itemHeight,\r\n  renderItem,\r\n  buffer = 5\r\n}) {\r\n  let scrollTop = 0\r\n  let renderedRange = { start: 0, end: 0 }\r\n  let rafId = null\r\n\r\n  // Set up content height to enable scrolling\r\n  const totalHeight = itemCount * itemHeight\r\n  content.style.height = `${totalHeight}px`\r\n  content.style.position = 'relative'\r\n\r\n  function calculateVisibleRange() {\r\n    const containerHeight = container.clientHeight\r\n    const start = Math.max(0, Math.floor(scrollTop / itemHeight) - buffer)\r\n    const visibleCount = Math.ceil(containerHeight / itemHeight)\r\n    const end = Math.min(itemCount, start + visibleCount + buffer * 2)\r\n    return { start, end }\r\n  }\r\n\r\n  function render() {\r\n    const range = calculateVisibleRange()\r\n\r\n    // Skip if range hasn't changed\r\n    if (range.start === renderedRange.start && range.end === renderedRange.end) {\r\n      return\r\n    }\r\n\r\n    renderedRange = range\r\n\r\n    // Clear and re-render\r\n    content.innerHTML = ''\r\n\r\n    for (let i = range.start; i < range.end; i++) {\r\n      const item = renderItem(i)\r\n      if (item) {\r\n        item.style.position = 'absolute'\r\n        item.style.top = `${i * itemHeight}px`\r\n        item.style.height = `${itemHeight}px`\r\n        item.style.left = '0'\r\n        item.style.right = '0'\r\n        content.appendChild(item)\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleScroll() {\r\n    scrollTop = container.scrollTop\r\n\r\n    // Use RAF for smooth rendering\r\n    if (rafId) {\r\n      cancelAnimationFrame(rafId)\r\n    }\r\n    rafId = requestAnimationFrame(render)\r\n  }\r\n\r\n  function scrollToIndex(index) {\r\n    const targetTop = index * itemHeight\r\n    const containerHeight = container.clientHeight\r\n    const currentScrollTop = container.scrollTop\r\n\r\n    // Only scroll if item is not fully visible\r\n    if (targetTop < currentScrollTop) {\r\n      container.scrollTop = targetTop\r\n    } else if (targetTop + itemHeight > currentScrollTop + containerHeight) {\r\n      container.scrollTop = targetTop - containerHeight + itemHeight\r\n    }\r\n  }\r\n\r\n  function destroy() {\r\n    container.removeEventListener('scroll', handleScroll)\r\n    if (rafId) {\r\n      cancelAnimationFrame(rafId)\r\n    }\r\n    content.innerHTML = ''\r\n  }\r\n\r\n  function refresh() {\r\n    const newTotalHeight = itemCount * itemHeight\r\n    content.style.height = `${newTotalHeight}px`\r\n    renderedRange = { start: 0, end: 0 }\r\n    render()\r\n  }\r\n\r\n  // Initialize\r\n  container.addEventListener('scroll', handleScroll)\r\n  render()\r\n\r\n  return {\r\n    scrollToIndex,\r\n    refresh,\r\n    destroy,\r\n    get renderedRange() {\r\n      return { ...renderedRange }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-datagrid - Data Grid Web Component.\r\n * Virtual scrolling, sorting, filtering, keyboard navigation, and export.\r\n *\r\n * @module @grimoire/yetzirah-core/datagrid\r\n * @example\r\n * <ytz-datagrid>\r\n *   <ytz-datagrid-column field=\"name\" header=\"Name\" sortable></ytz-datagrid-column>\r\n *   <ytz-datagrid-column field=\"email\" header=\"Email\"></ytz-datagrid-column>\r\n * </ytz-datagrid>\r\n *\r\n * // Set data via JavaScript:\r\n * grid.data = [{ name: 'John', email: 'john@example.com' }, ...]\r\n */\r\n\r\nimport { createVirtualScroller } from './utils/virtual-scroll.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzDatagridColumn\r\n * @extends HTMLElement\r\n */\r\nclass YtzDatagridColumn extends HTMLElement {\r\n  get field() { return this.getAttribute('field') || '' }\r\n  set field(val) { this.setAttribute('field', val) }\r\n\r\n  get header() { return this.getAttribute('header') || this.field }\r\n  set header(val) { this.setAttribute('header', val) }\r\n\r\n  get sortable() { return this.hasAttribute('sortable') }\r\n  set sortable(val) { val ? this.setAttribute('sortable', '') : this.removeAttribute('sortable') }\r\n\r\n  get filterable() { return this.hasAttribute('filterable') }\r\n  set filterable(val) { val ? this.setAttribute('filterable', '') : this.removeAttribute('filterable') }\r\n\r\n  get width() { return this.getAttribute('width') || 'auto' }\r\n  set width(val) { this.setAttribute('width', val) }\r\n}\r\n\r\nregister('ytz-datagrid-column', YtzDatagridColumn)\r\n\r\n/**\r\n * @class YtzDatagrid\r\n * @extends HTMLElement\r\n */\r\nclass YtzDatagrid extends HTMLElement {\r\n  static observedAttributes = ['row-height', 'page-size']\r\n\r\n  /** @type {Array<Object>} */\r\n  #data = []\r\n  /** @type {Array<Object>} */\r\n  #filteredData = []\r\n  /** @type {Array<YtzDatagridColumn>} */\r\n  #columns = []\r\n  /** @type {Object|null} */\r\n  #sortState = null\r\n  /** @type {Object} */\r\n  #filterState = {}\r\n  /** @type {Object|null} */\r\n  #virtualScroller = null\r\n  /** @type {HTMLElement|null} */\r\n  #header = null\r\n  /** @type {HTMLElement|null} */\r\n  #body = null\r\n  /** @type {HTMLElement|null} */\r\n  #viewport = null\r\n  /** @type {number} */\r\n  #focusedRow = 0\r\n  /** @type {number} */\r\n  #focusedCol = 0\r\n  /** @type {Map<string, number>} */\r\n  #columnWidths = new Map()\r\n  /** @type {Object|null} */\r\n  #resizeState = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#virtualScroller?.destroy()\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    document.removeEventListener('mousemove', this.#handleResizeMove)\r\n    document.removeEventListener('mouseup', this.#handleResizeEnd)\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.isConnected) {\r\n      this.#render()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Collect column definitions\r\n    this.#columns = Array.from(this.querySelectorAll('ytz-datagrid-column'))\r\n\r\n    // Set up ARIA\r\n    this.setAttribute('role', 'grid')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Create structure\r\n    this.#createStructure()\r\n\r\n    // Event listeners\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n\r\n    // Initial render\r\n    this.#render()\r\n  }\r\n\r\n  #createStructure() {\r\n    // Clear existing content (except columns)\r\n    const columns = Array.from(this.querySelectorAll('ytz-datagrid-column'))\r\n    this.innerHTML = ''\r\n    columns.forEach(col => this.appendChild(col))\r\n\r\n    // Create header\r\n    this.#header = document.createElement('div')\r\n    this.#header.className = 'ytz-datagrid-header'\r\n    this.#header.setAttribute('role', 'row')\r\n    this.appendChild(this.#header)\r\n\r\n    // Create viewport for virtual scrolling\r\n    this.#viewport = document.createElement('div')\r\n    this.#viewport.className = 'ytz-datagrid-viewport'\r\n    this.appendChild(this.#viewport)\r\n\r\n    // Create body container\r\n    this.#body = document.createElement('div')\r\n    this.#body.className = 'ytz-datagrid-body'\r\n    this.#body.setAttribute('role', 'rowgroup')\r\n    this.#viewport.appendChild(this.#body)\r\n  }\r\n\r\n  #render() {\r\n    this.#renderHeader()\r\n    this.#applyFiltersAndSort()\r\n    this.#initVirtualScroller()\r\n  }\r\n\r\n  #renderHeader() {\r\n    if (!this.#header) return\r\n\r\n    this.#header.innerHTML = ''\r\n\r\n    this.#columns.forEach((col, index) => {\r\n      const cell = document.createElement('div')\r\n      cell.className = 'ytz-datagrid-header-cell'\r\n      cell.setAttribute('role', 'columnheader')\r\n      cell.setAttribute('data-field', col.field)\r\n\r\n      // Use stored width or fall back to column attribute\r\n      const storedWidth = this.#columnWidths.get(col.field)\r\n      if (storedWidth) {\r\n        cell.style.width = `${storedWidth}px`\r\n        cell.style.flex = 'none'\r\n      } else if (col.width && col.width !== 'auto') {\r\n        cell.style.width = col.width\r\n        cell.style.flex = 'none'\r\n      }\r\n\r\n      // Create content wrapper to keep text separate from resize handle\r\n      const content = document.createElement('span')\r\n      content.className = 'ytz-datagrid-header-content'\r\n      content.textContent = col.header\r\n      cell.appendChild(content)\r\n\r\n      if (col.sortable) {\r\n        cell.classList.add('ytz-datagrid-sortable')\r\n        cell.addEventListener('click', (e) => {\r\n          // Don't sort when clicking resize handle\r\n          if (e.target.classList.contains('ytz-datagrid-resize-handle')) return\r\n          this.#handleSort(col.field)\r\n        })\r\n\r\n        // Add sort indicator\r\n        const indicator = document.createElement('span')\r\n        indicator.className = 'ytz-datagrid-sort-indicator'\r\n        if (this.#sortState?.field === col.field) {\r\n          indicator.textContent = this.#sortState.direction === 'asc' ? ' \\u25B2' : ' \\u25BC'\r\n          cell.setAttribute('aria-sort', this.#sortState.direction === 'asc' ? 'ascending' : 'descending')\r\n        }\r\n        content.appendChild(indicator)\r\n      }\r\n\r\n      if (col.filterable) {\r\n        const input = document.createElement('input')\r\n        input.type = 'text'\r\n        input.className = 'ytz-datagrid-filter'\r\n        input.placeholder = `Filter ${col.header}...`\r\n        input.value = this.#filterState[col.field] || ''\r\n        input.addEventListener('input', (e) => {\r\n          this.#filterState[col.field] = e.target.value\r\n          this.#applyFiltersAndSort()\r\n          this.#initVirtualScroller()\r\n        })\r\n        input.addEventListener('click', (e) => e.stopPropagation())\r\n        cell.appendChild(input)\r\n      }\r\n\r\n      // Add resize handle\r\n      const resizeHandle = document.createElement('div')\r\n      resizeHandle.className = 'ytz-datagrid-resize-handle'\r\n      resizeHandle.addEventListener('mousedown', (e) => this.#handleResizeStart(e, col.field, cell))\r\n      cell.appendChild(resizeHandle)\r\n\r\n      this.#header.appendChild(cell)\r\n    })\r\n  }\r\n\r\n  #handleResizeStart(e, field, headerCell) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    const startX = e.clientX\r\n    const startWidth = headerCell.offsetWidth\r\n\r\n    this.#resizeState = { field, startX, startWidth, headerCell }\r\n\r\n    document.addEventListener('mousemove', this.#handleResizeMove)\r\n    document.addEventListener('mouseup', this.#handleResizeEnd)\r\n\r\n    // Add resizing class for visual feedback\r\n    this.classList.add('ytz-datagrid-resizing')\r\n  }\r\n\r\n  #handleResizeMove = (e) => {\r\n    if (!this.#resizeState) return\r\n\r\n    const { field, startX, startWidth, headerCell } = this.#resizeState\r\n    const delta = e.clientX - startX\r\n    const newWidth = Math.max(50, startWidth + delta) // Minimum 50px\r\n\r\n    // Update header cell width\r\n    headerCell.style.width = `${newWidth}px`\r\n    headerCell.style.flex = 'none'\r\n\r\n    // Update body cells width\r\n    this.#columnWidths.set(field, newWidth)\r\n    this.#updateBodyColumnWidths()\r\n  }\r\n\r\n  #handleResizeEnd = () => {\r\n    if (this.#resizeState) {\r\n      this.dispatchEvent(new CustomEvent('columnresize', {\r\n        bubbles: true,\r\n        detail: {\r\n          field: this.#resizeState.field,\r\n          width: this.#columnWidths.get(this.#resizeState.field)\r\n        }\r\n      }))\r\n    }\r\n\r\n    this.#resizeState = null\r\n    document.removeEventListener('mousemove', this.#handleResizeMove)\r\n    document.removeEventListener('mouseup', this.#handleResizeEnd)\r\n    this.classList.remove('ytz-datagrid-resizing')\r\n  }\r\n\r\n  /**\r\n   * Extract a numeric value from a string, handling currency, percentages, etc.\r\n   * @param {*} value - The value to parse\r\n   * @returns {number|null} - The numeric value or null if not parseable\r\n   */\r\n  #extractNumber(value) {\r\n    if (typeof value === 'number') return value\r\n    if (typeof value !== 'string') return null\r\n\r\n    // Remove currency symbols, commas, spaces, and percentage signs\r\n    const cleaned = value.replace(/[$,\\s%]/g, '')\r\n\r\n    // Check if it looks like a number (possibly negative, possibly decimal)\r\n    if (!/^-?\\d+\\.?\\d*$/.test(cleaned)) return null\r\n\r\n    const num = parseFloat(cleaned)\r\n    return isNaN(num) ? null : num\r\n  }\r\n\r\n  #updateBodyColumnWidths() {\r\n    const rows = this.querySelectorAll('.ytz-datagrid-row')\r\n    rows.forEach(row => {\r\n      this.#columns.forEach((col, colIndex) => {\r\n        const cell = row.querySelector(`[data-col-index=\"${colIndex}\"]`)\r\n        if (cell) {\r\n          const storedWidth = this.#columnWidths.get(col.field)\r\n          if (storedWidth) {\r\n            cell.style.width = `${storedWidth}px`\r\n            cell.style.flex = 'none'\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  #handleSort(field) {\r\n    if (this.#sortState?.field === field) {\r\n      if (this.#sortState.direction === 'asc') {\r\n        this.#sortState.direction = 'desc'\r\n      } else if (this.#sortState.direction === 'desc') {\r\n        this.#sortState = null\r\n      }\r\n    } else {\r\n      this.#sortState = { field, direction: 'asc' }\r\n    }\r\n\r\n    this.#applyFiltersAndSort()\r\n    this.#renderHeader()\r\n    this.#initVirtualScroller()\r\n\r\n    this.dispatchEvent(new CustomEvent('sort', {\r\n      bubbles: true,\r\n      detail: { ...this.#sortState }\r\n    }))\r\n  }\r\n\r\n  #applyFiltersAndSort() {\r\n    let result = [...this.#data]\r\n\r\n    // Apply filters\r\n    for (const [field, value] of Object.entries(this.#filterState)) {\r\n      if (value) {\r\n        const searchLower = value.toLowerCase()\r\n        result = result.filter(row => {\r\n          const cellValue = String(row[field] ?? '').toLowerCase()\r\n          return cellValue.includes(searchLower)\r\n        })\r\n      }\r\n    }\r\n\r\n    // Apply sort\r\n    if (this.#sortState) {\r\n      const { field, direction } = this.#sortState\r\n      result.sort((a, b) => {\r\n        const aVal = a[field] ?? ''\r\n        const bVal = b[field] ?? ''\r\n\r\n        // Try to extract numeric values (handles currency, percentages, etc.)\r\n        const aNum = this.#extractNumber(aVal)\r\n        const bNum = this.#extractNumber(bVal)\r\n\r\n        let cmp\r\n        if (aNum !== null && bNum !== null) {\r\n          // Both values are numeric - compare as numbers\r\n          cmp = aNum - bNum\r\n        } else {\r\n          // Fall back to string comparison\r\n          cmp = String(aVal).localeCompare(String(bVal), undefined, { numeric: true })\r\n        }\r\n\r\n        return direction === 'asc' ? cmp : -cmp\r\n      })\r\n    }\r\n\r\n    this.#filteredData = result\r\n  }\r\n\r\n  #initVirtualScroller() {\r\n    // Guard: ensure DOM structure is ready\r\n    if (!this.#viewport || !this.#body) return\r\n\r\n    this.#virtualScroller?.destroy()\r\n\r\n    const rowHeight = parseInt(this.getAttribute('row-height')) || 40\r\n\r\n    this.#virtualScroller = createVirtualScroller({\r\n      container: this.#viewport,\r\n      content: this.#body,\r\n      itemCount: this.#filteredData.length,\r\n      itemHeight: rowHeight,\r\n      renderItem: (index) => this.#renderRow(index)\r\n    })\r\n  }\r\n\r\n  #renderRow(index) {\r\n    const rowData = this.#filteredData[index]\r\n    if (!rowData) return null\r\n\r\n    const row = document.createElement('div')\r\n    row.className = 'ytz-datagrid-row'\r\n    row.setAttribute('role', 'row')\r\n    row.setAttribute('data-row-index', String(index))\r\n    row.tabIndex = -1\r\n\r\n    this.#columns.forEach((col, colIndex) => {\r\n      const cell = document.createElement('div')\r\n      cell.className = 'ytz-datagrid-cell'\r\n      cell.setAttribute('role', 'gridcell')\r\n\r\n      // Use stored width or fall back to column attribute\r\n      const storedWidth = this.#columnWidths.get(col.field)\r\n      if (storedWidth) {\r\n        cell.style.width = `${storedWidth}px`\r\n        cell.style.flex = 'none'\r\n      } else if (col.width && col.width !== 'auto') {\r\n        cell.style.width = col.width\r\n        cell.style.flex = 'none'\r\n      }\r\n\r\n      cell.textContent = String(rowData[col.field] ?? '')\r\n      cell.setAttribute('data-col-index', String(colIndex))\r\n      row.appendChild(cell)\r\n    })\r\n\r\n    row.addEventListener('click', (e) => {\r\n      this.#focusedRow = index\r\n      // Determine which cell was clicked\r\n      const cell = e.target.closest('.ytz-datagrid-cell')\r\n      if (cell) {\r\n        const colIndex = parseInt(cell.getAttribute('data-col-index'), 10)\r\n        if (!isNaN(colIndex)) {\r\n          this.#focusedCol = colIndex\r\n        }\r\n      }\r\n      this.#updateFocus()\r\n      this.dispatchEvent(new CustomEvent('rowselect', {\r\n        bubbles: true,\r\n        detail: { row: rowData, index }\r\n      }))\r\n    })\r\n\r\n    return row\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    const maxRow = this.#filteredData.length - 1\r\n    const maxCol = this.#columns.length - 1\r\n\r\n    switch (e.key) {\r\n      case 'ArrowDown':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.min(maxRow, this.#focusedRow + 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'ArrowUp':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.max(0, this.#focusedRow - 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'ArrowRight':\r\n        e.preventDefault()\r\n        this.#focusedCol = Math.min(maxCol, this.#focusedCol + 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'ArrowLeft':\r\n        e.preventDefault()\r\n        this.#focusedCol = Math.max(0, this.#focusedCol - 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'Home':\r\n        e.preventDefault()\r\n        if (e.ctrlKey) {\r\n          this.#focusedRow = 0\r\n        }\r\n        this.#focusedCol = 0\r\n        this.#updateFocus()\r\n        break\r\n      case 'End':\r\n        e.preventDefault()\r\n        if (e.ctrlKey) {\r\n          this.#focusedRow = maxRow\r\n        }\r\n        this.#focusedCol = maxCol\r\n        this.#updateFocus()\r\n        break\r\n      case 'PageDown':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.min(maxRow, this.#focusedRow + 10)\r\n        this.#updateFocus()\r\n        break\r\n      case 'PageUp':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.max(0, this.#focusedRow - 10)\r\n        this.#updateFocus()\r\n        break\r\n      case 'Enter':\r\n        e.preventDefault()\r\n        this.dispatchEvent(new CustomEvent('rowactivate', {\r\n          bubbles: true,\r\n          detail: { row: this.#filteredData[this.#focusedRow], index: this.#focusedRow }\r\n        }))\r\n        break\r\n    }\r\n  }\r\n\r\n  #updateFocus() {\r\n    // Scroll row into view via virtual scroller\r\n    this.#virtualScroller?.scrollToIndex(this.#focusedRow)\r\n\r\n    // Apply focus styling after any scroll-triggered re-render completes\r\n    // (scrollToIndex may trigger scroll event  RAF render that clears DOM)\r\n    requestAnimationFrame(() => {\r\n      this.#applyFocusStyling()\r\n    })\r\n  }\r\n\r\n  #applyFocusStyling() {\r\n    // Update row focus styling\r\n    this.querySelectorAll('.ytz-datagrid-row').forEach(row => {\r\n      row.classList.remove('ytz-datagrid-row-focused')\r\n    })\r\n\r\n    const targetRow = this.querySelector(`[data-row-index=\"${this.#focusedRow}\"]`)\r\n    targetRow?.classList.add('ytz-datagrid-row-focused')\r\n\r\n    // Update cell focus\r\n    this.querySelectorAll('.ytz-datagrid-cell').forEach(cell => {\r\n      cell.classList.remove('ytz-datagrid-cell-focused')\r\n    })\r\n\r\n    const targetCell = targetRow?.querySelector(`[data-col-index=\"${this.#focusedCol}\"]`)\r\n    targetCell?.classList.add('ytz-datagrid-cell-focused')\r\n  }\r\n\r\n  /**\r\n   * Export data to CSV format.\r\n   * @returns {string} CSV string\r\n   */\r\n  exportCSV() {\r\n    const headers = this.#columns.map(col => `\"${col.header.replace(/\"/g, '\"\"')}\"`)\r\n    const rows = this.#filteredData.map(row => {\r\n      return this.#columns.map(col => {\r\n        const value = String(row[col.field] ?? '')\r\n        return `\"${value.replace(/\"/g, '\"\"')}\"`\r\n      }).join(',')\r\n    })\r\n    return [headers.join(','), ...rows].join('\\n')\r\n  }\r\n\r\n  /**\r\n   * Download data as CSV file.\r\n   * @param {string} filename - File name (default: 'data.csv')\r\n   */\r\n  downloadCSV(filename = 'data.csv') {\r\n    const csv = this.exportCSV()\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' })\r\n    const url = URL.createObjectURL(blob)\r\n    const link = document.createElement('a')\r\n    link.href = url\r\n    link.download = filename\r\n    link.click()\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n  // Property accessors\r\n  get data() {\r\n    return this.#data\r\n  }\r\n\r\n  set data(value) {\r\n    this.#data = Array.isArray(value) ? value : []\r\n    this.#applyFiltersAndSort()\r\n    this.#initVirtualScroller()\r\n  }\r\n\r\n  get sortState() {\r\n    return this.#sortState ? { ...this.#sortState } : null\r\n  }\r\n\r\n  get filteredData() {\r\n    return [...this.#filteredData]\r\n  }\r\n}\r\n\r\nregister('ytz-datagrid', YtzDatagrid)\r\n\r\nexport { YtzDatagrid, YtzDatagridColumn }\r\n","/**\n * ytz-theme-toggle - Theme switching Web Component.\n * A toggle switch that controls light/dark theme with persistence.\n *\n * @module @grimoire/yetzirah-core/theme-toggle\n * @example\n * <ytz-theme-toggle></ytz-theme-toggle>\n *\n * @example\n * // With custom storage key\n * <ytz-theme-toggle storage-key=\"my-app-theme\"></ytz-theme-toggle>\n *\n * @example\n * // Without persistence\n * <ytz-theme-toggle no-persist></ytz-theme-toggle>\n */\n\nimport './toggle.js'\nimport { register } from './utils/register.js'\n\n/** @type {string} Default localStorage key */\nconst DEFAULT_STORAGE_KEY = 'yetzirah-theme'\n\n/** @type {string} CSS class applied to document for dark mode */\nconst DARK_CLASS = 'dark-mode'\n\n/** @type {string} Data attribute for theme */\nconst THEME_ATTR = 'data-theme'\n\n/**\n * @class YtzThemeToggle\n * @extends HTMLElement\n */\nclass YtzThemeToggle extends HTMLElement {\n  static observedAttributes = ['storage-key', 'no-persist']\n\n  /** @type {HTMLElement|null} */\n  #toggle = null\n\n  connectedCallback() {\n    this.#setup()\n    this.#initializeTheme()\n  }\n\n  disconnectedCallback() {\n    this.#toggle?.removeEventListener('change', this.#handleChange)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected && name === 'storage-key') {\n      this.#initializeTheme()\n    }\n  }\n\n  #setup() {\n    // Create inner toggle if not present\n    if (!this.#toggle) {\n      this.#toggle = document.createElement('ytz-toggle')\n      this.#toggle.setAttribute('aria-label', 'Toggle dark mode')\n\n      // Move existing children into toggle as label\n      while (this.firstChild) {\n        this.#toggle.appendChild(this.firstChild)\n      }\n\n      // Default label if no children provided\n      // Use hasChildNodes() instead of textContent to preserve element children like styling spans\n      if (!this.#toggle.hasChildNodes()) {\n        this.#toggle.textContent = 'Dark mode'\n      }\n\n      this.appendChild(this.#toggle)\n    }\n\n    this.#toggle.addEventListener('change', this.#handleChange)\n  }\n\n  #initializeTheme() {\n    const savedTheme = this.#loadTheme()\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches\n\n    // Determine initial theme: saved > system preference > light\n    const isDark = savedTheme === 'dark' || (savedTheme === null && prefersDark)\n\n    this.#applyTheme(isDark)\n    this.#updateToggle(isDark)\n\n    // Listen for system preference changes\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {\n      if (!this.#loadTheme()) {\n        // Only respond to system changes if no saved preference\n        this.#applyTheme(e.matches)\n        this.#updateToggle(e.matches)\n      }\n    })\n  }\n\n  #handleChange = (e) => {\n    const isDark = e.detail.checked\n    this.#applyTheme(isDark)\n    this.#saveTheme(isDark ? 'dark' : 'light')\n\n    this.dispatchEvent(new CustomEvent('themechange', {\n      bubbles: true,\n      detail: { theme: isDark ? 'dark' : 'light', isDark }\n    }))\n  }\n\n  #applyTheme(isDark) {\n    const root = document.documentElement\n\n    if (isDark) {\n      root.classList.add(DARK_CLASS)\n      root.setAttribute(THEME_ATTR, 'dark')\n    } else {\n      root.classList.remove(DARK_CLASS)\n      root.setAttribute(THEME_ATTR, 'light')\n    }\n  }\n\n  #updateToggle(isDark) {\n    if (!this.#toggle) return\n\n    if (isDark) {\n      this.#toggle.setAttribute('checked', '')\n    } else {\n      this.#toggle.removeAttribute('checked')\n    }\n  }\n\n  #loadTheme() {\n    if (this.hasAttribute('no-persist')) return null\n\n    try {\n      return localStorage.getItem(this.storageKey)\n    } catch {\n      // localStorage may be unavailable\n      return null\n    }\n  }\n\n  #saveTheme(theme) {\n    if (this.hasAttribute('no-persist')) return\n\n    try {\n      localStorage.setItem(this.storageKey, theme)\n    } catch {\n      // localStorage may be unavailable\n    }\n  }\n\n  /**\n   * Get the storage key for theme persistence.\n   * @type {string}\n   */\n  get storageKey() {\n    return this.getAttribute('storage-key') || DEFAULT_STORAGE_KEY\n  }\n\n  set storageKey(value) {\n    this.setAttribute('storage-key', value)\n  }\n\n  /**\n   * Get the current theme.\n   * @type {'light'|'dark'}\n   */\n  get theme() {\n    return document.documentElement.classList.contains(DARK_CLASS) ? 'dark' : 'light'\n  }\n\n  /**\n   * Set the theme programmatically.\n   * @param {'light'|'dark'} value\n   */\n  set theme(value) {\n    const isDark = value === 'dark'\n    this.#applyTheme(isDark)\n    this.#updateToggle(isDark)\n    this.#saveTheme(value)\n  }\n\n  /**\n   * Check if dark mode is active.\n   * @type {boolean}\n   */\n  get isDark() {\n    return this.theme === 'dark'\n  }\n\n  /**\n   * Toggle the theme.\n   */\n  toggle() {\n    this.theme = this.isDark ? 'light' : 'dark'\n  }\n}\n\nregister('ytz-theme-toggle', YtzThemeToggle)\n\nexport { YtzThemeToggle }\n","/**\r\n * @grimoire/yetzirah-core\r\n *\r\n * Web Components for behavioral UI patterns.\r\n * Zero dependencies, framework-agnostic, accessibility-first.\r\n *\r\n * @packageDocumentation\r\n */\r\n\r\n// Components\r\nexport { YtzAccordion, YtzAccordionItem } from './accordion.js'\r\nexport { YtzButton } from './button.js'\r\nexport { YtzDialog } from './dialog.js'\r\nexport { YtzDisclosure } from './disclosure.js'\r\nexport { YtzDrawer } from './drawer.js'\r\nexport { YtzTabs, YtzTab, YtzTabPanel } from './tabs.js'\r\nexport { YtzTooltip } from './tooltip.js'\r\nexport { YtzPopover } from './popover.js'\r\nexport { YtzMenu, YtzMenuItem } from './menu.js'\r\nexport { YtzAutocomplete, YtzOption } from './autocomplete.js'\r\nexport { YtzListbox } from './listbox.js'\r\nexport { YtzSelect } from './select.js'\r\nexport { YtzToggle } from './toggle.js'\r\nexport { YtzChip } from './chip.js'\r\nexport { YtzIconButton } from './icon-button.js'\r\nexport { YtzSlider } from './slider.js'\r\nexport { YtzDatagrid, YtzDatagridColumn } from './datagrid.js'\r\n\r\n/**\r\n * Yetzirah version\r\n * @type {string}\r\n */\r\nexport const VERSION = '0.1.0'\r\nexport { YtzThemeToggle } from './theme-toggle.js'\r\n"]}