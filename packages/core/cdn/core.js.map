{"version":3,"sources":["../src/utils/register.js","../src/accordion.js","../src/button.js","../src/utils/focus-trap.js","../src/dialog.js","../src/disclosure.js","../src/drawer.js","../src/utils/key-nav.js","../src/tabs.js","../src/utils/position.js","../src/tooltip.js","../src/popover.js","../src/utils/click-outside.js","../src/menu.js","../src/autocomplete.js","../src/listbox.js","../src/select.js","../src/toggle.js","../src/chip.js","../src/icon-button.js","../src/slider.js","../src/utils/virtual-scroll.js","../src/datagrid.js","../src/snackbar.js","../src/progress.js","../src/badge.js","../src/theme-toggle.js","../src/index.js"],"names":["register","name","constructor","accordionItemId","YtzAccordion","#handleItemToggle","value","e","openedItem","item","YtzAccordionItem","#trigger","#content","#contentId","#setup","#updateState","#handleClick","oldVal","newVal","isOpen","willOpen","ANCHOR_DEFAULTS","BUTTON_DEFAULTS","YtzButton","#render","href","userClass","isAnchor","el","defaults","attr","#contentCache","FOCUSABLE","createFocusTrap","container","handleKeydown","focusable","first","last","YtzDialog","#previousFocus","#focusTrap","#previousOverflow","#handleBackdropClick","#cleanup","#open","#close","#handleEscape","firstFocusable","disclosureId","YtzDisclosure","VALID_ANCHORS","YtzDrawer","createKeyNav","getItems","options","orientation","wrap","autoActivate","onActivate","prevKey","nextKey","items","currentIndex","newIndex","tabId","YtzTabs","#keyNav","#setupKeyNav","firstTab","#updateSelection","tab","panel","#handleKeyDown","isSelected","v","YtzTab","panelId","tabs","YtzTabPanel","#linkToTab","position","anchor","floating","placement","offset","anchorRect","floatingRect","viewport","x","y","finalPlacement","tooltipId","YtzTooltip","#showTimeout","#hideTimeout","#isVisible","#updatePosition","#handleMouseEnter","#handleMouseLeave","#handleContentMouseEnter","#handleFocusIn","#handleFocusOut","#handleTouchStart","#show","#hide","popoverId","YtzPopover","#handleTriggerClick","#handleOutsideClick","clickOutside","element","callback","ignore","handleClick","menuId","YtzMenu","#popup","#menuId","#clickOutsideHandler","#lastCloseTime","#showMenu","#hideMenu","focused","basePlacement","YtzMenuItem","menu","autocompleteId","YtzAutocomplete","#input","#listbox","#listboxId","#selected","#justClosed","#showListbox","#hideListbox","#updateLoadingState","val","#updateSelectedState","opt","#handleInput","#handleInputFocus","#handleInputKeyDown","#handleOptionClick","#filterOptions","firstOption","#selectOption","option","query","text","loadingSlot","label","disabled","YtzOption","listboxId","YtzListbox","#id","#updateDisabledState","#handleFocus","selected","selectId","YtzSelect","#customTrigger","#updateTriggerText","#handleTriggerKeyDown","#handleListboxKeyDown","o","YtzToggle","#handleKeydown","willCheck","YtzChip","#deleteButton","#handleDelete","DEFAULTS","YtzIconButton","#tooltipEl","#checkAccessibility","#removeTooltip","#showTooltip","#hideTooltip","button","isNew","#setupTooltip","rect","YtzSlider","#track","#thumb","#dragging","#updateDisplay","#handleMouseDown","#handleMouseMove","#handleMouseUp","#handleTouchMove","#handleTouchEnd","#handleTrackClick","step","bigStep","newValue","#dispatchChange","#updateValueFromPointer","touch","clientX","percent","range","num","createVirtualScroller","content","itemCount","itemHeight","renderItem","buffer","scrollTop","renderedRange","rafId","totalHeight","calculateVisibleRange","containerHeight","start","visibleCount","end","render","i","handleScroll","scrollToIndex","index","targetTop","currentScrollTop","destroy","refresh","newTotalHeight","YtzDatagridColumn","YtzDatagrid","#data","#filteredData","#columns","#sortState","#filterState","#virtualScroller","#header","#body","#viewport","#focusedRow","#focusedCol","#columnWidths","#resizeState","#handleResizeMove","#handleResizeEnd","#createStructure","columns","col","#renderHeader","#applyFiltersAndSort","#initVirtualScroller","cell","storedWidth","#handleSort","indicator","input","resizeHandle","#handleResizeStart","field","headerCell","startX","startWidth","delta","newWidth","#updateBodyColumnWidths","#extractNumber","cleaned","row","colIndex","result","searchLower","direction","a","b","aVal","bVal","aNum","bNum","cmp","rowHeight","#renderRow","rowData","#updateFocus","maxRow","maxCol","#applyFocusStyling","targetRow","headers","rows","filename","csv","blob","url","link","snackbarQueues","VALID_POSITIONS","YtzSnackbar","#dismissTimer","#closeButton","#isPaused","#pendingDismissReason","#setupCloseButton","reason","#removeFromQueue","#addToQueue","#handleClose","#clearTimer","#startTimer","pos","queue","#enforceMaxVisible","#updateOffsets","max","snackbar","height","message","closeBtn","CIRCLE_SIZE","CIRCLE_RADIUS","CIRCLE_CIRCUMFERENCE","YtzProgress","#circleTrack","#circleProgress","#linearTrack","#linearBar","#updateARIA","#updateProgress","#updateSize","#renderLinear","#renderCircular","svg","isIndeterminate","size","clamped","YtzBadge","#indicator","#createIndicator","#update","rawValue","isHidden","mode","displayValue","numValue","DEFAULT_STORAGE_KEY","DARK_CLASS","THEME_ATTR","YtzThemeToggle","#toggle","#initializeTheme","#handleChange","savedTheme","#loadTheme","prefersDark","isDark","#applyTheme","#updateToggle","#saveTheme","root","theme","VERSION"],"mappings":"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","file":"core.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-accordion - Coordinated disclosure container.\n * Manages multiple accordion items with optional exclusive mode.\n *\n * @module @grimoire/yetzirah-core/accordion\n * @example\n * <ytz-accordion>\n *   <ytz-accordion-item>\n *     <button>Section 1</button>\n *     <div>Content 1</div>\n *   </ytz-accordion-item>\n *   <ytz-accordion-item>\n *     <button>Section 2</button>\n *     <div>Content 2</div>\n *   </ytz-accordion-item>\n * </ytz-accordion>\n *\n * @example\n * // Exclusive mode - only one item open at a time\n * <ytz-accordion exclusive>\n *   <ytz-accordion-item open>...</ytz-accordion-item>\n *   <ytz-accordion-item>...</ytz-accordion-item>\n * </ytz-accordion>\n */\n\nimport { register } from './utils/register.js'\n\nlet accordionItemId = 0\n\n/**\n * @class YtzAccordion\n * @extends HTMLElement\n */\nclass YtzAccordion extends HTMLElement {\n  connectedCallback() {\n    this.addEventListener('toggle', this.#handleItemToggle)\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('toggle', this.#handleItemToggle)\n  }\n\n  /**\n   * Whether exclusive mode is enabled (only one item open at a time).\n   * @type {boolean}\n   */\n  get exclusive() {\n    return this.hasAttribute('exclusive')\n  }\n\n  set exclusive(value) {\n    if (value) {\n      this.setAttribute('exclusive', '')\n    } else {\n      this.removeAttribute('exclusive')\n    }\n  }\n\n  /**\n   * Get all accordion items.\n   * @returns {YtzAccordionItem[]}\n   */\n  get items() {\n    return Array.from(this.querySelectorAll(':scope > ytz-accordion-item'))\n  }\n\n  /**\n   * Handle toggle event from accordion item.\n   * In exclusive mode, close other items when one opens.\n   * @param {CustomEvent} e\n   */\n  #handleItemToggle = (e) => {\n    if (!this.exclusive || !e.detail.open) return\n\n    const openedItem = e.target\n    this.items.forEach(item => {\n      if (item !== openedItem && item.open) {\n        item.open = false\n      }\n    })\n  }\n}\n\n/**\n * ytz-accordion-item - Individual accordion panel.\n * Functions like ytz-disclosure but coordinates with parent accordion.\n *\n * @attr open - When present, content is visible\n *\n * @example\n * <ytz-accordion-item>\n *   <button>Toggle Section</button>\n *   <div>\n *     <div>Content goes here...</div>\n *   </div>\n * </ytz-accordion-item>\n */\nclass YtzAccordionItem extends HTMLElement {\n  static observedAttributes = ['open']\n\n  /** @type {HTMLElement|null} */\n  #trigger = null\n  /** @type {HTMLElement|null} */\n  #content = null\n  /** @type {string|null} */\n  #contentId = null\n\n  connectedCallback() {\n    this.#setup()\n    this.#updateState()\n  }\n\n  disconnectedCallback() {\n    this.#trigger?.removeEventListener('click', this.#handleClick)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (name === 'open' && this.isConnected) {\n      this.#updateState()\n    }\n  }\n\n  #setup() {\n    // Find trigger (first button) and content (next sibling element)\n    this.#trigger = this.querySelector('button')\n    this.#content = this.#trigger?.nextElementSibling\n\n    if (!this.#trigger || !this.#content) return\n\n    // Generate unique ID for content if needed\n    this.#contentId = this.#content.id || `ytz-accordion-content-${++accordionItemId}`\n    this.#content.id = this.#contentId\n\n    // Generate ID for trigger if needed (for aria-labelledby on content)\n    this.#trigger.id = this.#trigger.id || `ytz-accordion-trigger-${accordionItemId}`\n\n    // Set up ARIA attributes\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\n    this.#content.setAttribute('aria-labelledby', this.#trigger.id)\n    this.#content.setAttribute('role', 'region')\n\n    // Attach click listener\n    this.#trigger.addEventListener('click', this.#handleClick)\n  }\n\n  #handleClick = () => {\n    this.toggle()\n  }\n\n  #updateState() {\n    const isOpen = this.hasAttribute('open')\n\n    if (this.#trigger) {\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\n    }\n\n    if (this.#content) {\n      this.#content.hidden = !isOpen\n    }\n  }\n\n  /**\n   * Toggle the accordion item open/closed state.\n   * Dispatches a 'toggle' event with the new state.\n   */\n  toggle() {\n    const willOpen = !this.hasAttribute('open')\n\n    if (willOpen) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n\n    this.dispatchEvent(new CustomEvent('toggle', {\n      bubbles: true,\n      detail: { open: willOpen }\n    }))\n  }\n\n  /**\n   * Get/set the open state.\n   * @type {boolean}\n   */\n  get open() {\n    return this.hasAttribute('open')\n  }\n\n  set open(value) {\n    if (value) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n  }\n}\n\nregister('ytz-accordion', YtzAccordion)\nregister('ytz-accordion-item', YtzAccordionItem)\n\nexport { YtzAccordion, YtzAccordionItem }\n","/**\n * ytz-button - Polymorphic button/anchor Web Component.\n * Renders <a> when href provided, <button> otherwise.\n *\n * @module @grimoire/yetzirah-core/button\n * @example\n * // Link button\n * <ytz-button href=\"/dashboard\" class=\"ph3 pv2 br2 white bg-blue\">Dashboard</ytz-button>\n *\n * @example\n * // Action button\n * <ytz-button onclick=\"handleSubmit()\" class=\"ph3 pv2 br2 white bg-blue\">Submit</ytz-button>\n */\n\nimport { register } from './utils/register.js'\n\n/** @type {string} Default classes for anchor elements */\nconst ANCHOR_DEFAULTS = 'pointer font-inherit no-underline dib'\n\n/** @type {string} Default classes for button elements (no border reset - user controls borders) */\nconst BUTTON_DEFAULTS = 'pointer font-inherit bg-transparent'\n\n/**\n * @class YtzButton\n * @extends HTMLElement\n */\nclass YtzButton extends HTMLElement {\n  connectedCallback() {\n    this.#render()\n  }\n\n  static get observedAttributes() {\n    return ['href', 'disabled', 'type', 'class']\n  }\n\n  attributeChangedCallback() {\n    if (this.isConnected) this.#render()\n  }\n\n  #render() {\n    const href = this.getAttribute('href')\n    const userClass = this.getAttribute('class') || ''\n    const isAnchor = href != null\n\n    const el = document.createElement(isAnchor ? 'a' : 'button')\n    const defaults = isAnchor ? ANCHOR_DEFAULTS : BUTTON_DEFAULTS\n    el.className = defaults + (userClass ? ' ' + userClass : '')\n\n    if (isAnchor) {\n      el.href = href\n    } else {\n      el.type = this.getAttribute('type') || 'button'\n      if (this.hasAttribute('disabled')) el.disabled = true\n    }\n\n    // Copy aria-* and data-* attributes\n    for (const attr of this.attributes) {\n      if (attr.name.startsWith('aria-') || attr.name.startsWith('data-')) {\n        el.setAttribute(attr.name, attr.value)\n      }\n    }\n\n    el.innerHTML = this.#contentCache || this.innerHTML\n    this.#contentCache = el.innerHTML\n\n    this.replaceChildren(el)\n  }\n\n  /** @type {string|null} Cache innerHTML to preserve across re-renders */\n  #contentCache = null\n}\n\nregister('ytz-button', YtzButton)\n\nexport { YtzButton }\n","/**\n * Focus trap utility for modals/dialogs.\n * Keeps focus within a container element.\n *\n * @module @grimoire/yetzirah-core/utils/focus-trap\n * @internal Not exported from package\n */\n\n/** @type {string} Selector for focusable elements */\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\n\n/**\n * Creates a focus trap for a container element.\n *\n * @param {HTMLElement} container - Element to trap focus within\n * @returns {{ activate: () => void, deactivate: () => void }}\n */\nexport function createFocusTrap(container) {\n  /** @param {KeyboardEvent} e */\n  function handleKeydown(e) {\n    if (e.key !== 'Tab') return\n\n    const focusable = [...container.querySelectorAll(FOCUSABLE)]\n      .filter(el => !el.hidden && !el.closest('[hidden]')) // visible only\n\n    if (focusable.length === 0) return\n\n    const first = focusable[0]\n    const last = focusable[focusable.length - 1]\n\n    if (e.shiftKey && document.activeElement === first) {\n      e.preventDefault()\n      last.focus()\n    } else if (!e.shiftKey && document.activeElement === last) {\n      e.preventDefault()\n      first.focus()\n    }\n  }\n\n  return {\n    activate() {\n      container.addEventListener('keydown', handleKeydown)\n    },\n    deactivate() {\n      container.removeEventListener('keydown', handleKeydown)\n    }\n  }\n}\n","/**\n * ytz-dialog - Modal dialog Web Component.\n * Provides focus trap, scroll lock, escape-to-close, and backdrop dismiss.\n *\n * @module @grimoire/yetzirah-core/dialog\n * @example\n * <ytz-dialog id=\"my-dialog\" class=\"pa4 bg-white br3 shadow-2\">\n *   <h2>Dialog Title</h2>\n *   <p>Content goes here.</p>\n *   <button onclick=\"this.closest('ytz-dialog').removeAttribute('open')\">Close</button>\n * </ytz-dialog>\n *\n * @example\n * // Open dialog\n * document.getElementById('my-dialog').setAttribute('open', '')\n *\n * @example\n * // Static dialog (no backdrop dismiss)\n * <ytz-dialog static>...</ytz-dialog>\n */\n\nimport { createFocusTrap } from './utils/focus-trap.js'\nimport { register } from './utils/register.js'\n\n/** @type {string} Selector for focusable elements */\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\n\n/**\n * @class YtzDialog\n * @extends HTMLElement\n */\nclass YtzDialog extends HTMLElement {\n  static observedAttributes = ['open']\n\n  /** @type {HTMLElement|null} */\n  #previousFocus = null\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\n  #focusTrap = null\n  /** @type {string} */\n  #previousOverflow = ''\n\n  connectedCallback() {\n    this.setAttribute('role', 'dialog')\n    this.setAttribute('aria-modal', 'true')\n    this.hidden = !this.hasAttribute('open')\n\n    // Set up backdrop click handler\n    this.addEventListener('click', this.#handleBackdropClick)\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('click', this.#handleBackdropClick)\n    this.#cleanup()\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (name === 'open' && this.isConnected) {\n      newVal !== null ? this.#open() : this.#close()\n    }\n  }\n\n  #open() {\n    // Save current focus for restoration\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\n\n    // Show dialog\n    this.hidden = false\n\n    // Lock body scroll\n    this.#previousOverflow = document.body.style.overflow\n    document.body.style.overflow = 'hidden'\n\n    // Set up focus trap\n    this.#focusTrap = createFocusTrap(this)\n    this.#focusTrap.activate()\n\n    // Add escape key listener\n    document.addEventListener('keydown', this.#handleEscape)\n\n    // Focus first focusable element (or dialog itself)\n    requestAnimationFrame(() => {\n      const firstFocusable = this.querySelector(FOCUSABLE)\n      if (firstFocusable) {\n        /** @type {HTMLElement} */ (firstFocusable).focus()\n      } else {\n        this.setAttribute('tabindex', '-1')\n        this.focus()\n      }\n    })\n  }\n\n  #close() {\n    this.hidden = true\n    this.#cleanup()\n\n    // Dispatch close event\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\n  }\n\n  #cleanup() {\n    // Restore body scroll\n    document.body.style.overflow = this.#previousOverflow\n\n    // Deactivate focus trap\n    this.#focusTrap?.deactivate()\n    this.#focusTrap = null\n\n    // Remove escape listener\n    document.removeEventListener('keydown', this.#handleEscape)\n\n    // Restore focus\n    this.#previousFocus?.focus()\n    this.#previousFocus = null\n  }\n\n  /** @param {KeyboardEvent} e */\n  #handleEscape = (e) => {\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\n      e.preventDefault()\n      this.removeAttribute('open')\n    }\n  }\n\n  /** @param {MouseEvent} e */\n  #handleBackdropClick = (e) => {\n    // Only close if clicking directly on dialog element (backdrop), not children\n    if (e.target === this && !this.hasAttribute('static')) {\n      this.removeAttribute('open')\n    }\n  }\n\n  /**\n   * Get/set the open state.\n   * @type {boolean}\n   */\n  get open() {\n    return this.hasAttribute('open')\n  }\n\n  set open(value) {\n    if (value) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n  }\n\n  /**\n   * Close the dialog programmatically.\n   */\n  close() {\n    this.removeAttribute('open')\n  }\n\n  /**\n   * Show the dialog programmatically.\n   */\n  showModal() {\n    this.setAttribute('open', '')\n  }\n}\n\nregister('ytz-dialog', YtzDialog)\n\nexport { YtzDialog }\n","/**\n * ytz-disclosure - Expandable content Web Component.\n * Toggles content visibility with proper ARIA attributes.\n *\n * @module @grimoire/yetzirah-core/disclosure\n * @example\n * <ytz-disclosure>\n *   <button>Show Details</button>\n *   <div>Hidden content...</div>\n * </ytz-disclosure>\n *\n * @example\n * // Initially open\n * <ytz-disclosure open>\n *   <button>Hide Details</button>\n *   <div>Visible content...</div>\n * </ytz-disclosure>\n */\n\nimport { register } from './utils/register.js'\n\nlet disclosureId = 0\n\n/**\n * @class YtzDisclosure\n * @extends HTMLElement\n */\nclass YtzDisclosure extends HTMLElement {\n  static observedAttributes = ['open']\n\n  /** @type {HTMLElement|null} */\n  #trigger = null\n  /** @type {HTMLElement|null} */\n  #content = null\n  /** @type {string|null} */\n  #contentId = null\n\n  connectedCallback() {\n    this.#setup()\n    this.#updateState()\n  }\n\n  disconnectedCallback() {\n    this.#trigger?.removeEventListener('click', this.#handleClick)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (name === 'open' && this.isConnected) {\n      this.#updateState()\n    }\n  }\n\n  #setup() {\n    // Find trigger (first button) and content (next sibling element)\n    this.#trigger = this.querySelector('button')\n    this.#content = this.#trigger?.nextElementSibling\n\n    if (!this.#trigger || !this.#content) return\n\n    // Generate unique ID for content if needed\n    this.#contentId = this.#content.id || `ytz-disclosure-${++disclosureId}`\n    this.#content.id = this.#contentId\n\n    // Set up ARIA linkage\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\n\n    // Attach click listener\n    this.#trigger.addEventListener('click', this.#handleClick)\n  }\n\n  #handleClick = () => {\n    this.toggle()\n  }\n\n  #updateState() {\n    const isOpen = this.hasAttribute('open')\n\n    if (this.#trigger) {\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\n    }\n\n    if (this.#content) {\n      this.#content.hidden = !isOpen\n    }\n  }\n\n  /**\n   * Toggle the disclosure open/closed state.\n   * Dispatches a 'toggle' event with the new state.\n   */\n  toggle() {\n    const willOpen = !this.hasAttribute('open')\n\n    if (willOpen) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n\n    this.dispatchEvent(new CustomEvent('toggle', {\n      bubbles: true,\n      detail: { open: willOpen }\n    }))\n  }\n\n  /**\n   * Get/set the open state.\n   * @type {boolean}\n   */\n  get open() {\n    return this.hasAttribute('open')\n  }\n\n  set open(value) {\n    if (value) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n  }\n}\n\nregister('ytz-disclosure', YtzDisclosure)\n\nexport { YtzDisclosure }\n","/**\n * ytz-drawer - Slide-in panel Web Component.\n * Inherits modal behavior: focus trap, scroll lock, escape-to-close, backdrop dismiss.\n *\n * @module @grimoire/yetzirah-core/drawer\n * @example\n * <ytz-drawer id=\"menu\" anchor=\"left\" class=\"w5 h-100 bg-white shadow-2\">\n *   <nav class=\"pa4\">\n *     <a href=\"/home\">Home</a>\n *   </nav>\n *   <button onclick=\"this.closest('ytz-drawer').close()\">Close</button>\n * </ytz-drawer>\n *\n * @example\n * // Open drawer\n * document.getElementById('menu').open = true\n *\n * @example\n * // Different anchors\n * <ytz-drawer anchor=\"right\">...</ytz-drawer>\n * <ytz-drawer anchor=\"top\">...</ytz-drawer>\n * <ytz-drawer anchor=\"bottom\">...</ytz-drawer>\n */\n\nimport { createFocusTrap } from './utils/focus-trap.js'\nimport { register } from './utils/register.js'\n\n/** @type {string} Selector for focusable elements */\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\n\n/** @type {string[]} Valid anchor positions */\nconst VALID_ANCHORS = ['left', 'right', 'top', 'bottom']\n\n/**\n * @class YtzDrawer\n * @extends HTMLElement\n */\nclass YtzDrawer extends HTMLElement {\n  static observedAttributes = ['open', 'anchor']\n\n  /** @type {HTMLElement|null} */\n  #previousFocus = null\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\n  #focusTrap = null\n  /** @type {string} */\n  #previousOverflow = ''\n\n  connectedCallback() {\n    this.setAttribute('role', 'dialog')\n    this.setAttribute('aria-modal', 'true')\n    this.hidden = !this.hasAttribute('open')\n\n    if (!this.hasAttribute('anchor')) {\n      this.setAttribute('anchor', 'left')\n    }\n\n    this.addEventListener('click', this.#handleBackdropClick)\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('click', this.#handleBackdropClick)\n    this.#cleanup()\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (name === 'open' && this.isConnected) {\n      newVal !== null ? this.#open() : this.#close()\n    }\n    if (name === 'anchor' && newVal && !VALID_ANCHORS.includes(newVal)) {\n      this.setAttribute('anchor', 'left')\n    }\n  }\n\n  #open() {\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\n    this.hidden = false\n    this.#previousOverflow = document.body.style.overflow\n    document.body.style.overflow = 'hidden'\n    this.#focusTrap = createFocusTrap(this)\n    this.#focusTrap.activate()\n    document.addEventListener('keydown', this.#handleEscape)\n\n    requestAnimationFrame(() => {\n      const firstFocusable = this.querySelector(FOCUSABLE)\n      if (firstFocusable) {\n        /** @type {HTMLElement} */ (firstFocusable).focus()\n      } else {\n        this.setAttribute('tabindex', '-1')\n        this.focus()\n      }\n    })\n  }\n\n  #close() {\n    this.hidden = true\n    this.#cleanup()\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\n  }\n\n  #cleanup() {\n    document.body.style.overflow = this.#previousOverflow\n    this.#focusTrap?.deactivate()\n    this.#focusTrap = null\n    document.removeEventListener('keydown', this.#handleEscape)\n    this.#previousFocus?.focus()\n    this.#previousFocus = null\n  }\n\n  /** @param {KeyboardEvent} e */\n  #handleEscape = (e) => {\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\n      e.preventDefault()\n      this.removeAttribute('open')\n    }\n  }\n\n  /** @param {MouseEvent} e */\n  #handleBackdropClick = (e) => {\n    if (e.target === this && !this.hasAttribute('static')) {\n      this.removeAttribute('open')\n    }\n  }\n\n  /** @type {boolean} */\n  get open() {\n    return this.hasAttribute('open')\n  }\n\n  set open(value) {\n    value ? this.setAttribute('open', '') : this.removeAttribute('open')\n  }\n\n  /** @type {'left'|'right'|'top'|'bottom'} */\n  get anchor() {\n    return /** @type {'left'|'right'|'top'|'bottom'} */ (this.getAttribute('anchor') || 'left')\n  }\n\n  set anchor(value) {\n    if (VALID_ANCHORS.includes(value)) this.setAttribute('anchor', value)\n  }\n\n  /** Close the drawer programmatically. */\n  close() {\n    this.removeAttribute('open')\n  }\n\n  /** Show the drawer programmatically. */\n  show() {\n    this.setAttribute('open', '')\n  }\n}\n\nregister('ytz-drawer', YtzDrawer)\n\nexport { YtzDrawer }\n","/**\n * Keyboard navigation utility for arrow key navigation.\n * @module @grimoire/yetzirah-core/utils/key-nav\n * @internal Not exported from package\n */\n\n/**\n * Creates keyboard navigation for a set of elements.\n * @param {() => HTMLElement[]} getItems - Function returning navigable elements\n * @param {Object} options\n * @param {'horizontal'|'vertical'} [options.orientation='horizontal']\n * @param {boolean} [options.wrap=true]\n * @param {boolean} [options.autoActivate=true]\n * @param {(item: HTMLElement) => void} [options.onActivate]\n * @returns {{ handleKeyDown: (e: KeyboardEvent) => void }}\n */\nexport function createKeyNav(getItems, options = {}) {\n  const { orientation = 'horizontal', wrap = true, autoActivate = true, onActivate } = options\n  const prevKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\n  const nextKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\n\n  return {\n    handleKeyDown(e) {\n      const items = getItems()\n      const currentIndex = items.indexOf(document.activeElement)\n      if (currentIndex === -1) return\n\n      let newIndex = currentIndex\n      if (e.key === prevKey) {\n        newIndex = currentIndex - 1\n        if (newIndex < 0) newIndex = wrap ? items.length - 1 : 0\n      } else if (e.key === nextKey) {\n        newIndex = currentIndex + 1\n        if (newIndex >= items.length) newIndex = wrap ? 0 : items.length - 1\n      } else if (e.key === 'Home') {\n        newIndex = 0\n      } else if (e.key === 'End') {\n        newIndex = items.length - 1\n      } else {\n        return\n      }\n\n      e.preventDefault()\n      items[newIndex].focus()\n      if (autoActivate && onActivate) onActivate(items[newIndex])\n    }\n  }\n}\n","/**\n * ytz-tabs - Tabbed interface Web Components.\n * @module @grimoire/yetzirah-core/tabs\n * @example\n * <ytz-tabs>\n *   <ytz-tab panel=\"tab1\">Account</ytz-tab>\n *   <ytz-tabpanel id=\"tab1\">Account content</ytz-tabpanel>\n * </ytz-tabs>\n */\n\nimport { createKeyNav } from './utils/key-nav.js'\nimport { register } from './utils/register.js'\n\nlet tabId = 0\n\n/** @class YtzTabs */\nclass YtzTabs extends HTMLElement {\n  static observedAttributes = ['value', 'orientation']\n  #keyNav = null\n\n  connectedCallback() {\n    this.setAttribute('role', 'tablist')\n    this.#setupKeyNav()\n    if (!this.hasAttribute('value')) {\n      const firstTab = this.querySelector('ytz-tab')\n      if (firstTab?.getAttribute('panel')) {\n        this.setAttribute('value', firstTab.getAttribute('panel'))\n      }\n    }\n    this.#updateSelection()\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n    if (name === 'value' && oldVal !== newVal) {\n      this.#updateSelection()\n      if (oldVal !== null) {\n        this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: newVal } }))\n      }\n    }\n    if (name === 'orientation') this.#setupKeyNav()\n  }\n\n  #setupKeyNav() {\n    const orientation = this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\n    this.#keyNav = createKeyNav(\n      () => [...this.querySelectorAll('ytz-tab')],\n      {\n        orientation,\n        wrap: true,\n        autoActivate: true,\n        onActivate: (tab) => {\n          const panel = tab.getAttribute('panel')\n          if (panel) this.value = panel\n        }\n      }\n    )\n    this.addEventListener('keydown', this.#handleKeyDown)\n  }\n\n  #handleKeyDown = (e) => this.#keyNav?.handleKeyDown(e)\n\n  #updateSelection() {\n    const value = this.getAttribute('value')\n    this.querySelectorAll('ytz-tab').forEach((tab) => {\n      const isSelected = tab.getAttribute('panel') === value\n      tab.setAttribute('aria-selected', String(isSelected))\n      tab.setAttribute('tabindex', isSelected ? '0' : '-1')\n    })\n    this.querySelectorAll('ytz-tabpanel').forEach((panel) => {\n      panel.hidden = panel.id !== value\n    })\n  }\n\n  get value() { return this.getAttribute('value') }\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\n\n  get orientation() {\n    return this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\n  }\n  set orientation(v) { this.setAttribute('orientation', v) }\n}\n\n/** @class YtzTab */\nclass YtzTab extends HTMLElement {\n  connectedCallback() {\n    this.setAttribute('role', 'tab')\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '-1')\n    if (!this.id) this.id = `ytz-tab-${++tabId}`\n    const panelId = this.getAttribute('panel')\n    if (panelId) this.setAttribute('aria-controls', panelId)\n    this.addEventListener('click', this.#handleClick)\n  }\n\n  disconnectedCallback() { this.removeEventListener('click', this.#handleClick) }\n\n  #handleClick = () => {\n    const tabs = this.closest('ytz-tabs')\n    const panel = this.getAttribute('panel')\n    if (tabs && panel) tabs.value = panel\n  }\n\n  get panel() { return this.getAttribute('panel') }\n  set panel(v) {\n    if (v) {\n      this.setAttribute('panel', v)\n      this.setAttribute('aria-controls', v)\n    } else {\n      this.removeAttribute('panel')\n      this.removeAttribute('aria-controls')\n    }\n  }\n}\n\n/** @class YtzTabPanel */\nclass YtzTabPanel extends HTMLElement {\n  connectedCallback() {\n    this.setAttribute('role', 'tabpanel')\n    const tabs = this.closest('ytz-tabs')\n    if (tabs) {\n      this.hidden = this.id !== tabs.getAttribute('value')\n    } else {\n      this.hidden = true\n    }\n    this.#linkToTab()\n  }\n\n  #linkToTab() {\n    const tabs = this.closest('ytz-tabs')\n    if (!tabs || !this.id) return\n    const tab = tabs.querySelector(`ytz-tab[panel=\"${this.id}\"]`)\n    if (tab) {\n      if (!tab.id) tab.id = `ytz-tab-${++tabId}`\n      this.setAttribute('aria-labelledby', tab.id)\n    }\n  }\n}\n\nregister('ytz-tabs', YtzTabs)\nregister('ytz-tab', YtzTab)\nregister('ytz-tabpanel', YtzTabPanel)\n\nexport { YtzTabs, YtzTab, YtzTabPanel }\n","/**\n * Position utility for tooltips, menus, popovers.\n * Places an element relative to an anchor with flip/shift logic.\n *\n * @module @grimoire/yetzirah-core/utils/position\n * @internal Not exported from package\n *\n * Limitations (by design):\n * - Does not handle nested scroll containers\n * - Does not support virtual elements\n * - No middleware system\n */\n\n/**\n * Position a floating element relative to an anchor.\n *\n * @param {HTMLElement} anchor - Element to position relative to\n * @param {HTMLElement} floating - Element to position\n * @param {Object} [options] - Positioning options\n * @param {'top'|'bottom'|'left'|'right'} [options.placement='top'] - Preferred placement\n * @param {number} [options.offset=8] - Gap between anchor and floating element\n * @returns {{ x: number, y: number, placement: string }}\n */\nexport function position(anchor, floating, options = {}) {\n  const { placement = 'top', offset = 8 } = options\n\n  const anchorRect = anchor.getBoundingClientRect()\n  const floatingRect = floating.getBoundingClientRect()\n  const viewport = { width: window.innerWidth, height: window.innerHeight }\n\n  let x, y\n  let finalPlacement = placement\n\n  // Calculate position based on placement\n  switch (placement) {\n    case 'top':\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\n      y = anchorRect.top - floatingRect.height - offset\n      break\n    case 'bottom':\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\n      y = anchorRect.bottom + offset\n      break\n    case 'left':\n      x = anchorRect.left - floatingRect.width - offset\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\n      break\n    case 'right':\n      x = anchorRect.right + offset\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\n      break\n  }\n\n  // Flip if outside viewport\n  if (placement === 'top' && y < 0) {\n    y = anchorRect.bottom + offset\n    finalPlacement = 'bottom'\n  } else if (placement === 'bottom' && y + floatingRect.height > viewport.height) {\n    y = anchorRect.top - floatingRect.height - offset\n    finalPlacement = 'top'\n  } else if (placement === 'left' && x < 0) {\n    x = anchorRect.right + offset\n    finalPlacement = 'right'\n  } else if (placement === 'right' && x + floatingRect.width > viewport.width) {\n    x = anchorRect.left - floatingRect.width - offset\n    finalPlacement = 'left'\n  }\n\n  // Shift to stay in viewport\n  if (finalPlacement === 'top' || finalPlacement === 'bottom') {\n    x = Math.max(0, Math.min(x, viewport.width - floatingRect.width))\n  } else {\n    y = Math.max(0, Math.min(y, viewport.height - floatingRect.height))\n  }\n\n  return { x, y, placement: finalPlacement }\n}\n","/**\n * ytz-tooltip - Positioned hint text Web Component.\n * Shows on hover/focus with configurable delay and placement.\n *\n * @module @grimoire/yetzirah-core/tooltip\n * @example\n * <ytz-tooltip>\n *   <button>Hover me</button>\n *   <span slot=\"content\">Tooltip text</span>\n * </ytz-tooltip>\n *\n * @example\n * // With placement and delay\n * <ytz-tooltip placement=\"bottom\" delay=\"200\">\n *   <button>Hover me</button>\n *   <span slot=\"content\">Bottom tooltip</span>\n * </ytz-tooltip>\n */\n\nimport { position } from './utils/position.js'\nimport { register } from './utils/register.js'\n\nlet tooltipId = 0\n\n/**\n * @class YtzTooltip\n * @extends HTMLElement\n */\nclass YtzTooltip extends HTMLElement {\n  static observedAttributes = ['placement', 'delay', 'offset']\n\n  /** @type {HTMLElement|null} */\n  #trigger = null\n  /** @type {HTMLElement|null} */\n  #content = null\n  /** @type {string|null} */\n  #contentId = null\n  /** @type {number|null} */\n  #showTimeout = null\n  /** @type {number|null} */\n  #hideTimeout = null\n  /** @type {boolean} */\n  #isVisible = false\n\n  connectedCallback() {\n    this.#setup()\n  }\n\n  disconnectedCallback() {\n    this.#cleanup()\n    clearTimeout(this.#showTimeout)\n    clearTimeout(this.#hideTimeout)\n  }\n\n  attributeChangedCallback() {\n    if (this.#isVisible) this.#updatePosition()\n  }\n\n  /** @returns {'top'|'bottom'|'left'|'right'} */\n  get placement() {\n    return this.getAttribute('placement') || 'top'\n  }\n\n  /** @param {'top'|'bottom'|'left'|'right'} value */\n  set placement(value) {\n    if (value) {\n      this.setAttribute('placement', value)\n    } else {\n      this.removeAttribute('placement')\n    }\n  }\n\n  /** @returns {number} */\n  get delay() {\n    return parseInt(this.getAttribute('delay') || '0', 10)\n  }\n\n  /** @param {number} value */\n  set delay(value) {\n    if (value != null) {\n      this.setAttribute('delay', String(value))\n    } else {\n      this.removeAttribute('delay')\n    }\n  }\n\n  /** @returns {number} */\n  get offset() {\n    return parseInt(this.getAttribute('offset') || '8', 10)\n  }\n\n  /** @param {number} value */\n  set offset(value) {\n    if (value != null) {\n      this.setAttribute('offset', String(value))\n    } else {\n      this.removeAttribute('offset')\n    }\n  }\n\n  #setup() {\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\n    this.#trigger = this.firstElementChild\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\n\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\n\n    // Generate unique ID for content\n    this.#contentId = this.#content.id || `ytz-tooltip-${++tooltipId}`\n    this.#content.id = this.#contentId\n\n    // Set up ARIA\n    this.#trigger.setAttribute('aria-describedby', this.#contentId)\n    this.#content.setAttribute('role', 'tooltip')\n    this.#content.hidden = true\n\n    // Hover listeners\n    this.#trigger.addEventListener('mouseenter', this.#handleMouseEnter)\n    this.#trigger.addEventListener('mouseleave', this.#handleMouseLeave)\n    this.#content.addEventListener('mouseenter', this.#handleContentMouseEnter)\n    this.#content.addEventListener('mouseleave', this.#handleMouseLeave)\n\n    // Focus listeners\n    this.#trigger.addEventListener('focusin', this.#handleFocusIn)\n    this.#trigger.addEventListener('focusout', this.#handleFocusOut)\n\n    // Touch support\n    this.#trigger.addEventListener('touchstart', this.#handleTouchStart, { passive: true })\n  }\n\n  #cleanup() {\n    this.#trigger?.removeEventListener('mouseenter', this.#handleMouseEnter)\n    this.#trigger?.removeEventListener('mouseleave', this.#handleMouseLeave)\n    this.#content?.removeEventListener('mouseenter', this.#handleContentMouseEnter)\n    this.#content?.removeEventListener('mouseleave', this.#handleMouseLeave)\n    this.#trigger?.removeEventListener('focusin', this.#handleFocusIn)\n    this.#trigger?.removeEventListener('focusout', this.#handleFocusOut)\n    this.#trigger?.removeEventListener('touchstart', this.#handleTouchStart)\n  }\n\n  #handleMouseEnter = () => {\n    clearTimeout(this.#hideTimeout)\n    this.#showTimeout = setTimeout(() => this.#show(), this.delay)\n  }\n\n  #handleMouseLeave = () => {\n    clearTimeout(this.#showTimeout)\n    this.#hideTimeout = setTimeout(() => this.#hide(), 100)\n  }\n\n  #handleContentMouseEnter = () => {\n    clearTimeout(this.#hideTimeout)\n  }\n\n  #handleFocusIn = () => {\n    clearTimeout(this.#hideTimeout)\n    this.#show() // No delay for focus (accessibility)\n  }\n\n  #handleFocusOut = () => {\n    this.#hide()\n  }\n\n  #handleTouchStart = () => {\n    if (this.#isVisible) {\n      this.#hide()\n    } else {\n      this.#show()\n    }\n  }\n\n  #show() {\n    if (!this.#content || this.#isVisible) return\n\n    this.#content.hidden = false\n    this.#isVisible = true\n    this.#updatePosition()\n\n    // Listen for scroll/resize to reposition\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\n\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\n  }\n\n  #hide() {\n    if (!this.#content || !this.#isVisible) return\n\n    this.#content.hidden = true\n    this.#isVisible = false\n\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\n    window.removeEventListener('resize', this.#updatePosition)\n\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\n  }\n\n  #updatePosition = () => {\n    if (!this.#trigger || !this.#content) return\n\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\n      placement: this.placement,\n      offset: this.offset\n    })\n\n    // Position tooltip fixed relative to viewport\n    this.#content.style.position = 'fixed'\n    this.#content.style.left = `${x}px`\n    this.#content.style.top = `${y}px`\n\n    // Set data attribute for CSS arrow styling\n    this.#content.dataset.placement = finalPlacement\n  }\n\n  // Public API\n\n  /** Show the tooltip programmatically */\n  show() {\n    clearTimeout(this.#hideTimeout)\n    this.#show()\n  }\n\n  /** Hide the tooltip programmatically */\n  hide() {\n    clearTimeout(this.#showTimeout)\n    this.#hide()\n  }\n}\n\nregister('ytz-tooltip', YtzTooltip)\n\nexport { YtzTooltip }\n","/**\n * ytz-popover - Click-triggered positioned content Web Component.\n * Shows interactive content anchored to a trigger element.\n *\n * @module @grimoire/yetzirah-core/popover\n * @example\n * <ytz-popover>\n *   <button>Open menu</button>\n *   <div slot=\"content\">\n *     <p>Popover content with interactive elements</p>\n *     <button onclick=\"this.closest('ytz-popover').open = false\">Close</button>\n *   </div>\n * </ytz-popover>\n *\n * @example\n * // With placement\n * <ytz-popover placement=\"bottom\">\n *   <button>Settings</button>\n *   <div slot=\"content\" class=\"pa3 bg-white shadow-2 br2\">\n *     <label class=\"db mb2\">\n *       <input type=\"checkbox\"> Enable notifications\n *     </label>\n *     <button>Save</button>\n *   </div>\n * </ytz-popover>\n */\n\nimport { position } from './utils/position.js'\nimport { register } from './utils/register.js'\n\nlet popoverId = 0\n\n/** @type {string} Selector for focusable elements */\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\n\n/**\n * @class YtzPopover\n * @extends HTMLElement\n */\nclass YtzPopover extends HTMLElement {\n  static observedAttributes = ['open', 'placement', 'offset']\n\n  /** @type {HTMLElement|null} */\n  #trigger = null\n  /** @type {HTMLElement|null} */\n  #content = null\n  /** @type {string|null} */\n  #contentId = null\n\n  connectedCallback() {\n    this.#setup()\n    // Check initial open state\n    if (this.hasAttribute('open')) {\n      this.#show()\n    }\n  }\n\n  disconnectedCallback() {\n    this.#cleanup()\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n\n    if (name === 'open') {\n      newVal !== null ? this.#show() : this.#hide()\n    } else if (this.hasAttribute('open')) {\n      // Reposition if placement/offset changed while open\n      this.#updatePosition()\n    }\n  }\n\n  /** @returns {'top'|'bottom'|'left'|'right'} */\n  get placement() {\n    return this.getAttribute('placement') || 'bottom'\n  }\n\n  set placement(value) {\n    this.setAttribute('placement', value)\n  }\n\n  /** @returns {number} */\n  get offset() {\n    return parseInt(this.getAttribute('offset') || '8', 10)\n  }\n\n  set offset(value) {\n    this.setAttribute('offset', String(value))\n  }\n\n  /** @returns {boolean} */\n  get open() {\n    return this.hasAttribute('open')\n  }\n\n  set open(value) {\n    if (value) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n  }\n\n  #setup() {\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\n    this.#trigger = this.firstElementChild\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\n\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\n\n    // Generate unique ID for content\n    this.#contentId = this.#content.id || `ytz-popover-${++popoverId}`\n    this.#content.id = this.#contentId\n\n    // Set up ARIA - popover uses aria-expanded on trigger\n    this.#trigger.setAttribute('aria-haspopup', 'dialog')\n    this.#trigger.setAttribute('aria-expanded', 'false')\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\n\n    // Content hidden initially\n    this.#content.hidden = true\n\n    // Click listener on trigger\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\n  }\n\n  #cleanup() {\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\n    document.removeEventListener('click', this.#handleOutsideClick)\n    document.removeEventListener('keydown', this.#handleEscape)\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\n    window.removeEventListener('resize', this.#updatePosition)\n  }\n\n  #handleTriggerClick = (e) => {\n    e.stopPropagation()\n    this.open = !this.open\n  }\n\n  #handleOutsideClick = (e) => {\n    // Close if click is outside popover content and trigger\n    if (!this.#content?.contains(e.target) && !this.#trigger?.contains(e.target)) {\n      this.open = false\n    }\n  }\n\n  #handleEscape = (e) => {\n    if (e.key === 'Escape' && this.open) {\n      e.preventDefault()\n      this.open = false\n      // Return focus to trigger\n      this.#trigger?.focus()\n    }\n  }\n\n  #show() {\n    if (!this.#content) return\n\n    // Update ARIA\n    this.#trigger?.setAttribute('aria-expanded', 'true')\n\n    // Show content\n    this.#content.hidden = false\n    this.#updatePosition()\n\n    // Add listeners for dismiss\n    // Use setTimeout to avoid immediate close from the same click\n    setTimeout(() => {\n      document.addEventListener('click', this.#handleOutsideClick)\n    }, 0)\n    document.addEventListener('keydown', this.#handleEscape)\n\n    // Reposition on scroll/resize\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\n\n    // Focus first focusable element in content\n    requestAnimationFrame(() => {\n      const focusable = this.#content?.querySelector(FOCUSABLE)\n      if (focusable) {\n        /** @type {HTMLElement} */ (focusable).focus()\n      }\n    })\n\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\n  }\n\n  #hide() {\n    if (!this.#content) return\n\n    // Update ARIA\n    this.#trigger?.setAttribute('aria-expanded', 'false')\n\n    // Hide content\n    this.#content.hidden = true\n\n    // Remove listeners\n    document.removeEventListener('click', this.#handleOutsideClick)\n    document.removeEventListener('keydown', this.#handleEscape)\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\n    window.removeEventListener('resize', this.#updatePosition)\n\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\n  }\n\n  #updatePosition = () => {\n    if (!this.#trigger || !this.#content) return\n\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\n      placement: this.placement,\n      offset: this.offset\n    })\n\n    // Position popover fixed relative to viewport\n    this.#content.style.position = 'fixed'\n    this.#content.style.left = `${x}px`\n    this.#content.style.top = `${y}px`\n\n    // Set data attribute for CSS styling based on actual placement\n    this.#content.dataset.placement = finalPlacement\n  }\n\n  // Public API\n\n  /** Show the popover programmatically */\n  show() {\n    this.open = true\n  }\n\n  /** Hide the popover programmatically */\n  hide() {\n    this.open = false\n  }\n\n  /** Toggle the popover open/closed */\n  toggle() {\n    this.open = !this.open\n  }\n}\n\nregister('ytz-popover', YtzPopover)\n\nexport { YtzPopover }\n","/**\n * Click outside utility for dismissing popups.\n * @module @grimoire/yetzirah-core/utils/click-outside\n * @internal Not exported from package\n */\n\n/**\n * Creates a click outside listener.\n * @param {HTMLElement} element - Element to detect clicks outside of\n * @param {Function} callback - Called when click outside occurs\n * @param {Object} [options]\n * @param {HTMLElement} [options.ignore] - Additional element to ignore clicks on (e.g., trigger)\n * @returns {{ destroy: () => void }}\n */\nexport function clickOutside(element, callback, options = {}) {\n  const { ignore } = options\n\n  const handleClick = (e) => {\n    if (element.contains(e.target)) return\n    if (ignore && ignore.contains(e.target)) return\n    callback(e)\n  }\n\n  // Use capture to catch clicks before they're stopped\n  document.addEventListener('click', handleClick, true)\n\n  return {\n    destroy() {\n      document.removeEventListener('click', handleClick, true)\n    }\n  }\n}\n","/**\n * ytz-menu - Dropdown menu with keyboard navigation.\n * Opens on trigger click, positions relative to trigger, closes on click outside/escape.\n *\n * @module @grimoire/yetzirah-core/menu\n * @example\n * <ytz-menu>\n *   <button slot=\"trigger\">Open Menu</button>\n *   <ytz-menuitem>Edit</ytz-menuitem>\n *   <ytz-menuitem>Delete</ytz-menuitem>\n * </ytz-menu>\n *\n * @example\n * <ytz-menu placement=\"bottom-start\">\n *   <button slot=\"trigger\">Actions</button>\n *   <ytz-menuitem value=\"edit\">Edit</ytz-menuitem>\n *   <ytz-menuitem disabled>Archive</ytz-menuitem>\n * </ytz-menu>\n */\n\nimport { position } from './utils/position.js'\nimport { createKeyNav } from './utils/key-nav.js'\nimport { clickOutside } from './utils/click-outside.js'\nimport { register } from './utils/register.js'\n\nlet menuId = 0\n\n/**\n * @class YtzMenu\n * @extends HTMLElement\n */\nclass YtzMenu extends HTMLElement {\n  static observedAttributes = ['open', 'placement']\n\n  /** @type {HTMLElement|null} */\n  #trigger = null\n  /** @type {HTMLElement|null} */\n  #popup = null\n  /** @type {string|null} */\n  #menuId = null\n  /** @type {ReturnType<typeof createKeyNav>|null} */\n  #keyNav = null\n  /** @type {ReturnType<typeof clickOutside>|null} */\n  #clickOutsideHandler = null\n  /** @type {number} */\n  #lastCloseTime = 0\n\n  connectedCallback() {\n    this.#setup()\n  }\n\n  disconnectedCallback() {\n    this.#cleanup()\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n    if (name === 'open') {\n      newVal !== null ? this.#showMenu() : this.#hideMenu()\n    }\n  }\n\n  /** @returns {boolean} */\n  get open() { return this.hasAttribute('open') }\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\n\n  /** @returns {string} */\n  get placement() { return this.getAttribute('placement') || 'bottom-start' }\n  set placement(v) { v ? this.setAttribute('placement', v) : this.removeAttribute('placement') }\n\n  #setup() {\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\n    if (!this.#trigger) return\n\n    this.#menuId = `ytz-menu-${++menuId}`\n\n    // Create popup wrapper for menu items\n    this.#popup = document.createElement('div')\n    this.#popup.setAttribute('role', 'menu')\n    this.#popup.id = this.#menuId\n    this.#popup.hidden = true\n\n    // Move all menuitem children into popup\n    const items = [...this.querySelectorAll('ytz-menuitem')]\n    items.forEach(item => this.#popup.appendChild(item))\n    this.appendChild(this.#popup)\n\n    // ARIA on trigger\n    this.#trigger.setAttribute('aria-haspopup', 'menu')\n    this.#trigger.setAttribute('aria-controls', this.#menuId)\n    this.#trigger.setAttribute('aria-expanded', 'false')\n\n    // Keyboard navigation\n    this.#keyNav = createKeyNav(\n      () => [...this.#popup.querySelectorAll('ytz-menuitem:not([disabled])')],\n      { orientation: 'vertical', wrap: true, autoActivate: false }\n    )\n\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\n    this.addEventListener('keydown', this.#handleKeyDown)\n  }\n\n  #cleanup() {\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\n    this.removeEventListener('keydown', this.#handleKeyDown)\n    this.#clickOutsideHandler?.destroy()\n  }\n\n  #handleTriggerClick = () => { this.open = !this.open }\n\n  #handleKeyDown = (e) => {\n    if (!this.open) return\n\n    if (e.key === 'Escape') {\n      e.preventDefault()\n      this.open = false\n      this.#trigger?.focus()\n      return\n    }\n\n    this.#keyNav?.handleKeyDown(e)\n\n    if (e.key === 'Enter' || e.key === ' ') {\n      const focused = this.#popup?.querySelector('ytz-menuitem:focus')\n      if (focused && !focused.hasAttribute('disabled')) {\n        e.preventDefault()\n        focused.click()\n      }\n    }\n  }\n\n  #showMenu() {\n    if (!this.#trigger || !this.#popup) return\n    // Prevent re-opening if we just closed (e.g., click-outside + toggle in same event)\n    if (performance.now() - this.#lastCloseTime < 10) {\n      // Remove attribute to keep state consistent since we're blocking the open\n      this.removeAttribute('open')\n      return\n    }\n\n    // Pre-position as fixed but invisible to get correct layout\n    this.#popup.style.position = 'fixed'\n    this.#popup.style.visibility = 'hidden'\n    this.#popup.hidden = false\n\n    // Force synchronous reflow so popup has layout dimensions\n    void this.#popup.offsetHeight\n\n    // Calculate and apply position\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\n    const { x, y } = position(this.#trigger, this.#popup, {\n      placement: basePlacement,\n      offset: 4\n    })\n    this.#popup.style.left = `${x}px`\n    this.#popup.style.top = `${y}px`\n\n    // Now make visible\n    this.#popup.style.visibility = ''\n    this.#trigger.setAttribute('aria-expanded', 'true')\n\n    const firstItem = this.#popup.querySelector('ytz-menuitem:not([disabled])')\n    firstItem?.focus()\n\n    // Defer click-outside setup to next event loop tick to avoid triggering on same click\n    setTimeout(() => {\n      // Only set up if still open (user might have closed it already)\n      if (!this.open) return\n      this.#clickOutsideHandler = clickOutside(this.#popup, () => {\n        this.open = false\n      }, { ignore: this.#trigger })\n    }, 0)\n\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\n\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\n  }\n\n  #hideMenu() {\n    if (!this.#trigger || !this.#popup) return\n\n    // Record close time to prevent re-opening in the same event\n    this.#lastCloseTime = performance.now()\n\n    this.#popup.hidden = true\n    this.#trigger.setAttribute('aria-expanded', 'false')\n\n    this.#clickOutsideHandler?.destroy()\n    this.#clickOutsideHandler = null\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\n    window.removeEventListener('resize', this.#updatePosition)\n\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\n  }\n\n  #updatePosition = () => {\n    if (!this.#trigger || !this.#popup) return\n\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\n    const { x, y } = position(this.#trigger, this.#popup, {\n      placement: basePlacement,\n      offset: 4\n    })\n\n    this.#popup.style.position = 'fixed'\n    this.#popup.style.left = `${x}px`\n    this.#popup.style.top = `${y}px`\n  }\n\n  show() { this.open = true }\n  hide() { this.open = false }\n  toggle() { this.open = !this.open }\n}\n\n/**\n * ytz-menuitem - Individual menu item.\n * @attr disabled - When present, item is not selectable\n * @attr value - Optional value for select event\n */\nclass YtzMenuItem extends HTMLElement {\n  connectedCallback() {\n    this.setAttribute('role', 'menuitem')\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\n      this.setAttribute('tabindex', '-1')\n    }\n    if (this.hasAttribute('disabled')) {\n      this.setAttribute('aria-disabled', 'true')\n    }\n    this.addEventListener('click', this.#handleClick)\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('click', this.#handleClick)\n  }\n\n  #handleClick = (e) => {\n    if (this.hasAttribute('disabled')) {\n      e.preventDefault()\n      e.stopPropagation()\n      return\n    }\n\n    const menu = this.closest('ytz-menu')\n    if (menu) {\n      this.dispatchEvent(new CustomEvent('select', {\n        bubbles: true,\n        detail: { value: this.getAttribute('value') || this.textContent?.trim() }\n      }))\n      menu.open = false\n    }\n  }\n\n  /** @returns {boolean} */\n  get disabled() { return this.hasAttribute('disabled') }\n  set disabled(v) {\n    if (v) {\n      this.setAttribute('disabled', '')\n      this.setAttribute('aria-disabled', 'true')\n      this.removeAttribute('tabindex')\n    } else {\n      this.removeAttribute('disabled')\n      this.removeAttribute('aria-disabled')\n      this.setAttribute('tabindex', '-1')\n    }\n  }\n\n  /** @returns {string|null} */\n  get value() { return this.getAttribute('value') }\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\n}\n\nregister('ytz-menu', YtzMenu)\nregister('ytz-menuitem', YtzMenuItem)\n\nexport { YtzMenu, YtzMenuItem }\n","/**\n * ytz-autocomplete - Text input with filterable dropdown selection.\n * Supports single and multi-select modes with async loading.\n *\n * @module @grimoire/yetzirah-core/autocomplete\n * @example\n * <ytz-autocomplete>\n *   <input slot=\"input\" placeholder=\"Search...\">\n *   <ytz-option value=\"apple\">Apple</ytz-option>\n *   <ytz-option value=\"banana\">Banana</ytz-option>\n * </ytz-autocomplete>\n *\n * @example\n * // Multi-select mode\n * <ytz-autocomplete multiple>\n *   <input slot=\"input\" placeholder=\"Select...\">\n *   <ytz-option value=\"a\">Option A</ytz-option>\n *   <ytz-option value=\"b\">Option B</ytz-option>\n * </ytz-autocomplete>\n */\n\nimport { position } from './utils/position.js'\nimport { createKeyNav } from './utils/key-nav.js'\nimport { clickOutside } from './utils/click-outside.js'\nimport { register } from './utils/register.js'\n\nlet autocompleteId = 0\n\n/**\n * @class YtzAutocomplete\n * @extends HTMLElement\n */\nclass YtzAutocomplete extends HTMLElement {\n  static observedAttributes = ['open', 'multiple', 'loading']\n\n  /** @type {HTMLInputElement|null} */\n  #input = null\n  /** @type {HTMLElement|null} */\n  #listbox = null\n  /** @type {string|null} */\n  #listboxId = null\n  /** @type {ReturnType<typeof createKeyNav>|null} */\n  #keyNav = null\n  /** @type {ReturnType<typeof clickOutside>|null} */\n  #clickOutsideHandler = null\n  /** @type {Set<string>} */\n  #selected = new Set()\n  /** @type {boolean} - Flag to prevent focus from re-opening after selection */\n  #justClosed = false\n\n  connectedCallback() {\n    this.#setup()\n  }\n\n  disconnectedCallback() {\n    this.#cleanup()\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n    if (name === 'open') {\n      newVal !== null ? this.#showListbox() : this.#hideListbox()\n    }\n    if (name === 'loading') {\n      this.#updateLoadingState()\n    }\n  }\n\n  /** @returns {boolean} */\n  get open() { return this.hasAttribute('open') }\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\n\n  /** @returns {boolean} */\n  get multiple() { return this.hasAttribute('multiple') }\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\n\n  /** @returns {boolean} */\n  get loading() { return this.hasAttribute('loading') }\n  set loading(v) { v ? this.setAttribute('loading', '') : this.removeAttribute('loading') }\n\n  /** @returns {boolean} */\n  get filter() { return this.getAttribute('filter') !== 'false' }\n  set filter(v) { this.setAttribute('filter', (v && v !== 'false') ? 'true' : 'false') }\n\n  /** @returns {string|string[]} */\n  get value() {\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\n  }\n  set value(v) {\n    this.#selected.clear()\n    if (Array.isArray(v)) {\n      v.forEach(val => this.#selected.add(val))\n    } else if (v) {\n      this.#selected.add(v)\n    }\n    this.#updateSelectedState()\n  }\n\n  /** @returns {string} */\n  get inputValue() { return this.#input?.value || '' }\n  set inputValue(v) { if (this.#input) this.#input.value = v }\n\n  #setup() {\n    this.#input = this.querySelector('[slot=\"input\"]') || this.querySelector('input')\n    if (!this.#input) return\n\n    this.#listboxId = `ytz-autocomplete-${++autocompleteId}`\n\n    // Create listbox wrapper\n    this.#listbox = document.createElement('div')\n    this.#listbox.setAttribute('role', 'listbox')\n    this.#listbox.id = this.#listboxId\n    this.#listbox.hidden = true\n    if (this.multiple) {\n      this.#listbox.setAttribute('aria-multiselectable', 'true')\n    }\n\n    // Move option children into listbox\n    const options = [...this.querySelectorAll('ytz-option')]\n    options.forEach(opt => this.#listbox.appendChild(opt))\n    this.appendChild(this.#listbox)\n\n    // ARIA on input\n    this.#input.setAttribute('role', 'combobox')\n    this.#input.setAttribute('aria-autocomplete', 'list')\n    this.#input.setAttribute('aria-controls', this.#listboxId)\n    this.#input.setAttribute('aria-expanded', 'false')\n    this.#input.setAttribute('aria-haspopup', 'listbox')\n\n    // Keyboard navigation\n    this.#keyNav = createKeyNav(\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([hidden]):not([disabled])')],\n      { orientation: 'vertical', wrap: true, autoActivate: false }\n    )\n\n    this.#input.addEventListener('input', this.#handleInput)\n    this.#input.addEventListener('focus', this.#handleInputFocus)\n    this.#input.addEventListener('keydown', this.#handleInputKeyDown)\n    this.addEventListener('keydown', this.#handleKeyDown)\n    this.addEventListener('option-click', this.#handleOptionClick)\n\n    // Read initial selected state from HTML\n    this.#listbox.querySelectorAll('ytz-option[selected]').forEach(opt => {\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\n      if (value) this.#selected.add(value)\n    })\n    this.#updateSelectedState()\n\n    // Initialize loading slot visibility\n    this.#updateLoadingState()\n  }\n\n  #cleanup() {\n    this.#input?.removeEventListener('input', this.#handleInput)\n    this.#input?.removeEventListener('focus', this.#handleInputFocus)\n    this.#input?.removeEventListener('keydown', this.#handleInputKeyDown)\n    this.removeEventListener('keydown', this.#handleKeyDown)\n    this.removeEventListener('option-click', this.#handleOptionClick)\n    this.#clickOutsideHandler?.destroy()\n  }\n\n  #handleInput = () => {\n    if (!this.open) this.open = true\n    if (this.filter) this.#filterOptions()\n    this.dispatchEvent(new CustomEvent('input-change', {\n      bubbles: true,\n      detail: { value: this.#input.value }\n    }))\n  }\n\n  #handleInputFocus = () => {\n    // Don't re-open if we just closed from a selection\n    if (this.#justClosed) {\n      this.#justClosed = false\n      return\n    }\n    const hasOptions = this.#listbox?.querySelector('ytz-option:not([hidden])')\n    if (hasOptions && !this.loading) this.open = true\n  }\n\n  #handleInputKeyDown = (e) => {\n    if (e.key === 'ArrowDown') {\n      e.preventDefault()\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\n      if (!this.open) this.open = true\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\n      firstOption?.focus()\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault()\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\n      if (!this.open) this.open = true\n      const options = this.#listbox?.querySelectorAll('ytz-option:not([hidden]):not([disabled])')\n      options?.[options.length - 1]?.focus()\n    } else if (e.key === 'Escape' && this.open) {\n      e.preventDefault()\n      e.stopPropagation()\n      this.open = false\n    } else if (e.key === 'Enter' && this.open) {\n      // Select first visible option on Enter from input\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\n      if (firstOption) {\n        e.preventDefault()\n        this.#selectOption(firstOption)\n      }\n    }\n  }\n\n  #handleKeyDown = (e) => {\n    if (!this.open) return\n\n    if (e.key === 'Escape') {\n      e.preventDefault()\n      this.open = false\n      this.#input?.focus()\n      return\n    }\n\n    // Handle navigation when option is focused\n    if (document.activeElement?.tagName === 'YTZ-OPTION') {\n      this.#keyNav?.handleKeyDown(e)\n\n      if (e.key === 'Enter' || e.key === ' ') {\n        const focused = this.#listbox?.querySelector('ytz-option:focus')\n        if (focused && !focused.hasAttribute('disabled')) {\n          e.preventDefault()\n          this.#selectOption(focused)\n        }\n      }\n\n      if (e.key === 'Tab') {\n        e.preventDefault()\n        this.#input?.focus()\n      }\n    }\n  }\n\n  #handleOptionClick = (e) => {\n    const option = e.detail?.option\n    if (option && !option.hasAttribute('disabled')) {\n      this.#selectOption(option)\n    }\n  }\n\n  #selectOption(option) {\n    const value = option.getAttribute('value') || option.textContent?.trim()\n    if (!value) return\n\n    if (this.multiple) {\n      if (this.#selected.has(value)) {\n        this.#selected.delete(value)\n      } else {\n        this.#selected.add(value)\n      }\n    } else {\n      this.#selected.clear()\n      this.#selected.add(value)\n      this.#input.value = option.textContent?.trim() || value\n      this.#justClosed = true // Prevent focus from re-opening\n      this.open = false\n      this.#input?.focus()\n    }\n\n    this.#updateSelectedState()\n\n    this.dispatchEvent(new CustomEvent('change', {\n      bubbles: true,\n      detail: { value: this.value, option }\n    }))\n  }\n\n  #updateSelectedState() {\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\n    options.forEach(opt => {\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\n      const isSelected = this.#selected.has(value)\n      opt.toggleAttribute('selected', isSelected)\n      opt.setAttribute('aria-selected', String(isSelected))\n    })\n  }\n\n  #filterOptions() {\n    const query = this.#input?.value.toLowerCase() || ''\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\n\n    options.forEach(opt => {\n      const text = opt.textContent?.toLowerCase() || ''\n      opt.hidden = !text.includes(query)\n    })\n  }\n\n  #showListbox() {\n    if (!this.#input || !this.#listbox) return\n\n    this.#listbox.hidden = false\n    this.#input.setAttribute('aria-expanded', 'true')\n    this.#updatePosition()\n\n    this.#clickOutsideHandler = clickOutside(this, () => {\n      this.open = false\n    })\n\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\n\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\n  }\n\n  #hideListbox() {\n    if (!this.#input || !this.#listbox) return\n\n    this.#listbox.hidden = true\n    this.#input.setAttribute('aria-expanded', 'false')\n\n    this.#clickOutsideHandler?.destroy()\n    this.#clickOutsideHandler = null\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\n    window.removeEventListener('resize', this.#updatePosition)\n\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\n  }\n\n  #updatePosition = () => {\n    if (!this.#input || !this.#listbox) return\n\n    const { x, y } = position(this.#input, this.#listbox, {\n      placement: 'bottom',\n      offset: 4\n    })\n\n    this.#listbox.style.position = 'fixed'\n    this.#listbox.style.left = `${x}px`\n    this.#listbox.style.top = `${y}px`\n    this.#listbox.style.minWidth = `${this.#input.offsetWidth}px`\n  }\n\n  #updateLoadingState() {\n    const loadingSlot = this.querySelector('[slot=\"loading\"]')\n    if (loadingSlot) {\n      loadingSlot.hidden = !this.loading\n    }\n  }\n\n  show() { this.open = true }\n  hide() { this.open = false }\n  toggle() { this.open = !this.open }\n\n  clear() {\n    this.#selected.clear()\n    this.#updateSelectedState()\n    if (this.#input) this.#input.value = ''\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\n  }\n\n  /**\n   * Add options programmatically.\n   * @param {Array<{value: string, label: string, disabled?: boolean}>} options\n   */\n  setOptions(options) {\n    if (!this.#listbox) return\n    this.#listbox.innerHTML = ''\n    options.forEach(({ value, label, disabled }) => {\n      const opt = document.createElement('ytz-option')\n      opt.setAttribute('value', value)\n      opt.textContent = label\n      if (disabled) opt.setAttribute('disabled', '')\n      this.#listbox.appendChild(opt)\n    })\n    this.#updateSelectedState()\n  }\n}\n\n/**\n * ytz-option - Individual option in autocomplete.\n * @attr value - Option value\n * @attr disabled - When present, option is not selectable\n * @attr selected - When present, option is selected\n */\nclass YtzOption extends HTMLElement {\n  connectedCallback() {\n    this.setAttribute('role', 'option')\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\n      this.setAttribute('tabindex', '-1')\n    }\n    if (this.hasAttribute('disabled')) {\n      this.setAttribute('aria-disabled', 'true')\n    }\n    this.setAttribute('aria-selected', this.hasAttribute('selected') ? 'true' : 'false')\n    this.addEventListener('click', this.#handleClick)\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('click', this.#handleClick)\n  }\n\n  #handleClick = (e) => {\n    if (this.hasAttribute('disabled')) {\n      e.preventDefault()\n      e.stopPropagation()\n      return\n    }\n    this.dispatchEvent(new CustomEvent('option-click', {\n      bubbles: true,\n      detail: { option: this }\n    }))\n  }\n\n  /** @returns {boolean} */\n  get disabled() { return this.hasAttribute('disabled') }\n  set disabled(v) {\n    if (v) {\n      this.setAttribute('disabled', '')\n      this.setAttribute('aria-disabled', 'true')\n      this.removeAttribute('tabindex')\n    } else {\n      this.removeAttribute('disabled')\n      this.removeAttribute('aria-disabled')\n      this.setAttribute('tabindex', '-1')\n    }\n  }\n\n  /** @returns {boolean} */\n  get selected() { return this.hasAttribute('selected') }\n  set selected(v) {\n    v ? this.setAttribute('selected', '') : this.removeAttribute('selected')\n    this.setAttribute('aria-selected', String(v))\n  }\n\n  /** @returns {string|null} */\n  get value() { return this.getAttribute('value') }\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\n}\n\nregister('ytz-autocomplete', YtzAutocomplete)\nregister('ytz-option', YtzOption)\n\nexport { YtzAutocomplete, YtzOption }\n","/**\n * ytz-listbox - Keyboard-navigable list selection with single/multi-select modes.\n * @module @grimoire/yetzirah-core/listbox\n */\n\nimport { createKeyNav } from './utils/key-nav.js'\nimport { register } from './utils/register.js'\n\nlet listboxId = 0\n\nclass YtzListbox extends HTMLElement {\n  static observedAttributes = ['multiple', 'disabled']\n  #keyNav = null\n  #selected = new Set()\n  #id = null\n\n  connectedCallback() { this.#setup() }\n  disconnectedCallback() { this.#cleanup() }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n    if (name === 'multiple') this.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\n    if (name === 'disabled') this.#updateDisabledState()\n  }\n\n  get multiple() { return this.hasAttribute('multiple') }\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\n\n  get disabled() { return this.hasAttribute('disabled') }\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\n\n  get value() {\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\n  }\n  set value(v) {\n    this.#selected.clear()\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\n    else if (v) this.#selected.add(v)\n    this.#updateSelectedState()\n  }\n\n  get options() { return [...this.querySelectorAll('ytz-option')] }\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\n\n  #setup() {\n    this.#id = `ytz-listbox-${++listboxId}`\n    if (!this.id) this.id = this.#id\n    this.setAttribute('role', 'listbox')\n    if (this.multiple) this.setAttribute('aria-multiselectable', 'true')\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '0')\n\n    this.#keyNav = createKeyNav(\n      () => [...this.querySelectorAll('ytz-option:not([disabled])')],\n      { orientation: 'vertical', wrap: true, autoActivate: false }\n    )\n\n    this.addEventListener('keydown', this.#handleKeyDown)\n    this.addEventListener('option-click', this.#handleOptionClick)\n    this.addEventListener('focus', this.#handleFocus)\n\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\n      if (value) this.#selected.add(value)\n    })\n    this.#updateSelectedState()\n  }\n\n  #cleanup() {\n    this.removeEventListener('keydown', this.#handleKeyDown)\n    this.removeEventListener('option-click', this.#handleOptionClick)\n    this.removeEventListener('focus', this.#handleFocus)\n  }\n\n  #handleFocus = () => {\n    const selected = this.querySelector('ytz-option[selected]:not([disabled])')\n    const first = this.querySelector('ytz-option:not([disabled])')\n    ;(selected || first)?.focus()\n  }\n\n  #handleKeyDown = (e) => {\n    if (this.disabled) return\n    this.#keyNav?.handleKeyDown(e)\n    if (e.key === 'Enter' || e.key === ' ') {\n      const focused = this.querySelector('ytz-option:focus')\n      if (focused && !focused.hasAttribute('disabled')) {\n        e.preventDefault()\n        this.#selectOption(focused)\n      }\n    }\n  }\n\n  #handleOptionClick = (e) => {\n    if (this.disabled) return\n    const option = e.detail?.option\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\n  }\n\n  #selectOption(option) {\n    const value = option.getAttribute('value') || option.textContent?.trim()\n    if (!value) return\n\n    if (this.multiple) {\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\n    } else {\n      this.#selected.clear()\n      this.#selected.add(value)\n    }\n    this.#updateSelectedState()\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\n  }\n\n  #updateSelectedState() {\n    this.querySelectorAll('ytz-option').forEach(opt => {\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\n      const isSelected = this.#selected.has(value)\n      opt.toggleAttribute('selected', isSelected)\n      opt.setAttribute('aria-selected', String(isSelected))\n    })\n  }\n\n  #updateDisabledState() {\n    if (this.disabled) {\n      this.setAttribute('aria-disabled', 'true')\n      this.removeAttribute('tabindex')\n    } else {\n      this.removeAttribute('aria-disabled')\n      this.setAttribute('tabindex', '0')\n    }\n  }\n\n  clear() {\n    this.#selected.clear()\n    this.#updateSelectedState()\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\n  }\n\n  selectAll() {\n    if (!this.multiple) return\n    this.querySelectorAll('ytz-option:not([disabled])').forEach(opt => {\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\n      if (value) this.#selected.add(value)\n    })\n    this.#updateSelectedState()\n  }\n}\n\nregister('ytz-listbox', YtzListbox)\n\nexport { YtzListbox }\n","/**\n * ytz-select - Dropdown select with trigger button and listbox.\n * @module @grimoire/yetzirah-core/select\n */\nimport { position } from './utils/position.js'\nimport { createKeyNav } from './utils/key-nav.js'\nimport { register } from './utils/register.js'\n\nlet selectId = 0\n\nclass YtzSelect extends HTMLElement {\n  static observedAttributes = ['open', 'multiple', 'disabled', 'placeholder']\n  #trigger = null\n  #listbox = null\n  #keyNav = null\n  #selected = new Set()\n  #id = null\n  #customTrigger = false\n\n  connectedCallback() {\n    this.#setup()\n    if (this.hasAttribute('open')) this.#show()\n    if (this.disabled) this.#updateDisabledState()\n  }\n  disconnectedCallback() { this.#cleanup() }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n    if (name === 'open') newVal !== null ? this.#show() : this.#hide()\n    if (name === 'multiple') this.#listbox?.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\n    if (name === 'disabled') this.#updateDisabledState()\n  }\n\n  get open() { return this.hasAttribute('open') }\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\n  get multiple() { return this.hasAttribute('multiple') }\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\n  get disabled() { return this.hasAttribute('disabled') }\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\n  get placeholder() { return this.getAttribute('placeholder') || 'Select...' }\n  set placeholder(v) { this.setAttribute('placeholder', v) }\n\n  get value() { return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '') }\n  set value(v) {\n    this.#selected.clear()\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\n    else if (v) this.#selected.add(v)\n    this.#updateSelectedState()\n    this.#updateTriggerText()\n  }\n\n  get options() { return [...this.querySelectorAll('ytz-option')] }\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\n\n  #setup() {\n    this.#id = `ytz-select-${++selectId}`\n    if (!this.id) this.id = this.#id\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\n    this.#customTrigger = !!this.#trigger\n    if (!this.#trigger) {\n      this.#trigger = document.createElement('button')\n      this.#trigger.setAttribute('slot', 'trigger')\n      this.#trigger.className = this.getAttribute('trigger-class') || ''\n      this.prepend(this.#trigger)\n    }\n    this.#listbox = document.createElement('div')\n    this.#listbox.id = `${this.#id}-listbox`\n    this.#listbox.setAttribute('role', 'listbox')\n    this.#listbox.hidden = true\n    if (this.multiple) this.#listbox.setAttribute('aria-multiselectable', 'true')\n    this.querySelectorAll('ytz-option').forEach(opt => this.#listbox.appendChild(opt))\n    this.appendChild(this.#listbox)\n    this.#trigger.setAttribute('aria-haspopup', 'listbox')\n    this.#trigger.setAttribute('aria-expanded', 'false')\n    this.#trigger.setAttribute('aria-controls', this.#listbox.id)\n    this.#keyNav = createKeyNav(\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([disabled])')],\n      { orientation: 'vertical', wrap: true, autoActivate: false }\n    )\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\n      if (val) this.#selected.add(val)\n    })\n    this.#updateSelectedState()\n    if (!this.#customTrigger) this.#updateTriggerText()\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\n    this.#trigger.addEventListener('keydown', this.#handleTriggerKeyDown)\n    this.#listbox.addEventListener('keydown', this.#handleListboxKeyDown)\n    this.addEventListener('option-click', this.#handleOptionClick)\n  }\n\n  #cleanup() {\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\n    this.#trigger?.removeEventListener('keydown', this.#handleTriggerKeyDown)\n    this.#listbox?.removeEventListener('keydown', this.#handleListboxKeyDown)\n    this.removeEventListener('option-click', this.#handleOptionClick)\n    document.removeEventListener('click', this.#handleOutsideClick)\n    document.removeEventListener('keydown', this.#handleEscape)\n  }\n\n  #handleTriggerClick = (e) => { if (this.disabled) return; e.stopPropagation(); this.open = !this.open }\n  #handleTriggerKeyDown = (e) => {\n    if (this.disabled) return\n    if (['ArrowDown', 'ArrowUp', 'Enter', ' '].includes(e.key)) { e.preventDefault(); this.open = true }\n  }\n\n  #handleListboxKeyDown = (e) => {\n    this.#keyNav?.handleKeyDown(e)\n    if (e.key === 'Enter' || e.key === ' ') {\n      const focused = this.#listbox.querySelector('ytz-option:focus')\n      if (focused && !focused.hasAttribute('disabled')) { e.preventDefault(); this.#selectOption(focused) }\n    }\n    if (e.key === 'Tab') { e.preventDefault(); this.open = false; this.#trigger?.focus() }\n  }\n\n  #handleOptionClick = (e) => {\n    if (this.disabled) return\n    const option = e.detail?.option\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\n  }\n\n  #handleOutsideClick = (e) => { if (!this.contains(e.target)) this.open = false }\n  #handleEscape = (e) => { if (e.key === 'Escape' && this.open) { e.preventDefault(); this.open = false; this.#trigger?.focus() } }\n\n  #selectOption(option) {\n    const value = option.getAttribute('value') || option.textContent?.trim()\n    if (!value) return\n    if (this.multiple) {\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\n    } else {\n      this.#selected.clear()\n      this.#selected.add(value)\n      this.open = false\n      this.#trigger?.focus()\n    }\n    this.#updateSelectedState()\n    if (!this.#customTrigger) this.#updateTriggerText()\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\n  }\n\n  #updateSelectedState() {\n    this.querySelectorAll('ytz-option').forEach(opt => {\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\n      const isSelected = this.#selected.has(val)\n      opt.toggleAttribute('selected', isSelected)\n      opt.setAttribute('aria-selected', String(isSelected))\n    })\n  }\n\n  #updateTriggerText() {\n    if (!this.#trigger || this.#customTrigger) return\n    const selected = this.selectedOptions\n    if (selected.length === 0) this.#trigger.textContent = this.placeholder\n    else if (this.multiple) this.#trigger.textContent = selected.map(o => o.textContent?.trim()).join(', ')\n    else this.#trigger.textContent = selected[0]?.textContent?.trim() || this.placeholder\n  }\n\n  #updateDisabledState() {\n    if (this.disabled) { this.#trigger?.setAttribute('disabled', ''); this.#trigger?.setAttribute('aria-disabled', 'true') }\n    else { this.#trigger?.removeAttribute('disabled'); this.#trigger?.removeAttribute('aria-disabled') }\n  }\n\n  #show() {\n    if (!this.#listbox || this.disabled) return\n    this.#trigger?.setAttribute('aria-expanded', 'true')\n    this.#listbox.hidden = false\n    this.#updatePosition()\n    setTimeout(() => document.addEventListener('click', this.#handleOutsideClick), 0)\n    document.addEventListener('keydown', this.#handleEscape)\n    requestAnimationFrame(() => {\n      const selected = this.#listbox.querySelector('ytz-option[selected]:not([disabled])')\n      const first = this.#listbox.querySelector('ytz-option:not([disabled])')\n      ;(selected || first)?.focus()\n    })\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\n  }\n\n  #hide() {\n    if (!this.#listbox) return\n    this.#trigger?.setAttribute('aria-expanded', 'false')\n    this.#listbox.hidden = true\n    document.removeEventListener('click', this.#handleOutsideClick)\n    document.removeEventListener('keydown', this.#handleEscape)\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\n  }\n\n  #updatePosition = () => {\n    if (!this.#trigger || !this.#listbox) return\n    const { x, y, placement } = position(this.#trigger, this.#listbox, { placement: 'bottom', offset: 4 })\n    this.#listbox.style.position = 'fixed'\n    this.#listbox.style.left = `${x}px`\n    this.#listbox.style.top = `${y}px`\n    this.#listbox.style.minWidth = `${this.#trigger.offsetWidth}px`\n    this.#listbox.dataset.placement = placement\n  }\n\n  show() { this.open = true }\n  hide() { this.open = false }\n  toggle() { this.open = !this.open }\n  clear() {\n    this.#selected.clear()\n    this.#updateSelectedState()\n    if (!this.#customTrigger) this.#updateTriggerText()\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\n  }\n}\n\nregister('ytz-select', YtzSelect)\nexport { YtzSelect }\n","/**\n * ytz-toggle - Switch/Toggle Web Component.\n * A toggle switch with checkbox semantics and aria-checked.\n *\n * @module @grimoire/yetzirah-core/toggle\n * @example\n * <ytz-toggle>Enable notifications</ytz-toggle>\n *\n * @example\n * // Initially checked\n * <ytz-toggle checked>Dark mode</ytz-toggle>\n *\n * @example\n * // Disabled\n * <ytz-toggle disabled>Premium feature</ytz-toggle>\n */\n\nimport { register } from './utils/register.js'\n\n/**\n * @class YtzToggle\n * @extends HTMLElement\n */\nclass YtzToggle extends HTMLElement {\n  static observedAttributes = ['checked', 'disabled']\n\n  connectedCallback() {\n    this.#setup()\n    this.#updateState()\n  }\n\n  #setup() {\n    // Set role and make focusable\n    this.setAttribute('role', 'switch')\n    if (!this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', '0')\n    }\n\n    // Event listeners\n    this.addEventListener('click', this.#handleClick)\n    this.addEventListener('keydown', this.#handleKeydown)\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('click', this.#handleClick)\n    this.removeEventListener('keydown', this.#handleKeydown)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected) {\n      this.#updateState()\n    }\n  }\n\n  #handleClick = () => {\n    if (this.disabled) return\n    this.toggle()\n  }\n\n  #handleKeydown = (e) => {\n    if (this.disabled) return\n\n    if (e.key === ' ' || e.key === 'Enter') {\n      e.preventDefault()\n      this.toggle()\n    }\n  }\n\n  #updateState() {\n    this.setAttribute('aria-checked', String(this.checked))\n    this.setAttribute('aria-disabled', String(this.disabled))\n  }\n\n  /**\n   * Toggle the checked state.\n   * Dispatches a 'change' event with the new state.\n   */\n  toggle() {\n    const willCheck = !this.checked\n\n    if (willCheck) {\n      this.setAttribute('checked', '')\n    } else {\n      this.removeAttribute('checked')\n    }\n\n    this.dispatchEvent(new CustomEvent('change', {\n      bubbles: true,\n      detail: { checked: willCheck }\n    }))\n  }\n\n  /**\n   * Get/set the checked state.\n   * @type {boolean}\n   */\n  get checked() {\n    return this.hasAttribute('checked')\n  }\n\n  set checked(value) {\n    if (value) {\n      this.setAttribute('checked', '')\n    } else {\n      this.removeAttribute('checked')\n    }\n  }\n\n  /**\n   * Get/set the disabled state.\n   * @type {boolean}\n   */\n  get disabled() {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled(value) {\n    if (value) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n  }\n}\n\nregister('ytz-toggle', YtzToggle)\n\nexport { YtzToggle }\n","/**\n * ytz-chip - Deletable tag/label Web Component.\n * A chip with optional delete button and keyboard support.\n *\n * @module @grimoire/yetzirah-core/chip\n * @example\n * <ytz-chip>Tag</ytz-chip>\n *\n * @example\n * // Deletable chip\n * <ytz-chip deletable>Remove me</ytz-chip>\n *\n * @example\n * // Disabled chip\n * <ytz-chip deletable disabled>Can't delete</ytz-chip>\n */\n\nimport { register } from './utils/register.js'\n\n/**\n * @class YtzChip\n * @extends HTMLElement\n */\nclass YtzChip extends HTMLElement {\n  static observedAttributes = ['deletable', 'disabled']\n\n  /** @type {HTMLButtonElement|null} */\n  #deleteButton = null\n\n  connectedCallback() {\n    this.#setup()\n  }\n\n  disconnectedCallback() {\n    this.#deleteButton?.removeEventListener('click', this.#handleDelete)\n    this.removeEventListener('keydown', this.#handleKeydown)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected) {\n      this.#setup()\n    }\n  }\n\n  #setup() {\n    // Remove existing delete button if any\n    this.#deleteButton?.remove()\n    this.#deleteButton = null\n\n    // Add delete button if deletable\n    if (this.hasAttribute('deletable')) {\n      this.#deleteButton = document.createElement('button')\n      this.#deleteButton.type = 'button'\n      this.#deleteButton.setAttribute('aria-label', 'Delete')\n      this.#deleteButton.className = 'ytz-chip-delete'\n      this.#deleteButton.textContent = '\\u00D7' //  character\n      this.#deleteButton.disabled = this.disabled\n      this.#deleteButton.addEventListener('click', this.#handleDelete)\n      this.appendChild(this.#deleteButton)\n    }\n\n    // Keyboard support for delete\n    this.removeEventListener('keydown', this.#handleKeydown)\n    if (this.hasAttribute('deletable')) {\n      this.addEventListener('keydown', this.#handleKeydown)\n    }\n  }\n\n  #handleDelete = (e) => {\n    e.stopPropagation()\n    if (this.disabled) return\n\n    this.dispatchEvent(new CustomEvent('delete', {\n      bubbles: true,\n      detail: { chip: this }\n    }))\n  }\n\n  #handleKeydown = (e) => {\n    if (this.disabled) return\n\n    if (e.key === 'Delete' || e.key === 'Backspace') {\n      e.preventDefault()\n      this.dispatchEvent(new CustomEvent('delete', {\n        bubbles: true,\n        detail: { chip: this }\n      }))\n    }\n  }\n\n  /**\n   * Get/set the disabled state.\n   * @type {boolean}\n   */\n  get disabled() {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled(value) {\n    if (value) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n    if (this.#deleteButton) {\n      this.#deleteButton.disabled = value\n    }\n  }\n\n  /**\n   * Get/set the deletable state.\n   * @type {boolean}\n   */\n  get deletable() {\n    return this.hasAttribute('deletable')\n  }\n\n  set deletable(value) {\n    if (value) {\n      this.setAttribute('deletable', '')\n    } else {\n      this.removeAttribute('deletable')\n    }\n  }\n}\n\nregister('ytz-chip', YtzChip)\n\nexport { YtzChip }\n","/**\n * ytz-icon-button - Icon button Web Component.\n * A button variant requiring aria-label for accessibility.\n *\n * @module @grimoire/yetzirah-core/icon-button\n * @example\n * <ytz-icon-button aria-label=\"Close\">\n *   <svg>...</svg>\n * </ytz-icon-button>\n *\n * @example\n * // With tooltip integration\n * <ytz-icon-button aria-label=\"Settings\" tooltip>\n *   <svg>...</svg>\n * </ytz-icon-button>\n *\n * @example\n * // Disabled\n * <ytz-icon-button aria-label=\"Delete\" disabled>\n *   <svg>...</svg>\n * </ytz-icon-button>\n */\n\nimport { register } from './utils/register.js'\n\n/** @type {string} Default classes for icon button */\nconst DEFAULTS = 'pointer bn bg-transparent pa0 dib'\n\n/**\n * @class YtzIconButton\n * @extends HTMLElement\n */\nclass YtzIconButton extends HTMLElement {\n  static observedAttributes = ['disabled', 'aria-label', 'tooltip', 'class']\n\n  /** @type {HTMLElement|null} */\n  #tooltipEl = null\n\n  connectedCallback() {\n    this.#render()\n    this.#checkAccessibility()\n  }\n\n  disconnectedCallback() {\n    this.#removeTooltip()\n    this.removeEventListener('mouseenter', this.#showTooltip)\n    this.removeEventListener('mouseleave', this.#hideTooltip)\n    this.removeEventListener('focus', this.#showTooltip)\n    this.removeEventListener('blur', this.#hideTooltip)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected) {\n      this.#render()\n      if (name === 'aria-label') {\n        this.#checkAccessibility()\n      }\n    }\n  }\n\n  #checkAccessibility() {\n    if (!this.hasAttribute('aria-label')) {\n      console.warn('ytz-icon-button: aria-label is required for accessibility')\n    }\n  }\n\n  #render() {\n    const userClass = this.getAttribute('class') || ''\n    const button = this.querySelector('button.ytz-icon-button-inner') || document.createElement('button')\n    const isNew = !button.parentNode\n\n    button.type = 'button'\n    button.className = 'ytz-icon-button-inner ' + DEFAULTS + (userClass ? ' ' + userClass : '')\n    button.disabled = this.hasAttribute('disabled')\n\n    // Copy aria-label to inner button\n    const label = this.getAttribute('aria-label')\n    if (label) {\n      button.setAttribute('aria-label', label)\n    }\n\n    // Copy aria-* and data-* attributes\n    for (const attr of this.attributes) {\n      if ((attr.name.startsWith('aria-') || attr.name.startsWith('data-')) && attr.name !== 'aria-label') {\n        button.setAttribute(attr.name, attr.value)\n      }\n    }\n\n    if (isNew) {\n      // Move icon content into button\n      while (this.firstChild && this.firstChild !== button) {\n        button.appendChild(this.firstChild)\n      }\n      this.appendChild(button)\n    }\n\n    // Setup tooltip if requested\n    this.#setupTooltip()\n  }\n\n  #setupTooltip() {\n    // Remove old listeners\n    this.removeEventListener('mouseenter', this.#showTooltip)\n    this.removeEventListener('mouseleave', this.#hideTooltip)\n    this.removeEventListener('focus', this.#showTooltip)\n    this.removeEventListener('blur', this.#hideTooltip)\n\n    if (this.hasAttribute('tooltip')) {\n      this.addEventListener('mouseenter', this.#showTooltip)\n      this.addEventListener('mouseleave', this.#hideTooltip)\n      this.addEventListener('focus', this.#showTooltip)\n      this.addEventListener('blur', this.#hideTooltip)\n    }\n  }\n\n  #showTooltip = () => {\n    const label = this.getAttribute('aria-label')\n    if (!label) return\n\n    this.#tooltipEl = document.createElement('div')\n    this.#tooltipEl.className = 'ytz-icon-button-tooltip'\n    this.#tooltipEl.textContent = label\n    this.#tooltipEl.setAttribute('role', 'tooltip')\n\n    // Position tooltip below button\n    // Use inner button for rect since parent may have display:contents\n    const button = this.querySelector('button.ytz-icon-button-inner')\n    const rect = (button || this).getBoundingClientRect()\n    this.#tooltipEl.style.cssText = `\n      position: fixed;\n      left: ${rect.left + rect.width / 2}px;\n      top: ${rect.bottom + 4}px;\n      transform: translateX(-50%);\n      z-index: 9999;\n    `\n\n    document.body.appendChild(this.#tooltipEl)\n  }\n\n  #hideTooltip = () => {\n    this.#removeTooltip()\n  }\n\n  #removeTooltip() {\n    if (this.#tooltipEl) {\n      this.#tooltipEl.remove()\n      this.#tooltipEl = null\n    }\n  }\n\n  /**\n   * Get/set the disabled state.\n   * @type {boolean}\n   */\n  get disabled() {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled(value) {\n    if (value) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n  }\n}\n\nregister('ytz-icon-button', YtzIconButton)\n\nexport { YtzIconButton }\n","/**\n * ytz-slider - Slider/Range Web Component.\n * An accessible slider with keyboard control and optional range support.\n *\n * @module @grimoire/yetzirah-core/slider\n * @example\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\"></ytz-slider>\n *\n * @example\n * // With step\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" step=\"10\"></ytz-slider>\n *\n * @example\n * // Disabled\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" disabled></ytz-slider>\n */\n\nimport { register } from './utils/register.js'\n\n/**\n * @class YtzSlider\n * @extends HTMLElement\n */\nclass YtzSlider extends HTMLElement {\n  static observedAttributes = ['min', 'max', 'value', 'step', 'disabled']\n\n  /** @type {HTMLDivElement|null} */\n  #track = null\n  /** @type {HTMLDivElement|null} */\n  #thumb = null\n  /** @type {boolean} */\n  #dragging = false\n\n  connectedCallback() {\n    this.#setup()\n    this.#updateDisplay()\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('keydown', this.#handleKeydown)\n    this.#thumb?.removeEventListener('mousedown', this.#handleMouseDown)\n    document.removeEventListener('mousemove', this.#handleMouseMove)\n    document.removeEventListener('mouseup', this.#handleMouseUp)\n    this.#thumb?.removeEventListener('touchstart', this.#handleTouchStart)\n    document.removeEventListener('touchmove', this.#handleTouchMove)\n    document.removeEventListener('touchend', this.#handleTouchEnd)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected && oldVal !== newVal) {\n      this.#updateDisplay()\n    }\n  }\n\n  #setup() {\n    // Set up ARIA\n    this.setAttribute('role', 'slider')\n    if (!this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', '0')\n    }\n\n    // Create track and thumb if not present\n    if (!this.#track) {\n      this.#track = document.createElement('div')\n      this.#track.className = 'ytz-slider-track'\n      this.appendChild(this.#track)\n    }\n\n    if (!this.#thumb) {\n      this.#thumb = document.createElement('div')\n      this.#thumb.className = 'ytz-slider-thumb'\n      this.appendChild(this.#thumb)\n    }\n\n    // Event listeners\n    this.addEventListener('keydown', this.#handleKeydown)\n    this.#thumb.addEventListener('mousedown', this.#handleMouseDown)\n    this.#thumb.addEventListener('touchstart', this.#handleTouchStart, { passive: false })\n    this.addEventListener('click', this.#handleTrackClick)\n  }\n\n  #handleKeydown = (e) => {\n    if (this.disabled) return\n\n    const step = this.step\n    const bigStep = step * 10\n    let newValue = this.value\n\n    switch (e.key) {\n      case 'ArrowRight':\n      case 'ArrowUp':\n        e.preventDefault()\n        newValue = Math.min(this.max, this.value + step)\n        break\n      case 'ArrowLeft':\n      case 'ArrowDown':\n        e.preventDefault()\n        newValue = Math.max(this.min, this.value - step)\n        break\n      case 'PageUp':\n        e.preventDefault()\n        newValue = Math.min(this.max, this.value + bigStep)\n        break\n      case 'PageDown':\n        e.preventDefault()\n        newValue = Math.max(this.min, this.value - bigStep)\n        break\n      case 'Home':\n        e.preventDefault()\n        newValue = this.min\n        break\n      case 'End':\n        e.preventDefault()\n        newValue = this.max\n        break\n      default:\n        return\n    }\n\n    if (newValue !== this.value) {\n      this.value = newValue\n      this.#dispatchChange()\n    }\n  }\n\n  #handleMouseDown = (e) => {\n    if (this.disabled) return\n    e.preventDefault()\n    this.#dragging = true\n    document.addEventListener('mousemove', this.#handleMouseMove)\n    document.addEventListener('mouseup', this.#handleMouseUp)\n  }\n\n  #handleMouseMove = (e) => {\n    if (!this.#dragging) return\n    this.#updateValueFromPointer(e.clientX)\n  }\n\n  #handleMouseUp = () => {\n    if (this.#dragging) {\n      this.#dragging = false\n      document.removeEventListener('mousemove', this.#handleMouseMove)\n      document.removeEventListener('mouseup', this.#handleMouseUp)\n      this.#dispatchChange()\n    }\n  }\n\n  #handleTouchStart = (e) => {\n    if (this.disabled) return\n    e.preventDefault()\n    this.#dragging = true\n    document.addEventListener('touchmove', this.#handleTouchMove, { passive: false })\n    document.addEventListener('touchend', this.#handleTouchEnd)\n  }\n\n  #handleTouchMove = (e) => {\n    if (!this.#dragging) return\n    e.preventDefault()\n    const touch = e.touches[0]\n    this.#updateValueFromPointer(touch.clientX)\n  }\n\n  #handleTouchEnd = () => {\n    if (this.#dragging) {\n      this.#dragging = false\n      document.removeEventListener('touchmove', this.#handleTouchMove)\n      document.removeEventListener('touchend', this.#handleTouchEnd)\n      this.#dispatchChange()\n    }\n  }\n\n  #handleTrackClick = (e) => {\n    if (this.disabled) return\n    if (e.target === this.#thumb) return\n    this.#updateValueFromPointer(e.clientX)\n    this.#dispatchChange()\n  }\n\n  #updateValueFromPointer(clientX) {\n    const rect = this.getBoundingClientRect()\n    const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width))\n    const range = this.max - this.min\n    let newValue = this.min + percent * range\n\n    // Snap to step\n    const step = this.step\n    newValue = Math.round(newValue / step) * step\n    newValue = Math.max(this.min, Math.min(this.max, newValue))\n\n    this.value = newValue\n  }\n\n  #updateDisplay() {\n    const percent = ((this.value - this.min) / (this.max - this.min)) * 100\n\n    // Update ARIA attributes\n    this.setAttribute('aria-valuemin', String(this.min))\n    this.setAttribute('aria-valuemax', String(this.max))\n    this.setAttribute('aria-valuenow', String(this.value))\n    this.setAttribute('aria-disabled', String(this.disabled))\n\n    // Position thumb\n    if (this.#thumb) {\n      this.#thumb.style.left = `${percent}%`\n    }\n\n    // Update track fill (via CSS custom property)\n    this.style.setProperty('--slider-percent', `${percent}%`)\n  }\n\n  #dispatchChange() {\n    this.dispatchEvent(new CustomEvent('change', {\n      bubbles: true,\n      detail: { value: this.value }\n    }))\n  }\n\n  // Property getters/setters\n  get min() {\n    return parseFloat(this.getAttribute('min')) || 0\n  }\n\n  set min(val) {\n    this.setAttribute('min', String(val))\n  }\n\n  get max() {\n    return parseFloat(this.getAttribute('max')) || 100\n  }\n\n  set max(val) {\n    this.setAttribute('max', String(val))\n  }\n\n  get value() {\n    const val = parseFloat(this.getAttribute('value'))\n    if (isNaN(val)) return this.min\n    return Math.max(this.min, Math.min(this.max, val))\n  }\n\n  set value(val) {\n    const num = Math.max(this.min, Math.min(this.max, parseFloat(val) || 0))\n    this.setAttribute('value', String(num))\n  }\n\n  get step() {\n    return parseFloat(this.getAttribute('step')) || 1\n  }\n\n  set step(val) {\n    this.setAttribute('step', String(val))\n  }\n\n  get disabled() {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled(val) {\n    if (val) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n  }\n}\n\nregister('ytz-slider', YtzSlider)\n\nexport { YtzSlider }\n","/**\n * Virtual Scroll utility for efficient rendering of large lists.\n * Only renders visible items plus a buffer for smooth scrolling.\n *\n * @module @grimoire/yetzirah-core/utils/virtual-scroll\n */\n\n/**\n * Create a virtual scroller instance.\n * @param {Object} options - Configuration options\n * @param {HTMLElement} options.container - Scrollable container element\n * @param {HTMLElement} options.content - Content element to hold rendered items\n * @param {number} options.itemCount - Total number of items\n * @param {number} options.itemHeight - Height of each item in pixels\n * @param {Function} options.renderItem - Function to render an item by index\n * @param {number} [options.buffer=5] - Number of items to render above/below viewport\n * @returns {Object} Virtual scroller instance\n */\nexport function createVirtualScroller({\n  container,\n  content,\n  itemCount,\n  itemHeight,\n  renderItem,\n  buffer = 5\n}) {\n  let scrollTop = 0\n  let renderedRange = { start: 0, end: 0 }\n  let rafId = null\n\n  // Set up content height to enable scrolling\n  const totalHeight = itemCount * itemHeight\n  content.style.height = `${totalHeight}px`\n  content.style.position = 'relative'\n\n  function calculateVisibleRange() {\n    const containerHeight = container.clientHeight\n    const start = Math.max(0, Math.floor(scrollTop / itemHeight) - buffer)\n    const visibleCount = Math.ceil(containerHeight / itemHeight)\n    const end = Math.min(itemCount, start + visibleCount + buffer * 2)\n    return { start, end }\n  }\n\n  function render() {\n    const range = calculateVisibleRange()\n\n    // Skip if range hasn't changed\n    if (range.start === renderedRange.start && range.end === renderedRange.end) {\n      return\n    }\n\n    renderedRange = range\n\n    // Clear and re-render\n    content.innerHTML = ''\n\n    for (let i = range.start; i < range.end; i++) {\n      const item = renderItem(i)\n      if (item) {\n        item.style.position = 'absolute'\n        item.style.top = `${i * itemHeight}px`\n        item.style.height = `${itemHeight}px`\n        item.style.left = '0'\n        item.style.right = '0'\n        content.appendChild(item)\n      }\n    }\n  }\n\n  function handleScroll() {\n    scrollTop = container.scrollTop\n\n    // Use RAF for smooth rendering\n    if (rafId) {\n      cancelAnimationFrame(rafId)\n    }\n    rafId = requestAnimationFrame(render)\n  }\n\n  function scrollToIndex(index) {\n    const targetTop = index * itemHeight\n    const containerHeight = container.clientHeight\n    const currentScrollTop = container.scrollTop\n\n    // Only scroll if item is not fully visible\n    if (targetTop < currentScrollTop) {\n      container.scrollTop = targetTop\n    } else if (targetTop + itemHeight > currentScrollTop + containerHeight) {\n      container.scrollTop = targetTop - containerHeight + itemHeight\n    }\n  }\n\n  function destroy() {\n    container.removeEventListener('scroll', handleScroll)\n    if (rafId) {\n      cancelAnimationFrame(rafId)\n    }\n    content.innerHTML = ''\n  }\n\n  function refresh() {\n    const newTotalHeight = itemCount * itemHeight\n    content.style.height = `${newTotalHeight}px`\n    renderedRange = { start: 0, end: 0 }\n    render()\n  }\n\n  // Initialize\n  container.addEventListener('scroll', handleScroll)\n  render()\n\n  return {\n    scrollToIndex,\n    refresh,\n    destroy,\n    get renderedRange() {\n      return { ...renderedRange }\n    }\n  }\n}\n","/**\n * ytz-datagrid - Data Grid Web Component.\n * Virtual scrolling, sorting, filtering, keyboard navigation, and export.\n *\n * @module @grimoire/yetzirah-core/datagrid\n * @example\n * <ytz-datagrid>\n *   <ytz-datagrid-column field=\"name\" header=\"Name\" sortable></ytz-datagrid-column>\n *   <ytz-datagrid-column field=\"email\" header=\"Email\"></ytz-datagrid-column>\n * </ytz-datagrid>\n *\n * // Set data via JavaScript:\n * grid.data = [{ name: 'John', email: 'john@example.com' }, ...]\n */\n\nimport { createVirtualScroller } from './utils/virtual-scroll.js'\nimport { register } from './utils/register.js'\n\n/**\n * @class YtzDatagridColumn\n * @extends HTMLElement\n */\nclass YtzDatagridColumn extends HTMLElement {\n  get field() { return this.getAttribute('field') || '' }\n  set field(val) { this.setAttribute('field', val) }\n\n  get header() { return this.getAttribute('header') || this.field }\n  set header(val) { this.setAttribute('header', val) }\n\n  get sortable() { return this.hasAttribute('sortable') }\n  set sortable(val) { val ? this.setAttribute('sortable', '') : this.removeAttribute('sortable') }\n\n  get filterable() { return this.hasAttribute('filterable') }\n  set filterable(val) { val ? this.setAttribute('filterable', '') : this.removeAttribute('filterable') }\n\n  get width() { return this.getAttribute('width') || 'auto' }\n  set width(val) { this.setAttribute('width', val) }\n}\n\nregister('ytz-datagrid-column', YtzDatagridColumn)\n\n/**\n * @class YtzDatagrid\n * @extends HTMLElement\n */\nclass YtzDatagrid extends HTMLElement {\n  static observedAttributes = ['row-height', 'page-size']\n\n  /** @type {Array<Object>} */\n  #data = []\n  /** @type {Array<Object>} */\n  #filteredData = []\n  /** @type {Array<YtzDatagridColumn>} */\n  #columns = []\n  /** @type {Object|null} */\n  #sortState = null\n  /** @type {Object} */\n  #filterState = {}\n  /** @type {Object|null} */\n  #virtualScroller = null\n  /** @type {HTMLElement|null} */\n  #header = null\n  /** @type {HTMLElement|null} */\n  #body = null\n  /** @type {HTMLElement|null} */\n  #viewport = null\n  /** @type {number} */\n  #focusedRow = 0\n  /** @type {number} */\n  #focusedCol = 0\n  /** @type {Map<string, number>} */\n  #columnWidths = new Map()\n  /** @type {Object|null} */\n  #resizeState = null\n\n  connectedCallback() {\n    this.#setup()\n  }\n\n  disconnectedCallback() {\n    this.#virtualScroller?.destroy()\n    this.removeEventListener('keydown', this.#handleKeydown)\n    document.removeEventListener('mousemove', this.#handleResizeMove)\n    document.removeEventListener('mouseup', this.#handleResizeEnd)\n  }\n\n  attributeChangedCallback() {\n    if (this.isConnected) {\n      this.#render()\n    }\n  }\n\n  #setup() {\n    // Collect column definitions\n    this.#columns = Array.from(this.querySelectorAll('ytz-datagrid-column'))\n\n    // Set up ARIA\n    this.setAttribute('role', 'grid')\n    if (!this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', '0')\n    }\n\n    // Create structure\n    this.#createStructure()\n\n    // Event listeners\n    this.addEventListener('keydown', this.#handleKeydown)\n\n    // Initial render\n    this.#render()\n  }\n\n  #createStructure() {\n    // Clear existing content (except columns)\n    const columns = Array.from(this.querySelectorAll('ytz-datagrid-column'))\n    this.innerHTML = ''\n    columns.forEach(col => this.appendChild(col))\n\n    // Create header\n    this.#header = document.createElement('div')\n    this.#header.className = 'ytz-datagrid-header'\n    this.#header.setAttribute('role', 'row')\n    this.appendChild(this.#header)\n\n    // Create viewport for virtual scrolling\n    this.#viewport = document.createElement('div')\n    this.#viewport.className = 'ytz-datagrid-viewport'\n    this.appendChild(this.#viewport)\n\n    // Create body container\n    this.#body = document.createElement('div')\n    this.#body.className = 'ytz-datagrid-body'\n    this.#body.setAttribute('role', 'rowgroup')\n    this.#viewport.appendChild(this.#body)\n  }\n\n  #render() {\n    this.#renderHeader()\n    this.#applyFiltersAndSort()\n    this.#initVirtualScroller()\n  }\n\n  #renderHeader() {\n    if (!this.#header) return\n\n    this.#header.innerHTML = ''\n\n    this.#columns.forEach((col, index) => {\n      const cell = document.createElement('div')\n      cell.className = 'ytz-datagrid-header-cell'\n      cell.setAttribute('role', 'columnheader')\n      cell.setAttribute('data-field', col.field)\n\n      // Use stored width or fall back to column attribute\n      const storedWidth = this.#columnWidths.get(col.field)\n      if (storedWidth) {\n        cell.style.width = `${storedWidth}px`\n        cell.style.flex = 'none'\n      } else if (col.width && col.width !== 'auto') {\n        cell.style.width = col.width\n        cell.style.flex = 'none'\n      }\n\n      // Create content wrapper to keep text separate from resize handle\n      const content = document.createElement('span')\n      content.className = 'ytz-datagrid-header-content'\n      content.textContent = col.header\n      cell.appendChild(content)\n\n      if (col.sortable) {\n        cell.classList.add('ytz-datagrid-sortable')\n        cell.addEventListener('click', (e) => {\n          // Don't sort when clicking resize handle\n          if (e.target.classList.contains('ytz-datagrid-resize-handle')) return\n          this.#handleSort(col.field)\n        })\n\n        // Add sort indicator\n        const indicator = document.createElement('span')\n        indicator.className = 'ytz-datagrid-sort-indicator'\n        if (this.#sortState?.field === col.field) {\n          indicator.textContent = this.#sortState.direction === 'asc' ? ' \\u25B2' : ' \\u25BC'\n          cell.setAttribute('aria-sort', this.#sortState.direction === 'asc' ? 'ascending' : 'descending')\n        }\n        content.appendChild(indicator)\n      }\n\n      if (col.filterable) {\n        const input = document.createElement('input')\n        input.type = 'text'\n        input.className = 'ytz-datagrid-filter'\n        input.placeholder = `Filter ${col.header}...`\n        input.value = this.#filterState[col.field] || ''\n        input.addEventListener('input', (e) => {\n          this.#filterState[col.field] = e.target.value\n          this.#applyFiltersAndSort()\n          this.#initVirtualScroller()\n        })\n        input.addEventListener('click', (e) => e.stopPropagation())\n        cell.appendChild(input)\n      }\n\n      // Add resize handle\n      const resizeHandle = document.createElement('div')\n      resizeHandle.className = 'ytz-datagrid-resize-handle'\n      resizeHandle.addEventListener('mousedown', (e) => this.#handleResizeStart(e, col.field, cell))\n      cell.appendChild(resizeHandle)\n\n      this.#header.appendChild(cell)\n    })\n  }\n\n  #handleResizeStart(e, field, headerCell) {\n    e.preventDefault()\n    e.stopPropagation()\n\n    const startX = e.clientX\n    const startWidth = headerCell.offsetWidth\n\n    this.#resizeState = { field, startX, startWidth, headerCell }\n\n    document.addEventListener('mousemove', this.#handleResizeMove)\n    document.addEventListener('mouseup', this.#handleResizeEnd)\n\n    // Add resizing class for visual feedback\n    this.classList.add('ytz-datagrid-resizing')\n  }\n\n  #handleResizeMove = (e) => {\n    if (!this.#resizeState) return\n\n    const { field, startX, startWidth, headerCell } = this.#resizeState\n    const delta = e.clientX - startX\n    const newWidth = Math.max(50, startWidth + delta) // Minimum 50px\n\n    // Update header cell width\n    headerCell.style.width = `${newWidth}px`\n    headerCell.style.flex = 'none'\n\n    // Update body cells width\n    this.#columnWidths.set(field, newWidth)\n    this.#updateBodyColumnWidths()\n  }\n\n  #handleResizeEnd = () => {\n    if (this.#resizeState) {\n      this.dispatchEvent(new CustomEvent('columnresize', {\n        bubbles: true,\n        detail: {\n          field: this.#resizeState.field,\n          width: this.#columnWidths.get(this.#resizeState.field)\n        }\n      }))\n    }\n\n    this.#resizeState = null\n    document.removeEventListener('mousemove', this.#handleResizeMove)\n    document.removeEventListener('mouseup', this.#handleResizeEnd)\n    this.classList.remove('ytz-datagrid-resizing')\n  }\n\n  /**\n   * Extract a numeric value from a string, handling currency, percentages, etc.\n   * @param {*} value - The value to parse\n   * @returns {number|null} - The numeric value or null if not parseable\n   */\n  #extractNumber(value) {\n    if (typeof value === 'number') return value\n    if (typeof value !== 'string') return null\n\n    // Remove currency symbols, commas, spaces, and percentage signs\n    const cleaned = value.replace(/[$,\\s%]/g, '')\n\n    // Check if it looks like a number (possibly negative, possibly decimal)\n    if (!/^-?\\d+\\.?\\d*$/.test(cleaned)) return null\n\n    const num = parseFloat(cleaned)\n    return isNaN(num) ? null : num\n  }\n\n  #updateBodyColumnWidths() {\n    const rows = this.querySelectorAll('.ytz-datagrid-row')\n    rows.forEach(row => {\n      this.#columns.forEach((col, colIndex) => {\n        const cell = row.querySelector(`[data-col-index=\"${colIndex}\"]`)\n        if (cell) {\n          const storedWidth = this.#columnWidths.get(col.field)\n          if (storedWidth) {\n            cell.style.width = `${storedWidth}px`\n            cell.style.flex = 'none'\n          }\n        }\n      })\n    })\n  }\n\n  #handleSort(field) {\n    if (this.#sortState?.field === field) {\n      if (this.#sortState.direction === 'asc') {\n        this.#sortState.direction = 'desc'\n      } else if (this.#sortState.direction === 'desc') {\n        this.#sortState = null\n      }\n    } else {\n      this.#sortState = { field, direction: 'asc' }\n    }\n\n    this.#applyFiltersAndSort()\n    this.#renderHeader()\n    this.#initVirtualScroller()\n\n    this.dispatchEvent(new CustomEvent('sort', {\n      bubbles: true,\n      detail: { ...this.#sortState }\n    }))\n  }\n\n  #applyFiltersAndSort() {\n    let result = [...this.#data]\n\n    // Apply filters\n    for (const [field, value] of Object.entries(this.#filterState)) {\n      if (value) {\n        const searchLower = value.toLowerCase()\n        result = result.filter(row => {\n          const cellValue = String(row[field] ?? '').toLowerCase()\n          return cellValue.includes(searchLower)\n        })\n      }\n    }\n\n    // Apply sort\n    if (this.#sortState) {\n      const { field, direction } = this.#sortState\n      result.sort((a, b) => {\n        const aVal = a[field] ?? ''\n        const bVal = b[field] ?? ''\n\n        // Try to extract numeric values (handles currency, percentages, etc.)\n        const aNum = this.#extractNumber(aVal)\n        const bNum = this.#extractNumber(bVal)\n\n        let cmp\n        if (aNum !== null && bNum !== null) {\n          // Both values are numeric - compare as numbers\n          cmp = aNum - bNum\n        } else {\n          // Fall back to string comparison\n          cmp = String(aVal).localeCompare(String(bVal), undefined, { numeric: true })\n        }\n\n        return direction === 'asc' ? cmp : -cmp\n      })\n    }\n\n    this.#filteredData = result\n  }\n\n  #initVirtualScroller() {\n    // Guard: ensure DOM structure is ready\n    if (!this.#viewport || !this.#body) return\n\n    this.#virtualScroller?.destroy()\n\n    const rowHeight = parseInt(this.getAttribute('row-height')) || 40\n\n    this.#virtualScroller = createVirtualScroller({\n      container: this.#viewport,\n      content: this.#body,\n      itemCount: this.#filteredData.length,\n      itemHeight: rowHeight,\n      renderItem: (index) => this.#renderRow(index)\n    })\n  }\n\n  #renderRow(index) {\n    const rowData = this.#filteredData[index]\n    if (!rowData) return null\n\n    const row = document.createElement('div')\n    row.className = 'ytz-datagrid-row'\n    row.setAttribute('role', 'row')\n    row.setAttribute('data-row-index', String(index))\n    row.tabIndex = -1\n\n    this.#columns.forEach((col, colIndex) => {\n      const cell = document.createElement('div')\n      cell.className = 'ytz-datagrid-cell'\n      cell.setAttribute('role', 'gridcell')\n\n      // Use stored width or fall back to column attribute\n      const storedWidth = this.#columnWidths.get(col.field)\n      if (storedWidth) {\n        cell.style.width = `${storedWidth}px`\n        cell.style.flex = 'none'\n      } else if (col.width && col.width !== 'auto') {\n        cell.style.width = col.width\n        cell.style.flex = 'none'\n      }\n\n      cell.textContent = String(rowData[col.field] ?? '')\n      cell.setAttribute('data-col-index', String(colIndex))\n      row.appendChild(cell)\n    })\n\n    row.addEventListener('click', (e) => {\n      this.#focusedRow = index\n      // Determine which cell was clicked\n      const cell = e.target.closest('.ytz-datagrid-cell')\n      if (cell) {\n        const colIndex = parseInt(cell.getAttribute('data-col-index'), 10)\n        if (!isNaN(colIndex)) {\n          this.#focusedCol = colIndex\n        }\n      }\n      this.#updateFocus()\n      this.dispatchEvent(new CustomEvent('rowselect', {\n        bubbles: true,\n        detail: { row: rowData, index }\n      }))\n    })\n\n    return row\n  }\n\n  #handleKeydown = (e) => {\n    const maxRow = this.#filteredData.length - 1\n    const maxCol = this.#columns.length - 1\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault()\n        this.#focusedRow = Math.min(maxRow, this.#focusedRow + 1)\n        this.#updateFocus()\n        break\n      case 'ArrowUp':\n        e.preventDefault()\n        this.#focusedRow = Math.max(0, this.#focusedRow - 1)\n        this.#updateFocus()\n        break\n      case 'ArrowRight':\n        e.preventDefault()\n        this.#focusedCol = Math.min(maxCol, this.#focusedCol + 1)\n        this.#updateFocus()\n        break\n      case 'ArrowLeft':\n        e.preventDefault()\n        this.#focusedCol = Math.max(0, this.#focusedCol - 1)\n        this.#updateFocus()\n        break\n      case 'Home':\n        e.preventDefault()\n        if (e.ctrlKey) {\n          this.#focusedRow = 0\n        }\n        this.#focusedCol = 0\n        this.#updateFocus()\n        break\n      case 'End':\n        e.preventDefault()\n        if (e.ctrlKey) {\n          this.#focusedRow = maxRow\n        }\n        this.#focusedCol = maxCol\n        this.#updateFocus()\n        break\n      case 'PageDown':\n        e.preventDefault()\n        this.#focusedRow = Math.min(maxRow, this.#focusedRow + 10)\n        this.#updateFocus()\n        break\n      case 'PageUp':\n        e.preventDefault()\n        this.#focusedRow = Math.max(0, this.#focusedRow - 10)\n        this.#updateFocus()\n        break\n      case 'Enter':\n        e.preventDefault()\n        this.dispatchEvent(new CustomEvent('rowactivate', {\n          bubbles: true,\n          detail: { row: this.#filteredData[this.#focusedRow], index: this.#focusedRow }\n        }))\n        break\n    }\n  }\n\n  #updateFocus() {\n    // Scroll row into view via virtual scroller\n    this.#virtualScroller?.scrollToIndex(this.#focusedRow)\n\n    // Apply focus styling after any scroll-triggered re-render completes\n    // (scrollToIndex may trigger scroll event  RAF render that clears DOM)\n    requestAnimationFrame(() => {\n      this.#applyFocusStyling()\n    })\n  }\n\n  #applyFocusStyling() {\n    // Update row focus styling\n    this.querySelectorAll('.ytz-datagrid-row').forEach(row => {\n      row.classList.remove('ytz-datagrid-row-focused')\n    })\n\n    const targetRow = this.querySelector(`[data-row-index=\"${this.#focusedRow}\"]`)\n    targetRow?.classList.add('ytz-datagrid-row-focused')\n\n    // Update cell focus\n    this.querySelectorAll('.ytz-datagrid-cell').forEach(cell => {\n      cell.classList.remove('ytz-datagrid-cell-focused')\n    })\n\n    const targetCell = targetRow?.querySelector(`[data-col-index=\"${this.#focusedCol}\"]`)\n    targetCell?.classList.add('ytz-datagrid-cell-focused')\n  }\n\n  /**\n   * Export data to CSV format.\n   * @returns {string} CSV string\n   */\n  exportCSV() {\n    const headers = this.#columns.map(col => `\"${col.header.replace(/\"/g, '\"\"')}\"`)\n    const rows = this.#filteredData.map(row => {\n      return this.#columns.map(col => {\n        const value = String(row[col.field] ?? '')\n        return `\"${value.replace(/\"/g, '\"\"')}\"`\n      }).join(',')\n    })\n    return [headers.join(','), ...rows].join('\\n')\n  }\n\n  /**\n   * Download data as CSV file.\n   * @param {string} filename - File name (default: 'data.csv')\n   */\n  downloadCSV(filename = 'data.csv') {\n    const csv = this.exportCSV()\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' })\n    const url = URL.createObjectURL(blob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = filename\n    link.click()\n    URL.revokeObjectURL(url)\n  }\n\n  // Property accessors\n  get data() {\n    return this.#data\n  }\n\n  set data(value) {\n    this.#data = Array.isArray(value) ? value : []\n    this.#applyFiltersAndSort()\n    this.#initVirtualScroller()\n  }\n\n  get sortState() {\n    return this.#sortState ? { ...this.#sortState } : null\n  }\n\n  get filteredData() {\n    return [...this.#filteredData]\n  }\n}\n\nregister('ytz-datagrid', YtzDatagrid)\n\nexport { YtzDatagrid, YtzDatagridColumn }\n","/**\n * ytz-snackbar - Transient notification Web Component.\n * Provides auto-dismissing notifications with queue management and positioning.\n *\n * @module @grimoire/yetzirah-core/snackbar\n * @example\n * <ytz-snackbar id=\"snack\">File saved successfully</ytz-snackbar>\n *\n * @example\n * // Show snackbar programmatically\n * document.getElementById('snack').show()\n *\n * @example\n * // Positioned snackbar with custom duration\n * <ytz-snackbar position=\"top-right\" duration=\"3000\">\n *   Quick message\n * </ytz-snackbar>\n */\n\nimport { register } from './utils/register.js'\n\n/** @type {Map<string, YtzSnackbar[]>} Queue of active snackbars by position */\nconst snackbarQueues = new Map()\n\n/** Valid position values */\nconst VALID_POSITIONS = ['top-left', 'top-center', 'top-right', 'bottom-left', 'bottom-center', 'bottom-right']\n\n/**\n * @class YtzSnackbar\n * @extends HTMLElement\n */\nclass YtzSnackbar extends HTMLElement {\n  static observedAttributes = ['open', 'duration', 'position', 'dismissible', 'max-visible']\n\n  /** @type {number|null} */\n  #dismissTimer = null\n  /** @type {HTMLButtonElement|null} */\n  #closeButton = null\n  /** @type {boolean} */\n  #isPaused = false\n  /** @type {string|null} */\n  #pendingDismissReason = null\n\n  connectedCallback() {\n    // Set up accessibility attributes\n    this.setAttribute('role', 'status')\n    this.setAttribute('aria-live', 'polite')\n    this.setAttribute('aria-atomic', 'true')\n\n    // Initialize visibility\n    if (!this.hasAttribute('open')) {\n      this.hidden = true\n    }\n\n    // Set up close button if dismissible\n    this.#setupCloseButton()\n\n    // Set up hover pause behavior\n    this.addEventListener('mouseenter', this.#handleMouseEnter)\n    this.addEventListener('mouseleave', this.#handleMouseLeave)\n\n    // If already open, register in queue\n    if (this.hasAttribute('open')) {\n      this.#show()\n    }\n  }\n\n  disconnectedCallback() {\n    this.#cleanup()\n    this.removeEventListener('mouseenter', this.#handleMouseEnter)\n    this.removeEventListener('mouseleave', this.#handleMouseLeave)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n\n    if (name === 'open') {\n      if (newVal !== null) {\n        this.#show()\n      } else {\n        // Use pending reason if set (e.g., from timeout), otherwise 'manual'\n        const reason = this.#pendingDismissReason || 'manual'\n        this.#pendingDismissReason = null\n        this.#hide(reason)\n      }\n    } else if (name === 'dismissible') {\n      this.#setupCloseButton()\n    } else if (name === 'position') {\n      // Re-register in correct queue if position changes while open\n      if (this.hasAttribute('open') && oldVal !== newVal) {\n        this.#removeFromQueue(oldVal || 'bottom-center')\n        this.#addToQueue()\n      }\n    }\n  }\n\n  #setupCloseButton() {\n    // Remove existing button if any\n    this.#closeButton?.remove()\n    this.#closeButton = null\n\n    if (this.dismissible) {\n      this.#closeButton = document.createElement('button')\n      this.#closeButton.type = 'button'\n      this.#closeButton.setAttribute('aria-label', 'Dismiss')\n      this.#closeButton.className = 'ytz-snackbar-close'\n      this.#closeButton.textContent = '\\u00D7'\n      this.#closeButton.addEventListener('click', this.#handleClose)\n      this.appendChild(this.#closeButton)\n    }\n  }\n\n  #show() {\n    // Clear any pending dismiss\n    this.#clearTimer()\n\n    // Show the snackbar\n    this.hidden = false\n\n    // Add to position queue\n    this.#addToQueue()\n\n    // Set up auto-dismiss timer\n    if (this.duration > 0) {\n      this.#startTimer()\n    }\n  }\n\n  #hide(reason = 'manual') {\n    this.#clearTimer()\n    this.hidden = true\n    this.#removeFromQueue(this.position)\n\n    // Dispatch dismiss event\n    this.dispatchEvent(new CustomEvent('dismiss', {\n      bubbles: true,\n      detail: { reason }\n    }))\n  }\n\n  #startTimer() {\n    this.#dismissTimer = window.setTimeout(() => {\n      // Set pending reason before removing attribute (triggers attributeChangedCallback)\n      this.#pendingDismissReason = 'timeout'\n      this.removeAttribute('open')\n    }, this.duration)\n  }\n\n  #clearTimer() {\n    if (this.#dismissTimer !== null) {\n      clearTimeout(this.#dismissTimer)\n      this.#dismissTimer = null\n    }\n  }\n\n  #handleMouseEnter = () => {\n    if (this.duration > 0 && this.#dismissTimer !== null) {\n      this.#isPaused = true\n      this.#clearTimer()\n    }\n  }\n\n  #handleMouseLeave = () => {\n    if (this.#isPaused && this.hasAttribute('open')) {\n      this.#isPaused = false\n      this.#startTimer()\n    }\n  }\n\n  #handleClose = (e) => {\n    e.stopPropagation()\n    this.removeAttribute('open')\n  }\n\n  #addToQueue() {\n    const pos = this.position\n    if (!snackbarQueues.has(pos)) {\n      snackbarQueues.set(pos, [])\n    }\n\n    const queue = snackbarQueues.get(pos)\n    if (!queue.includes(this)) {\n      queue.push(this)\n    }\n\n    // Enforce max-visible limit\n    this.#enforceMaxVisible()\n    this.#updateOffsets()\n  }\n\n  #removeFromQueue(pos) {\n    const queue = snackbarQueues.get(pos)\n    if (queue) {\n      const index = queue.indexOf(this)\n      if (index > -1) {\n        queue.splice(index, 1)\n        this.#updateOffsets()\n      }\n    }\n  }\n\n  #enforceMaxVisible() {\n    const queue = snackbarQueues.get(this.position) || []\n    const max = this.maxVisible\n\n    // Remove oldest snackbars if queue exceeds max\n    while (queue.length > max) {\n      const oldest = queue[0]\n      oldest.removeAttribute('open')\n    }\n  }\n\n  #updateOffsets() {\n    const pos = this.position\n    const queue = snackbarQueues.get(pos) || []\n    const isTop = pos.startsWith('top')\n\n    let offset = 0\n    for (const snackbar of queue) {\n      snackbar.style.setProperty('--ytz-snackbar-offset', `${offset}px`)\n      // Measure height for next snackbar's offset\n      const height = snackbar.offsetHeight || 0\n      offset += height + 8 // 8px gap between stacked snackbars\n    }\n  }\n\n  #cleanup() {\n    this.#clearTimer()\n    this.#removeFromQueue(this.position)\n    this.#closeButton?.removeEventListener('click', this.#handleClose)\n  }\n\n  // Public methods\n\n  /**\n   * Show the snackbar, optionally updating its message content.\n   * @param {string} [message] - Optional message to display\n   */\n  show(message) {\n    if (message !== undefined) {\n      // Update text content while preserving close button\n      const closeBtn = this.#closeButton\n      this.textContent = message\n      if (closeBtn && this.dismissible) {\n        this.appendChild(closeBtn)\n      }\n    }\n    this.setAttribute('open', '')\n  }\n\n  /**\n   * Dismiss the snackbar programmatically.\n   */\n  dismiss() {\n    this.removeAttribute('open')\n  }\n\n  // Property getters/setters\n\n  /**\n   * Get/set the open state.\n   * @type {boolean}\n   */\n  get open() {\n    return this.hasAttribute('open')\n  }\n\n  set open(value) {\n    if (value) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n  }\n\n  /**\n   * Get/set the auto-dismiss duration in milliseconds.\n   * @type {number}\n   */\n  get duration() {\n    const val = this.getAttribute('duration')\n    return val !== null ? parseInt(val, 10) : 5000\n  }\n\n  set duration(value) {\n    this.setAttribute('duration', String(value))\n  }\n\n  /**\n   * Get/set the position.\n   * @type {string}\n   */\n  get position() {\n    const pos = this.getAttribute('position')\n    return VALID_POSITIONS.includes(pos) ? pos : 'bottom-center'\n  }\n\n  set position(value) {\n    if (VALID_POSITIONS.includes(value)) {\n      this.setAttribute('position', value)\n    }\n  }\n\n  /**\n   * Get/set whether the close button is shown.\n   * @type {boolean}\n   */\n  get dismissible() {\n    return this.hasAttribute('dismissible')\n  }\n\n  set dismissible(value) {\n    if (value) {\n      this.setAttribute('dismissible', '')\n    } else {\n      this.removeAttribute('dismissible')\n    }\n  }\n\n  /**\n   * Get/set the maximum number of visible snackbars at this position.\n   * @type {number}\n   */\n  get maxVisible() {\n    const val = this.getAttribute('max-visible')\n    return val !== null ? parseInt(val, 10) : 3\n  }\n\n  set maxVisible(value) {\n    this.setAttribute('max-visible', String(value))\n  }\n}\n\nregister('ytz-snackbar', YtzSnackbar)\n\nexport { YtzSnackbar }\n","/**\n * ytz-progress - Progress indicator Web Component.\n * Supports both indeterminate (spinner) and determinate (progress bar) modes,\n * with circular and linear visual variants.\n *\n * @module @grimoire/yetzirah-core/progress\n * @example\n * // Indeterminate circular spinner (default)\n * <ytz-progress></ytz-progress>\n *\n * @example\n * // Determinate circular progress\n * <ytz-progress value=\"75\"></ytz-progress>\n *\n * @example\n * // Linear progress bar\n * <ytz-progress linear value=\"50\"></ytz-progress>\n *\n * @example\n * // Indeterminate linear (loading bar)\n * <ytz-progress linear></ytz-progress>\n */\n\nimport { register } from './utils/register.js'\n\n/** SVG circle properties for circular spinner */\nconst CIRCLE_SIZE = 44\nconst CIRCLE_RADIUS = 20\nconst CIRCLE_CIRCUMFERENCE = 2 * Math.PI * CIRCLE_RADIUS\n\n/**\n * @class YtzProgress\n * @extends HTMLElement\n */\nclass YtzProgress extends HTMLElement {\n  static observedAttributes = ['value', 'linear', 'size', 'label']\n\n  /** @type {SVGCircleElement|null} */\n  #circleTrack = null\n  /** @type {SVGCircleElement|null} */\n  #circleProgress = null\n  /** @type {HTMLDivElement|null} */\n  #linearTrack = null\n  /** @type {HTMLDivElement|null} */\n  #linearBar = null\n\n  connectedCallback() {\n    this.setAttribute('role', 'progressbar')\n    this.#render()\n    this.#updateARIA()\n  }\n\n  disconnectedCallback() {\n    // Clean up internal references\n    this.#circleTrack = null\n    this.#circleProgress = null\n    this.#linearTrack = null\n    this.#linearBar = null\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (!this.isConnected) return\n\n    if (name === 'linear') {\n      // Re-render when switching between modes\n      this.#render()\n    } else if (name === 'value') {\n      this.#updateProgress()\n    } else if (name === 'size') {\n      this.#updateSize()\n    }\n\n    // Always update ARIA on attribute changes\n    this.#updateARIA()\n  }\n\n  #render() {\n    // Clear existing content\n    this.innerHTML = ''\n\n    if (this.linear) {\n      this.#renderLinear()\n    } else {\n      this.#renderCircular()\n    }\n\n    this.#updateProgress()\n    this.#updateSize()\n  }\n\n  #renderCircular() {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n    svg.setAttribute('viewBox', `0 0 ${CIRCLE_SIZE} ${CIRCLE_SIZE}`)\n    svg.setAttribute('class', 'ytz-progress-circular')\n    svg.setAttribute('aria-hidden', 'true')\n\n    // Track circle (background)\n    this.#circleTrack = document.createElementNS('http://www.w3.org/2000/svg', 'circle')\n    this.#circleTrack.setAttribute('class', 'ytz-progress-track')\n    this.#circleTrack.setAttribute('cx', String(CIRCLE_SIZE / 2))\n    this.#circleTrack.setAttribute('cy', String(CIRCLE_SIZE / 2))\n    this.#circleTrack.setAttribute('r', String(CIRCLE_RADIUS))\n    this.#circleTrack.setAttribute('fill', 'none')\n    this.#circleTrack.setAttribute('stroke-width', '4')\n\n    // Progress circle\n    this.#circleProgress = document.createElementNS('http://www.w3.org/2000/svg', 'circle')\n    this.#circleProgress.setAttribute('class', 'ytz-progress-indicator')\n    this.#circleProgress.setAttribute('cx', String(CIRCLE_SIZE / 2))\n    this.#circleProgress.setAttribute('cy', String(CIRCLE_SIZE / 2))\n    this.#circleProgress.setAttribute('r', String(CIRCLE_RADIUS))\n    this.#circleProgress.setAttribute('fill', 'none')\n    this.#circleProgress.setAttribute('stroke-width', '4')\n    this.#circleProgress.setAttribute('stroke-linecap', 'round')\n    this.#circleProgress.setAttribute('stroke-dasharray', String(CIRCLE_CIRCUMFERENCE))\n\n    svg.appendChild(this.#circleTrack)\n    svg.appendChild(this.#circleProgress)\n    this.appendChild(svg)\n  }\n\n  #renderLinear() {\n    this.#linearTrack = document.createElement('div')\n    this.#linearTrack.className = 'ytz-progress-track'\n    this.#linearTrack.setAttribute('aria-hidden', 'true')\n\n    this.#linearBar = document.createElement('div')\n    this.#linearBar.className = 'ytz-progress-indicator'\n\n    this.#linearTrack.appendChild(this.#linearBar)\n    this.appendChild(this.#linearTrack)\n  }\n\n  #updateProgress() {\n    const value = this.value\n    const isIndeterminate = value === null\n\n    // Set data attribute for CSS styling\n    if (isIndeterminate) {\n      this.setAttribute('data-indeterminate', '')\n    } else {\n      this.removeAttribute('data-indeterminate')\n    }\n\n    // Update the visual representation\n    if (this.linear) {\n      if (this.#linearBar) {\n        if (isIndeterminate) {\n          this.#linearBar.style.width = ''\n        } else {\n          this.#linearBar.style.width = `${value}%`\n        }\n      }\n    } else {\n      if (this.#circleProgress) {\n        if (isIndeterminate) {\n          // Indeterminate: partial circle that rotates\n          this.#circleProgress.style.strokeDashoffset = String(CIRCLE_CIRCUMFERENCE * 0.75)\n        } else {\n          // Determinate: show progress as arc\n          const offset = CIRCLE_CIRCUMFERENCE * (1 - value / 100)\n          this.#circleProgress.style.strokeDashoffset = String(offset)\n        }\n      }\n    }\n\n    // Update CSS custom property for advanced styling\n    this.style.setProperty('--progress-percent', value !== null ? String(value) : '0')\n  }\n\n  #updateSize() {\n    // Size is handled via CSS using data-size attribute\n    const size = this.getAttribute('size')\n    if (size && ['small', 'medium', 'large'].includes(size)) {\n      this.setAttribute('data-size', size)\n    } else {\n      this.setAttribute('data-size', 'medium')\n    }\n  }\n\n  #updateARIA() {\n    const value = this.value\n    const label = this.getAttribute('label')\n\n    if (value === null) {\n      // Indeterminate: remove value attributes per WAI-ARIA spec\n      this.removeAttribute('aria-valuenow')\n      this.removeAttribute('aria-valuemin')\n      this.removeAttribute('aria-valuemax')\n    } else {\n      // Determinate: set value attributes\n      this.setAttribute('aria-valuenow', String(value))\n      this.setAttribute('aria-valuemin', '0')\n      this.setAttribute('aria-valuemax', '100')\n    }\n\n    // Apply label if provided\n    if (label) {\n      this.setAttribute('aria-label', label)\n    } else {\n      this.removeAttribute('aria-label')\n    }\n  }\n\n  // Property getters/setters\n\n  /**\n   * Get/set the progress value (0-100). Null means indeterminate.\n   * @type {number|null}\n   */\n  get value() {\n    const attr = this.getAttribute('value')\n    if (attr === null) return null\n    const num = parseFloat(attr)\n    if (isNaN(num)) return null\n    // Clamp to 0-100\n    return Math.min(100, Math.max(0, num))\n  }\n\n  set value(val) {\n    if (val === null || val === undefined) {\n      this.removeAttribute('value')\n    } else {\n      const clamped = Math.min(100, Math.max(0, Number(val)))\n      this.setAttribute('value', String(clamped))\n    }\n  }\n\n  /**\n   * Get/set whether this is a linear progress bar.\n   * @type {boolean}\n   */\n  get linear() {\n    return this.hasAttribute('linear')\n  }\n\n  set linear(val) {\n    if (val) {\n      this.setAttribute('linear', '')\n    } else {\n      this.removeAttribute('linear')\n    }\n  }\n\n  /**\n   * Read-only: true if no value is set (indeterminate mode).\n   * @type {boolean}\n   */\n  get indeterminate() {\n    return this.value === null\n  }\n\n  /**\n   * Get/set the size variant.\n   * @type {string}\n   */\n  get size() {\n    return this.getAttribute('size') || 'medium'\n  }\n\n  set size(val) {\n    if (['small', 'medium', 'large'].includes(val)) {\n      this.setAttribute('size', val)\n    }\n  }\n}\n\nregister('ytz-progress', YtzProgress)\n\nexport { YtzProgress }\n","/**\n * ytz-badge - Notification badge Web Component.\n * Overlays a count or dot indicator on slotted content.\n *\n * @module @grimoire/yetzirah-core/badge\n * @example\n * // Dot badge (no value)\n * <ytz-badge>\n *   <button>Messages</button>\n * </ytz-badge>\n *\n * @example\n * // Count badge\n * <ytz-badge value=\"5\">\n *   <button>Notifications</button>\n * </ytz-badge>\n *\n * @example\n * // Max cap badge\n * <ytz-badge value=\"150\" max=\"99\">\n *   <button>Inbox</button>\n * </ytz-badge>\n */\n\nimport { register } from './utils/register.js'\n\n/** Valid position values */\nconst VALID_POSITIONS = ['top-right', 'top-left', 'bottom-right', 'bottom-left']\n\n/**\n * @class YtzBadge\n * @extends HTMLElement\n */\nclass YtzBadge extends HTMLElement {\n  static observedAttributes = ['value', 'max', 'position', 'hidden']\n\n  /** @type {HTMLSpanElement|null} */\n  #indicator = null\n\n  connectedCallback() {\n    this.#createIndicator()\n    this.#update()\n  }\n\n  disconnectedCallback() {\n    this.#indicator?.remove()\n    this.#indicator = null\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected) {\n      this.#update()\n    }\n  }\n\n  #createIndicator() {\n    this.#indicator = document.createElement('span')\n    this.#indicator.className = 'ytz-badge-indicator'\n    this.#indicator.setAttribute('aria-hidden', 'true')\n    this.appendChild(this.#indicator)\n  }\n\n  #update() {\n    if (!this.#indicator) return\n\n    const rawValue = this.getAttribute('value')\n    const max = this.max\n    const pos = this.position\n    const isHidden = this.hasAttribute('hidden')\n\n    // Determine mode and display value\n    let mode\n    let displayValue = ''\n\n    if (rawValue === null) {\n      // No value = dot mode\n      mode = 'dot'\n    } else if (rawValue === '0') {\n      // Zero = hidden\n      mode = 'hidden'\n    } else {\n      // Count mode\n      mode = 'count'\n      const numValue = parseInt(rawValue, 10)\n\n      if (!isNaN(numValue) && max !== null && numValue > max) {\n        displayValue = `${max}+`\n      } else {\n        displayValue = rawValue\n      }\n    }\n\n    // Apply visibility\n    if (mode === 'hidden' || isHidden) {\n      this.#indicator.hidden = true\n    } else {\n      this.#indicator.hidden = false\n    }\n\n    // Set data attributes for styling\n    this.#indicator.setAttribute('data-mode', mode)\n    this.#indicator.setAttribute('data-position', pos)\n\n    // Set content for count mode\n    this.#indicator.textContent = mode === 'count' ? displayValue : ''\n  }\n\n  // Property getters/setters\n\n  /**\n   * Get/set the badge value. Null/undefined = dot mode, \"0\" = hidden.\n   * @type {string|number|null}\n   */\n  get value() {\n    return this.getAttribute('value')\n  }\n\n  set value(val) {\n    if (val === null || val === undefined) {\n      this.removeAttribute('value')\n    } else {\n      this.setAttribute('value', String(val))\n    }\n  }\n\n  /**\n   * Get/set the maximum displayed value. Shows \"max+\" when exceeded.\n   * @type {number|null}\n   */\n  get max() {\n    const attr = this.getAttribute('max')\n    if (attr === null) return null\n    const num = parseInt(attr, 10)\n    return isNaN(num) ? null : num\n  }\n\n  set max(val) {\n    if (val === null || val === undefined) {\n      this.removeAttribute('max')\n    } else {\n      this.setAttribute('max', String(val))\n    }\n  }\n\n  /**\n   * Get/set the badge position relative to child content.\n   * @type {string}\n   */\n  get position() {\n    const pos = this.getAttribute('position')\n    return VALID_POSITIONS.includes(pos) ? pos : 'top-right'\n  }\n\n  set position(val) {\n    if (VALID_POSITIONS.includes(val)) {\n      this.setAttribute('position', val)\n    }\n  }\n}\n\nregister('ytz-badge', YtzBadge)\n\nexport { YtzBadge }\n","/**\n * ytz-theme-toggle - Theme switching Web Component.\n * A toggle switch that controls light/dark theme with persistence.\n *\n * @module @grimoire/yetzirah-core/theme-toggle\n * @example\n * <ytz-theme-toggle></ytz-theme-toggle>\n *\n * @example\n * // With custom storage key\n * <ytz-theme-toggle storage-key=\"my-app-theme\"></ytz-theme-toggle>\n *\n * @example\n * // Without persistence\n * <ytz-theme-toggle no-persist></ytz-theme-toggle>\n */\n\nimport './toggle.js'\nimport { register } from './utils/register.js'\n\n/** @type {string} Default localStorage key */\nconst DEFAULT_STORAGE_KEY = 'yetzirah-theme'\n\n/** @type {string} CSS class applied to document for dark mode */\nconst DARK_CLASS = 'dark-mode'\n\n/** @type {string} Data attribute for theme */\nconst THEME_ATTR = 'data-theme'\n\n/**\n * @class YtzThemeToggle\n * @extends HTMLElement\n */\nclass YtzThemeToggle extends HTMLElement {\n  static observedAttributes = ['storage-key', 'no-persist']\n\n  /** @type {HTMLElement|null} */\n  #toggle = null\n\n  connectedCallback() {\n    this.#setup()\n    this.#initializeTheme()\n  }\n\n  disconnectedCallback() {\n    this.#toggle?.removeEventListener('change', this.#handleChange)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected && name === 'storage-key') {\n      this.#initializeTheme()\n    }\n  }\n\n  #setup() {\n    // Create inner toggle if not present\n    if (!this.#toggle) {\n      this.#toggle = document.createElement('ytz-toggle')\n      this.#toggle.setAttribute('aria-label', 'Toggle dark mode')\n\n      // Move existing children into toggle as label\n      while (this.firstChild) {\n        this.#toggle.appendChild(this.firstChild)\n      }\n\n      // Default label if no children provided\n      // Use hasChildNodes() instead of textContent to preserve element children like styling spans\n      if (!this.#toggle.hasChildNodes()) {\n        this.#toggle.textContent = 'Dark mode'\n      }\n\n      this.appendChild(this.#toggle)\n    }\n\n    this.#toggle.addEventListener('change', this.#handleChange)\n  }\n\n  #initializeTheme() {\n    const savedTheme = this.#loadTheme()\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches\n\n    // Determine initial theme: saved > system preference > light\n    const isDark = savedTheme === 'dark' || (savedTheme === null && prefersDark)\n\n    this.#applyTheme(isDark)\n    this.#updateToggle(isDark)\n\n    // Listen for system preference changes\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {\n      if (!this.#loadTheme()) {\n        // Only respond to system changes if no saved preference\n        this.#applyTheme(e.matches)\n        this.#updateToggle(e.matches)\n      }\n    })\n  }\n\n  #handleChange = (e) => {\n    const isDark = e.detail.checked\n    this.#applyTheme(isDark)\n    this.#saveTheme(isDark ? 'dark' : 'light')\n\n    this.dispatchEvent(new CustomEvent('themechange', {\n      bubbles: true,\n      detail: { theme: isDark ? 'dark' : 'light', isDark }\n    }))\n  }\n\n  #applyTheme(isDark) {\n    const root = document.documentElement\n\n    if (isDark) {\n      root.classList.add(DARK_CLASS)\n      root.setAttribute(THEME_ATTR, 'dark')\n    } else {\n      root.classList.remove(DARK_CLASS)\n      root.setAttribute(THEME_ATTR, 'light')\n    }\n  }\n\n  #updateToggle(isDark) {\n    if (!this.#toggle) return\n\n    if (isDark) {\n      this.#toggle.setAttribute('checked', '')\n    } else {\n      this.#toggle.removeAttribute('checked')\n    }\n  }\n\n  #loadTheme() {\n    if (this.hasAttribute('no-persist')) return null\n\n    try {\n      return localStorage.getItem(this.storageKey)\n    } catch {\n      // localStorage may be unavailable\n      return null\n    }\n  }\n\n  #saveTheme(theme) {\n    if (this.hasAttribute('no-persist')) return\n\n    try {\n      localStorage.setItem(this.storageKey, theme)\n    } catch {\n      // localStorage may be unavailable\n    }\n  }\n\n  /**\n   * Get the storage key for theme persistence.\n   * @type {string}\n   */\n  get storageKey() {\n    return this.getAttribute('storage-key') || DEFAULT_STORAGE_KEY\n  }\n\n  set storageKey(value) {\n    this.setAttribute('storage-key', value)\n  }\n\n  /**\n   * Get the current theme.\n   * @type {'light'|'dark'}\n   */\n  get theme() {\n    return document.documentElement.classList.contains(DARK_CLASS) ? 'dark' : 'light'\n  }\n\n  /**\n   * Set the theme programmatically.\n   * @param {'light'|'dark'} value\n   */\n  set theme(value) {\n    const isDark = value === 'dark'\n    this.#applyTheme(isDark)\n    this.#updateToggle(isDark)\n    this.#saveTheme(value)\n  }\n\n  /**\n   * Check if dark mode is active.\n   * @type {boolean}\n   */\n  get isDark() {\n    return this.theme === 'dark'\n  }\n\n  /**\n   * Toggle the theme.\n   */\n  toggle() {\n    this.theme = this.isDark ? 'light' : 'dark'\n  }\n}\n\nregister('ytz-theme-toggle', YtzThemeToggle)\n\nexport { YtzThemeToggle }\n","/**\n * @grimoire/yetzirah-core\n *\n * Web Components for behavioral UI patterns.\n * Zero dependencies, framework-agnostic, accessibility-first.\n *\n * @packageDocumentation\n */\n\n// Components\nexport { YtzAccordion, YtzAccordionItem } from './accordion.js'\nexport { YtzButton } from './button.js'\nexport { YtzDialog } from './dialog.js'\nexport { YtzDisclosure } from './disclosure.js'\nexport { YtzDrawer } from './drawer.js'\nexport { YtzTabs, YtzTab, YtzTabPanel } from './tabs.js'\nexport { YtzTooltip } from './tooltip.js'\nexport { YtzPopover } from './popover.js'\nexport { YtzMenu, YtzMenuItem } from './menu.js'\nexport { YtzAutocomplete, YtzOption } from './autocomplete.js'\nexport { YtzListbox } from './listbox.js'\nexport { YtzSelect } from './select.js'\nexport { YtzToggle } from './toggle.js'\nexport { YtzChip } from './chip.js'\nexport { YtzIconButton } from './icon-button.js'\nexport { YtzSlider } from './slider.js'\nexport { YtzDatagrid, YtzDatagridColumn } from './datagrid.js'\nexport { YtzSnackbar } from './snackbar.js'\nexport { YtzProgress } from './progress.js'\nexport { YtzBadge } from './badge.js'\n\n/**\n * Yetzirah version\n * @type {string}\n */\nexport const VERSION = '0.1.0'\nexport { YtzThemeToggle } from './theme-toggle.js'\n"]}