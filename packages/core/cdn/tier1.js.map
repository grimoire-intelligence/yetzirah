{"version":3,"sources":["../src/utils/register.js","../src/button.js","../src/disclosure.js","../src/utils/focus-trap.js","../src/dialog.js","../src/utils/key-nav.js","../src/tabs.js","../src/utils/position.js","../src/tooltip.js","../src/utils/click-outside.js","../src/menu.js","../src/autocomplete.js","../src/listbox.js","../src/select.js","../src/accordion.js","../src/drawer.js","../src/popover.js","../src/tier1.js"],"names":["register","name","constructor","ANCHOR_DEFAULTS","BUTTON_DEFAULTS","YtzButton","#render","href","userClass","isAnchor","el","defaults","attr","#contentCache","disclosureId","YtzDisclosure","#trigger","#content","#contentId","#setup","#updateState","#handleClick","oldVal","newVal","isOpen","willOpen","value","FOCUSABLE","createFocusTrap","container","handleKeydown","focusable","first","last","YtzDialog","#previousFocus","#focusTrap","#previousOverflow","#handleBackdropClick","#cleanup","#open","#close","#handleEscape","firstFocusable","e","createKeyNav","getItems","options","orientation","wrap","autoActivate","onActivate","prevKey","nextKey","items","currentIndex","newIndex","tabId","YtzTabs","#keyNav","#setupKeyNav","firstTab","#updateSelection","tab","panel","#handleKeyDown","isSelected","v","YtzTab","panelId","tabs","YtzTabPanel","#linkToTab","position","anchor","floating","placement","offset","anchorRect","floatingRect","viewport","x","y","finalPlacement","tooltipId","YtzTooltip","#showTimeout","#hideTimeout","#isVisible","#updatePosition","#handleMouseEnter","#handleMouseLeave","#handleContentMouseEnter","#handleFocusIn","#handleFocusOut","#handleTouchStart","#show","#hide","clickOutside","element","callback","ignore","handleClick","menuId","YtzMenu","#popup","#menuId","#clickOutsideHandler","#lastCloseTime","#showMenu","#hideMenu","item","#handleTriggerClick","focused","basePlacement","YtzMenuItem","menu","autocompleteId","YtzAutocomplete","#input","#listbox","#listboxId","#selected","#justClosed","#showListbox","#hideListbox","#updateLoadingState","val","#updateSelectedState","opt","#handleInput","#handleInputFocus","#handleInputKeyDown","#handleOptionClick","#filterOptions","firstOption","#selectOption","option","query","text","loadingSlot","label","disabled","YtzOption","listboxId","YtzListbox","#id","#updateDisabledState","#handleFocus","selected","selectId","YtzSelect","#customTrigger","#updateTriggerText","#handleTriggerKeyDown","#handleListboxKeyDown","#handleOutsideClick","o","accordionItemId","YtzAccordion","#handleItemToggle","openedItem","YtzAccordionItem","VALID_ANCHORS","YtzDrawer","popoverId","YtzPopover","VERSION"],"mappings":"AAeO,SAASA,CAAAA,CAASC,EAAMC,CAAAA,CAAa,CACrC,eAAe,GAAA,CAAID,CAAI,CAAA,EAC1B,cAAA,CAAe,MAAA,CAAOA,CAAAA,CAAMC,CAAW,EAE3C,CCFA,IAAMC,CAAAA,CAAkB,uCAAA,CAGlBC,CAAAA,CAAkB,sCAMlBC,CAAAA,CAAN,cAAwB,WAAY,CAClC,iBAAA,EAAoB,CAClB,KAAKC,EAAAA,GACP,CAEA,WAAW,kBAAA,EAAqB,CAC9B,OAAO,CAAC,MAAA,CAAQ,UAAA,CAAY,MAAA,CAAQ,OAAO,CAC7C,CAEA,wBAAA,EAA2B,CACrB,IAAA,CAAK,WAAA,EAAa,IAAA,CAAKA,KAC7B,CAEAA,EAAAA,EAAU,CACR,IAAMC,CAAAA,CAAO,KAAK,YAAA,CAAa,MAAM,EAC/BC,CAAAA,CAAY,IAAA,CAAK,aAAa,OAAO,CAAA,EAAK,EAAA,CAC1CC,CAAAA,CAAWF,CAAAA,EAAQ,IAAA,CAEnBG,EAAK,QAAA,CAAS,aAAA,CAAcD,CAAAA,CAAW,GAAA,CAAM,QAAQ,CAAA,CACrDE,EAAWF,CAAAA,CAAWN,CAAAA,CAAkBC,CAAAA,CAC9CM,CAAAA,CAAG,SAAA,CAAYC,CAAAA,EAAYH,EAAY,GAAA,CAAMA,CAAAA,CAAY,IAErDC,CAAAA,CACFC,CAAAA,CAAG,KAAOH,CAAAA,EAEVG,CAAAA,CAAG,IAAA,CAAO,IAAA,CAAK,YAAA,CAAa,MAAM,GAAK,QAAA,CACnC,IAAA,CAAK,YAAA,CAAa,UAAU,CAAA,GAAGA,CAAAA,CAAG,SAAW,IAAA,CAAA,CAAA,CAInD,IAAA,IAAWE,CAAAA,IAAQ,IAAA,CAAK,UAAA,CAAA,CAClBA,CAAAA,CAAK,KAAK,UAAA,CAAW,OAAO,GAAKA,CAAAA,CAAK,IAAA,CAAK,WAAW,OAAO,CAAA,GAC/DF,CAAAA,CAAG,YAAA,CAAaE,CAAAA,CAAK,IAAA,CAAMA,EAAK,KAAK,CAAA,CAIzCF,CAAAA,CAAG,SAAA,CAAY,IAAA,CAAKG,EAAAA,EAAiB,KAAK,SAAA,CAC1C,IAAA,CAAKA,EAAAA,CAAgBH,CAAAA,CAAG,SAAA,CAExB,IAAA,CAAK,gBAAgBA,CAAE,EACzB,CAGAG,EAAAA,CAAgB,IAClB,EAEAb,CAAAA,CAAS,YAAA,CAAcK,CAAS,CAAA,CCnDhC,IAAIS,CAAAA,CAAe,EAMbC,CAAAA,CAAN,cAA4B,WAAY,CACtC,OAAO,kBAAA,CAAqB,CAAC,MAAM,CAAA,CAGnCC,EAAAA,CAAW,IAAA,CAEXC,EAAAA,CAAW,IAAA,CAEXC,GAAa,IAAA,CAEb,iBAAA,EAAoB,CAClB,IAAA,CAAKC,EAAAA,GACL,IAAA,CAAKC,EAAAA,GACP,CAEA,oBAAA,EAAuB,CACrB,KAAKJ,EAAAA,EAAU,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKK,EAAY,EAC/D,CAEA,wBAAA,CAAyBpB,CAAAA,CAAMqB,CAAAA,CAAQC,CAAAA,CAAQ,CACzCtB,CAAAA,GAAS,QAAU,IAAA,CAAK,WAAA,EAC1B,IAAA,CAAKmB,EAAAA,GAET,CAEAD,IAAS,CAEP,IAAA,CAAKH,EAAAA,CAAW,IAAA,CAAK,aAAA,CAAc,QAAQ,EAC3C,IAAA,CAAKC,EAAAA,CAAW,IAAA,CAAKD,EAAAA,EAAU,kBAAA,CAE3B,EAAA,CAAC,KAAKA,EAAAA,EAAY,CAAC,IAAA,CAAKC,EAAAA,CAAAA,GAG5B,IAAA,CAAKC,EAAAA,CAAa,KAAKD,EAAAA,CAAS,EAAA,EAAM,kBAAkB,EAAEH,CAAY,GACtE,IAAA,CAAKG,EAAAA,CAAS,EAAA,CAAK,IAAA,CAAKC,EAAAA,CAGxB,IAAA,CAAKF,GAAS,YAAA,CAAa,eAAA,CAAiB,IAAA,CAAKE,EAAU,CAAA,CAG3D,IAAA,CAAKF,GAAS,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAKK,EAAY,CAAA,EAC3D,CAEAA,GAAe,IAAM,CACnB,KAAK,MAAA,GACP,EAEAD,EAAAA,EAAe,CACb,IAAMI,CAAAA,CAAS,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAEnC,IAAA,CAAKR,EAAAA,EACP,IAAA,CAAKA,EAAAA,CAAS,YAAA,CAAa,gBAAiB,MAAA,CAAOQ,CAAM,CAAC,CAAA,CAGxD,IAAA,CAAKP,EAAAA,GACP,KAAKA,EAAAA,CAAS,MAAA,CAAS,CAACO,CAAAA,EAE5B,CAMA,QAAS,CACP,IAAMC,CAAAA,CAAW,CAAC,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAEtCA,CAAAA,CACF,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,EAE5B,IAAA,CAAK,eAAA,CAAgB,MAAM,CAAA,CAG7B,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,QAAA,CAAU,CAC3C,OAAA,CAAS,IAAA,CACT,MAAA,CAAQ,CAAE,IAAA,CAAMA,CAAS,CAC3B,CAAC,CAAC,EACJ,CAMA,IAAI,IAAA,EAAO,CACT,OAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CACjC,CAEA,IAAI,IAAA,CAAKC,CAAAA,CAAO,CACVA,EACF,IAAA,CAAK,YAAA,CAAa,OAAQ,EAAE,CAAA,CAE5B,KAAK,eAAA,CAAgB,MAAM,EAE/B,CACF,EAEA1B,CAAAA,CAAS,iBAAkBe,CAAa,CAAA,CCjHxC,IAAMY,CAAAA,CAAY,2IAAA,CAQX,SAASC,EAAgBC,CAAAA,CAAW,CAEzC,SAASC,CAAAA,CAAc,CAAA,CAAG,CACxB,GAAI,CAAA,CAAE,GAAA,GAAQ,MAAO,OAErB,IAAMC,EAAY,CAAC,GAAGF,CAAAA,CAAU,gBAAA,CAAiBF,CAAS,CAAC,EACxD,MAAA,CAAOjB,CAAAA,EAAM,CAACA,CAAAA,CAAG,MAAA,EAAU,CAACA,EAAG,OAAA,CAAQ,UAAU,CAAC,CAAA,CAErD,GAAIqB,CAAAA,CAAU,SAAW,CAAA,CAAG,OAE5B,IAAMC,CAAAA,CAAQD,CAAAA,CAAU,CAAC,CAAA,CACnBE,CAAAA,CAAOF,CAAAA,CAAUA,CAAAA,CAAU,MAAA,CAAS,CAAC,EAEvC,CAAA,CAAE,QAAA,EAAY,QAAA,CAAS,aAAA,GAAkBC,CAAAA,EAC3C,CAAA,CAAE,gBAAe,CACjBC,CAAAA,CAAK,KAAA,EAAM,EACF,CAAC,CAAA,CAAE,UAAY,QAAA,CAAS,aAAA,GAAkBA,CAAAA,GACnD,CAAA,CAAE,cAAA,EAAe,CACjBD,EAAM,KAAA,EAAM,EAEhB,CAEA,OAAO,CACL,QAAA,EAAW,CACTH,CAAAA,CAAU,gBAAA,CAAiB,SAAA,CAAWC,CAAa,EACrD,CAAA,CACA,YAAa,CACXD,CAAAA,CAAU,mBAAA,CAAoB,SAAA,CAAWC,CAAa,EACxD,CACF,CACF,KCtBMH,CAAAA,CAAY,2IAAA,CAMZO,EAAN,cAAwB,WAAY,CAClC,OAAO,kBAAA,CAAqB,CAAC,MAAM,CAAA,CAGnCC,EAAAA,CAAiB,IAAA,CAEjBC,EAAAA,CAAa,IAAA,CAEbC,EAAAA,CAAoB,GAEpB,iBAAA,EAAoB,CAClB,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,QAAQ,EAClC,IAAA,CAAK,YAAA,CAAa,aAAc,MAAM,CAAA,CACtC,KAAK,MAAA,CAAS,CAAC,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAGvC,KAAK,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAKC,EAAoB,EAC1D,CAEA,sBAAuB,CACrB,IAAA,CAAK,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKA,EAAoB,EAC3D,IAAA,CAAKC,EAAAA,GACP,CAEA,wBAAA,CAAyBtC,EAAMqB,CAAAA,CAAQC,CAAAA,CAAQ,CACzCtB,CAAAA,GAAS,MAAA,EAAU,IAAA,CAAK,cAC1BsB,CAAAA,GAAW,IAAA,CAAO,IAAA,CAAKiB,EAAAA,EAAM,CAAI,IAAA,CAAKC,IAAO,EAEjD,CAEAD,EAAAA,EAAQ,CAEN,IAAA,CAAKL,EAAAA,CAA6C,SAAS,aAAA,CAG3D,IAAA,CAAK,MAAA,CAAS,KAAA,CAGd,IAAA,CAAKE,EAAAA,CAAoB,SAAS,IAAA,CAAK,KAAA,CAAM,QAAA,CAC7C,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,SAAW,QAAA,CAG/B,IAAA,CAAKD,EAAAA,CAAaR,CAAAA,CAAgB,IAAI,CAAA,CACtC,KAAKQ,EAAAA,CAAW,QAAA,EAAS,CAGzB,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAW,KAAKM,EAAa,CAAA,CAGvD,sBAAsB,IAAM,CAC1B,IAAMC,CAAAA,CAAiB,IAAA,CAAK,aAAA,CAAchB,CAAS,CAAA,CAC/CgB,CAAAA,CAC0BA,EAAgB,KAAA,EAAM,EAElD,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,IAAI,EAClC,IAAA,CAAK,KAAA,EAAM,EAEf,CAAC,EACH,CAEAF,IAAS,CACP,IAAA,CAAK,OAAS,IAAA,CACd,IAAA,CAAKF,IAAS,CAGd,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,OAAA,CAAS,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,EAChE,CAEAA,IAAW,CAET,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,QAAA,CAAW,IAAA,CAAKF,GAGpC,IAAA,CAAKD,EAAAA,EAAY,YAAW,CAC5B,IAAA,CAAKA,GAAa,IAAA,CAGlB,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAW,IAAA,CAAKM,EAAa,EAG1D,IAAA,CAAKP,EAAAA,EAAgB,KAAA,EAAM,CAC3B,IAAA,CAAKA,EAAAA,CAAiB,KACxB,CAGAO,EAAAA,CAAiBE,CAAAA,EAAM,CACjBA,CAAAA,CAAE,GAAA,GAAQ,UAAY,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,GAChDA,CAAAA,CAAE,cAAA,GACF,IAAA,CAAK,eAAA,CAAgB,MAAM,CAAA,EAE/B,CAAA,CAGAN,EAAAA,CAAwBM,GAAM,CAExBA,CAAAA,CAAE,MAAA,GAAW,IAAA,EAAQ,CAAC,IAAA,CAAK,aAAa,QAAQ,CAAA,EAClD,IAAA,CAAK,eAAA,CAAgB,MAAM,EAE/B,EAMA,IAAI,IAAA,EAAO,CACT,OAAO,IAAA,CAAK,aAAa,MAAM,CACjC,CAEA,IAAI,IAAA,CAAKlB,CAAAA,CAAO,CACVA,CAAAA,CACF,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,CAAA,CAE5B,KAAK,eAAA,CAAgB,MAAM,EAE/B,CAKA,KAAA,EAAQ,CACN,KAAK,eAAA,CAAgB,MAAM,EAC7B,CAKA,SAAA,EAAY,CACV,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,EAC9B,CACF,EAEA1B,CAAAA,CAAS,YAAA,CAAckC,CAAS,CAAA,CClJzB,SAASW,CAAAA,CAAaC,EAAUC,CAAAA,CAAU,EAAC,CAAG,CACnD,GAAM,CAAE,YAAAC,CAAAA,CAAc,YAAA,CAAc,KAAAC,CAAAA,CAAO,IAAA,CAAM,aAAAC,CAAAA,CAAe,IAAA,CAAM,UAAA,CAAAC,CAAW,CAAA,CAAIJ,CAAAA,CAC/EK,EAAUJ,CAAAA,GAAgB,YAAA,CAAe,WAAA,CAAc,SAAA,CACvDK,CAAAA,CAAUL,CAAAA,GAAgB,aAAe,YAAA,CAAe,WAAA,CAE9D,OAAO,CACL,aAAA,CAAcJ,CAAAA,CAAG,CACf,IAAMU,CAAAA,CAAQR,CAAAA,EAAS,CACjBS,CAAAA,CAAeD,CAAAA,CAAM,QAAQ,QAAA,CAAS,aAAa,CAAA,CACzD,GAAIC,CAAAA,GAAiB,EAAA,CAAI,OAEzB,IAAIC,CAAAA,CAAWD,CAAAA,CACf,GAAIX,CAAAA,CAAE,GAAA,GAAQQ,EACZI,CAAAA,CAAWD,CAAAA,CAAe,CAAA,CACtBC,CAAAA,CAAW,CAAA,GAAGA,CAAAA,CAAWP,EAAOK,CAAAA,CAAM,MAAA,CAAS,EAAI,CAAA,CAAA,CAAA,KAAA,GAC9CV,CAAAA,CAAE,MAAQS,CAAAA,CACnBG,CAAAA,CAAWD,CAAAA,CAAe,CAAA,CACtBC,CAAAA,EAAYF,CAAAA,CAAM,SAAQE,CAAAA,CAAWP,CAAAA,CAAO,CAAA,CAAIK,CAAAA,CAAM,MAAA,CAAS,CAAA,CAAA,CAAA,KAAA,GAC1DV,EAAE,GAAA,GAAQ,MAAA,CACnBY,CAAAA,CAAW,CAAA,CAAA,KAAA,GACFZ,CAAAA,CAAE,GAAA,GAAQ,MACnBY,CAAAA,CAAWF,CAAAA,CAAM,OAAS,CAAA,CAAA,KAE1B,OAGFV,EAAE,cAAA,EAAe,CACjBU,CAAAA,CAAME,CAAQ,CAAA,CAAE,KAAA,GACZN,CAAAA,EAAgBC,CAAAA,EAAYA,CAAAA,CAAWG,CAAAA,CAAME,CAAQ,CAAC,EAC5D,CACF,CACF,CClCA,IAAIC,CAAAA,CAAQ,CAAA,CAGNC,EAAN,cAAsB,WAAY,CAChC,OAAO,kBAAA,CAAqB,CAAC,OAAA,CAAS,aAAa,CAAA,CACnDC,EAAAA,CAAU,IAAA,CAEV,iBAAA,EAAoB,CAGlB,GAFA,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,SAAS,CAAA,CACnC,KAAKC,EAAAA,EAAa,CACd,CAAC,IAAA,CAAK,YAAA,CAAa,OAAO,EAAG,CAC/B,IAAMC,CAAAA,CAAW,IAAA,CAAK,aAAA,CAAc,SAAS,EACzCA,CAAAA,EAAU,YAAA,CAAa,OAAO,CAAA,EAChC,IAAA,CAAK,YAAA,CAAa,QAASA,CAAAA,CAAS,YAAA,CAAa,OAAO,CAAC,EAE7D,CACA,KAAKC,EAAAA,GACP,CAEA,wBAAA,CAAyB7D,CAAAA,CAAMqB,CAAAA,CAAQC,EAAQ,CACxC,IAAA,CAAK,cACNtB,CAAAA,GAAS,OAAA,EAAWqB,IAAWC,CAAAA,GACjC,IAAA,CAAKuC,EAAAA,EAAiB,CAClBxC,CAAAA,GAAW,IAAA,EACb,KAAK,aAAA,CAAc,IAAI,WAAA,CAAY,QAAA,CAAU,CAAE,OAAA,CAAS,KAAM,MAAA,CAAQ,CAAE,KAAA,CAAOC,CAAO,CAAE,CAAC,CAAC,CAAA,CAAA,CAG1FtB,CAAAA,GAAS,eAAe,IAAA,CAAK2D,EAAAA,IACnC,CAEAA,EAAAA,EAAe,CACb,IAAMZ,CAAAA,CAAc,IAAA,CAAK,aAAa,aAAa,CAAA,GAAM,UAAA,CAAa,UAAA,CAAa,YAAA,CACnF,IAAA,CAAKW,GAAUd,CAAAA,CACb,IAAM,CAAC,GAAG,IAAA,CAAK,gBAAA,CAAiB,SAAS,CAAC,CAAA,CAC1C,CACE,WAAA,CAAAG,CAAAA,CACA,KAAM,IAAA,CACN,YAAA,CAAc,IAAA,CACd,UAAA,CAAae,CAAAA,EAAQ,CACnB,IAAMC,CAAAA,CAAQD,CAAAA,CAAI,YAAA,CAAa,OAAO,CAAA,CAClCC,CAAAA,GAAO,KAAK,KAAA,CAAQA,CAAAA,EAC1B,CACF,CACF,CAAA,CACA,IAAA,CAAK,iBAAiB,SAAA,CAAW,IAAA,CAAKC,EAAc,EACtD,CAEAA,GAAkBrB,CAAAA,EAAM,IAAA,CAAKe,EAAAA,EAAS,aAAA,CAAcf,CAAC,CAAA,CAErDkB,IAAmB,CACjB,IAAMpC,CAAAA,CAAQ,IAAA,CAAK,YAAA,CAAa,OAAO,EACvC,IAAA,CAAK,gBAAA,CAAiB,SAAS,CAAA,CAAE,OAAA,CAASqC,CAAAA,EAAQ,CAChD,IAAMG,CAAAA,CAAaH,EAAI,YAAA,CAAa,OAAO,IAAMrC,CAAAA,CACjDqC,CAAAA,CAAI,YAAA,CAAa,eAAA,CAAiB,MAAA,CAAOG,CAAU,CAAC,CAAA,CACpDH,CAAAA,CAAI,YAAA,CAAa,UAAA,CAAYG,CAAAA,CAAa,GAAA,CAAM,IAAI,EACtD,CAAC,CAAA,CACD,IAAA,CAAK,gBAAA,CAAiB,cAAc,EAAE,OAAA,CAASF,CAAAA,EAAU,CACvDA,CAAAA,CAAM,MAAA,CAASA,EAAM,EAAA,GAAOtC,EAC9B,CAAC,EACH,CAEA,IAAI,OAAQ,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,OAAO,CAAE,CAChD,IAAI,KAAA,CAAMyC,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,aAAa,OAAA,CAASA,CAAC,EAAI,IAAA,CAAK,eAAA,CAAgB,OAAO,EAAE,CAEjF,IAAI,WAAA,EAAc,CAChB,OAAO,KAAK,YAAA,CAAa,aAAa,CAAA,GAAM,UAAA,CAAa,UAAA,CAAa,YACxE,CACA,IAAI,WAAA,CAAYA,CAAAA,CAAG,CAAE,IAAA,CAAK,YAAA,CAAa,cAAeA,CAAC,EAAE,CAC3D,CAAA,CAGMC,CAAAA,CAAN,cAAqB,WAAY,CAC/B,iBAAA,EAAoB,CAClB,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,KAAK,CAAA,CAC1B,IAAA,CAAK,YAAA,CAAa,UAAU,CAAA,EAAG,IAAA,CAAK,aAAa,UAAA,CAAY,IAAI,CAAA,CACjE,IAAA,CAAK,EAAA,GAAI,IAAA,CAAK,GAAK,CAAA,QAAA,EAAW,EAAEX,CAAK,CAAA,CAAA,CAAA,CAC1C,IAAMY,EAAU,IAAA,CAAK,YAAA,CAAa,OAAO,CAAA,CACrCA,CAAAA,EAAS,IAAA,CAAK,aAAa,eAAA,CAAiBA,CAAO,CAAA,CACvD,IAAA,CAAK,gBAAA,CAAiB,OAAA,CAAS,KAAKhD,EAAY,EAClD,CAEA,oBAAA,EAAuB,CAAE,IAAA,CAAK,oBAAoB,OAAA,CAAS,IAAA,CAAKA,EAAY,EAAE,CAE9EA,GAAe,IAAM,CACnB,IAAMiD,CAAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,UAAU,CAAA,CAC9BN,CAAAA,CAAQ,IAAA,CAAK,YAAA,CAAa,OAAO,CAAA,CACnCM,GAAQN,CAAAA,GAAOM,CAAAA,CAAK,KAAA,CAAQN,CAAAA,EAClC,CAAA,CAEA,IAAI,OAAQ,CAAE,OAAO,KAAK,YAAA,CAAa,OAAO,CAAE,CAChD,IAAI,KAAA,CAAMG,CAAAA,CAAG,CACPA,CAAAA,EACF,KAAK,YAAA,CAAa,OAAA,CAASA,CAAC,CAAA,CAC5B,IAAA,CAAK,YAAA,CAAa,gBAAiBA,CAAC,CAAA,GAEpC,IAAA,CAAK,eAAA,CAAgB,OAAO,CAAA,CAC5B,KAAK,eAAA,CAAgB,eAAe,CAAA,EAExC,CACF,CAAA,CAGMI,CAAAA,CAAN,cAA0B,WAAY,CACpC,iBAAA,EAAoB,CAClB,IAAA,CAAK,YAAA,CAAa,OAAQ,UAAU,CAAA,CACpC,IAAMD,CAAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,UAAU,CAAA,CAChCA,CAAAA,CACF,IAAA,CAAK,MAAA,CAAS,IAAA,CAAK,EAAA,GAAOA,EAAK,YAAA,CAAa,OAAO,EAEnD,IAAA,CAAK,MAAA,CAAS,KAEhB,IAAA,CAAKE,EAAAA,GACP,CAEAA,EAAAA,EAAa,CACX,IAAMF,CAAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,UAAU,CAAA,CACpC,GAAI,CAACA,CAAAA,EAAQ,CAAC,IAAA,CAAK,EAAA,CAAI,OACvB,IAAMP,EAAMO,CAAAA,CAAK,aAAA,CAAc,kBAAkB,IAAA,CAAK,EAAE,IAAI,CAAA,CACxDP,CAAAA,GACGA,CAAAA,CAAI,EAAA,GAAIA,CAAAA,CAAI,EAAA,CAAK,WAAW,EAAEN,CAAK,CAAA,CAAA,CAAA,CACxC,IAAA,CAAK,YAAA,CAAa,iBAAA,CAAmBM,EAAI,EAAE,CAAA,EAE/C,CACF,EAEA/D,CAAAA,CAAS,UAAA,CAAY0D,CAAO,CAAA,CAC5B1D,CAAAA,CAAS,UAAWoE,CAAM,CAAA,CAC1BpE,EAAS,cAAA,CAAgBuE,CAAW,CAAA,CCrH7B,SAASE,CAAAA,CAASC,CAAAA,CAAQC,EAAU5B,CAAAA,CAAU,EAAC,CAAG,CACvD,GAAM,CAAE,UAAA6B,CAAAA,CAAY,KAAA,CAAO,MAAA,CAAAC,CAAAA,CAAS,CAAE,CAAA,CAAI9B,EAEpC+B,CAAAA,CAAaJ,CAAAA,CAAO,qBAAA,EAAsB,CAC1CK,CAAAA,CAAeJ,CAAAA,CAAS,uBAAsB,CAC9CK,CAAAA,CAAW,CAAE,KAAA,CAAO,MAAA,CAAO,UAAA,CAAY,OAAQ,MAAA,CAAO,WAAY,CAAA,CAEpEC,CAAAA,CAAGC,CAAAA,CACHC,CAAAA,CAAiBP,EAGrB,OAAQA,CAAAA,EACN,KAAK,KAAA,CACHK,CAAAA,CAAIH,EAAW,IAAA,CAAA,CAAQA,CAAAA,CAAW,MAAQC,CAAAA,CAAa,KAAA,EAAS,EAChEG,CAAAA,CAAIJ,CAAAA,CAAW,GAAA,CAAMC,CAAAA,CAAa,MAAA,CAASF,CAAAA,CAC3C,MACF,KAAK,QAAA,CACHI,CAAAA,CAAIH,CAAAA,CAAW,IAAA,CAAA,CAAQA,CAAAA,CAAW,MAAQC,CAAAA,CAAa,KAAA,EAAS,CAAA,CAChEG,CAAAA,CAAIJ,CAAAA,CAAW,MAAA,CAASD,EACxB,MACF,KAAK,OACHI,CAAAA,CAAIH,CAAAA,CAAW,KAAOC,CAAAA,CAAa,KAAA,CAAQF,CAAAA,CAC3CK,CAAAA,CAAIJ,CAAAA,CAAW,GAAA,CAAA,CAAOA,EAAW,MAAA,CAASC,CAAAA,CAAa,MAAA,EAAU,CAAA,CACjE,MACF,KAAK,QACHE,CAAAA,CAAIH,CAAAA,CAAW,KAAA,CAAQD,CAAAA,CACvBK,CAAAA,CAAIJ,CAAAA,CAAW,KAAOA,CAAAA,CAAW,MAAA,CAASC,EAAa,MAAA,EAAU,CAAA,CACjE,KACJ,CAGA,OAAIH,CAAAA,GAAc,KAAA,EAASM,CAAAA,CAAI,CAAA,EAC7BA,EAAIJ,CAAAA,CAAW,MAAA,CAASD,CAAAA,CACxBM,CAAAA,CAAiB,QAAA,EACRP,CAAAA,GAAc,UAAYM,CAAAA,CAAIH,CAAAA,CAAa,MAAA,CAASC,CAAAA,CAAS,MAAA,EACtEE,CAAAA,CAAIJ,EAAW,GAAA,CAAMC,CAAAA,CAAa,MAAA,CAASF,CAAAA,CAC3CM,CAAAA,CAAiB,KAAA,EACRP,IAAc,MAAA,EAAUK,CAAAA,CAAI,CAAA,EACrCA,CAAAA,CAAIH,CAAAA,CAAW,KAAA,CAAQD,EACvBM,CAAAA,CAAiB,OAAA,EACRP,CAAAA,GAAc,OAAA,EAAWK,CAAAA,CAAIF,CAAAA,CAAa,MAAQC,CAAAA,CAAS,KAAA,GACpEC,CAAAA,CAAIH,CAAAA,CAAW,IAAA,CAAOC,CAAAA,CAAa,MAAQF,CAAAA,CAC3CM,CAAAA,CAAiB,QAIfA,CAAAA,GAAmB,KAAA,EAASA,IAAmB,QAAA,CACjDF,CAAAA,CAAI,IAAA,CAAK,GAAA,CAAI,CAAA,CAAG,IAAA,CAAK,IAAIA,CAAAA,CAAGD,CAAAA,CAAS,KAAA,CAAQD,CAAAA,CAAa,KAAK,CAAC,EAEhEG,CAAAA,CAAI,IAAA,CAAK,GAAA,CAAI,CAAA,CAAG,IAAA,CAAK,GAAA,CAAIA,EAAGF,CAAAA,CAAS,MAAA,CAASD,EAAa,MAAM,CAAC,EAG7D,CAAE,CAAA,CAAAE,CAAAA,CAAG,CAAA,CAAAC,CAAAA,CAAG,SAAA,CAAWC,CAAe,CAC3C,CCtDA,IAAIC,CAAAA,CAAY,CAAA,CAMVC,CAAAA,CAAN,cAAyB,WAAY,CACnC,OAAO,kBAAA,CAAqB,CAAC,WAAA,CAAa,QAAS,QAAQ,CAAA,CAG3DrE,GAAW,IAAA,CAEXC,EAAAA,CAAW,KAEXC,EAAAA,CAAa,IAAA,CAEboE,EAAAA,CAAe,IAAA,CAEfC,EAAAA,CAAe,IAAA,CAEfC,GAAa,KAAA,CAEb,iBAAA,EAAoB,CAClB,IAAA,CAAKrE,EAAAA,GACP,CAEA,oBAAA,EAAuB,CACrB,IAAA,CAAKoB,EAAAA,EAAS,CACd,YAAA,CAAa,KAAK+C,EAAY,CAAA,CAC9B,YAAA,CAAa,IAAA,CAAKC,EAAY,EAChC,CAEA,wBAAA,EAA2B,CACrB,IAAA,CAAKC,EAAAA,EAAY,IAAA,CAAKC,EAAAA,GAC5B,CAGA,IAAI,SAAA,EAAY,CACd,OAAO,IAAA,CAAK,aAAa,WAAW,CAAA,EAAK,KAC3C,CAGA,IAAI,SAAA,CAAU/D,EAAO,CACfA,CAAAA,CACF,KAAK,YAAA,CAAa,WAAA,CAAaA,CAAK,CAAA,CAEpC,IAAA,CAAK,eAAA,CAAgB,WAAW,EAEpC,CAGA,IAAI,KAAA,EAAQ,CACV,OAAO,QAAA,CAAS,IAAA,CAAK,YAAA,CAAa,OAAO,CAAA,EAAK,GAAA,CAAK,EAAE,CACvD,CAGA,IAAI,MAAMA,CAAAA,CAAO,CACXA,GAAS,IAAA,CACX,IAAA,CAAK,aAAa,OAAA,CAAS,MAAA,CAAOA,CAAK,CAAC,CAAA,CAExC,IAAA,CAAK,gBAAgB,OAAO,EAEhC,CAGA,IAAI,MAAA,EAAS,CACX,OAAO,QAAA,CAAS,IAAA,CAAK,YAAA,CAAa,QAAQ,CAAA,EAAK,GAAA,CAAK,EAAE,CACxD,CAGA,IAAI,MAAA,CAAOA,CAAAA,CAAO,CACZA,CAAAA,EAAS,IAAA,CACX,IAAA,CAAK,YAAA,CAAa,QAAA,CAAU,MAAA,CAAOA,CAAK,CAAC,CAAA,CAEzC,IAAA,CAAK,eAAA,CAAgB,QAAQ,EAEjC,CAEAP,EAAAA,EAAS,CAEP,IAAA,CAAKH,EAAAA,CAAW,IAAA,CAAK,iBAAA,CACrB,KAAKC,EAAAA,CAAW,IAAA,CAAK,aAAA,CAAc,kBAAkB,CAAA,EAAK,IAAA,CAAK,iBAE3D,EAAA,CAAC,IAAA,CAAKD,EAAAA,EAAY,CAAC,IAAA,CAAKC,EAAAA,EAAY,KAAKD,EAAAA,GAAa,IAAA,CAAKC,EAAAA,CAAAA,GAG/D,IAAA,CAAKC,EAAAA,CAAa,IAAA,CAAKD,GAAS,EAAA,EAAM,CAAA,YAAA,EAAe,EAAEmE,CAAS,CAAA,CAAA,CAChE,IAAA,CAAKnE,GAAS,EAAA,CAAK,IAAA,CAAKC,GAGxB,IAAA,CAAKF,EAAAA,CAAS,aAAa,kBAAA,CAAoB,IAAA,CAAKE,EAAU,CAAA,CAC9D,IAAA,CAAKD,EAAAA,CAAS,aAAa,MAAA,CAAQ,SAAS,CAAA,CAC5C,IAAA,CAAKA,EAAAA,CAAS,MAAA,CAAS,KAGvB,IAAA,CAAKD,EAAAA,CAAS,gBAAA,CAAiB,YAAA,CAAc,IAAA,CAAK0E,EAAiB,EACnE,IAAA,CAAK1E,EAAAA,CAAS,iBAAiB,YAAA,CAAc,IAAA,CAAK2E,EAAiB,CAAA,CACnE,IAAA,CAAK1E,EAAAA,CAAS,gBAAA,CAAiB,YAAA,CAAc,IAAA,CAAK2E,EAAwB,CAAA,CAC1E,IAAA,CAAK3E,EAAAA,CAAS,gBAAA,CAAiB,YAAA,CAAc,IAAA,CAAK0E,EAAiB,CAAA,CAGnE,IAAA,CAAK3E,EAAAA,CAAS,gBAAA,CAAiB,SAAA,CAAW,IAAA,CAAK6E,EAAc,CAAA,CAC7D,IAAA,CAAK7E,GAAS,gBAAA,CAAiB,UAAA,CAAY,KAAK8E,EAAe,CAAA,CAG/D,IAAA,CAAK9E,EAAAA,CAAS,gBAAA,CAAiB,YAAA,CAAc,KAAK+E,EAAAA,CAAmB,CAAE,OAAA,CAAS,IAAK,CAAC,CAAA,EACxF,CAEAxD,EAAAA,EAAW,CACT,IAAA,CAAKvB,EAAAA,EAAU,mBAAA,CAAoB,YAAA,CAAc,KAAK0E,EAAiB,CAAA,CACvE,IAAA,CAAK1E,EAAAA,EAAU,mBAAA,CAAoB,YAAA,CAAc,KAAK2E,EAAiB,CAAA,CACvE,IAAA,CAAK1E,EAAAA,EAAU,mBAAA,CAAoB,YAAA,CAAc,KAAK2E,EAAwB,CAAA,CAC9E,IAAA,CAAK3E,EAAAA,EAAU,mBAAA,CAAoB,YAAA,CAAc,KAAK0E,EAAiB,CAAA,CACvE,IAAA,CAAK3E,EAAAA,EAAU,mBAAA,CAAoB,SAAA,CAAW,KAAK6E,EAAc,CAAA,CACjE,KAAK7E,EAAAA,EAAU,mBAAA,CAAoB,WAAY,IAAA,CAAK8E,EAAe,CAAA,CACnE,IAAA,CAAK9E,EAAAA,EAAU,mBAAA,CAAoB,aAAc,IAAA,CAAK+E,EAAiB,EACzE,CAEAL,EAAAA,CAAoB,IAAM,CACxB,YAAA,CAAa,IAAA,CAAKH,EAAY,CAAA,CAC9B,IAAA,CAAKD,EAAAA,CAAe,WAAW,IAAM,IAAA,CAAKU,IAAM,CAAG,IAAA,CAAK,KAAK,EAC/D,CAAA,CAEAL,EAAAA,CAAoB,IAAM,CACxB,YAAA,CAAa,KAAKL,EAAY,CAAA,CAC9B,IAAA,CAAKC,EAAAA,CAAe,UAAA,CAAW,IAAM,KAAKU,EAAAA,EAAM,CAAG,GAAG,EACxD,CAAA,CAEAL,EAAAA,CAA2B,IAAM,CAC/B,YAAA,CAAa,KAAKL,EAAY,EAChC,EAEAM,EAAAA,CAAiB,IAAM,CACrB,YAAA,CAAa,IAAA,CAAKN,EAAY,EAC9B,IAAA,CAAKS,EAAAA,GACP,CAAA,CAEAF,EAAAA,CAAkB,IAAM,CACtB,IAAA,CAAKG,EAAAA,GACP,CAAA,CAEAF,EAAAA,CAAoB,IAAM,CACpB,IAAA,CAAKP,EAAAA,CACP,KAAKS,EAAAA,EAAM,CAEX,KAAKD,EAAAA,GAET,CAAA,CAEAA,EAAAA,EAAQ,CACF,CAAC,KAAK/E,EAAAA,EAAY,IAAA,CAAKuE,EAAAA,GAE3B,IAAA,CAAKvE,EAAAA,CAAS,MAAA,CAAS,MACvB,IAAA,CAAKuE,EAAAA,CAAa,IAAA,CAClB,IAAA,CAAKC,EAAAA,EAAgB,CAGrB,OAAO,gBAAA,CAAiB,QAAA,CAAU,KAAKA,EAAAA,CAAiB,CAAE,QAAS,IAAA,CAAM,OAAA,CAAS,IAAK,CAAC,CAAA,CACxF,MAAA,CAAO,iBAAiB,QAAA,CAAU,IAAA,CAAKA,EAAAA,CAAiB,CAAE,OAAA,CAAS,IAAK,CAAC,CAAA,CAEzE,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,MAAA,CAAQ,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,CAAA,EAC/D,CAEAQ,EAAAA,EAAQ,CACF,CAAC,IAAA,CAAKhF,EAAAA,EAAY,CAAC,KAAKuE,EAAAA,GAE5B,IAAA,CAAKvE,EAAAA,CAAS,MAAA,CAAS,IAAA,CACvB,IAAA,CAAKuE,GAAa,KAAA,CAElB,MAAA,CAAO,mBAAA,CAAoB,QAAA,CAAU,IAAA,CAAKC,EAAAA,CAAiB,CAAE,OAAA,CAAS,IAAK,CAAC,CAAA,CAC5E,MAAA,CAAO,oBAAoB,QAAA,CAAU,IAAA,CAAKA,EAAe,CAAA,CAEzD,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,MAAA,CAAQ,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,CAAA,EAC/D,CAEAA,EAAAA,CAAkB,IAAM,CACtB,GAAI,CAAC,IAAA,CAAKzE,EAAAA,EAAY,CAAC,IAAA,CAAKC,EAAAA,CAAU,OAEtC,GAAM,CAAE,CAAA,CAAAgE,CAAAA,CAAG,CAAA,CAAAC,CAAAA,CAAG,SAAA,CAAWC,CAAe,CAAA,CAAIV,CAAAA,CAAS,IAAA,CAAKzD,EAAAA,CAAU,IAAA,CAAKC,EAAAA,CAAU,CACjF,SAAA,CAAW,IAAA,CAAK,SAAA,CAChB,MAAA,CAAQ,IAAA,CAAK,MACf,CAAC,CAAA,CAGD,IAAA,CAAKA,GAAS,KAAA,CAAM,QAAA,CAAW,QAC/B,IAAA,CAAKA,EAAAA,CAAS,KAAA,CAAM,IAAA,CAAO,CAAA,EAAGgE,CAAC,KAC/B,IAAA,CAAKhE,EAAAA,CAAS,KAAA,CAAM,GAAA,CAAM,CAAA,EAAGiE,CAAC,KAG9B,IAAA,CAAKjE,EAAAA,CAAS,OAAA,CAAQ,SAAA,CAAYkE,EACpC,CAAA,CAKA,MAAO,CACL,YAAA,CAAa,KAAKI,EAAY,CAAA,CAC9B,KAAKS,EAAAA,GACP,CAGA,IAAA,EAAO,CACL,YAAA,CAAa,KAAKV,EAAY,CAAA,CAC9B,IAAA,CAAKW,EAAAA,GACP,CACF,EAEAjG,CAAAA,CAAS,aAAA,CAAeqF,CAAU,CAAA,CCvN3B,SAASa,CAAAA,CAAaC,EAASC,CAAAA,CAAUrD,CAAAA,CAAU,EAAC,CAAG,CAC5D,GAAM,CAAE,MAAA,CAAAsD,CAAO,CAAA,CAAItD,CAAAA,CAEbuD,CAAAA,CAAe1D,GAAM,CACrBuD,CAAAA,CAAQ,QAAA,CAASvD,CAAAA,CAAE,MAAM,CAAA,EACzByD,GAAUA,CAAAA,CAAO,QAAA,CAASzD,CAAAA,CAAE,MAAM,CAAA,EACtCwD,CAAAA,CAASxD,CAAC,EACZ,CAAA,CAGA,OAAA,QAAA,CAAS,gBAAA,CAAiB,OAAA,CAAS0D,CAAAA,CAAa,IAAI,CAAA,CAE7C,CACL,OAAA,EAAU,CACR,QAAA,CAAS,mBAAA,CAAoB,QAASA,CAAAA,CAAa,IAAI,EACzD,CACF,CACF,KCNIC,CAAAA,CAAS,CAAA,CAMPC,CAAAA,CAAN,cAAsB,WAAY,CAChC,OAAO,kBAAA,CAAqB,CAAC,OAAQ,WAAW,CAAA,CAGhDxF,GAAW,IAAA,CAEXyF,EAAAA,CAAS,IAAA,CAETC,EAAAA,CAAU,IAAA,CAEV/C,EAAAA,CAAU,KAEVgD,EAAAA,CAAuB,IAAA,CAEvBC,EAAAA,CAAiB,CAAA,CAEjB,iBAAA,EAAoB,CAClB,KAAKzF,EAAAA,GACP,CAEA,oBAAA,EAAuB,CACrB,IAAA,CAAKoB,KACP,CAEA,yBAAyBtC,CAAAA,CAAMqB,CAAAA,CAAQC,EAAQ,CACxC,IAAA,CAAK,WAAA,EACNtB,CAAAA,GAAS,MAAA,GACXsB,CAAAA,GAAW,KAAO,IAAA,CAAKsF,EAAAA,EAAU,CAAI,IAAA,CAAKC,EAAAA,EAAU,EAExD,CAGA,IAAI,IAAA,EAAO,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CAAE,CAC9C,IAAI,IAAA,CAAK3C,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,CAAA,CAAI,KAAK,eAAA,CAAgB,MAAM,EAAE,CAG/E,IAAI,SAAA,EAAY,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,WAAW,CAAA,EAAK,cAAe,CAC1E,IAAI,SAAA,CAAUA,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,aAAa,WAAA,CAAaA,CAAC,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,WAAW,EAAE,CAE7FhD,EAAAA,EAAS,CAEP,GADA,IAAA,CAAKH,EAAAA,CAAW,KAAK,aAAA,CAAc,kBAAkB,CAAA,CACjD,CAAC,IAAA,CAAKA,EAAAA,CAAU,OAEpB,IAAA,CAAK0F,EAAAA,CAAU,YAAY,EAAEH,CAAM,GAGnC,IAAA,CAAKE,EAAAA,CAAS,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CAC1C,KAAKA,EAAAA,CAAO,YAAA,CAAa,MAAA,CAAQ,MAAM,CAAA,CACvC,IAAA,CAAKA,GAAO,EAAA,CAAK,IAAA,CAAKC,EAAAA,CACtB,IAAA,CAAKD,EAAAA,CAAO,MAAA,CAAS,KAGP,CAAC,GAAG,KAAK,gBAAA,CAAiB,cAAc,CAAC,CAAA,CACjD,OAAA,CAAQM,CAAAA,EAAQ,IAAA,CAAKN,EAAAA,CAAO,WAAA,CAAYM,CAAI,CAAC,CAAA,CACnD,IAAA,CAAK,WAAA,CAAY,IAAA,CAAKN,EAAM,EAG5B,IAAA,CAAKzF,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,MAAM,CAAA,CAClD,KAAKA,EAAAA,CAAS,YAAA,CAAa,gBAAiB,IAAA,CAAK0F,EAAO,EACxD,IAAA,CAAK1F,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,OAAO,CAAA,CAGnD,KAAK2C,EAAAA,CAAUd,CAAAA,CACb,IAAM,CAAC,GAAG,IAAA,CAAK4D,GAAO,gBAAA,CAAiB,8BAA8B,CAAC,CAAA,CACtE,CAAE,WAAA,CAAa,WAAY,IAAA,CAAM,IAAA,CAAM,YAAA,CAAc,KAAM,CAC7D,CAAA,CAEA,KAAKzF,EAAAA,CAAS,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAKgG,EAAmB,CAAA,CAChE,KAAK,gBAAA,CAAiB,SAAA,CAAW,IAAA,CAAK/C,EAAc,EACtD,CAEA1B,IAAW,CACT,IAAA,CAAKvB,EAAAA,EAAU,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKgG,EAAmB,CAAA,CACpE,IAAA,CAAK,oBAAoB,SAAA,CAAW,IAAA,CAAK/C,EAAc,CAAA,CACvD,IAAA,CAAK0C,EAAAA,EAAsB,OAAA,GAC7B,CAEAK,GAAsB,IAAM,CAAE,IAAA,CAAK,IAAA,CAAO,CAAC,IAAA,CAAK,KAAK,CAAA,CAErD/C,EAAAA,CAAkBrB,CAAAA,EAAM,CACtB,GAAK,IAAA,CAAK,KAEV,CAAA,GAAIA,CAAAA,CAAE,MAAQ,QAAA,CAAU,CACtBA,EAAE,cAAA,EAAe,CACjB,IAAA,CAAK,IAAA,CAAO,KAAA,CACZ,IAAA,CAAK5B,IAAU,KAAA,EAAM,CACrB,MACF,CAIA,GAFA,IAAA,CAAK2C,IAAS,aAAA,CAAcf,CAAC,CAAA,CAEzBA,CAAAA,CAAE,GAAA,GAAQ,OAAA,EAAWA,EAAE,GAAA,GAAQ,GAAA,CAAK,CACtC,IAAMqE,CAAAA,CAAU,KAAKR,EAAAA,EAAQ,aAAA,CAAc,oBAAoB,CAAA,CAC3DQ,CAAAA,EAAW,CAACA,EAAQ,YAAA,CAAa,UAAU,CAAA,GAC7CrE,CAAAA,CAAE,cAAA,EAAe,CACjBqE,EAAQ,KAAA,EAAM,EAElB,CAAA,CACF,CAAA,CAEAJ,EAAAA,EAAY,CACV,GAAI,CAAC,IAAA,CAAK7F,EAAAA,EAAY,CAAC,IAAA,CAAKyF,EAAAA,CAAQ,OAEpC,GAAI,WAAA,CAAY,GAAA,EAAI,CAAI,IAAA,CAAKG,EAAAA,CAAiB,GAAI,CAEhD,IAAA,CAAK,eAAA,CAAgB,MAAM,CAAA,CAC3B,MACF,CAGA,IAAA,CAAKH,EAAAA,CAAO,KAAA,CAAM,QAAA,CAAW,OAAA,CAC7B,IAAA,CAAKA,GAAO,KAAA,CAAM,UAAA,CAAa,SAC/B,IAAA,CAAKA,EAAAA,CAAO,OAAS,KAAA,CAGhB,IAAA,CAAKA,EAAAA,CAAO,YAAA,CAGjB,IAAMS,CAAAA,CAAgB,KAAK,SAAA,CAAU,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,EAAK,SAChD,CAAE,CAAA,CAAAjC,CAAAA,CAAG,CAAA,CAAAC,CAAE,CAAA,CAAIT,EAAS,IAAA,CAAKzD,EAAAA,CAAU,KAAKyF,EAAAA,CAAQ,CACpD,UAAWS,CAAAA,CACX,MAAA,CAAQ,CACV,CAAC,CAAA,CACD,IAAA,CAAKT,GAAO,KAAA,CAAM,IAAA,CAAO,CAAA,EAAGxB,CAAC,CAAA,EAAA,CAAA,CAC7B,IAAA,CAAKwB,GAAO,KAAA,CAAM,GAAA,CAAM,CAAA,EAAGvB,CAAC,CAAA,EAAA,CAAA,CAG5B,IAAA,CAAKuB,GAAO,KAAA,CAAM,UAAA,CAAa,GAC/B,IAAA,CAAKzF,EAAAA,CAAS,aAAa,eAAA,CAAiB,MAAM,CAAA,CAEhC,IAAA,CAAKyF,EAAAA,CAAO,aAAA,CAAc,8BAA8B,CAAA,EAC/D,KAAA,EAAM,CAGjB,UAAA,CAAW,IAAM,CAEV,KAAK,IAAA,GACV,IAAA,CAAKE,EAAAA,CAAuBT,CAAAA,CAAa,IAAA,CAAKO,EAAAA,CAAQ,IAAM,CAC1D,IAAA,CAAK,IAAA,CAAO,MACd,CAAA,CAAG,CAAE,OAAQ,IAAA,CAAKzF,EAAS,CAAC,CAAA,EAC9B,CAAA,CAAG,CAAC,EAEJ,MAAA,CAAO,gBAAA,CAAiB,QAAA,CAAU,IAAA,CAAKyE,EAAAA,CAAiB,CAAE,QAAS,IAAA,CAAM,OAAA,CAAS,IAAK,CAAC,CAAA,CACxF,MAAA,CAAO,iBAAiB,QAAA,CAAU,IAAA,CAAKA,GAAiB,CAAE,OAAA,CAAS,IAAK,CAAC,CAAA,CAEzE,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,OAAQ,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,EAC/D,CAEAqB,EAAAA,EAAY,CACN,CAAC,IAAA,CAAK9F,EAAAA,EAAY,CAAC,KAAKyF,EAAAA,GAG5B,IAAA,CAAKG,GAAiB,WAAA,CAAY,GAAA,GAElC,IAAA,CAAKH,EAAAA,CAAO,MAAA,CAAS,IAAA,CACrB,IAAA,CAAKzF,EAAAA,CAAS,aAAa,eAAA,CAAiB,OAAO,CAAA,CAEnD,IAAA,CAAK2F,EAAAA,EAAsB,OAAA,GAC3B,IAAA,CAAKA,EAAAA,CAAuB,IAAA,CAC5B,MAAA,CAAO,mBAAA,CAAoB,QAAA,CAAU,KAAKlB,EAAAA,CAAiB,CAAE,QAAS,IAAK,CAAC,EAC5E,MAAA,CAAO,mBAAA,CAAoB,QAAA,CAAU,IAAA,CAAKA,EAAe,CAAA,CAEzD,KAAK,aAAA,CAAc,IAAI,WAAA,CAAY,OAAA,CAAS,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,CAAA,EAChE,CAEAA,EAAAA,CAAkB,IAAM,CACtB,GAAI,CAAC,IAAA,CAAKzE,EAAAA,EAAY,CAAC,IAAA,CAAKyF,GAAQ,OAEpC,IAAMS,CAAAA,CAAgB,IAAA,CAAK,SAAA,CAAU,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,EAAK,QAAA,CAChD,CAAE,CAAA,CAAAjC,EAAG,CAAA,CAAAC,CAAE,CAAA,CAAIT,CAAAA,CAAS,IAAA,CAAKzD,EAAAA,CAAU,KAAKyF,EAAAA,CAAQ,CACpD,UAAWS,CAAAA,CACX,MAAA,CAAQ,CACV,CAAC,CAAA,CAED,IAAA,CAAKT,EAAAA,CAAO,KAAA,CAAM,QAAA,CAAW,QAC7B,IAAA,CAAKA,EAAAA,CAAO,KAAA,CAAM,IAAA,CAAO,CAAA,EAAGxB,CAAC,KAC7B,IAAA,CAAKwB,EAAAA,CAAO,KAAA,CAAM,GAAA,CAAM,CAAA,EAAGvB,CAAC,KAC9B,CAAA,CAEA,IAAA,EAAO,CAAE,IAAA,CAAK,IAAA,CAAO,KAAK,CAC1B,IAAA,EAAO,CAAE,IAAA,CAAK,IAAA,CAAO,MAAM,CAC3B,MAAA,EAAS,CAAE,IAAA,CAAK,IAAA,CAAO,CAAC,IAAA,CAAK,KAAK,CACpC,CAAA,CAOMiC,CAAAA,CAAN,cAA0B,WAAY,CACpC,mBAAoB,CAClB,IAAA,CAAK,aAAa,MAAA,CAAQ,UAAU,EAChC,CAAC,IAAA,CAAK,YAAA,CAAa,UAAU,CAAA,EAAK,CAAC,KAAK,YAAA,CAAa,UAAU,CAAA,EACjE,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,IAAI,CAAA,CAEhC,IAAA,CAAK,YAAA,CAAa,UAAU,CAAA,EAC9B,IAAA,CAAK,aAAa,eAAA,CAAiB,MAAM,CAAA,CAE3C,IAAA,CAAK,gBAAA,CAAiB,OAAA,CAAS,KAAK9F,EAAY,EAClD,CAEA,oBAAA,EAAuB,CACrB,IAAA,CAAK,oBAAoB,OAAA,CAAS,IAAA,CAAKA,EAAY,EACrD,CAEAA,EAAAA,CAAgBuB,GAAM,CACpB,GAAI,IAAA,CAAK,YAAA,CAAa,UAAU,CAAA,CAAG,CACjCA,CAAAA,CAAE,cAAA,GACFA,CAAAA,CAAE,eAAA,GACF,MACF,CAEA,IAAMwE,CAAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,UAAU,CAAA,CAChCA,CAAAA,GACF,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,SAAU,CAC3C,OAAA,CAAS,IAAA,CACT,MAAA,CAAQ,CAAE,KAAA,CAAO,KAAK,YAAA,CAAa,OAAO,GAAK,IAAA,CAAK,WAAA,EAAa,MAAO,CAC1E,CAAC,CAAC,CAAA,CACFA,CAAAA,CAAK,KAAO,KAAA,EAEhB,CAAA,CAGA,IAAI,QAAA,EAAW,CAAE,OAAO,KAAK,YAAA,CAAa,UAAU,CAAE,CACtD,IAAI,QAAA,CAASjD,EAAG,CACVA,CAAAA,EACF,KAAK,YAAA,CAAa,UAAA,CAAY,EAAE,CAAA,CAChC,IAAA,CAAK,YAAA,CAAa,eAAA,CAAiB,MAAM,CAAA,CACzC,KAAK,eAAA,CAAgB,UAAU,CAAA,GAE/B,IAAA,CAAK,eAAA,CAAgB,UAAU,EAC/B,IAAA,CAAK,eAAA,CAAgB,eAAe,CAAA,CACpC,IAAA,CAAK,YAAA,CAAa,WAAY,IAAI,CAAA,EAEtC,CAGA,IAAI,KAAA,EAAQ,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,OAAO,CAAE,CAChD,IAAI,MAAMA,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,YAAA,CAAa,OAAA,CAASA,CAAC,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,OAAO,EAAE,CACnF,EAEAnE,CAAAA,CAAS,UAAA,CAAYwG,CAAO,CAAA,CAC5BxG,CAAAA,CAAS,eAAgBmH,CAAW,CAAA,CCvPpC,IAAIE,CAAAA,CAAiB,CAAA,CAMfC,CAAAA,CAAN,cAA8B,WAAY,CACxC,OAAO,kBAAA,CAAqB,CAAC,MAAA,CAAQ,WAAY,SAAS,CAAA,CAG1DC,EAAAA,CAAS,IAAA,CAETC,EAAAA,CAAW,IAAA,CAEXC,GAAa,IAAA,CAEb9D,EAAAA,CAAU,KAEVgD,EAAAA,CAAuB,IAAA,CAEvBe,GAAY,IAAI,GAAA,CAEhBC,EAAAA,CAAc,KAAA,CAEd,iBAAA,EAAoB,CAClB,KAAKxG,EAAAA,GACP,CAEA,oBAAA,EAAuB,CACrB,IAAA,CAAKoB,KACP,CAEA,wBAAA,CAAyBtC,CAAAA,CAAMqB,CAAAA,CAAQC,CAAAA,CAAQ,CACxC,IAAA,CAAK,WAAA,GACNtB,IAAS,MAAA,GACXsB,CAAAA,GAAW,KAAO,IAAA,CAAKqG,EAAAA,EAAa,CAAI,IAAA,CAAKC,EAAAA,EAAa,CAAA,CAExD5H,IAAS,SAAA,EACX,IAAA,CAAK6H,EAAAA,EAAoB,EAE7B,CAGA,IAAI,MAAO,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CAAE,CAC9C,IAAI,IAAA,CAAK3D,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,aAAa,MAAA,CAAQ,EAAE,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,MAAM,EAAE,CAG/E,IAAI,QAAA,EAAW,CAAE,OAAO,IAAA,CAAK,aAAa,UAAU,CAAE,CACtD,IAAI,QAAA,CAASA,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,aAAa,UAAA,CAAY,EAAE,EAAI,IAAA,CAAK,eAAA,CAAgB,UAAU,EAAE,CAG3F,IAAI,SAAU,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,SAAS,CAAE,CACpD,IAAI,OAAA,CAAQA,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,aAAa,SAAA,CAAW,EAAE,EAAI,IAAA,CAAK,eAAA,CAAgB,SAAS,EAAE,CAGxF,IAAI,MAAA,EAAS,CAAE,OAAO,KAAK,YAAA,CAAa,QAAQ,CAAA,GAAM,OAAQ,CAC9D,IAAI,OAAOA,CAAAA,CAAG,CAAE,IAAA,CAAK,YAAA,CAAa,QAAA,CAAWA,CAAAA,EAAKA,IAAM,OAAA,CAAW,MAAA,CAAS,OAAO,EAAE,CAGrF,IAAI,KAAA,EAAQ,CACV,OAAO,IAAA,CAAK,QAAA,CAAW,CAAC,GAAG,IAAA,CAAKuD,EAAS,CAAA,CAAK,CAAC,GAAG,IAAA,CAAKA,EAAS,CAAA,CAAE,CAAC,CAAA,EAAK,EAC1E,CACA,IAAI,MAAMvD,CAAAA,CAAG,CACX,IAAA,CAAKuD,EAAAA,CAAU,KAAA,EAAM,CACjB,MAAM,OAAA,CAAQvD,CAAC,CAAA,CACjBA,CAAAA,CAAE,OAAA,CAAQ4D,CAAAA,EAAO,KAAKL,EAAAA,CAAU,GAAA,CAAIK,CAAG,CAAC,CAAA,CAC/B5D,CAAAA,EACT,KAAKuD,EAAAA,CAAU,GAAA,CAAIvD,CAAC,CAAA,CAEtB,IAAA,CAAK6D,EAAAA,GACP,CAGA,IAAI,YAAa,CAAE,OAAO,KAAKT,EAAAA,EAAQ,KAAA,EAAS,EAAG,CACnD,IAAI,UAAA,CAAWpD,EAAG,CAAM,IAAA,CAAKoD,EAAAA,GAAQ,IAAA,CAAKA,EAAAA,CAAO,KAAA,CAAQpD,GAAE,CAE3DhD,EAAAA,EAAS,CAEP,GADA,IAAA,CAAKoG,EAAAA,CAAS,KAAK,aAAA,CAAc,gBAAgB,GAAK,IAAA,CAAK,aAAA,CAAc,OAAO,CAAA,CAC5E,CAAC,IAAA,CAAKA,EAAAA,CAAQ,OAElB,IAAA,CAAKE,GAAa,CAAA,iBAAA,EAAoB,EAAEJ,CAAc,CAAA,CAAA,CAGtD,IAAA,CAAKG,EAAAA,CAAW,SAAS,aAAA,CAAc,KAAK,CAAA,CAC5C,IAAA,CAAKA,EAAAA,CAAS,YAAA,CAAa,OAAQ,SAAS,CAAA,CAC5C,KAAKA,EAAAA,CAAS,EAAA,CAAK,KAAKC,EAAAA,CACxB,IAAA,CAAKD,EAAAA,CAAS,MAAA,CAAS,IAAA,CACnB,IAAA,CAAK,UACP,IAAA,CAAKA,EAAAA,CAAS,YAAA,CAAa,sBAAA,CAAwB,MAAM,CAAA,CAI3C,CAAC,GAAG,IAAA,CAAK,gBAAA,CAAiB,YAAY,CAAC,CAAA,CAC/C,QAAQS,CAAAA,EAAO,IAAA,CAAKT,EAAAA,CAAS,WAAA,CAAYS,CAAG,CAAC,EACrD,IAAA,CAAK,WAAA,CAAY,IAAA,CAAKT,EAAQ,CAAA,CAG9B,IAAA,CAAKD,GAAO,YAAA,CAAa,MAAA,CAAQ,UAAU,CAAA,CAC3C,IAAA,CAAKA,EAAAA,CAAO,aAAa,mBAAA,CAAqB,MAAM,CAAA,CACpD,IAAA,CAAKA,EAAAA,CAAO,YAAA,CAAa,gBAAiB,IAAA,CAAKE,EAAU,EACzD,IAAA,CAAKF,EAAAA,CAAO,aAAa,eAAA,CAAiB,OAAO,CAAA,CACjD,IAAA,CAAKA,EAAAA,CAAO,YAAA,CAAa,gBAAiB,SAAS,CAAA,CAGnD,IAAA,CAAK5D,EAAAA,CAAUd,CAAAA,CACb,IAAM,CAAC,GAAG,IAAA,CAAK2E,EAAAA,CAAS,gBAAA,CAAiB,0CAA0C,CAAC,EACpF,CAAE,WAAA,CAAa,WAAY,IAAA,CAAM,IAAA,CAAM,aAAc,KAAM,CAC7D,CAAA,CAEA,IAAA,CAAKD,EAAAA,CAAO,gBAAA,CAAiB,QAAS,IAAA,CAAKW,EAAY,CAAA,CACvD,IAAA,CAAKX,EAAAA,CAAO,gBAAA,CAAiB,QAAS,IAAA,CAAKY,EAAiB,CAAA,CAC5D,IAAA,CAAKZ,EAAAA,CAAO,gBAAA,CAAiB,UAAW,IAAA,CAAKa,EAAmB,EAChE,IAAA,CAAK,gBAAA,CAAiB,UAAW,IAAA,CAAKnE,EAAc,CAAA,CACpD,IAAA,CAAK,gBAAA,CAAiB,cAAA,CAAgB,KAAKoE,EAAkB,CAAA,CAG7D,IAAA,CAAKb,EAAAA,CAAS,gBAAA,CAAiB,sBAAsB,EAAE,OAAA,CAAQS,CAAAA,EAAO,CACpE,IAAMvG,CAAAA,CAAQuG,CAAAA,CAAI,aAAa,OAAO,CAAA,EAAKA,CAAAA,CAAI,WAAA,EAAa,IAAA,EAAK,CAC7DvG,GAAO,IAAA,CAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,EACrC,CAAC,EACD,IAAA,CAAKsG,EAAAA,EAAqB,CAG1B,IAAA,CAAKF,EAAAA,GACP,CAEAvF,EAAAA,EAAW,CACT,IAAA,CAAKgF,EAAAA,EAAQ,mBAAA,CAAoB,OAAA,CAAS,KAAKW,EAAY,CAAA,CAC3D,KAAKX,EAAAA,EAAQ,mBAAA,CAAoB,QAAS,IAAA,CAAKY,EAAiB,CAAA,CAChE,IAAA,CAAKZ,EAAAA,EAAQ,mBAAA,CAAoB,UAAW,IAAA,CAAKa,EAAmB,CAAA,CACpE,IAAA,CAAK,mBAAA,CAAoB,SAAA,CAAW,KAAKnE,EAAc,CAAA,CACvD,IAAA,CAAK,mBAAA,CAAoB,cAAA,CAAgB,IAAA,CAAKoE,EAAkB,CAAA,CAChE,IAAA,CAAK1B,IAAsB,OAAA,GAC7B,CAEAuB,EAAAA,CAAe,IAAM,CACd,IAAA,CAAK,IAAA,GAAM,IAAA,CAAK,KAAO,IAAA,CAAA,CACxB,IAAA,CAAK,MAAA,EAAQ,IAAA,CAAKI,EAAAA,EAAe,CACrC,KAAK,aAAA,CAAc,IAAI,WAAA,CAAY,cAAA,CAAgB,CACjD,OAAA,CAAS,KACT,MAAA,CAAQ,CAAE,MAAO,IAAA,CAAKf,EAAAA,CAAO,KAAM,CACrC,CAAC,CAAC,EACJ,CAAA,CAEAY,EAAAA,CAAoB,IAAM,CAExB,GAAI,IAAA,CAAKR,EAAAA,CAAa,CACpB,IAAA,CAAKA,GAAc,KAAA,CACnB,MACF,CACmB,IAAA,CAAKH,EAAAA,EAAU,aAAA,CAAc,0BAA0B,CAAA,EACxD,CAAC,IAAA,CAAK,OAAA,GAAS,IAAA,CAAK,IAAA,CAAO,MAC/C,CAAA,CAEAY,EAAAA,CAAuBxF,CAAAA,EAAM,CAC3B,GAAIA,CAAAA,CAAE,MAAQ,WAAA,CACZA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,eAAA,GACG,IAAA,CAAK,IAAA,GAAM,IAAA,CAAK,IAAA,CAAO,IAAA,CAAA,CACR,IAAA,CAAK4E,IAAU,aAAA,CAAc,0CAA0C,GAC9E,KAAA,EAAM,CAAA,KAAA,GACV5E,EAAE,GAAA,GAAQ,SAAA,CAAW,CAC9BA,CAAAA,CAAE,cAAA,EAAe,CACjBA,EAAE,eAAA,EAAgB,CACb,IAAA,CAAK,IAAA,GAAM,IAAA,CAAK,IAAA,CAAO,MAC5B,IAAMG,CAAAA,CAAU,IAAA,CAAKyE,EAAAA,EAAU,gBAAA,CAAiB,0CAA0C,EAC1FzE,CAAAA,GAAUA,CAAAA,CAAQ,OAAS,CAAC,CAAA,EAAG,QACjC,CAAA,KAAA,GAAWH,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAY,IAAA,CAAK,KACpCA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,eAAA,EAAgB,CAClB,KAAK,IAAA,CAAO,KAAA,CAAA,KAAA,GACHA,CAAAA,CAAE,GAAA,GAAQ,OAAA,EAAW,IAAA,CAAK,KAAM,CAEzC,IAAM2F,EAAc,IAAA,CAAKf,EAAAA,EAAU,cAAc,0CAA0C,CAAA,CACvFe,CAAAA,GACF3F,CAAAA,CAAE,cAAA,EAAe,CACjB,KAAK4F,EAAAA,CAAcD,CAAW,CAAA,EAElC,CACF,CAAA,CAEAtE,EAAAA,CAAkBrB,GAAM,CACtB,GAAK,IAAA,CAAK,IAAA,CAEV,CAAA,GAAIA,CAAAA,CAAE,MAAQ,QAAA,CAAU,CACtBA,CAAAA,CAAE,cAAA,EAAe,CACjB,IAAA,CAAK,KAAO,KAAA,CACZ,IAAA,CAAK2E,EAAAA,EAAQ,KAAA,EAAM,CACnB,MACF,CAGA,GAAI,QAAA,CAAS,aAAA,EAAe,OAAA,GAAY,YAAA,CAAc,CAGpD,GAFA,IAAA,CAAK5D,EAAAA,EAAS,aAAA,CAAcf,CAAC,CAAA,CAEzBA,CAAAA,CAAE,MAAQ,OAAA,EAAWA,CAAAA,CAAE,MAAQ,GAAA,CAAK,CACtC,IAAMqE,CAAAA,CAAU,IAAA,CAAKO,EAAAA,EAAU,aAAA,CAAc,kBAAkB,CAAA,CAC3DP,GAAW,CAACA,CAAAA,CAAQ,YAAA,CAAa,UAAU,CAAA,GAC7CrE,CAAAA,CAAE,gBAAe,CACjB,IAAA,CAAK4F,EAAAA,CAAcvB,CAAO,CAAA,EAE9B,CAEIrE,EAAE,GAAA,GAAQ,KAAA,GACZA,EAAE,cAAA,EAAe,CACjB,KAAK2E,EAAAA,EAAQ,KAAA,EAAM,EAEvB,CAAA,CACF,CAAA,CAEAc,EAAAA,CAAsBzF,GAAM,CAC1B,IAAM6F,CAAAA,CAAS7F,CAAAA,CAAE,MAAA,EAAQ,MAAA,CACrB6F,GAAU,CAACA,CAAAA,CAAO,YAAA,CAAa,UAAU,CAAA,EAC3C,IAAA,CAAKD,GAAcC,CAAM,EAE7B,EAEAD,EAAAA,CAAcC,CAAAA,CAAQ,CACpB,IAAM/G,CAAAA,CAAQ+G,CAAAA,CAAO,YAAA,CAAa,OAAO,CAAA,EAAKA,EAAO,WAAA,EAAa,IAAA,EAAK,CAClE/G,CAAAA,GAED,IAAA,CAAK,QAAA,CACH,KAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,CAAA,CAC1B,IAAA,CAAKgG,EAAAA,CAAU,OAAOhG,CAAK,CAAA,CAE3B,KAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,CAAA,EAG1B,IAAA,CAAKgG,EAAAA,CAAU,KAAA,EAAM,CACrB,IAAA,CAAKA,GAAU,GAAA,CAAIhG,CAAK,CAAA,CACxB,IAAA,CAAK6F,EAAAA,CAAO,KAAA,CAAQkB,EAAO,WAAA,EAAa,IAAA,EAAK,EAAK/G,CAAAA,CAClD,IAAA,CAAKiG,EAAAA,CAAc,KACnB,IAAA,CAAK,IAAA,CAAO,MACZ,IAAA,CAAKJ,EAAAA,EAAQ,OAAM,CAAA,CAGrB,IAAA,CAAKS,EAAAA,EAAqB,CAE1B,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,QAAA,CAAU,CAC3C,OAAA,CAAS,IAAA,CACT,MAAA,CAAQ,CAAE,KAAA,CAAO,IAAA,CAAK,KAAA,CAAO,MAAA,CAAAS,CAAO,CACtC,CAAC,CAAC,CAAA,EACJ,CAEAT,EAAAA,EAAuB,CAAA,CACL,KAAKR,EAAAA,EAAU,gBAAA,CAAiB,YAAY,CAAA,EAAK,EAAC,EAC1D,QAAQS,CAAAA,EAAO,CACrB,IAAMvG,CAAAA,CAAQuG,CAAAA,CAAI,YAAA,CAAa,OAAO,CAAA,EAAKA,CAAAA,CAAI,WAAA,EAAa,IAAA,EAAK,CAC3D/D,CAAAA,CAAa,KAAKwD,EAAAA,CAAU,GAAA,CAAIhG,CAAK,CAAA,CAC3CuG,CAAAA,CAAI,gBAAgB,UAAA,CAAY/D,CAAU,CAAA,CAC1C+D,CAAAA,CAAI,YAAA,CAAa,eAAA,CAAiB,OAAO/D,CAAU,CAAC,EACtD,CAAC,EACH,CAEAoE,IAAiB,CACf,IAAMI,CAAAA,CAAQ,IAAA,CAAKnB,EAAAA,EAAQ,KAAA,CAAM,aAAY,EAAK,EAAA,CAAA,CAClC,IAAA,CAAKC,EAAAA,EAAU,gBAAA,CAAiB,YAAY,GAAK,EAAC,EAE1D,OAAA,CAAQS,CAAAA,EAAO,CACrB,IAAMU,EAAOV,CAAAA,CAAI,WAAA,EAAa,WAAA,EAAY,EAAK,EAAA,CAC/CA,CAAAA,CAAI,OAAS,CAACU,CAAAA,CAAK,QAAA,CAASD,CAAK,EACnC,CAAC,EACH,CAEAd,EAAAA,EAAe,CACT,CAAC,IAAA,CAAKL,IAAU,CAAC,IAAA,CAAKC,EAAAA,GAE1B,IAAA,CAAKA,EAAAA,CAAS,MAAA,CAAS,MACvB,IAAA,CAAKD,EAAAA,CAAO,YAAA,CAAa,eAAA,CAAiB,MAAM,CAAA,CAChD,KAAK9B,EAAAA,EAAgB,CAErB,IAAA,CAAKkB,EAAAA,CAAuBT,CAAAA,CAAa,IAAA,CAAM,IAAM,CACnD,IAAA,CAAK,KAAO,MACd,CAAC,EAED,MAAA,CAAO,gBAAA,CAAiB,QAAA,CAAU,IAAA,CAAKT,EAAAA,CAAiB,CAAE,QAAS,IAAA,CAAM,OAAA,CAAS,IAAK,CAAC,CAAA,CACxF,MAAA,CAAO,iBAAiB,QAAA,CAAU,IAAA,CAAKA,EAAAA,CAAiB,CAAE,OAAA,CAAS,IAAK,CAAC,CAAA,CAEzE,IAAA,CAAK,cAAc,IAAI,WAAA,CAAY,OAAQ,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,CAAA,EAC/D,CAEAoC,EAAAA,EAAe,CACT,CAAC,IAAA,CAAKN,EAAAA,EAAU,CAAC,KAAKC,EAAAA,GAE1B,IAAA,CAAKA,EAAAA,CAAS,MAAA,CAAS,IAAA,CACvB,IAAA,CAAKD,GAAO,YAAA,CAAa,eAAA,CAAiB,OAAO,CAAA,CAEjD,IAAA,CAAKZ,EAAAA,EAAsB,SAAQ,CACnC,IAAA,CAAKA,EAAAA,CAAuB,IAAA,CAC5B,MAAA,CAAO,mBAAA,CAAoB,SAAU,IAAA,CAAKlB,EAAAA,CAAiB,CAAE,OAAA,CAAS,IAAK,CAAC,EAC5E,MAAA,CAAO,mBAAA,CAAoB,QAAA,CAAU,IAAA,CAAKA,EAAe,CAAA,CAEzD,KAAK,aAAA,CAAc,IAAI,YAAY,OAAA,CAAS,CAAE,QAAS,IAAK,CAAC,CAAC,CAAA,EAChE,CAEAA,EAAAA,CAAkB,IAAM,CACtB,GAAI,CAAC,IAAA,CAAK8B,EAAAA,EAAU,CAAC,KAAKC,EAAAA,CAAU,OAEpC,GAAM,CAAE,CAAA,CAAAvC,CAAAA,CAAG,EAAAC,CAAE,CAAA,CAAIT,EAAS,IAAA,CAAK8C,EAAAA,CAAQ,KAAKC,EAAAA,CAAU,CACpD,SAAA,CAAW,QAAA,CACX,MAAA,CAAQ,CACV,CAAC,CAAA,CAED,IAAA,CAAKA,EAAAA,CAAS,KAAA,CAAM,QAAA,CAAW,OAAA,CAC/B,KAAKA,EAAAA,CAAS,KAAA,CAAM,IAAA,CAAO,CAAA,EAAGvC,CAAC,CAAA,EAAA,CAAA,CAC/B,KAAKuC,EAAAA,CAAS,KAAA,CAAM,IAAM,CAAA,EAAGtC,CAAC,KAC9B,IAAA,CAAKsC,EAAAA,CAAS,KAAA,CAAM,QAAA,CAAW,CAAA,EAAG,IAAA,CAAKD,GAAO,WAAW,CAAA,EAAA,EAC3D,CAAA,CAEAO,EAAAA,EAAsB,CACpB,IAAMc,EAAc,IAAA,CAAK,aAAA,CAAc,kBAAkB,CAAA,CACrDA,CAAAA,GACFA,CAAAA,CAAY,OAAS,CAAC,IAAA,CAAK,OAAA,EAE/B,CAEA,IAAA,EAAO,CAAE,KAAK,IAAA,CAAO,KAAK,CAC1B,IAAA,EAAO,CAAE,IAAA,CAAK,KAAO,MAAM,CAC3B,MAAA,EAAS,CAAE,IAAA,CAAK,IAAA,CAAO,CAAC,IAAA,CAAK,KAAK,CAElC,KAAA,EAAQ,CACN,IAAA,CAAKlB,GAAU,KAAA,EAAM,CACrB,KAAKM,EAAAA,EAAqB,CACtB,KAAKT,EAAAA,GAAQ,IAAA,CAAKA,EAAAA,CAAO,KAAA,CAAQ,EAAA,CAAA,CACrC,IAAA,CAAK,cAAc,IAAI,WAAA,CAAY,OAAA,CAAS,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,EAChE,CAMA,UAAA,CAAWxE,CAAAA,CAAS,CACb,KAAKyE,EAAAA,GACV,IAAA,CAAKA,GAAS,SAAA,CAAY,EAAA,CAC1BzE,EAAQ,OAAA,CAAQ,CAAC,CAAE,KAAA,CAAArB,CAAAA,CAAO,KAAA,CAAAmH,EAAO,QAAA,CAAAC,CAAS,CAAA,GAAM,CAC9C,IAAMb,CAAAA,CAAM,SAAS,aAAA,CAAc,YAAY,CAAA,CAC/CA,CAAAA,CAAI,YAAA,CAAa,OAAA,CAASvG,CAAK,CAAA,CAC/BuG,CAAAA,CAAI,YAAcY,CAAAA,CACdC,CAAAA,EAAUb,EAAI,YAAA,CAAa,UAAA,CAAY,EAAE,CAAA,CAC7C,IAAA,CAAKT,EAAAA,CAAS,YAAYS,CAAG,EAC/B,CAAC,CAAA,CACD,IAAA,CAAKD,EAAAA,IACP,CACF,CAAA,CAQMe,CAAAA,CAAN,cAAwB,WAAY,CAClC,mBAAoB,CAClB,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,QAAQ,CAAA,CAC9B,CAAC,IAAA,CAAK,YAAA,CAAa,UAAU,CAAA,EAAK,CAAC,IAAA,CAAK,aAAa,UAAU,CAAA,EACjE,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,IAAI,EAEhC,IAAA,CAAK,YAAA,CAAa,UAAU,CAAA,EAC9B,IAAA,CAAK,YAAA,CAAa,gBAAiB,MAAM,CAAA,CAE3C,KAAK,YAAA,CAAa,eAAA,CAAiB,KAAK,YAAA,CAAa,UAAU,CAAA,CAAI,MAAA,CAAS,OAAO,CAAA,CACnF,KAAK,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAK1H,EAAY,EAClD,CAEA,sBAAuB,CACrB,IAAA,CAAK,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKA,EAAY,EACrD,CAEAA,EAAAA,CAAgBuB,GAAM,CACpB,GAAI,KAAK,YAAA,CAAa,UAAU,CAAA,CAAG,CACjCA,CAAAA,CAAE,cAAA,GACFA,CAAAA,CAAE,eAAA,EAAgB,CAClB,MACF,CACA,IAAA,CAAK,cAAc,IAAI,WAAA,CAAY,cAAA,CAAgB,CACjD,OAAA,CAAS,IAAA,CACT,OAAQ,CAAE,MAAA,CAAQ,IAAK,CACzB,CAAC,CAAC,EACJ,CAAA,CAGA,IAAI,QAAA,EAAW,CAAE,OAAO,KAAK,YAAA,CAAa,UAAU,CAAE,CACtD,IAAI,QAAA,CAASuB,EAAG,CACVA,CAAAA,EACF,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,EAAE,EAChC,IAAA,CAAK,YAAA,CAAa,eAAA,CAAiB,MAAM,CAAA,CACzC,IAAA,CAAK,gBAAgB,UAAU,CAAA,GAE/B,IAAA,CAAK,eAAA,CAAgB,UAAU,CAAA,CAC/B,KAAK,eAAA,CAAgB,eAAe,CAAA,CACpC,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,IAAI,CAAA,EAEtC,CAGA,IAAI,QAAA,EAAW,CAAE,OAAO,KAAK,YAAA,CAAa,UAAU,CAAE,CACtD,IAAI,SAASA,CAAAA,CAAG,CACdA,CAAAA,CAAI,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,EAAE,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,UAAU,CAAA,CACvE,IAAA,CAAK,aAAa,eAAA,CAAiB,MAAA,CAAOA,CAAC,CAAC,EAC9C,CAGA,IAAI,KAAA,EAAQ,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,OAAO,CAAE,CAChD,IAAI,KAAA,CAAMA,CAAAA,CAAG,CAAEA,EAAI,IAAA,CAAK,YAAA,CAAa,OAAA,CAASA,CAAC,CAAA,CAAI,IAAA,CAAK,gBAAgB,OAAO,EAAE,CACnF,EAEAnE,CAAAA,CAAS,kBAAA,CAAoBsH,CAAe,CAAA,CAC5CtH,CAAAA,CAAS,aAAc+I,CAAS,CAAA,KCza5BC,CAAAA,CAAY,CAAA,CAEVC,CAAAA,CAAN,cAAyB,WAAY,CACnC,OAAO,kBAAA,CAAqB,CAAC,UAAA,CAAY,UAAU,CAAA,CACnDtF,EAAAA,CAAU,KACV+D,EAAAA,CAAY,IAAI,GAAA,CAChBwB,EAAAA,CAAM,IAAA,CAEN,iBAAA,EAAoB,CAAE,IAAA,CAAK/H,EAAAA,GAAS,CACpC,oBAAA,EAAuB,CAAE,KAAKoB,EAAAA,GAAW,CAEzC,wBAAA,CAAyBtC,CAAAA,CAAMqB,CAAAA,CAAQC,EAAQ,CACxC,IAAA,CAAK,WAAA,GACNtB,CAAAA,GAAS,UAAA,EAAY,IAAA,CAAK,aAAa,sBAAA,CAAwBsB,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,OAAO,CAAA,CACjGtB,IAAS,UAAA,EAAY,IAAA,CAAKkJ,IAAqB,EACrD,CAEA,IAAI,QAAA,EAAW,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,UAAU,CAAE,CACtD,IAAI,QAAA,CAAShF,CAAAA,CAAG,CAAEA,CAAAA,CAAI,KAAK,YAAA,CAAa,UAAA,CAAY,EAAE,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,UAAU,EAAE,CAE3F,IAAI,QAAA,EAAW,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,UAAU,CAAE,CACtD,IAAI,SAASA,CAAAA,CAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,EAAE,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,UAAU,EAAE,CAE3F,IAAI,KAAA,EAAQ,CACV,OAAO,IAAA,CAAK,QAAA,CAAW,CAAC,GAAG,IAAA,CAAKuD,EAAS,CAAA,CAAK,CAAC,GAAG,KAAKA,EAAS,CAAA,CAAE,CAAC,CAAA,EAAK,EAC1E,CACA,IAAI,KAAA,CAAMvD,CAAAA,CAAG,CACX,IAAA,CAAKuD,EAAAA,CAAU,KAAA,GACX,KAAA,CAAM,OAAA,CAAQvD,CAAC,CAAA,CAAGA,CAAAA,CAAE,OAAA,CAAQ4D,GAAO,IAAA,CAAKL,EAAAA,CAAU,GAAA,CAAIK,CAAG,CAAC,CAAA,CACrD5D,GAAG,IAAA,CAAKuD,EAAAA,CAAU,GAAA,CAAIvD,CAAC,CAAA,CAChC,IAAA,CAAK6D,KACP,CAEA,IAAI,OAAA,EAAU,CAAE,OAAO,CAAC,GAAG,IAAA,CAAK,iBAAiB,YAAY,CAAC,CAAE,CAChE,IAAI,eAAA,EAAkB,CAAE,OAAO,CAAC,GAAG,IAAA,CAAK,gBAAA,CAAiB,sBAAsB,CAAC,CAAE,CAElF7G,IAAS,CACP,IAAA,CAAK+H,EAAAA,CAAM,CAAA,YAAA,EAAe,EAAEF,CAAS,GAChC,IAAA,CAAK,EAAA,GAAI,KAAK,EAAA,CAAK,IAAA,CAAKE,IAC7B,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,SAAS,CAAA,CAC/B,IAAA,CAAK,UAAU,IAAA,CAAK,YAAA,CAAa,sBAAA,CAAwB,MAAM,CAAA,CAC9D,IAAA,CAAK,aAAa,UAAU,CAAA,EAAG,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,GAAG,EAErE,IAAA,CAAKvF,EAAAA,CAAUd,EACb,IAAM,CAAC,GAAG,IAAA,CAAK,gBAAA,CAAiB,4BAA4B,CAAC,CAAA,CAC7D,CAAE,YAAa,UAAA,CAAY,IAAA,CAAM,IAAA,CAAM,YAAA,CAAc,KAAM,CAC7D,EAEA,IAAA,CAAK,gBAAA,CAAiB,SAAA,CAAW,IAAA,CAAKoB,EAAc,CAAA,CACpD,KAAK,gBAAA,CAAiB,cAAA,CAAgB,KAAKoE,EAAkB,CAAA,CAC7D,KAAK,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAKe,EAAY,CAAA,CAEhD,IAAA,CAAK,iBAAiB,sBAAsB,CAAA,CAAE,OAAA,CAAQnB,CAAAA,EAAO,CAC3D,IAAMvG,EAAQuG,CAAAA,CAAI,YAAA,CAAa,OAAO,CAAA,EAAKA,CAAAA,CAAI,WAAA,EAAa,MAAK,CAC7DvG,CAAAA,EAAO,KAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,EACrC,CAAC,CAAA,CACD,IAAA,CAAKsG,EAAAA,GACP,CAEAzF,EAAAA,EAAW,CACT,IAAA,CAAK,mBAAA,CAAoB,SAAA,CAAW,IAAA,CAAK0B,EAAc,CAAA,CACvD,IAAA,CAAK,mBAAA,CAAoB,cAAA,CAAgB,IAAA,CAAKoE,EAAkB,EAChE,IAAA,CAAK,mBAAA,CAAoB,QAAS,IAAA,CAAKe,EAAY,EACrD,CAEAA,EAAAA,CAAe,IAAM,CACnB,IAAMC,CAAAA,CAAW,KAAK,aAAA,CAAc,sCAAsC,CAAA,CACpErH,CAAAA,CAAQ,IAAA,CAAK,aAAA,CAAc,4BAA4B,CAAA,CAAA,CAC3DqH,CAAAA,EAAYrH,CAAAA,GAAQ,KAAA,GACxB,CAAA,CAEAiC,GAAkBrB,CAAAA,EAAM,CACtB,GAAI,CAAA,IAAA,CAAK,QAAA,GACT,KAAKe,EAAAA,EAAS,aAAA,CAAcf,CAAC,CAAA,CACzBA,CAAAA,CAAE,GAAA,GAAQ,SAAWA,CAAAA,CAAE,GAAA,GAAQ,GAAA,CAAA,CAAK,CACtC,IAAMqE,CAAAA,CAAU,KAAK,aAAA,CAAc,kBAAkB,CAAA,CACjDA,CAAAA,EAAW,CAACA,CAAAA,CAAQ,aAAa,UAAU,CAAA,GAC7CrE,CAAAA,CAAE,cAAA,EAAe,CACjB,IAAA,CAAK4F,GAAcvB,CAAO,CAAA,EAE9B,CACF,CAAA,CAEAoB,EAAAA,CAAsBzF,CAAAA,EAAM,CAC1B,GAAI,IAAA,CAAK,QAAA,CAAU,OACnB,IAAM6F,CAAAA,CAAS7F,EAAE,MAAA,EAAQ,MAAA,CACrB6F,CAAAA,EAAU,CAACA,CAAAA,CAAO,YAAA,CAAa,UAAU,CAAA,EAAG,IAAA,CAAKD,GAAcC,CAAM,EAC3E,EAEAD,EAAAA,CAAcC,CAAAA,CAAQ,CACpB,IAAM/G,CAAAA,CAAQ+G,CAAAA,CAAO,aAAa,OAAO,CAAA,EAAKA,CAAAA,CAAO,WAAA,EAAa,IAAA,EAAK,CAClE/G,IAED,IAAA,CAAK,QAAA,CACP,IAAA,CAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,EAAI,IAAA,CAAKgG,EAAAA,CAAU,OAAOhG,CAAK,CAAA,CAAI,KAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,CAAA,EAEnF,IAAA,CAAKgG,EAAAA,CAAU,OAAM,CACrB,IAAA,CAAKA,EAAAA,CAAU,GAAA,CAAIhG,CAAK,CAAA,CAAA,CAE1B,KAAKsG,EAAAA,EAAqB,CAC1B,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,SAAU,CAAE,OAAA,CAAS,KAAM,MAAA,CAAQ,CAAE,MAAO,IAAA,CAAK,KAAA,CAAO,MAAA,CAAAS,CAAO,CAAE,CAAC,CAAC,CAAA,EACxG,CAEAT,EAAAA,EAAuB,CACrB,IAAA,CAAK,gBAAA,CAAiB,YAAY,CAAA,CAAE,OAAA,CAAQC,CAAAA,EAAO,CACjD,IAAMvG,CAAAA,CAAQuG,EAAI,YAAA,CAAa,OAAO,CAAA,EAAKA,CAAAA,CAAI,WAAA,EAAa,IAAA,GACtD/D,CAAAA,CAAa,IAAA,CAAKwD,EAAAA,CAAU,GAAA,CAAIhG,CAAK,CAAA,CAC3CuG,EAAI,eAAA,CAAgB,UAAA,CAAY/D,CAAU,CAAA,CAC1C+D,CAAAA,CAAI,YAAA,CAAa,gBAAiB,MAAA,CAAO/D,CAAU,CAAC,EACtD,CAAC,EACH,CAEAiF,EAAAA,EAAuB,CACjB,KAAK,QAAA,EACP,IAAA,CAAK,aAAa,eAAA,CAAiB,MAAM,CAAA,CACzC,IAAA,CAAK,eAAA,CAAgB,UAAU,IAE/B,IAAA,CAAK,eAAA,CAAgB,eAAe,CAAA,CACpC,IAAA,CAAK,YAAA,CAAa,WAAY,GAAG,CAAA,EAErC,CAEA,KAAA,EAAQ,CACN,IAAA,CAAKzB,GAAU,KAAA,EAAM,CACrB,KAAKM,EAAAA,EAAqB,CAC1B,KAAK,aAAA,CAAc,IAAI,WAAA,CAAY,OAAA,CAAS,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,EAChE,CAEA,SAAA,EAAY,CACL,KAAK,QAAA,GACV,IAAA,CAAK,gBAAA,CAAiB,4BAA4B,CAAA,CAAE,OAAA,CAAQC,GAAO,CACjE,IAAMvG,EAAQuG,CAAAA,CAAI,YAAA,CAAa,OAAO,CAAA,EAAKA,CAAAA,CAAI,WAAA,EAAa,IAAA,EAAK,CAC7DvG,CAAAA,EAAO,KAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,EACrC,CAAC,CAAA,CACD,KAAKsG,EAAAA,EAAqB,EAC5B,CACF,EAEAhI,CAAAA,CAAS,aAAA,CAAeiJ,CAAU,CAAA,CC1IlC,IAAIK,CAAAA,CAAW,CAAA,CAETC,CAAAA,CAAN,cAAwB,WAAY,CAClC,OAAO,kBAAA,CAAqB,CAAC,MAAA,CAAQ,UAAA,CAAY,WAAY,aAAa,CAAA,CAC1EvI,EAAAA,CAAW,IAAA,CACXwG,EAAAA,CAAW,IAAA,CACX7D,GAAU,IAAA,CACV+D,EAAAA,CAAY,IAAI,GAAA,CAChBwB,EAAAA,CAAM,IAAA,CACNM,GAAiB,KAAA,CAEjB,iBAAA,EAAoB,CAClB,IAAA,CAAKrI,EAAAA,GACD,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,EAAG,IAAA,CAAK6E,EAAAA,GAChC,IAAA,CAAK,QAAA,EAAU,IAAA,CAAKmD,EAAAA,GAC1B,CACA,sBAAuB,CAAE,IAAA,CAAK5G,EAAAA,GAAW,CAEzC,wBAAA,CAAyBtC,EAAMqB,CAAAA,CAAQC,CAAAA,CAAQ,CACxC,IAAA,CAAK,WAAA,GACNtB,IAAS,MAAA,GAAQsB,CAAAA,GAAW,IAAA,CAAO,IAAA,CAAKyE,EAAAA,EAAM,CAAI,KAAKC,EAAAA,EAAM,CAAA,CAC7DhG,CAAAA,GAAS,UAAA,EAAY,IAAA,CAAKuH,EAAAA,EAAU,aAAa,sBAAA,CAAwBjG,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,OAAO,CAAA,CAC3GtB,IAAS,UAAA,EAAY,IAAA,CAAKkJ,IAAqB,EACrD,CAEA,IAAI,IAAA,EAAO,CAAE,OAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CAAE,CAC9C,IAAI,IAAA,CAAKhF,CAAAA,CAAG,CAAEA,CAAAA,CAAI,KAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,MAAM,EAAE,CAC/E,IAAI,QAAA,EAAW,CAAE,OAAO,KAAK,YAAA,CAAa,UAAU,CAAE,CACtD,IAAI,QAAA,CAASA,EAAG,CAAEA,CAAAA,CAAI,IAAA,CAAK,YAAA,CAAa,UAAA,CAAY,EAAE,EAAI,IAAA,CAAK,eAAA,CAAgB,UAAU,EAAE,CAC3F,IAAI,UAAW,CAAE,OAAO,KAAK,YAAA,CAAa,UAAU,CAAE,CACtD,IAAI,QAAA,CAASA,CAAAA,CAAG,CAAEA,CAAAA,CAAI,KAAK,YAAA,CAAa,UAAA,CAAY,EAAE,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,UAAU,EAAE,CAC3F,IAAI,WAAA,EAAc,CAAE,OAAO,KAAK,YAAA,CAAa,aAAa,GAAK,WAAY,CAC3E,IAAI,WAAA,CAAYA,CAAAA,CAAG,CAAE,IAAA,CAAK,YAAA,CAAa,aAAA,CAAeA,CAAC,EAAE,CAEzD,IAAI,KAAA,EAAQ,CAAE,OAAO,KAAK,QAAA,CAAW,CAAC,GAAG,IAAA,CAAKuD,EAAS,CAAA,CAAK,CAAC,GAAG,IAAA,CAAKA,EAAS,CAAA,CAAE,CAAC,GAAK,EAAI,CAC1F,IAAI,KAAA,CAAMvD,CAAAA,CAAG,CACX,KAAKuD,EAAAA,CAAU,KAAA,EAAM,CACjB,KAAA,CAAM,OAAA,CAAQvD,CAAC,EAAGA,CAAAA,CAAE,OAAA,CAAQ4D,CAAAA,EAAO,IAAA,CAAKL,EAAAA,CAAU,GAAA,CAAIK,CAAG,CAAC,CAAA,CACrD5D,CAAAA,EAAG,IAAA,CAAKuD,EAAAA,CAAU,GAAA,CAAIvD,CAAC,CAAA,CAChC,IAAA,CAAK6D,EAAAA,EAAqB,CAC1B,IAAA,CAAKyB,EAAAA,GACP,CAEA,IAAI,OAAA,EAAU,CAAE,OAAO,CAAC,GAAG,IAAA,CAAK,gBAAA,CAAiB,YAAY,CAAC,CAAE,CAChE,IAAI,eAAA,EAAkB,CAAE,OAAO,CAAC,GAAG,KAAK,gBAAA,CAAiB,sBAAsB,CAAC,CAAE,CAElFtI,EAAAA,EAAS,CACP,IAAA,CAAK+H,EAAAA,CAAM,CAAA,WAAA,EAAc,EAAEI,CAAQ,CAAA,CAAA,CAC9B,KAAK,EAAA,GAAI,IAAA,CAAK,EAAA,CAAK,IAAA,CAAKJ,EAAAA,CAAAA,CAC7B,IAAA,CAAKlI,GAAW,IAAA,CAAK,aAAA,CAAc,kBAAkB,CAAA,CACrD,IAAA,CAAKwI,GAAiB,CAAC,CAAC,IAAA,CAAKxI,EAAAA,CACxB,IAAA,CAAKA,EAAAA,GACR,KAAKA,EAAAA,CAAW,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA,CAC/C,IAAA,CAAKA,GAAS,YAAA,CAAa,MAAA,CAAQ,SAAS,CAAA,CAC5C,IAAA,CAAKA,EAAAA,CAAS,UAAY,IAAA,CAAK,YAAA,CAAa,eAAe,CAAA,EAAK,EAAA,CAChE,KAAK,OAAA,CAAQ,IAAA,CAAKA,EAAQ,CAAA,CAAA,CAE5B,IAAA,CAAKwG,EAAAA,CAAW,SAAS,aAAA,CAAc,KAAK,CAAA,CAC5C,IAAA,CAAKA,EAAAA,CAAS,EAAA,CAAK,GAAG,IAAA,CAAK0B,EAAG,CAAA,QAAA,CAAA,CAC9B,IAAA,CAAK1B,EAAAA,CAAS,YAAA,CAAa,OAAQ,SAAS,CAAA,CAC5C,IAAA,CAAKA,EAAAA,CAAS,MAAA,CAAS,IAAA,CACnB,KAAK,QAAA,EAAU,IAAA,CAAKA,EAAAA,CAAS,YAAA,CAAa,sBAAA,CAAwB,MAAM,EAC5E,IAAA,CAAK,gBAAA,CAAiB,YAAY,CAAA,CAAE,OAAA,CAAQS,CAAAA,EAAO,KAAKT,EAAAA,CAAS,WAAA,CAAYS,CAAG,CAAC,CAAA,CACjF,IAAA,CAAK,YAAY,IAAA,CAAKT,EAAQ,EAC9B,IAAA,CAAKxG,EAAAA,CAAS,aAAa,eAAA,CAAiB,SAAS,CAAA,CACrD,IAAA,CAAKA,EAAAA,CAAS,YAAA,CAAa,gBAAiB,OAAO,CAAA,CACnD,IAAA,CAAKA,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,KAAKwG,EAAAA,CAAS,EAAE,CAAA,CAC5D,IAAA,CAAK7D,EAAAA,CAAUd,CAAAA,CACb,IAAM,CAAC,GAAG,KAAK2E,EAAAA,CAAS,gBAAA,CAAiB,4BAA4B,CAAC,CAAA,CACtE,CAAE,WAAA,CAAa,UAAA,CAAY,IAAA,CAAM,KAAM,YAAA,CAAc,KAAM,CAC7D,CAAA,CACA,IAAA,CAAK,gBAAA,CAAiB,sBAAsB,CAAA,CAAE,OAAA,CAAQS,CAAAA,EAAO,CAC3D,IAAMF,CAAAA,CAAME,EAAI,YAAA,CAAa,OAAO,GAAKA,CAAAA,CAAI,WAAA,EAAa,MAAK,CAC3DF,CAAAA,EAAK,IAAA,CAAKL,EAAAA,CAAU,GAAA,CAAIK,CAAG,EACjC,CAAC,CAAA,CACD,IAAA,CAAKC,EAAAA,EAAqB,CACrB,IAAA,CAAKwB,IAAgB,IAAA,CAAKC,EAAAA,EAAmB,CAClD,IAAA,CAAKzI,EAAAA,CAAS,gBAAA,CAAiB,QAAS,IAAA,CAAKgG,EAAmB,CAAA,CAChE,IAAA,CAAKhG,EAAAA,CAAS,gBAAA,CAAiB,UAAW,IAAA,CAAK0I,EAAqB,CAAA,CACpE,IAAA,CAAKlC,EAAAA,CAAS,gBAAA,CAAiB,UAAW,IAAA,CAAKmC,EAAqB,CAAA,CACpE,IAAA,CAAK,gBAAA,CAAiB,cAAA,CAAgB,KAAKtB,EAAkB,EAC/D,CAEA9F,EAAAA,EAAW,CACT,IAAA,CAAKvB,IAAU,mBAAA,CAAoB,OAAA,CAAS,KAAKgG,EAAmB,CAAA,CACpE,KAAKhG,EAAAA,EAAU,mBAAA,CAAoB,SAAA,CAAW,IAAA,CAAK0I,EAAqB,CAAA,CACxE,KAAKlC,EAAAA,EAAU,mBAAA,CAAoB,SAAA,CAAW,IAAA,CAAKmC,EAAqB,CAAA,CACxE,KAAK,mBAAA,CAAoB,cAAA,CAAgB,IAAA,CAAKtB,EAAkB,CAAA,CAChE,QAAA,CAAS,oBAAoB,OAAA,CAAS,IAAA,CAAKuB,EAAmB,CAAA,CAC9D,QAAA,CAAS,oBAAoB,SAAA,CAAW,IAAA,CAAKlH,EAAa,EAC5D,CAEAsE,EAAAA,CAAuBpE,GAAM,CAAM,IAAA,CAAK,QAAA,GAAkBA,CAAAA,CAAE,eAAA,EAAgB,CAAG,KAAK,IAAA,CAAO,CAAC,IAAA,CAAK,IAAA,EAAK,CAAA,CACtG8G,EAAAA,CAAyB9G,GAAM,CACzB,IAAA,CAAK,UACL,CAAC,WAAA,CAAa,UAAW,OAAA,CAAS,GAAG,CAAA,CAAE,QAAA,CAASA,CAAAA,CAAE,GAAG,IAAKA,CAAAA,CAAE,cAAA,EAAe,CAAG,IAAA,CAAK,IAAA,CAAO,IAAA,EAChG,EAEA+G,EAAAA,CAAyB/G,CAAAA,EAAM,CAE7B,GADA,IAAA,CAAKe,EAAAA,EAAS,cAAcf,CAAC,CAAA,CACzBA,EAAE,GAAA,GAAQ,OAAA,EAAWA,EAAE,GAAA,GAAQ,GAAA,CAAK,CACtC,IAAMqE,CAAAA,CAAU,IAAA,CAAKO,GAAS,aAAA,CAAc,kBAAkB,CAAA,CAC1DP,CAAAA,EAAW,CAACA,CAAAA,CAAQ,aAAa,UAAU,CAAA,GAAKrE,CAAAA,CAAE,cAAA,EAAe,CAAG,IAAA,CAAK4F,GAAcvB,CAAO,CAAA,EACpG,CACIrE,CAAAA,CAAE,GAAA,GAAQ,QAASA,CAAAA,CAAE,cAAA,EAAe,CAAG,IAAA,CAAK,IAAA,CAAO,KAAA,CAAO,KAAK5B,EAAAA,EAAU,KAAA,EAAM,EACrF,CAAA,CAEAqH,EAAAA,CAAsBzF,CAAAA,EAAM,CAC1B,GAAI,IAAA,CAAK,QAAA,CAAU,OACnB,IAAM6F,CAAAA,CAAS7F,EAAE,MAAA,EAAQ,MAAA,CACrB6F,GAAU,CAACA,CAAAA,CAAO,aAAa,UAAU,CAAA,EAAG,IAAA,CAAKD,EAAAA,CAAcC,CAAM,EAC3E,EAEAmB,EAAAA,CAAuBhH,CAAAA,EAAM,CAAO,IAAA,CAAK,QAAA,CAASA,CAAAA,CAAE,MAAM,CAAA,GAAG,IAAA,CAAK,IAAA,CAAO,KAAA,EAAM,CAAA,CAC/EF,EAAAA,CAAiBE,GAAM,CAAMA,CAAAA,CAAE,MAAQ,QAAA,EAAY,IAAA,CAAK,OAAQA,CAAAA,CAAE,cAAA,EAAe,CAAG,IAAA,CAAK,IAAA,CAAO,KAAA,CAAO,KAAK5B,EAAAA,EAAU,KAAA,EAAM,EAAI,CAAA,CAEhIwH,EAAAA,CAAcC,CAAAA,CAAQ,CACpB,IAAM/G,CAAAA,CAAQ+G,CAAAA,CAAO,YAAA,CAAa,OAAO,CAAA,EAAKA,EAAO,WAAA,EAAa,IAAA,EAAK,CAClE/G,CAAAA,GACD,IAAA,CAAK,QAAA,CACP,KAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,CAAA,CAAI,IAAA,CAAKgG,EAAAA,CAAU,OAAOhG,CAAK,CAAA,CAAI,IAAA,CAAKgG,EAAAA,CAAU,GAAA,CAAIhG,CAAK,GAEnF,IAAA,CAAKgG,EAAAA,CAAU,KAAA,EAAM,CACrB,IAAA,CAAKA,EAAAA,CAAU,IAAIhG,CAAK,CAAA,CACxB,KAAK,IAAA,CAAO,KAAA,CACZ,KAAKV,EAAAA,EAAU,KAAA,EAAM,CAAA,CAEvB,IAAA,CAAKgH,EAAAA,EAAqB,CACrB,KAAKwB,EAAAA,EAAgB,IAAA,CAAKC,EAAAA,EAAmB,CAClD,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,QAAA,CAAU,CAAE,OAAA,CAAS,IAAA,CAAM,MAAA,CAAQ,CAAE,KAAA,CAAO,IAAA,CAAK,MAAO,MAAA,CAAAhB,CAAO,CAAE,CAAC,CAAC,CAAA,EACxG,CAEAT,EAAAA,EAAuB,CACrB,KAAK,gBAAA,CAAiB,YAAY,CAAA,CAAE,OAAA,CAAQC,CAAAA,EAAO,CACjD,IAAMF,CAAAA,CAAME,CAAAA,CAAI,YAAA,CAAa,OAAO,CAAA,EAAKA,CAAAA,CAAI,aAAa,IAAA,EAAK,CACzD/D,EAAa,IAAA,CAAKwD,EAAAA,CAAU,IAAIK,CAAG,CAAA,CACzCE,CAAAA,CAAI,eAAA,CAAgB,UAAA,CAAY/D,CAAU,EAC1C+D,CAAAA,CAAI,YAAA,CAAa,eAAA,CAAiB,MAAA,CAAO/D,CAAU,CAAC,EACtD,CAAC,EACH,CAEAuF,EAAAA,EAAqB,CACnB,GAAI,CAAC,IAAA,CAAKzI,EAAAA,EAAY,IAAA,CAAKwI,EAAAA,CAAgB,OAC3C,IAAMH,EAAW,IAAA,CAAK,eAAA,CAClBA,CAAAA,CAAS,MAAA,GAAW,CAAA,CAAG,IAAA,CAAKrI,GAAS,WAAA,CAAc,IAAA,CAAK,WAAA,CACnD,IAAA,CAAK,QAAA,CAAU,IAAA,CAAKA,GAAS,WAAA,CAAcqI,CAAAA,CAAS,GAAA,CAAIQ,CAAAA,EAAKA,CAAAA,CAAE,WAAA,EAAa,MAAM,CAAA,CAAE,KAAK,IAAI,CAAA,CACjG,KAAK7I,EAAAA,CAAS,WAAA,CAAcqI,CAAAA,CAAS,CAAC,CAAA,EAAG,WAAA,EAAa,MAAK,EAAK,IAAA,CAAK,YAC5E,CAEAF,EAAAA,EAAuB,CACjB,KAAK,QAAA,EAAY,IAAA,CAAKnI,EAAAA,EAAU,YAAA,CAAa,UAAA,CAAY,EAAE,EAAG,IAAA,CAAKA,EAAAA,EAAU,aAAa,eAAA,CAAiB,MAAM,IAC9G,IAAA,CAAKA,EAAAA,EAAU,eAAA,CAAgB,UAAU,CAAA,CAAG,IAAA,CAAKA,IAAU,eAAA,CAAgB,eAAe,CAAA,EACnG,CAEAgF,EAAAA,EAAQ,CACF,CAAC,IAAA,CAAKwB,EAAAA,EAAY,IAAA,CAAK,QAAA,GAC3B,IAAA,CAAKxG,EAAAA,EAAU,aAAa,eAAA,CAAiB,MAAM,EACnD,IAAA,CAAKwG,EAAAA,CAAS,OAAS,KAAA,CACvB,IAAA,CAAK/B,EAAAA,EAAgB,CACrB,UAAA,CAAW,IAAM,SAAS,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAKmE,EAAmB,CAAA,CAAG,CAAC,EAChF,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAW,IAAA,CAAKlH,EAAa,CAAA,CACvD,sBAAsB,IAAM,CAC1B,IAAM2G,CAAAA,CAAW,IAAA,CAAK7B,EAAAA,CAAS,cAAc,sCAAsC,CAAA,CAC7ExF,CAAAA,CAAQ,IAAA,CAAKwF,EAAAA,CAAS,aAAA,CAAc,4BAA4B,CAAA,CAAA,CACpE6B,CAAAA,EAAYrH,CAAAA,GAAQ,KAAA,GACxB,CAAC,EACD,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,MAAA,CAAQ,CAAE,QAAS,IAAK,CAAC,CAAC,CAAA,EAC/D,CAEAiE,IAAQ,CACD,IAAA,CAAKuB,EAAAA,GACV,IAAA,CAAKxG,EAAAA,EAAU,YAAA,CAAa,gBAAiB,OAAO,CAAA,CACpD,IAAA,CAAKwG,EAAAA,CAAS,MAAA,CAAS,IAAA,CACvB,SAAS,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKoC,EAAmB,CAAA,CAC9D,QAAA,CAAS,oBAAoB,SAAA,CAAW,IAAA,CAAKlH,EAAa,CAAA,CAC1D,IAAA,CAAK,cAAc,IAAI,WAAA,CAAY,OAAA,CAAS,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,CAAA,EAChE,CAEA+C,EAAAA,CAAkB,IAAM,CACtB,GAAI,CAAC,IAAA,CAAKzE,EAAAA,EAAY,CAAC,IAAA,CAAKwG,EAAAA,CAAU,OACtC,GAAM,CAAE,EAAAvC,CAAAA,CAAG,CAAA,CAAAC,EAAG,SAAA,CAAAN,CAAU,CAAA,CAAIH,CAAAA,CAAS,IAAA,CAAKzD,EAAAA,CAAU,KAAKwG,EAAAA,CAAU,CAAE,SAAA,CAAW,QAAA,CAAU,MAAA,CAAQ,CAAE,CAAC,CAAA,CACrG,IAAA,CAAKA,EAAAA,CAAS,KAAA,CAAM,QAAA,CAAW,OAAA,CAC/B,KAAKA,EAAAA,CAAS,KAAA,CAAM,IAAA,CAAO,CAAA,EAAGvC,CAAC,CAAA,EAAA,CAAA,CAC/B,KAAKuC,EAAAA,CAAS,KAAA,CAAM,GAAA,CAAM,CAAA,EAAGtC,CAAC,CAAA,EAAA,CAAA,CAC9B,KAAKsC,EAAAA,CAAS,KAAA,CAAM,QAAA,CAAW,CAAA,EAAG,IAAA,CAAKxG,EAAAA,CAAS,WAAW,CAAA,EAAA,CAAA,CAC3D,IAAA,CAAKwG,EAAAA,CAAS,OAAA,CAAQ,SAAA,CAAY5C,EACpC,EAEA,IAAA,EAAO,CAAE,KAAK,IAAA,CAAO,KAAK,CAC1B,IAAA,EAAO,CAAE,IAAA,CAAK,IAAA,CAAO,MAAM,CAC3B,QAAS,CAAE,IAAA,CAAK,IAAA,CAAO,CAAC,IAAA,CAAK,KAAK,CAClC,KAAA,EAAQ,CACN,IAAA,CAAK8C,EAAAA,CAAU,KAAA,EAAM,CACrB,KAAKM,EAAAA,EAAqB,CACrB,KAAKwB,EAAAA,EAAgB,IAAA,CAAKC,IAAmB,CAClD,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,OAAA,CAAS,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,EAChE,CACF,EAEAzJ,CAAAA,CAAS,YAAA,CAAcuJ,CAAS,CAAA,CCpLhC,IAAIO,CAAAA,CAAkB,EAMhBC,CAAAA,CAAN,cAA2B,WAAY,CACrC,iBAAA,EAAoB,CAClB,IAAA,CAAK,gBAAA,CAAiB,QAAA,CAAU,IAAA,CAAKC,EAAiB,EACxD,CAEA,oBAAA,EAAuB,CACrB,IAAA,CAAK,mBAAA,CAAoB,QAAA,CAAU,IAAA,CAAKA,EAAiB,EAC3D,CAMA,IAAI,SAAA,EAAY,CACd,OAAO,KAAK,YAAA,CAAa,WAAW,CACtC,CAEA,IAAI,SAAA,CAAUtI,EAAO,CACfA,CAAAA,CACF,IAAA,CAAK,YAAA,CAAa,WAAA,CAAa,EAAE,EAEjC,IAAA,CAAK,eAAA,CAAgB,WAAW,EAEpC,CAMA,IAAI,OAAQ,CACV,OAAO,KAAA,CAAM,IAAA,CAAK,IAAA,CAAK,gBAAA,CAAiB,6BAA6B,CAAC,CACxE,CAOAsI,EAAAA,CAAqBpH,CAAAA,EAAM,CACzB,GAAI,CAAC,IAAA,CAAK,SAAA,EAAa,CAACA,CAAAA,CAAE,OAAO,IAAA,CAAM,OAEvC,IAAMqH,CAAAA,CAAarH,CAAAA,CAAE,MAAA,CACrB,KAAK,KAAA,CAAM,OAAA,CAAQmE,CAAAA,EAAQ,CACrBA,CAAAA,GAASkD,CAAAA,EAAclD,EAAK,IAAA,GAC9BA,CAAAA,CAAK,KAAO,KAAA,EAEhB,CAAC,EACH,CACF,CAAA,CAgBMmD,CAAAA,CAAN,cAA+B,WAAY,CACzC,OAAO,kBAAA,CAAqB,CAAC,MAAM,CAAA,CAGnClJ,EAAAA,CAAW,IAAA,CAEXC,GAAW,IAAA,CAEXC,EAAAA,CAAa,IAAA,CAEb,iBAAA,EAAoB,CAClB,IAAA,CAAKC,IAAO,CACZ,IAAA,CAAKC,KACP,CAEA,sBAAuB,CACrB,IAAA,CAAKJ,EAAAA,EAAU,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKK,EAAY,EAC/D,CAEA,wBAAA,CAAyBpB,CAAAA,CAAMqB,CAAAA,CAAQC,CAAAA,CAAQ,CACzCtB,CAAAA,GAAS,MAAA,EAAU,IAAA,CAAK,WAAA,EAC1B,IAAA,CAAKmB,EAAAA,GAET,CAEAD,EAAAA,EAAS,CAEP,IAAA,CAAKH,EAAAA,CAAW,IAAA,CAAK,cAAc,QAAQ,CAAA,CAC3C,IAAA,CAAKC,EAAAA,CAAW,IAAA,CAAKD,EAAAA,EAAU,mBAE3B,EAAA,CAAC,IAAA,CAAKA,EAAAA,EAAY,CAAC,IAAA,CAAKC,EAAAA,CAAAA,GAG5B,KAAKC,EAAAA,CAAa,IAAA,CAAKD,EAAAA,CAAS,EAAA,EAAM,CAAA,sBAAA,EAAyB,EAAE6I,CAAe,CAAA,CAAA,CAChF,IAAA,CAAK7I,GAAS,EAAA,CAAK,IAAA,CAAKC,GAGxB,IAAA,CAAKF,EAAAA,CAAS,EAAA,CAAK,IAAA,CAAKA,EAAAA,CAAS,EAAA,EAAM,yBAAyB8I,CAAe,CAAA,CAAA,CAG/E,IAAA,CAAK9I,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,KAAKE,EAAU,CAAA,CAC3D,IAAA,CAAKD,EAAAA,CAAS,YAAA,CAAa,iBAAA,CAAmB,KAAKD,EAAAA,CAAS,EAAE,EAC9D,IAAA,CAAKC,EAAAA,CAAS,aAAa,MAAA,CAAQ,QAAQ,CAAA,CAG3C,IAAA,CAAKD,EAAAA,CAAS,gBAAA,CAAiB,QAAS,IAAA,CAAKK,EAAY,CAAA,EAC3D,CAEAA,EAAAA,CAAe,IAAM,CACnB,IAAA,CAAK,MAAA,GACP,CAAA,CAEAD,EAAAA,EAAe,CACb,IAAMI,CAAAA,CAAS,IAAA,CAAK,aAAa,MAAM,CAAA,CAEnC,KAAKR,EAAAA,EACP,IAAA,CAAKA,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,MAAA,CAAOQ,CAAM,CAAC,CAAA,CAGxD,IAAA,CAAKP,EAAAA,GACP,IAAA,CAAKA,EAAAA,CAAS,OAAS,CAACO,CAAAA,EAE5B,CAMA,MAAA,EAAS,CACP,IAAMC,EAAW,CAAC,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAEtCA,CAAAA,CACF,KAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,CAAA,CAE5B,IAAA,CAAK,eAAA,CAAgB,MAAM,CAAA,CAG7B,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,QAAA,CAAU,CAC3C,OAAA,CAAS,IAAA,CACT,MAAA,CAAQ,CAAE,IAAA,CAAMA,CAAS,CAC3B,CAAC,CAAC,EACJ,CAMA,IAAI,MAAO,CACT,OAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CACjC,CAEA,IAAI,IAAA,CAAKC,CAAAA,CAAO,CACVA,CAAAA,CACF,IAAA,CAAK,aAAa,MAAA,CAAQ,EAAE,CAAA,CAE5B,IAAA,CAAK,eAAA,CAAgB,MAAM,EAE/B,CACF,EAEA1B,EAAS,eAAA,CAAiB+J,CAAY,EACtC/J,CAAAA,CAAS,oBAAA,CAAsBkK,CAAgB,CAAA,CC1K/C,IAAMvI,CAAAA,CAAY,4IAGZwI,CAAAA,CAAgB,CAAC,MAAA,CAAQ,OAAA,CAAS,KAAA,CAAO,QAAQ,EAMjDC,CAAAA,CAAN,cAAwB,WAAY,CAClC,OAAO,kBAAA,CAAqB,CAAC,MAAA,CAAQ,QAAQ,EAG7CjI,EAAAA,CAAiB,IAAA,CAEjBC,GAAa,IAAA,CAEbC,EAAAA,CAAoB,EAAA,CAEpB,iBAAA,EAAoB,CAClB,IAAA,CAAK,aAAa,MAAA,CAAQ,QAAQ,CAAA,CAClC,IAAA,CAAK,YAAA,CAAa,YAAA,CAAc,MAAM,CAAA,CACtC,IAAA,CAAK,MAAA,CAAS,CAAC,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAElC,IAAA,CAAK,YAAA,CAAa,QAAQ,CAAA,EAC7B,IAAA,CAAK,aAAa,QAAA,CAAU,MAAM,CAAA,CAGpC,IAAA,CAAK,gBAAA,CAAiB,OAAA,CAAS,KAAKC,EAAoB,EAC1D,CAEA,oBAAA,EAAuB,CACrB,IAAA,CAAK,oBAAoB,OAAA,CAAS,IAAA,CAAKA,EAAoB,CAAA,CAC3D,IAAA,CAAKC,EAAAA,GACP,CAEA,wBAAA,CAAyBtC,EAAMqB,CAAAA,CAAQC,CAAAA,CAAQ,CACzCtB,CAAAA,GAAS,MAAA,EAAU,IAAA,CAAK,WAAA,GAC1BsB,CAAAA,GAAW,IAAA,CAAO,KAAKiB,EAAAA,EAAM,CAAI,IAAA,CAAKC,EAAAA,EAAO,CAAA,CAE3CxC,CAAAA,GAAS,UAAYsB,CAAAA,EAAU,CAAC4I,CAAAA,CAAc,QAAA,CAAS5I,CAAM,CAAA,EAC/D,KAAK,YAAA,CAAa,QAAA,CAAU,MAAM,EAEtC,CAEAiB,IAAQ,CACN,IAAA,CAAKL,EAAAA,CAA6C,QAAA,CAAS,aAAA,CAC3D,IAAA,CAAK,OAAS,KAAA,CACd,IAAA,CAAKE,EAAAA,CAAoB,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,SAC7C,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,QAAA,CAAW,QAAA,CAC/B,IAAA,CAAKD,GAAaR,CAAAA,CAAgB,IAAI,EACtC,IAAA,CAAKQ,EAAAA,CAAW,UAAS,CACzB,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAW,IAAA,CAAKM,EAAa,EAEvD,qBAAA,CAAsB,IAAM,CAC1B,IAAMC,CAAAA,CAAiB,IAAA,CAAK,cAAchB,CAAS,CAAA,CAC/CgB,CAAAA,CAC0BA,CAAAA,CAAgB,KAAA,EAAM,EAElD,KAAK,YAAA,CAAa,UAAA,CAAY,IAAI,CAAA,CAClC,IAAA,CAAK,KAAA,IAET,CAAC,EACH,CAEAF,EAAAA,EAAS,CACP,IAAA,CAAK,OAAS,IAAA,CACd,IAAA,CAAKF,EAAAA,EAAS,CACd,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,OAAA,CAAS,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,EAChE,CAEAA,IAAW,CACT,QAAA,CAAS,KAAK,KAAA,CAAM,QAAA,CAAW,IAAA,CAAKF,EAAAA,CACpC,IAAA,CAAKD,EAAAA,EAAY,YAAW,CAC5B,IAAA,CAAKA,EAAAA,CAAa,IAAA,CAClB,QAAA,CAAS,mBAAA,CAAoB,UAAW,IAAA,CAAKM,EAAa,CAAA,CAC1D,IAAA,CAAKP,EAAAA,EAAgB,KAAA,GACrB,IAAA,CAAKA,EAAAA,CAAiB,KACxB,CAGAO,EAAAA,CAAiBE,GAAM,CACjBA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAY,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,GAChDA,CAAAA,CAAE,cAAA,EAAe,CACjB,IAAA,CAAK,eAAA,CAAgB,MAAM,CAAA,EAE/B,CAAA,CAGAN,EAAAA,CAAwBM,CAAAA,EAAM,CACxBA,CAAAA,CAAE,SAAW,IAAA,EAAQ,CAAC,KAAK,YAAA,CAAa,QAAQ,GAClD,IAAA,CAAK,eAAA,CAAgB,MAAM,EAE/B,CAAA,CAGA,IAAI,MAAO,CACT,OAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CACjC,CAEA,IAAI,IAAA,CAAKlB,CAAAA,CAAO,CACdA,CAAAA,CAAQ,IAAA,CAAK,aAAa,MAAA,CAAQ,EAAE,CAAA,CAAI,IAAA,CAAK,eAAA,CAAgB,MAAM,EACrE,CAGA,IAAI,MAAA,EAAS,CACX,OAAqD,IAAA,CAAK,aAAa,QAAQ,CAAA,EAAK,MACtF,CAEA,IAAI,MAAA,CAAOA,EAAO,CACZyI,CAAAA,CAAc,QAAA,CAASzI,CAAK,CAAA,EAAG,IAAA,CAAK,aAAa,QAAA,CAAUA,CAAK,EACtE,CAGA,KAAA,EAAQ,CACN,IAAA,CAAK,eAAA,CAAgB,MAAM,EAC7B,CAGA,IAAA,EAAO,CACL,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,EAC9B,CACF,EAEA1B,CAAAA,CAAS,YAAA,CAAcoK,CAAS,CAAA,CC1HhC,IAAIC,CAAAA,CAAY,EAGV1I,CAAAA,CAAY,2IAAA,CAMZ2I,EAAN,cAAyB,WAAY,CACnC,OAAO,kBAAA,CAAqB,CAAC,MAAA,CAAQ,WAAA,CAAa,QAAQ,EAG1DtJ,EAAAA,CAAW,IAAA,CAEXC,EAAAA,CAAW,IAAA,CAEXC,EAAAA,CAAa,IAAA,CAEb,mBAAoB,CAClB,IAAA,CAAKC,EAAAA,EAAO,CAER,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,EAC1B,IAAA,CAAK6E,KAET,CAEA,sBAAuB,CACrB,IAAA,CAAKzD,EAAAA,GACP,CAEA,wBAAA,CAAyBtC,EAAMqB,CAAAA,CAAQC,CAAAA,CAAQ,CACxC,IAAA,CAAK,WAAA,GAENtB,CAAAA,GAAS,OACXsB,CAAAA,GAAW,IAAA,CAAO,IAAA,CAAKyE,EAAAA,EAAM,CAAI,IAAA,CAAKC,IAAM,CACnC,IAAA,CAAK,YAAA,CAAa,MAAM,CAAA,EAEjC,IAAA,CAAKR,IAAgB,EAEzB,CAGA,IAAI,SAAA,EAAY,CACd,OAAO,KAAK,YAAA,CAAa,WAAW,CAAA,EAAK,QAC3C,CAEA,IAAI,UAAU/D,CAAAA,CAAO,CACnB,IAAA,CAAK,YAAA,CAAa,WAAA,CAAaA,CAAK,EACtC,CAGA,IAAI,QAAS,CACX,OAAO,SAAS,IAAA,CAAK,YAAA,CAAa,QAAQ,CAAA,EAAK,GAAA,CAAK,EAAE,CACxD,CAEA,IAAI,MAAA,CAAOA,CAAAA,CAAO,CAChB,IAAA,CAAK,aAAa,QAAA,CAAU,MAAA,CAAOA,CAAK,CAAC,EAC3C,CAGA,IAAI,IAAA,EAAO,CACT,OAAO,IAAA,CAAK,YAAA,CAAa,MAAM,CACjC,CAEA,IAAI,IAAA,CAAKA,CAAAA,CAAO,CACVA,EACF,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,CAAA,CAE5B,IAAA,CAAK,gBAAgB,MAAM,EAE/B,CAEAP,EAAAA,EAAS,CAEP,IAAA,CAAKH,GAAW,IAAA,CAAK,iBAAA,CACrB,KAAKC,EAAAA,CAAW,IAAA,CAAK,cAAc,kBAAkB,CAAA,EAAK,IAAA,CAAK,gBAAA,CAE3D,EAAA,CAAC,IAAA,CAAKD,IAAY,CAAC,IAAA,CAAKC,EAAAA,EAAY,IAAA,CAAKD,EAAAA,GAAa,IAAA,CAAKC,MAG/D,IAAA,CAAKC,EAAAA,CAAa,IAAA,CAAKD,EAAAA,CAAS,EAAA,EAAM,CAAA,YAAA,EAAe,EAAEoJ,CAAS,CAAA,CAAA,CAChE,IAAA,CAAKpJ,EAAAA,CAAS,EAAA,CAAK,IAAA,CAAKC,GAGxB,IAAA,CAAKF,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,QAAQ,CAAA,CACpD,KAAKA,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,OAAO,CAAA,CACnD,IAAA,CAAKA,GAAS,YAAA,CAAa,eAAA,CAAiB,IAAA,CAAKE,EAAU,CAAA,CAG3D,IAAA,CAAKD,GAAS,MAAA,CAAS,IAAA,CAGvB,KAAKD,EAAAA,CAAS,gBAAA,CAAiB,QAAS,IAAA,CAAKgG,EAAmB,CAAA,EAClE,CAEAzE,EAAAA,EAAW,CACT,KAAKvB,EAAAA,EAAU,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKgG,EAAmB,CAAA,CACpE,SAAS,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAK4C,EAAmB,CAAA,CAC9D,QAAA,CAAS,oBAAoB,SAAA,CAAW,IAAA,CAAKlH,EAAa,CAAA,CAC1D,MAAA,CAAO,oBAAoB,QAAA,CAAU,IAAA,CAAK+C,EAAAA,CAAiB,CAAE,OAAA,CAAS,IAAK,CAAC,CAAA,CAC5E,MAAA,CAAO,mBAAA,CAAoB,QAAA,CAAU,IAAA,CAAKA,EAAe,EAC3D,CAEAuB,EAAAA,CAAuBpE,CAAAA,EAAM,CAC3BA,CAAAA,CAAE,eAAA,GACF,IAAA,CAAK,IAAA,CAAO,CAAC,IAAA,CAAK,KACpB,EAEAgH,EAAAA,CAAuBhH,CAAAA,EAAM,CAEvB,CAAC,IAAA,CAAK3B,EAAAA,EAAU,SAAS2B,CAAAA,CAAE,MAAM,CAAA,EAAK,CAAC,IAAA,CAAK5B,EAAAA,EAAU,SAAS4B,CAAAA,CAAE,MAAM,CAAA,GACzE,IAAA,CAAK,IAAA,CAAO,KAAA,EAEhB,EAEAF,EAAAA,CAAiBE,CAAAA,EAAM,CACjBA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAY,KAAK,IAAA,GAC7BA,CAAAA,CAAE,cAAA,EAAe,CACjB,IAAA,CAAK,IAAA,CAAO,MAEZ,IAAA,CAAK5B,EAAAA,EAAU,KAAA,EAAM,EAEzB,CAAA,CAEAgF,EAAAA,EAAQ,CACD,IAAA,CAAK/E,EAAAA,GAGV,IAAA,CAAKD,EAAAA,EAAU,YAAA,CAAa,eAAA,CAAiB,MAAM,CAAA,CAGnD,IAAA,CAAKC,GAAS,MAAA,CAAS,KAAA,CACvB,KAAKwE,EAAAA,EAAgB,CAIrB,UAAA,CAAW,IAAM,CACf,QAAA,CAAS,iBAAiB,OAAA,CAAS,IAAA,CAAKmE,EAAmB,EAC7D,CAAA,CAAG,CAAC,EACJ,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAW,IAAA,CAAKlH,EAAa,CAAA,CAGvD,OAAO,gBAAA,CAAiB,QAAA,CAAU,KAAK+C,EAAAA,CAAiB,CAAE,QAAS,IAAA,CAAM,OAAA,CAAS,IAAK,CAAC,CAAA,CACxF,MAAA,CAAO,iBAAiB,QAAA,CAAU,IAAA,CAAKA,EAAAA,CAAiB,CAAE,OAAA,CAAS,IAAK,CAAC,CAAA,CAGzE,qBAAA,CAAsB,IAAM,CAC1B,IAAM1D,CAAAA,CAAY,KAAKd,EAAAA,EAAU,aAAA,CAAcU,CAAS,CAAA,CACpDI,CAAAA,EAC0BA,EAAW,KAAA,GAE3C,CAAC,CAAA,CAED,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,MAAA,CAAQ,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,CAAA,EAC/D,CAEAkE,EAAAA,EAAQ,CACD,IAAA,CAAKhF,EAAAA,GAGV,KAAKD,EAAAA,EAAU,YAAA,CAAa,eAAA,CAAiB,OAAO,CAAA,CAGpD,IAAA,CAAKC,GAAS,MAAA,CAAS,IAAA,CAGvB,QAAA,CAAS,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAK2I,EAAmB,CAAA,CAC9D,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAW,IAAA,CAAKlH,EAAa,EAC1D,MAAA,CAAO,mBAAA,CAAoB,QAAA,CAAU,IAAA,CAAK+C,EAAAA,CAAiB,CAAE,QAAS,IAAK,CAAC,EAC5E,MAAA,CAAO,mBAAA,CAAoB,SAAU,IAAA,CAAKA,EAAe,CAAA,CAEzD,IAAA,CAAK,aAAA,CAAc,IAAI,YAAY,MAAA,CAAQ,CAAE,OAAA,CAAS,IAAK,CAAC,CAAC,GAC/D,CAEAA,EAAAA,CAAkB,IAAM,CACtB,GAAI,CAAC,KAAKzE,EAAAA,EAAY,CAAC,KAAKC,EAAAA,CAAU,OAEtC,GAAM,CAAE,CAAA,CAAAgE,CAAAA,CAAG,CAAA,CAAAC,CAAAA,CAAG,SAAA,CAAWC,CAAe,CAAA,CAAIV,CAAAA,CAAS,IAAA,CAAKzD,EAAAA,CAAU,IAAA,CAAKC,EAAAA,CAAU,CACjF,SAAA,CAAW,IAAA,CAAK,SAAA,CAChB,MAAA,CAAQ,IAAA,CAAK,MACf,CAAC,CAAA,CAGD,IAAA,CAAKA,GAAS,KAAA,CAAM,QAAA,CAAW,QAC/B,IAAA,CAAKA,EAAAA,CAAS,KAAA,CAAM,IAAA,CAAO,CAAA,EAAGgE,CAAC,KAC/B,IAAA,CAAKhE,EAAAA,CAAS,KAAA,CAAM,GAAA,CAAM,CAAA,EAAGiE,CAAC,KAG9B,IAAA,CAAKjE,EAAAA,CAAS,OAAA,CAAQ,SAAA,CAAYkE,EACpC,CAAA,CAKA,MAAO,CACL,IAAA,CAAK,IAAA,CAAO,KACd,CAGA,IAAA,EAAO,CACL,IAAA,CAAK,IAAA,CAAO,MACd,CAGA,MAAA,EAAS,CACP,KAAK,IAAA,CAAO,CAAC,IAAA,CAAK,KACpB,CACF,EAEAnF,EAAS,aAAA,CAAesK,CAAU,CAAA,CCxN3B,IAAMC,EAAAA,CAAU","file":"tier1.js","sourcesContent":["/**\r\n * Idempotent custom element registration utility.\r\n * Prevents duplicate registration errors when scripts load multiple times.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/register\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Register a custom element if not already registered.\r\n * Safe to call multiple times with the same name.\r\n *\r\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\r\n * @param {CustomElementConstructor} constructor - The element class\r\n */\r\nexport function register(name, constructor) {\r\n  if (!customElements.get(name)) {\r\n    customElements.define(name, constructor)\r\n  }\r\n}\r\n","/**\r\n * ytz-button - Polymorphic button/anchor Web Component.\r\n * Renders <a> when href provided, <button> otherwise.\r\n *\r\n * @module @grimoire/yetzirah-core/button\r\n * @example\r\n * // Link button\r\n * <ytz-button href=\"/dashboard\" class=\"ph3 pv2 br2 white bg-blue\">Dashboard</ytz-button>\r\n *\r\n * @example\r\n * // Action button\r\n * <ytz-button onclick=\"handleSubmit()\" class=\"ph3 pv2 br2 white bg-blue\">Submit</ytz-button>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Default classes for anchor elements */\r\nconst ANCHOR_DEFAULTS = 'pointer font-inherit no-underline dib'\r\n\r\n/** @type {string} Default classes for button elements (no border reset - user controls borders) */\r\nconst BUTTON_DEFAULTS = 'pointer font-inherit bg-transparent'\r\n\r\n/**\r\n * @class YtzButton\r\n * @extends HTMLElement\r\n */\r\nclass YtzButton extends HTMLElement {\r\n  connectedCallback() {\r\n    this.#render()\r\n  }\r\n\r\n  static get observedAttributes() {\r\n    return ['href', 'disabled', 'type', 'class']\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.isConnected) this.#render()\r\n  }\r\n\r\n  #render() {\r\n    const href = this.getAttribute('href')\r\n    const userClass = this.getAttribute('class') || ''\r\n    const isAnchor = href != null\r\n\r\n    const el = document.createElement(isAnchor ? 'a' : 'button')\r\n    const defaults = isAnchor ? ANCHOR_DEFAULTS : BUTTON_DEFAULTS\r\n    el.className = defaults + (userClass ? ' ' + userClass : '')\r\n\r\n    if (isAnchor) {\r\n      el.href = href\r\n    } else {\r\n      el.type = this.getAttribute('type') || 'button'\r\n      if (this.hasAttribute('disabled')) el.disabled = true\r\n    }\r\n\r\n    // Copy aria-* and data-* attributes\r\n    for (const attr of this.attributes) {\r\n      if (attr.name.startsWith('aria-') || attr.name.startsWith('data-')) {\r\n        el.setAttribute(attr.name, attr.value)\r\n      }\r\n    }\r\n\r\n    el.innerHTML = this.#contentCache || this.innerHTML\r\n    this.#contentCache = el.innerHTML\r\n\r\n    this.replaceChildren(el)\r\n  }\r\n\r\n  /** @type {string|null} Cache innerHTML to preserve across re-renders */\r\n  #contentCache = null\r\n}\r\n\r\nregister('ytz-button', YtzButton)\r\n\r\nexport { YtzButton }\r\n","/**\r\n * ytz-disclosure - Expandable content Web Component.\r\n * Toggles content visibility with proper ARIA attributes.\r\n *\r\n * @module @grimoire/yetzirah-core/disclosure\r\n * @example\r\n * <ytz-disclosure>\r\n *   <button>Show Details</button>\r\n *   <div>Hidden content...</div>\r\n * </ytz-disclosure>\r\n *\r\n * @example\r\n * // Initially open\r\n * <ytz-disclosure open>\r\n *   <button>Hide Details</button>\r\n *   <div>Visible content...</div>\r\n * </ytz-disclosure>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\nlet disclosureId = 0\r\n\r\n/**\r\n * @class YtzDisclosure\r\n * @extends HTMLElement\r\n */\r\nclass YtzDisclosure extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-disclosure-${++disclosureId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA linkage\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the disclosure open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-disclosure', YtzDisclosure)\r\n\r\nexport { YtzDisclosure }\r\n","/**\r\n * Focus trap utility for modals/dialogs.\r\n * Keeps focus within a container element.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/focus-trap\r\n * @internal Not exported from package\r\n */\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * Creates a focus trap for a container element.\r\n *\r\n * @param {HTMLElement} container - Element to trap focus within\r\n * @returns {{ activate: () => void, deactivate: () => void }}\r\n */\r\nexport function createFocusTrap(container) {\r\n  /** @param {KeyboardEvent} e */\r\n  function handleKeydown(e) {\r\n    if (e.key !== 'Tab') return\r\n\r\n    const focusable = [...container.querySelectorAll(FOCUSABLE)]\r\n      .filter(el => !el.hidden && !el.closest('[hidden]')) // visible only\r\n\r\n    if (focusable.length === 0) return\r\n\r\n    const first = focusable[0]\r\n    const last = focusable[focusable.length - 1]\r\n\r\n    if (e.shiftKey && document.activeElement === first) {\r\n      e.preventDefault()\r\n      last.focus()\r\n    } else if (!e.shiftKey && document.activeElement === last) {\r\n      e.preventDefault()\r\n      first.focus()\r\n    }\r\n  }\r\n\r\n  return {\r\n    activate() {\r\n      container.addEventListener('keydown', handleKeydown)\r\n    },\r\n    deactivate() {\r\n      container.removeEventListener('keydown', handleKeydown)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-dialog - Modal dialog Web Component.\r\n * Provides focus trap, scroll lock, escape-to-close, and backdrop dismiss.\r\n *\r\n * @module @grimoire/yetzirah-core/dialog\r\n * @example\r\n * <ytz-dialog id=\"my-dialog\" class=\"pa4 bg-white br3 shadow-2\">\r\n *   <h2>Dialog Title</h2>\r\n *   <p>Content goes here.</p>\r\n *   <button onclick=\"this.closest('ytz-dialog').removeAttribute('open')\">Close</button>\r\n * </ytz-dialog>\r\n *\r\n * @example\r\n * // Open dialog\r\n * document.getElementById('my-dialog').setAttribute('open', '')\r\n *\r\n * @example\r\n * // Static dialog (no backdrop dismiss)\r\n * <ytz-dialog static>...</ytz-dialog>\r\n */\r\n\r\nimport { createFocusTrap } from './utils/focus-trap.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * @class YtzDialog\r\n * @extends HTMLElement\r\n */\r\nclass YtzDialog extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #previousFocus = null\r\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\r\n  #focusTrap = null\r\n  /** @type {string} */\r\n  #previousOverflow = ''\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'dialog')\r\n    this.setAttribute('aria-modal', 'true')\r\n    this.hidden = !this.hasAttribute('open')\r\n\r\n    // Set up backdrop click handler\r\n    this.addEventListener('click', this.#handleBackdropClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleBackdropClick)\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      newVal !== null ? this.#open() : this.#close()\r\n    }\r\n  }\r\n\r\n  #open() {\r\n    // Save current focus for restoration\r\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\r\n\r\n    // Show dialog\r\n    this.hidden = false\r\n\r\n    // Lock body scroll\r\n    this.#previousOverflow = document.body.style.overflow\r\n    document.body.style.overflow = 'hidden'\r\n\r\n    // Set up focus trap\r\n    this.#focusTrap = createFocusTrap(this)\r\n    this.#focusTrap.activate()\r\n\r\n    // Add escape key listener\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    // Focus first focusable element (or dialog itself)\r\n    requestAnimationFrame(() => {\r\n      const firstFocusable = this.querySelector(FOCUSABLE)\r\n      if (firstFocusable) {\r\n        /** @type {HTMLElement} */ (firstFocusable).focus()\r\n      } else {\r\n        this.setAttribute('tabindex', '-1')\r\n        this.focus()\r\n      }\r\n    })\r\n  }\r\n\r\n  #close() {\r\n    this.hidden = true\r\n    this.#cleanup()\r\n\r\n    // Dispatch close event\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #cleanup() {\r\n    // Restore body scroll\r\n    document.body.style.overflow = this.#previousOverflow\r\n\r\n    // Deactivate focus trap\r\n    this.#focusTrap?.deactivate()\r\n    this.#focusTrap = null\r\n\r\n    // Remove escape listener\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n\r\n    // Restore focus\r\n    this.#previousFocus?.focus()\r\n    this.#previousFocus = null\r\n  }\r\n\r\n  /** @param {KeyboardEvent} e */\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\r\n      e.preventDefault()\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @param {MouseEvent} e */\r\n  #handleBackdropClick = (e) => {\r\n    // Only close if clicking directly on dialog element (backdrop), not children\r\n    if (e.target === this && !this.hasAttribute('static')) {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close the dialog programmatically.\r\n   */\r\n  close() {\r\n    this.removeAttribute('open')\r\n  }\r\n\r\n  /**\r\n   * Show the dialog programmatically.\r\n   */\r\n  showModal() {\r\n    this.setAttribute('open', '')\r\n  }\r\n}\r\n\r\nregister('ytz-dialog', YtzDialog)\r\n\r\nexport { YtzDialog }\r\n","/**\r\n * Keyboard navigation utility for arrow key navigation.\r\n * @module @grimoire/yetzirah-core/utils/key-nav\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates keyboard navigation for a set of elements.\r\n * @param {() => HTMLElement[]} getItems - Function returning navigable elements\r\n * @param {Object} options\r\n * @param {'horizontal'|'vertical'} [options.orientation='horizontal']\r\n * @param {boolean} [options.wrap=true]\r\n * @param {boolean} [options.autoActivate=true]\r\n * @param {(item: HTMLElement) => void} [options.onActivate]\r\n * @returns {{ handleKeyDown: (e: KeyboardEvent) => void }}\r\n */\r\nexport function createKeyNav(getItems, options = {}) {\r\n  const { orientation = 'horizontal', wrap = true, autoActivate = true, onActivate } = options\r\n  const prevKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\r\n  const nextKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\r\n\r\n  return {\r\n    handleKeyDown(e) {\r\n      const items = getItems()\r\n      const currentIndex = items.indexOf(document.activeElement)\r\n      if (currentIndex === -1) return\r\n\r\n      let newIndex = currentIndex\r\n      if (e.key === prevKey) {\r\n        newIndex = currentIndex - 1\r\n        if (newIndex < 0) newIndex = wrap ? items.length - 1 : 0\r\n      } else if (e.key === nextKey) {\r\n        newIndex = currentIndex + 1\r\n        if (newIndex >= items.length) newIndex = wrap ? 0 : items.length - 1\r\n      } else if (e.key === 'Home') {\r\n        newIndex = 0\r\n      } else if (e.key === 'End') {\r\n        newIndex = items.length - 1\r\n      } else {\r\n        return\r\n      }\r\n\r\n      e.preventDefault()\r\n      items[newIndex].focus()\r\n      if (autoActivate && onActivate) onActivate(items[newIndex])\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-tabs - Tabbed interface Web Components.\r\n * @module @grimoire/yetzirah-core/tabs\r\n * @example\r\n * <ytz-tabs>\r\n *   <ytz-tab panel=\"tab1\">Account</ytz-tab>\r\n *   <ytz-tabpanel id=\"tab1\">Account content</ytz-tabpanel>\r\n * </ytz-tabs>\r\n */\r\n\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet tabId = 0\r\n\r\n/** @class YtzTabs */\r\nclass YtzTabs extends HTMLElement {\r\n  static observedAttributes = ['value', 'orientation']\r\n  #keyNav = null\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tablist')\r\n    this.#setupKeyNav()\r\n    if (!this.hasAttribute('value')) {\r\n      const firstTab = this.querySelector('ytz-tab')\r\n      if (firstTab?.getAttribute('panel')) {\r\n        this.setAttribute('value', firstTab.getAttribute('panel'))\r\n      }\r\n    }\r\n    this.#updateSelection()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'value' && oldVal !== newVal) {\r\n      this.#updateSelection()\r\n      if (oldVal !== null) {\r\n        this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: newVal } }))\r\n      }\r\n    }\r\n    if (name === 'orientation') this.#setupKeyNav()\r\n  }\r\n\r\n  #setupKeyNav() {\r\n    const orientation = this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.querySelectorAll('ytz-tab')],\r\n      {\r\n        orientation,\r\n        wrap: true,\r\n        autoActivate: true,\r\n        onActivate: (tab) => {\r\n          const panel = tab.getAttribute('panel')\r\n          if (panel) this.value = panel\r\n        }\r\n      }\r\n    )\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n  }\r\n\r\n  #handleKeyDown = (e) => this.#keyNav?.handleKeyDown(e)\r\n\r\n  #updateSelection() {\r\n    const value = this.getAttribute('value')\r\n    this.querySelectorAll('ytz-tab').forEach((tab) => {\r\n      const isSelected = tab.getAttribute('panel') === value\r\n      tab.setAttribute('aria-selected', String(isSelected))\r\n      tab.setAttribute('tabindex', isSelected ? '0' : '-1')\r\n    })\r\n    this.querySelectorAll('ytz-tabpanel').forEach((panel) => {\r\n      panel.hidden = panel.id !== value\r\n    })\r\n  }\r\n\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n\r\n  get orientation() {\r\n    return this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n  }\r\n  set orientation(v) { this.setAttribute('orientation', v) }\r\n}\r\n\r\n/** @class YtzTab */\r\nclass YtzTab extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tab')\r\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '-1')\r\n    if (!this.id) this.id = `ytz-tab-${++tabId}`\r\n    const panelId = this.getAttribute('panel')\r\n    if (panelId) this.setAttribute('aria-controls', panelId)\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() { this.removeEventListener('click', this.#handleClick) }\r\n\r\n  #handleClick = () => {\r\n    const tabs = this.closest('ytz-tabs')\r\n    const panel = this.getAttribute('panel')\r\n    if (tabs && panel) tabs.value = panel\r\n  }\r\n\r\n  get panel() { return this.getAttribute('panel') }\r\n  set panel(v) {\r\n    if (v) {\r\n      this.setAttribute('panel', v)\r\n      this.setAttribute('aria-controls', v)\r\n    } else {\r\n      this.removeAttribute('panel')\r\n      this.removeAttribute('aria-controls')\r\n    }\r\n  }\r\n}\r\n\r\n/** @class YtzTabPanel */\r\nclass YtzTabPanel extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tabpanel')\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (tabs) {\r\n      this.hidden = this.id !== tabs.getAttribute('value')\r\n    } else {\r\n      this.hidden = true\r\n    }\r\n    this.#linkToTab()\r\n  }\r\n\r\n  #linkToTab() {\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (!tabs || !this.id) return\r\n    const tab = tabs.querySelector(`ytz-tab[panel=\"${this.id}\"]`)\r\n    if (tab) {\r\n      if (!tab.id) tab.id = `ytz-tab-${++tabId}`\r\n      this.setAttribute('aria-labelledby', tab.id)\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-tabs', YtzTabs)\r\nregister('ytz-tab', YtzTab)\r\nregister('ytz-tabpanel', YtzTabPanel)\r\n\r\nexport { YtzTabs, YtzTab, YtzTabPanel }\r\n","/**\r\n * Position utility for tooltips, menus, popovers.\r\n * Places an element relative to an anchor with flip/shift logic.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/position\r\n * @internal Not exported from package\r\n *\r\n * Limitations (by design):\r\n * - Does not handle nested scroll containers\r\n * - Does not support virtual elements\r\n * - No middleware system\r\n */\r\n\r\n/**\r\n * Position a floating element relative to an anchor.\r\n *\r\n * @param {HTMLElement} anchor - Element to position relative to\r\n * @param {HTMLElement} floating - Element to position\r\n * @param {Object} [options] - Positioning options\r\n * @param {'top'|'bottom'|'left'|'right'} [options.placement='top'] - Preferred placement\r\n * @param {number} [options.offset=8] - Gap between anchor and floating element\r\n * @returns {{ x: number, y: number, placement: string }}\r\n */\r\nexport function position(anchor, floating, options = {}) {\r\n  const { placement = 'top', offset = 8 } = options\r\n\r\n  const anchorRect = anchor.getBoundingClientRect()\r\n  const floatingRect = floating.getBoundingClientRect()\r\n  const viewport = { width: window.innerWidth, height: window.innerHeight }\r\n\r\n  let x, y\r\n  let finalPlacement = placement\r\n\r\n  // Calculate position based on placement\r\n  switch (placement) {\r\n    case 'top':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.top - floatingRect.height - offset\r\n      break\r\n    case 'bottom':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.bottom + offset\r\n      break\r\n    case 'left':\r\n      x = anchorRect.left - floatingRect.width - offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n    case 'right':\r\n      x = anchorRect.right + offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n  }\r\n\r\n  // Flip if outside viewport\r\n  if (placement === 'top' && y < 0) {\r\n    y = anchorRect.bottom + offset\r\n    finalPlacement = 'bottom'\r\n  } else if (placement === 'bottom' && y + floatingRect.height > viewport.height) {\r\n    y = anchorRect.top - floatingRect.height - offset\r\n    finalPlacement = 'top'\r\n  } else if (placement === 'left' && x < 0) {\r\n    x = anchorRect.right + offset\r\n    finalPlacement = 'right'\r\n  } else if (placement === 'right' && x + floatingRect.width > viewport.width) {\r\n    x = anchorRect.left - floatingRect.width - offset\r\n    finalPlacement = 'left'\r\n  }\r\n\r\n  // Shift to stay in viewport\r\n  if (finalPlacement === 'top' || finalPlacement === 'bottom') {\r\n    x = Math.max(0, Math.min(x, viewport.width - floatingRect.width))\r\n  } else {\r\n    y = Math.max(0, Math.min(y, viewport.height - floatingRect.height))\r\n  }\r\n\r\n  return { x, y, placement: finalPlacement }\r\n}\r\n","/**\r\n * ytz-tooltip - Positioned hint text Web Component.\r\n * Shows on hover/focus with configurable delay and placement.\r\n *\r\n * @module @grimoire/yetzirah-core/tooltip\r\n * @example\r\n * <ytz-tooltip>\r\n *   <button>Hover me</button>\r\n *   <span slot=\"content\">Tooltip text</span>\r\n * </ytz-tooltip>\r\n *\r\n * @example\r\n * // With placement and delay\r\n * <ytz-tooltip placement=\"bottom\" delay=\"200\">\r\n *   <button>Hover me</button>\r\n *   <span slot=\"content\">Bottom tooltip</span>\r\n * </ytz-tooltip>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet tooltipId = 0\r\n\r\n/**\r\n * @class YtzTooltip\r\n * @extends HTMLElement\r\n */\r\nclass YtzTooltip extends HTMLElement {\r\n  static observedAttributes = ['placement', 'delay', 'offset']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n  /** @type {number|null} */\r\n  #showTimeout = null\r\n  /** @type {number|null} */\r\n  #hideTimeout = null\r\n  /** @type {boolean} */\r\n  #isVisible = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n    clearTimeout(this.#showTimeout)\r\n    clearTimeout(this.#hideTimeout)\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.#isVisible) this.#updatePosition()\r\n  }\r\n\r\n  /** @returns {'top'|'bottom'|'left'|'right'} */\r\n  get placement() {\r\n    return this.getAttribute('placement') || 'top'\r\n  }\r\n\r\n  /** @param {'top'|'bottom'|'left'|'right'} value */\r\n  set placement(value) {\r\n    if (value) {\r\n      this.setAttribute('placement', value)\r\n    } else {\r\n      this.removeAttribute('placement')\r\n    }\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get delay() {\r\n    return parseInt(this.getAttribute('delay') || '0', 10)\r\n  }\r\n\r\n  /** @param {number} value */\r\n  set delay(value) {\r\n    if (value != null) {\r\n      this.setAttribute('delay', String(value))\r\n    } else {\r\n      this.removeAttribute('delay')\r\n    }\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get offset() {\r\n    return parseInt(this.getAttribute('offset') || '8', 10)\r\n  }\r\n\r\n  /** @param {number} value */\r\n  set offset(value) {\r\n    if (value != null) {\r\n      this.setAttribute('offset', String(value))\r\n    } else {\r\n      this.removeAttribute('offset')\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\r\n    this.#trigger = this.firstElementChild\r\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\r\n\r\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\r\n\r\n    // Generate unique ID for content\r\n    this.#contentId = this.#content.id || `ytz-tooltip-${++tooltipId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA\r\n    this.#trigger.setAttribute('aria-describedby', this.#contentId)\r\n    this.#content.setAttribute('role', 'tooltip')\r\n    this.#content.hidden = true\r\n\r\n    // Hover listeners\r\n    this.#trigger.addEventListener('mouseenter', this.#handleMouseEnter)\r\n    this.#trigger.addEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#content.addEventListener('mouseenter', this.#handleContentMouseEnter)\r\n    this.#content.addEventListener('mouseleave', this.#handleMouseLeave)\r\n\r\n    // Focus listeners\r\n    this.#trigger.addEventListener('focusin', this.#handleFocusIn)\r\n    this.#trigger.addEventListener('focusout', this.#handleFocusOut)\r\n\r\n    // Touch support\r\n    this.#trigger.addEventListener('touchstart', this.#handleTouchStart, { passive: true })\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('mouseenter', this.#handleMouseEnter)\r\n    this.#trigger?.removeEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#content?.removeEventListener('mouseenter', this.#handleContentMouseEnter)\r\n    this.#content?.removeEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#trigger?.removeEventListener('focusin', this.#handleFocusIn)\r\n    this.#trigger?.removeEventListener('focusout', this.#handleFocusOut)\r\n    this.#trigger?.removeEventListener('touchstart', this.#handleTouchStart)\r\n  }\r\n\r\n  #handleMouseEnter = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#showTimeout = setTimeout(() => this.#show(), this.delay)\r\n  }\r\n\r\n  #handleMouseLeave = () => {\r\n    clearTimeout(this.#showTimeout)\r\n    this.#hideTimeout = setTimeout(() => this.#hide(), 100)\r\n  }\r\n\r\n  #handleContentMouseEnter = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n  }\r\n\r\n  #handleFocusIn = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#show() // No delay for focus (accessibility)\r\n  }\r\n\r\n  #handleFocusOut = () => {\r\n    this.#hide()\r\n  }\r\n\r\n  #handleTouchStart = () => {\r\n    if (this.#isVisible) {\r\n      this.#hide()\r\n    } else {\r\n      this.#show()\r\n    }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#content || this.#isVisible) return\r\n\r\n    this.#content.hidden = false\r\n    this.#isVisible = true\r\n    this.#updatePosition()\r\n\r\n    // Listen for scroll/resize to reposition\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#content || !this.#isVisible) return\r\n\r\n    this.#content.hidden = true\r\n    this.#isVisible = false\r\n\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\r\n      placement: this.placement,\r\n      offset: this.offset\r\n    })\r\n\r\n    // Position tooltip fixed relative to viewport\r\n    this.#content.style.position = 'fixed'\r\n    this.#content.style.left = `${x}px`\r\n    this.#content.style.top = `${y}px`\r\n\r\n    // Set data attribute for CSS arrow styling\r\n    this.#content.dataset.placement = finalPlacement\r\n  }\r\n\r\n  // Public API\r\n\r\n  /** Show the tooltip programmatically */\r\n  show() {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#show()\r\n  }\r\n\r\n  /** Hide the tooltip programmatically */\r\n  hide() {\r\n    clearTimeout(this.#showTimeout)\r\n    this.#hide()\r\n  }\r\n}\r\n\r\nregister('ytz-tooltip', YtzTooltip)\r\n\r\nexport { YtzTooltip }\r\n","/**\r\n * Click outside utility for dismissing popups.\r\n * @module @grimoire/yetzirah-core/utils/click-outside\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates a click outside listener.\r\n * @param {HTMLElement} element - Element to detect clicks outside of\r\n * @param {Function} callback - Called when click outside occurs\r\n * @param {Object} [options]\r\n * @param {HTMLElement} [options.ignore] - Additional element to ignore clicks on (e.g., trigger)\r\n * @returns {{ destroy: () => void }}\r\n */\r\nexport function clickOutside(element, callback, options = {}) {\r\n  const { ignore } = options\r\n\r\n  const handleClick = (e) => {\r\n    if (element.contains(e.target)) return\r\n    if (ignore && ignore.contains(e.target)) return\r\n    callback(e)\r\n  }\r\n\r\n  // Use capture to catch clicks before they're stopped\r\n  document.addEventListener('click', handleClick, true)\r\n\r\n  return {\r\n    destroy() {\r\n      document.removeEventListener('click', handleClick, true)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-menu - Dropdown menu with keyboard navigation.\r\n * Opens on trigger click, positions relative to trigger, closes on click outside/escape.\r\n *\r\n * @module @grimoire/yetzirah-core/menu\r\n * @example\r\n * <ytz-menu>\r\n *   <button slot=\"trigger\">Open Menu</button>\r\n *   <ytz-menuitem>Edit</ytz-menuitem>\r\n *   <ytz-menuitem>Delete</ytz-menuitem>\r\n * </ytz-menu>\r\n *\r\n * @example\r\n * <ytz-menu placement=\"bottom-start\">\r\n *   <button slot=\"trigger\">Actions</button>\r\n *   <ytz-menuitem value=\"edit\">Edit</ytz-menuitem>\r\n *   <ytz-menuitem disabled>Archive</ytz-menuitem>\r\n * </ytz-menu>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { clickOutside } from './utils/click-outside.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet menuId = 0\r\n\r\n/**\r\n * @class YtzMenu\r\n * @extends HTMLElement\r\n */\r\nclass YtzMenu extends HTMLElement {\r\n  static observedAttributes = ['open', 'placement']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #popup = null\r\n  /** @type {string|null} */\r\n  #menuId = null\r\n  /** @type {ReturnType<typeof createKeyNav>|null} */\r\n  #keyNav = null\r\n  /** @type {ReturnType<typeof clickOutside>|null} */\r\n  #clickOutsideHandler = null\r\n  /** @type {number} */\r\n  #lastCloseTime = 0\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#showMenu() : this.#hideMenu()\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n\r\n  /** @returns {string} */\r\n  get placement() { return this.getAttribute('placement') || 'bottom-start' }\r\n  set placement(v) { v ? this.setAttribute('placement', v) : this.removeAttribute('placement') }\r\n\r\n  #setup() {\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    if (!this.#trigger) return\r\n\r\n    this.#menuId = `ytz-menu-${++menuId}`\r\n\r\n    // Create popup wrapper for menu items\r\n    this.#popup = document.createElement('div')\r\n    this.#popup.setAttribute('role', 'menu')\r\n    this.#popup.id = this.#menuId\r\n    this.#popup.hidden = true\r\n\r\n    // Move all menuitem children into popup\r\n    const items = [...this.querySelectorAll('ytz-menuitem')]\r\n    items.forEach(item => this.#popup.appendChild(item))\r\n    this.appendChild(this.#popup)\r\n\r\n    // ARIA on trigger\r\n    this.#trigger.setAttribute('aria-haspopup', 'menu')\r\n    this.#trigger.setAttribute('aria-controls', this.#menuId)\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n\r\n    // Keyboard navigation\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#popup.querySelectorAll('ytz-menuitem:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.#clickOutsideHandler?.destroy()\r\n  }\r\n\r\n  #handleTriggerClick = () => { this.open = !this.open }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (!this.open) return\r\n\r\n    if (e.key === 'Escape') {\r\n      e.preventDefault()\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n      return\r\n    }\r\n\r\n    this.#keyNav?.handleKeyDown(e)\r\n\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#popup?.querySelector('ytz-menuitem:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) {\r\n        e.preventDefault()\r\n        focused.click()\r\n      }\r\n    }\r\n  }\r\n\r\n  #showMenu() {\r\n    if (!this.#trigger || !this.#popup) return\r\n    // Prevent re-opening if we just closed (e.g., click-outside + toggle in same event)\r\n    if (performance.now() - this.#lastCloseTime < 10) {\r\n      // Remove attribute to keep state consistent since we're blocking the open\r\n      this.removeAttribute('open')\r\n      return\r\n    }\r\n\r\n    // Pre-position as fixed but invisible to get correct layout\r\n    this.#popup.style.position = 'fixed'\r\n    this.#popup.style.visibility = 'hidden'\r\n    this.#popup.hidden = false\r\n\r\n    // Force synchronous reflow so popup has layout dimensions\r\n    void this.#popup.offsetHeight\r\n\r\n    // Calculate and apply position\r\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\r\n    const { x, y } = position(this.#trigger, this.#popup, {\r\n      placement: basePlacement,\r\n      offset: 4\r\n    })\r\n    this.#popup.style.left = `${x}px`\r\n    this.#popup.style.top = `${y}px`\r\n\r\n    // Now make visible\r\n    this.#popup.style.visibility = ''\r\n    this.#trigger.setAttribute('aria-expanded', 'true')\r\n\r\n    const firstItem = this.#popup.querySelector('ytz-menuitem:not([disabled])')\r\n    firstItem?.focus()\r\n\r\n    // Defer click-outside setup to next event loop tick to avoid triggering on same click\r\n    setTimeout(() => {\r\n      // Only set up if still open (user might have closed it already)\r\n      if (!this.open) return\r\n      this.#clickOutsideHandler = clickOutside(this.#popup, () => {\r\n        this.open = false\r\n      }, { ignore: this.#trigger })\r\n    }, 0)\r\n\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hideMenu() {\r\n    if (!this.#trigger || !this.#popup) return\r\n\r\n    // Record close time to prevent re-opening in the same event\r\n    this.#lastCloseTime = performance.now()\r\n\r\n    this.#popup.hidden = true\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n\r\n    this.#clickOutsideHandler?.destroy()\r\n    this.#clickOutsideHandler = null\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#popup) return\r\n\r\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\r\n    const { x, y } = position(this.#trigger, this.#popup, {\r\n      placement: basePlacement,\r\n      offset: 4\r\n    })\r\n\r\n    this.#popup.style.position = 'fixed'\r\n    this.#popup.style.left = `${x}px`\r\n    this.#popup.style.top = `${y}px`\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n}\r\n\r\n/**\r\n * ytz-menuitem - Individual menu item.\r\n * @attr disabled - When present, item is not selectable\r\n * @attr value - Optional value for select event\r\n */\r\nclass YtzMenuItem extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'menuitem')\r\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n    if (this.hasAttribute('disabled')) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n    }\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = (e) => {\r\n    if (this.hasAttribute('disabled')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      return\r\n    }\r\n\r\n    const menu = this.closest('ytz-menu')\r\n    if (menu) {\r\n      this.dispatchEvent(new CustomEvent('select', {\r\n        bubbles: true,\r\n        detail: { value: this.getAttribute('value') || this.textContent?.trim() }\r\n      }))\r\n      menu.open = false\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) {\r\n    if (v) {\r\n      this.setAttribute('disabled', '')\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n  }\r\n\r\n  /** @returns {string|null} */\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n}\r\n\r\nregister('ytz-menu', YtzMenu)\r\nregister('ytz-menuitem', YtzMenuItem)\r\n\r\nexport { YtzMenu, YtzMenuItem }\r\n","/**\r\n * ytz-autocomplete - Text input with filterable dropdown selection.\r\n * Supports single and multi-select modes with async loading.\r\n *\r\n * @module @grimoire/yetzirah-core/autocomplete\r\n * @example\r\n * <ytz-autocomplete>\r\n *   <input slot=\"input\" placeholder=\"Search...\">\r\n *   <ytz-option value=\"apple\">Apple</ytz-option>\r\n *   <ytz-option value=\"banana\">Banana</ytz-option>\r\n * </ytz-autocomplete>\r\n *\r\n * @example\r\n * // Multi-select mode\r\n * <ytz-autocomplete multiple>\r\n *   <input slot=\"input\" placeholder=\"Select...\">\r\n *   <ytz-option value=\"a\">Option A</ytz-option>\r\n *   <ytz-option value=\"b\">Option B</ytz-option>\r\n * </ytz-autocomplete>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { clickOutside } from './utils/click-outside.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet autocompleteId = 0\r\n\r\n/**\r\n * @class YtzAutocomplete\r\n * @extends HTMLElement\r\n */\r\nclass YtzAutocomplete extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'loading']\r\n\r\n  /** @type {HTMLInputElement|null} */\r\n  #input = null\r\n  /** @type {HTMLElement|null} */\r\n  #listbox = null\r\n  /** @type {string|null} */\r\n  #listboxId = null\r\n  /** @type {ReturnType<typeof createKeyNav>|null} */\r\n  #keyNav = null\r\n  /** @type {ReturnType<typeof clickOutside>|null} */\r\n  #clickOutsideHandler = null\r\n  /** @type {Set<string>} */\r\n  #selected = new Set()\r\n  /** @type {boolean} - Flag to prevent focus from re-opening after selection */\r\n  #justClosed = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#showListbox() : this.#hideListbox()\r\n    }\r\n    if (name === 'loading') {\r\n      this.#updateLoadingState()\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n\r\n  /** @returns {boolean} */\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n\r\n  /** @returns {boolean} */\r\n  get loading() { return this.hasAttribute('loading') }\r\n  set loading(v) { v ? this.setAttribute('loading', '') : this.removeAttribute('loading') }\r\n\r\n  /** @returns {boolean} */\r\n  get filter() { return this.getAttribute('filter') !== 'false' }\r\n  set filter(v) { this.setAttribute('filter', (v && v !== 'false') ? 'true' : 'false') }\r\n\r\n  /** @returns {string|string[]} */\r\n  get value() {\r\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\r\n  }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) {\r\n      v.forEach(val => this.#selected.add(val))\r\n    } else if (v) {\r\n      this.#selected.add(v)\r\n    }\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  /** @returns {string} */\r\n  get inputValue() { return this.#input?.value || '' }\r\n  set inputValue(v) { if (this.#input) this.#input.value = v }\r\n\r\n  #setup() {\r\n    this.#input = this.querySelector('[slot=\"input\"]') || this.querySelector('input')\r\n    if (!this.#input) return\r\n\r\n    this.#listboxId = `ytz-autocomplete-${++autocompleteId}`\r\n\r\n    // Create listbox wrapper\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.id = this.#listboxId\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) {\r\n      this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    }\r\n\r\n    // Move option children into listbox\r\n    const options = [...this.querySelectorAll('ytz-option')]\r\n    options.forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n\r\n    // ARIA on input\r\n    this.#input.setAttribute('role', 'combobox')\r\n    this.#input.setAttribute('aria-autocomplete', 'list')\r\n    this.#input.setAttribute('aria-controls', this.#listboxId)\r\n    this.#input.setAttribute('aria-expanded', 'false')\r\n    this.#input.setAttribute('aria-haspopup', 'listbox')\r\n\r\n    // Keyboard navigation\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([hidden]):not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.#input.addEventListener('input', this.#handleInput)\r\n    this.#input.addEventListener('focus', this.#handleInputFocus)\r\n    this.#input.addEventListener('keydown', this.#handleInputKeyDown)\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n\r\n    // Read initial selected state from HTML\r\n    this.#listbox.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n\r\n    // Initialize loading slot visibility\r\n    this.#updateLoadingState()\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#input?.removeEventListener('input', this.#handleInput)\r\n    this.#input?.removeEventListener('focus', this.#handleInputFocus)\r\n    this.#input?.removeEventListener('keydown', this.#handleInputKeyDown)\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    this.#clickOutsideHandler?.destroy()\r\n  }\r\n\r\n  #handleInput = () => {\r\n    if (!this.open) this.open = true\r\n    if (this.filter) this.#filterOptions()\r\n    this.dispatchEvent(new CustomEvent('input-change', {\r\n      bubbles: true,\r\n      detail: { value: this.#input.value }\r\n    }))\r\n  }\r\n\r\n  #handleInputFocus = () => {\r\n    // Don't re-open if we just closed from a selection\r\n    if (this.#justClosed) {\r\n      this.#justClosed = false\r\n      return\r\n    }\r\n    const hasOptions = this.#listbox?.querySelector('ytz-option:not([hidden])')\r\n    if (hasOptions && !this.loading) this.open = true\r\n  }\r\n\r\n  #handleInputKeyDown = (e) => {\r\n    if (e.key === 'ArrowDown') {\r\n      e.preventDefault()\r\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\r\n      if (!this.open) this.open = true\r\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\r\n      firstOption?.focus()\r\n    } else if (e.key === 'ArrowUp') {\r\n      e.preventDefault()\r\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\r\n      if (!this.open) this.open = true\r\n      const options = this.#listbox?.querySelectorAll('ytz-option:not([hidden]):not([disabled])')\r\n      options?.[options.length - 1]?.focus()\r\n    } else if (e.key === 'Escape' && this.open) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      this.open = false\r\n    } else if (e.key === 'Enter' && this.open) {\r\n      // Select first visible option on Enter from input\r\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\r\n      if (firstOption) {\r\n        e.preventDefault()\r\n        this.#selectOption(firstOption)\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (!this.open) return\r\n\r\n    if (e.key === 'Escape') {\r\n      e.preventDefault()\r\n      this.open = false\r\n      this.#input?.focus()\r\n      return\r\n    }\r\n\r\n    // Handle navigation when option is focused\r\n    if (document.activeElement?.tagName === 'YTZ-OPTION') {\r\n      this.#keyNav?.handleKeyDown(e)\r\n\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        const focused = this.#listbox?.querySelector('ytz-option:focus')\r\n        if (focused && !focused.hasAttribute('disabled')) {\r\n          e.preventDefault()\r\n          this.#selectOption(focused)\r\n        }\r\n      }\r\n\r\n      if (e.key === 'Tab') {\r\n        e.preventDefault()\r\n        this.#input?.focus()\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) {\r\n      this.#selectOption(option)\r\n    }\r\n  }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n\r\n    if (this.multiple) {\r\n      if (this.#selected.has(value)) {\r\n        this.#selected.delete(value)\r\n      } else {\r\n        this.#selected.add(value)\r\n      }\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.#input.value = option.textContent?.trim() || value\r\n      this.#justClosed = true // Prevent focus from re-opening\r\n      this.open = false\r\n      this.#input?.focus()\r\n    }\r\n\r\n    this.#updateSelectedState()\r\n\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { value: this.value, option }\r\n    }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\r\n    options.forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(value)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #filterOptions() {\r\n    const query = this.#input?.value.toLowerCase() || ''\r\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\r\n\r\n    options.forEach(opt => {\r\n      const text = opt.textContent?.toLowerCase() || ''\r\n      opt.hidden = !text.includes(query)\r\n    })\r\n  }\r\n\r\n  #showListbox() {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    this.#listbox.hidden = false\r\n    this.#input.setAttribute('aria-expanded', 'true')\r\n    this.#updatePosition()\r\n\r\n    this.#clickOutsideHandler = clickOutside(this, () => {\r\n      this.open = false\r\n    })\r\n\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hideListbox() {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    this.#listbox.hidden = true\r\n    this.#input.setAttribute('aria-expanded', 'false')\r\n\r\n    this.#clickOutsideHandler?.destroy()\r\n    this.#clickOutsideHandler = null\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    const { x, y } = position(this.#input, this.#listbox, {\r\n      placement: 'bottom',\r\n      offset: 4\r\n    })\r\n\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#input.offsetWidth}px`\r\n  }\r\n\r\n  #updateLoadingState() {\r\n    const loadingSlot = this.querySelector('[slot=\"loading\"]')\r\n    if (loadingSlot) {\r\n      loadingSlot.hidden = !this.loading\r\n    }\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (this.#input) this.#input.value = ''\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n\r\n  /**\r\n   * Add options programmatically.\r\n   * @param {Array<{value: string, label: string, disabled?: boolean}>} options\r\n   */\r\n  setOptions(options) {\r\n    if (!this.#listbox) return\r\n    this.#listbox.innerHTML = ''\r\n    options.forEach(({ value, label, disabled }) => {\r\n      const opt = document.createElement('ytz-option')\r\n      opt.setAttribute('value', value)\r\n      opt.textContent = label\r\n      if (disabled) opt.setAttribute('disabled', '')\r\n      this.#listbox.appendChild(opt)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n}\r\n\r\n/**\r\n * ytz-option - Individual option in autocomplete.\r\n * @attr value - Option value\r\n * @attr disabled - When present, option is not selectable\r\n * @attr selected - When present, option is selected\r\n */\r\nclass YtzOption extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'option')\r\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n    if (this.hasAttribute('disabled')) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n    }\r\n    this.setAttribute('aria-selected', this.hasAttribute('selected') ? 'true' : 'false')\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = (e) => {\r\n    if (this.hasAttribute('disabled')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      return\r\n    }\r\n    this.dispatchEvent(new CustomEvent('option-click', {\r\n      bubbles: true,\r\n      detail: { option: this }\r\n    }))\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) {\r\n    if (v) {\r\n      this.setAttribute('disabled', '')\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get selected() { return this.hasAttribute('selected') }\r\n  set selected(v) {\r\n    v ? this.setAttribute('selected', '') : this.removeAttribute('selected')\r\n    this.setAttribute('aria-selected', String(v))\r\n  }\r\n\r\n  /** @returns {string|null} */\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n}\r\n\r\nregister('ytz-autocomplete', YtzAutocomplete)\r\nregister('ytz-option', YtzOption)\r\n\r\nexport { YtzAutocomplete, YtzOption }\r\n","/**\r\n * ytz-listbox - Keyboard-navigable list selection with single/multi-select modes.\r\n * @module @grimoire/yetzirah-core/listbox\r\n */\r\n\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet listboxId = 0\r\n\r\nclass YtzListbox extends HTMLElement {\r\n  static observedAttributes = ['multiple', 'disabled']\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n\r\n  connectedCallback() { this.#setup() }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'multiple') this.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n\r\n  get value() {\r\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\r\n  }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-listbox-${++listboxId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.setAttribute('role', 'listbox')\r\n    if (this.multiple) this.setAttribute('aria-multiselectable', 'true')\r\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '0')\r\n\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n    this.addEventListener('focus', this.#handleFocus)\r\n\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  #cleanup() {\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    this.removeEventListener('focus', this.#handleFocus)\r\n  }\r\n\r\n  #handleFocus = () => {\r\n    const selected = this.querySelector('ytz-option[selected]:not([disabled])')\r\n    const first = this.querySelector('ytz-option:not([disabled])')\r\n    ;(selected || first)?.focus()\r\n  }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) {\r\n        e.preventDefault()\r\n        this.#selectOption(focused)\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n    }\r\n    this.#updateSelectedState()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(value)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n\r\n  selectAll() {\r\n    if (!this.multiple) return\r\n    this.querySelectorAll('ytz-option:not([disabled])').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n}\r\n\r\nregister('ytz-listbox', YtzListbox)\r\n\r\nexport { YtzListbox }\r\n","/**\r\n * ytz-select - Dropdown select with trigger button and listbox.\r\n * @module @grimoire/yetzirah-core/select\r\n */\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet selectId = 0\r\n\r\nclass YtzSelect extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'disabled', 'placeholder']\r\n  #trigger = null\r\n  #listbox = null\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n  #customTrigger = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    if (this.hasAttribute('open')) this.#show()\r\n    if (this.disabled) this.#updateDisabledState()\r\n  }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') newVal !== null ? this.#show() : this.#hide()\r\n    if (name === 'multiple') this.#listbox?.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n  get placeholder() { return this.getAttribute('placeholder') || 'Select...' }\r\n  set placeholder(v) { this.setAttribute('placeholder', v) }\r\n\r\n  get value() { return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '') }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n    this.#updateTriggerText()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-select-${++selectId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    this.#customTrigger = !!this.#trigger\r\n    if (!this.#trigger) {\r\n      this.#trigger = document.createElement('button')\r\n      this.#trigger.setAttribute('slot', 'trigger')\r\n      this.#trigger.className = this.getAttribute('trigger-class') || ''\r\n      this.prepend(this.#trigger)\r\n    }\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.id = `${this.#id}-listbox`\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    this.querySelectorAll('ytz-option').forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n    this.#trigger.setAttribute('aria-haspopup', 'listbox')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#listbox.id)\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (val) this.#selected.add(val)\r\n    })\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger.addEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox.addEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger?.removeEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox?.removeEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => { if (this.disabled) return; e.stopPropagation(); this.open = !this.open }\r\n  #handleTriggerKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    if (['ArrowDown', 'ArrowUp', 'Enter', ' '].includes(e.key)) { e.preventDefault(); this.open = true }\r\n  }\r\n\r\n  #handleListboxKeyDown = (e) => {\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#listbox.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) { e.preventDefault(); this.#selectOption(focused) }\r\n    }\r\n    if (e.key === 'Tab') { e.preventDefault(); this.open = false; this.#trigger?.focus() }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #handleOutsideClick = (e) => { if (!this.contains(e.target)) this.open = false }\r\n  #handleEscape = (e) => { if (e.key === 'Escape' && this.open) { e.preventDefault(); this.open = false; this.#trigger?.focus() } }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n    }\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(val)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateTriggerText() {\r\n    if (!this.#trigger || this.#customTrigger) return\r\n    const selected = this.selectedOptions\r\n    if (selected.length === 0) this.#trigger.textContent = this.placeholder\r\n    else if (this.multiple) this.#trigger.textContent = selected.map(o => o.textContent?.trim()).join(', ')\r\n    else this.#trigger.textContent = selected[0]?.textContent?.trim() || this.placeholder\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) { this.#trigger?.setAttribute('disabled', ''); this.#trigger?.setAttribute('aria-disabled', 'true') }\r\n    else { this.#trigger?.removeAttribute('disabled'); this.#trigger?.removeAttribute('aria-disabled') }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#listbox || this.disabled) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n    this.#listbox.hidden = false\r\n    this.#updatePosition()\r\n    setTimeout(() => document.addEventListener('click', this.#handleOutsideClick), 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n    requestAnimationFrame(() => {\r\n      const selected = this.#listbox.querySelector('ytz-option[selected]:not([disabled])')\r\n      const first = this.#listbox.querySelector('ytz-option:not([disabled])')\r\n      ;(selected || first)?.focus()\r\n    })\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#listbox) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n    this.#listbox.hidden = true\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#listbox) return\r\n    const { x, y, placement } = position(this.#trigger, this.#listbox, { placement: 'bottom', offset: 4 })\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#trigger.offsetWidth}px`\r\n    this.#listbox.dataset.placement = placement\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n}\r\n\r\nregister('ytz-select', YtzSelect)\r\nexport { YtzSelect }\r\n","/**\r\n * ytz-accordion - Coordinated disclosure container.\r\n * Manages multiple accordion items with optional exclusive mode.\r\n *\r\n * @module @grimoire/yetzirah-core/accordion\r\n * @example\r\n * <ytz-accordion>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 1</button>\r\n *     <div>Content 1</div>\r\n *   </ytz-accordion-item>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 2</button>\r\n *     <div>Content 2</div>\r\n *   </ytz-accordion-item>\r\n * </ytz-accordion>\r\n *\r\n * @example\r\n * // Exclusive mode - only one item open at a time\r\n * <ytz-accordion exclusive>\r\n *   <ytz-accordion-item open>...</ytz-accordion-item>\r\n *   <ytz-accordion-item>...</ytz-accordion-item>\r\n * </ytz-accordion>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\nlet accordionItemId = 0\r\n\r\n/**\r\n * @class YtzAccordion\r\n * @extends HTMLElement\r\n */\r\nclass YtzAccordion extends HTMLElement {\r\n  connectedCallback() {\r\n    this.addEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  /**\r\n   * Whether exclusive mode is enabled (only one item open at a time).\r\n   * @type {boolean}\r\n   */\r\n  get exclusive() {\r\n    return this.hasAttribute('exclusive')\r\n  }\r\n\r\n  set exclusive(value) {\r\n    if (value) {\r\n      this.setAttribute('exclusive', '')\r\n    } else {\r\n      this.removeAttribute('exclusive')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all accordion items.\r\n   * @returns {YtzAccordionItem[]}\r\n   */\r\n  get items() {\r\n    return Array.from(this.querySelectorAll(':scope > ytz-accordion-item'))\r\n  }\r\n\r\n  /**\r\n   * Handle toggle event from accordion item.\r\n   * In exclusive mode, close other items when one opens.\r\n   * @param {CustomEvent} e\r\n   */\r\n  #handleItemToggle = (e) => {\r\n    if (!this.exclusive || !e.detail.open) return\r\n\r\n    const openedItem = e.target\r\n    this.items.forEach(item => {\r\n      if (item !== openedItem && item.open) {\r\n        item.open = false\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * ytz-accordion-item - Individual accordion panel.\r\n * Functions like ytz-disclosure but coordinates with parent accordion.\r\n *\r\n * @attr open - When present, content is visible\r\n *\r\n * @example\r\n * <ytz-accordion-item>\r\n *   <button>Toggle Section</button>\r\n *   <div>\r\n *     <div>Content goes here...</div>\r\n *   </div>\r\n * </ytz-accordion-item>\r\n */\r\nclass YtzAccordionItem extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-accordion-content-${++accordionItemId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Generate ID for trigger if needed (for aria-labelledby on content)\r\n    this.#trigger.id = this.#trigger.id || `ytz-accordion-trigger-${accordionItemId}`\r\n\r\n    // Set up ARIA attributes\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n    this.#content.setAttribute('aria-labelledby', this.#trigger.id)\r\n    this.#content.setAttribute('role', 'region')\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the accordion item open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-accordion', YtzAccordion)\r\nregister('ytz-accordion-item', YtzAccordionItem)\r\n\r\nexport { YtzAccordion, YtzAccordionItem }\r\n","/**\r\n * ytz-drawer - Slide-in panel Web Component.\r\n * Inherits modal behavior: focus trap, scroll lock, escape-to-close, backdrop dismiss.\r\n *\r\n * @module @grimoire/yetzirah-core/drawer\r\n * @example\r\n * <ytz-drawer id=\"menu\" anchor=\"left\" class=\"w5 h-100 bg-white shadow-2\">\r\n *   <nav class=\"pa4\">\r\n *     <a href=\"/home\">Home</a>\r\n *   </nav>\r\n *   <button onclick=\"this.closest('ytz-drawer').close()\">Close</button>\r\n * </ytz-drawer>\r\n *\r\n * @example\r\n * // Open drawer\r\n * document.getElementById('menu').open = true\r\n *\r\n * @example\r\n * // Different anchors\r\n * <ytz-drawer anchor=\"right\">...</ytz-drawer>\r\n * <ytz-drawer anchor=\"top\">...</ytz-drawer>\r\n * <ytz-drawer anchor=\"bottom\">...</ytz-drawer>\r\n */\r\n\r\nimport { createFocusTrap } from './utils/focus-trap.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/** @type {string[]} Valid anchor positions */\r\nconst VALID_ANCHORS = ['left', 'right', 'top', 'bottom']\r\n\r\n/**\r\n * @class YtzDrawer\r\n * @extends HTMLElement\r\n */\r\nclass YtzDrawer extends HTMLElement {\r\n  static observedAttributes = ['open', 'anchor']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #previousFocus = null\r\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\r\n  #focusTrap = null\r\n  /** @type {string} */\r\n  #previousOverflow = ''\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'dialog')\r\n    this.setAttribute('aria-modal', 'true')\r\n    this.hidden = !this.hasAttribute('open')\r\n\r\n    if (!this.hasAttribute('anchor')) {\r\n      this.setAttribute('anchor', 'left')\r\n    }\r\n\r\n    this.addEventListener('click', this.#handleBackdropClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleBackdropClick)\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      newVal !== null ? this.#open() : this.#close()\r\n    }\r\n    if (name === 'anchor' && newVal && !VALID_ANCHORS.includes(newVal)) {\r\n      this.setAttribute('anchor', 'left')\r\n    }\r\n  }\r\n\r\n  #open() {\r\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\r\n    this.hidden = false\r\n    this.#previousOverflow = document.body.style.overflow\r\n    document.body.style.overflow = 'hidden'\r\n    this.#focusTrap = createFocusTrap(this)\r\n    this.#focusTrap.activate()\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    requestAnimationFrame(() => {\r\n      const firstFocusable = this.querySelector(FOCUSABLE)\r\n      if (firstFocusable) {\r\n        /** @type {HTMLElement} */ (firstFocusable).focus()\r\n      } else {\r\n        this.setAttribute('tabindex', '-1')\r\n        this.focus()\r\n      }\r\n    })\r\n  }\r\n\r\n  #close() {\r\n    this.hidden = true\r\n    this.#cleanup()\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #cleanup() {\r\n    document.body.style.overflow = this.#previousOverflow\r\n    this.#focusTrap?.deactivate()\r\n    this.#focusTrap = null\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.#previousFocus?.focus()\r\n    this.#previousFocus = null\r\n  }\r\n\r\n  /** @param {KeyboardEvent} e */\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\r\n      e.preventDefault()\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @param {MouseEvent} e */\r\n  #handleBackdropClick = (e) => {\r\n    if (e.target === this && !this.hasAttribute('static')) {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @type {boolean} */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    value ? this.setAttribute('open', '') : this.removeAttribute('open')\r\n  }\r\n\r\n  /** @type {'left'|'right'|'top'|'bottom'} */\r\n  get anchor() {\r\n    return /** @type {'left'|'right'|'top'|'bottom'} */ (this.getAttribute('anchor') || 'left')\r\n  }\r\n\r\n  set anchor(value) {\r\n    if (VALID_ANCHORS.includes(value)) this.setAttribute('anchor', value)\r\n  }\r\n\r\n  /** Close the drawer programmatically. */\r\n  close() {\r\n    this.removeAttribute('open')\r\n  }\r\n\r\n  /** Show the drawer programmatically. */\r\n  show() {\r\n    this.setAttribute('open', '')\r\n  }\r\n}\r\n\r\nregister('ytz-drawer', YtzDrawer)\r\n\r\nexport { YtzDrawer }\r\n","/**\r\n * ytz-popover - Click-triggered positioned content Web Component.\r\n * Shows interactive content anchored to a trigger element.\r\n *\r\n * @module @grimoire/yetzirah-core/popover\r\n * @example\r\n * <ytz-popover>\r\n *   <button>Open menu</button>\r\n *   <div slot=\"content\">\r\n *     <p>Popover content with interactive elements</p>\r\n *     <button onclick=\"this.closest('ytz-popover').open = false\">Close</button>\r\n *   </div>\r\n * </ytz-popover>\r\n *\r\n * @example\r\n * // With placement\r\n * <ytz-popover placement=\"bottom\">\r\n *   <button>Settings</button>\r\n *   <div slot=\"content\" class=\"pa3 bg-white shadow-2 br2\">\r\n *     <label class=\"db mb2\">\r\n *       <input type=\"checkbox\"> Enable notifications\r\n *     </label>\r\n *     <button>Save</button>\r\n *   </div>\r\n * </ytz-popover>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet popoverId = 0\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * @class YtzPopover\r\n * @extends HTMLElement\r\n */\r\nclass YtzPopover extends HTMLElement {\r\n  static observedAttributes = ['open', 'placement', 'offset']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    // Check initial open state\r\n    if (this.hasAttribute('open')) {\r\n      this.#show()\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#show() : this.#hide()\r\n    } else if (this.hasAttribute('open')) {\r\n      // Reposition if placement/offset changed while open\r\n      this.#updatePosition()\r\n    }\r\n  }\r\n\r\n  /** @returns {'top'|'bottom'|'left'|'right'} */\r\n  get placement() {\r\n    return this.getAttribute('placement') || 'bottom'\r\n  }\r\n\r\n  set placement(value) {\r\n    this.setAttribute('placement', value)\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get offset() {\r\n    return parseInt(this.getAttribute('offset') || '8', 10)\r\n  }\r\n\r\n  set offset(value) {\r\n    this.setAttribute('offset', String(value))\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\r\n    this.#trigger = this.firstElementChild\r\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\r\n\r\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\r\n\r\n    // Generate unique ID for content\r\n    this.#contentId = this.#content.id || `ytz-popover-${++popoverId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA - popover uses aria-expanded on trigger\r\n    this.#trigger.setAttribute('aria-haspopup', 'dialog')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n\r\n    // Content hidden initially\r\n    this.#content.hidden = true\r\n\r\n    // Click listener on trigger\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => {\r\n    e.stopPropagation()\r\n    this.open = !this.open\r\n  }\r\n\r\n  #handleOutsideClick = (e) => {\r\n    // Close if click is outside popover content and trigger\r\n    if (!this.#content?.contains(e.target) && !this.#trigger?.contains(e.target)) {\r\n      this.open = false\r\n    }\r\n  }\r\n\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.open) {\r\n      e.preventDefault()\r\n      this.open = false\r\n      // Return focus to trigger\r\n      this.#trigger?.focus()\r\n    }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#content) return\r\n\r\n    // Update ARIA\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n\r\n    // Show content\r\n    this.#content.hidden = false\r\n    this.#updatePosition()\r\n\r\n    // Add listeners for dismiss\r\n    // Use setTimeout to avoid immediate close from the same click\r\n    setTimeout(() => {\r\n      document.addEventListener('click', this.#handleOutsideClick)\r\n    }, 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    // Reposition on scroll/resize\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    // Focus first focusable element in content\r\n    requestAnimationFrame(() => {\r\n      const focusable = this.#content?.querySelector(FOCUSABLE)\r\n      if (focusable) {\r\n        /** @type {HTMLElement} */ (focusable).focus()\r\n      }\r\n    })\r\n\r\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#content) return\r\n\r\n    // Update ARIA\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n\r\n    // Hide content\r\n    this.#content.hidden = true\r\n\r\n    // Remove listeners\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\r\n      placement: this.placement,\r\n      offset: this.offset\r\n    })\r\n\r\n    // Position popover fixed relative to viewport\r\n    this.#content.style.position = 'fixed'\r\n    this.#content.style.left = `${x}px`\r\n    this.#content.style.top = `${y}px`\r\n\r\n    // Set data attribute for CSS styling based on actual placement\r\n    this.#content.dataset.placement = finalPlacement\r\n  }\r\n\r\n  // Public API\r\n\r\n  /** Show the popover programmatically */\r\n  show() {\r\n    this.open = true\r\n  }\r\n\r\n  /** Hide the popover programmatically */\r\n  hide() {\r\n    this.open = false\r\n  }\r\n\r\n  /** Toggle the popover open/closed */\r\n  toggle() {\r\n    this.open = !this.open\r\n  }\r\n}\r\n\r\nregister('ytz-popover', YtzPopover)\r\n\r\nexport { YtzPopover }\r\n","/**\r\n * Tier 1 Components Only Bundle\r\n * Optimized bundle containing only Tier 1 components for minimal payload.\r\n *\r\n * Target: < 10KB gzipped\r\n *\r\n * @module @grimoire/yetzirah-core/cdn/tier1\r\n */\r\n\r\n// Tier 1 Components (12 components)\r\nexport { YtzButton } from './button.js'\r\nexport { YtzDisclosure } from './disclosure.js'\r\nexport { YtzDialog } from './dialog.js'\r\nexport { YtzTabs, YtzTab, YtzTabPanel } from './tabs.js'\r\nexport { YtzTooltip } from './tooltip.js'\r\nexport { YtzMenu, YtzMenuItem } from './menu.js'\r\nexport { YtzAutocomplete, YtzOption } from './autocomplete.js'\r\nexport { YtzListbox } from './listbox.js'\r\nexport { YtzSelect } from './select.js'\r\nexport { YtzAccordion, YtzAccordionItem } from './accordion.js'\r\nexport { YtzDrawer } from './drawer.js'\r\nexport { YtzPopover } from './popover.js'\r\n\r\n/** Yetzirah version */\r\nexport const VERSION = '0.1.0'\r\n"]}