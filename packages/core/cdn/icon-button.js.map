{"version":3,"sources":["../src/utils/register.js","../src/icon-button.js"],"names":["register","name","constructor","DEFAULTS","YtzIconButton","#tooltipEl","#render","#checkAccessibility","#removeTooltip","#showTooltip","#hideTooltip","oldVal","newVal","userClass","button","isNew","label","attr","#setupTooltip","rect","value"],"mappings":"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","file":"icon-button.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-icon-button - Icon button Web Component.\n * A button variant requiring aria-label for accessibility.\n *\n * @module @grimoire/yetzirah-core/icon-button\n * @example\n * <ytz-icon-button aria-label=\"Close\">\n *   <svg>...</svg>\n * </ytz-icon-button>\n *\n * @example\n * // With tooltip integration\n * <ytz-icon-button aria-label=\"Settings\" tooltip>\n *   <svg>...</svg>\n * </ytz-icon-button>\n *\n * @example\n * // Disabled\n * <ytz-icon-button aria-label=\"Delete\" disabled>\n *   <svg>...</svg>\n * </ytz-icon-button>\n */\n\nimport { register } from './utils/register.js'\n\n/** @type {string} Default classes for icon button */\nconst DEFAULTS = 'pointer bn bg-transparent pa0 dib'\n\n/**\n * @class YtzIconButton\n * @extends HTMLElement\n */\nclass YtzIconButton extends HTMLElement {\n  static observedAttributes = ['disabled', 'aria-label', 'tooltip', 'class']\n\n  /** @type {HTMLElement|null} */\n  #tooltipEl = null\n\n  connectedCallback() {\n    this.#render()\n    this.#checkAccessibility()\n  }\n\n  disconnectedCallback() {\n    this.#removeTooltip()\n    this.removeEventListener('mouseenter', this.#showTooltip)\n    this.removeEventListener('mouseleave', this.#hideTooltip)\n    this.removeEventListener('focus', this.#showTooltip)\n    this.removeEventListener('blur', this.#hideTooltip)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected) {\n      this.#render()\n      if (name === 'aria-label') {\n        this.#checkAccessibility()\n      }\n    }\n  }\n\n  #checkAccessibility() {\n    if (!this.hasAttribute('aria-label')) {\n      console.warn('ytz-icon-button: aria-label is required for accessibility')\n    }\n  }\n\n  #render() {\n    const userClass = this.getAttribute('class') || ''\n    const button = this.querySelector('button.ytz-icon-button-inner') || document.createElement('button')\n    const isNew = !button.parentNode\n\n    button.type = 'button'\n    button.className = 'ytz-icon-button-inner ' + DEFAULTS + (userClass ? ' ' + userClass : '')\n    button.disabled = this.hasAttribute('disabled')\n\n    // Copy aria-label to inner button\n    const label = this.getAttribute('aria-label')\n    if (label) {\n      button.setAttribute('aria-label', label)\n    }\n\n    // Copy aria-* and data-* attributes\n    for (const attr of this.attributes) {\n      if ((attr.name.startsWith('aria-') || attr.name.startsWith('data-')) && attr.name !== 'aria-label') {\n        button.setAttribute(attr.name, attr.value)\n      }\n    }\n\n    if (isNew) {\n      // Move icon content into button\n      while (this.firstChild && this.firstChild !== button) {\n        button.appendChild(this.firstChild)\n      }\n      this.appendChild(button)\n    }\n\n    // Setup tooltip if requested\n    this.#setupTooltip()\n  }\n\n  #setupTooltip() {\n    // Remove old listeners\n    this.removeEventListener('mouseenter', this.#showTooltip)\n    this.removeEventListener('mouseleave', this.#hideTooltip)\n    this.removeEventListener('focus', this.#showTooltip)\n    this.removeEventListener('blur', this.#hideTooltip)\n\n    if (this.hasAttribute('tooltip')) {\n      this.addEventListener('mouseenter', this.#showTooltip)\n      this.addEventListener('mouseleave', this.#hideTooltip)\n      this.addEventListener('focus', this.#showTooltip)\n      this.addEventListener('blur', this.#hideTooltip)\n    }\n  }\n\n  #showTooltip = () => {\n    const label = this.getAttribute('aria-label')\n    if (!label) return\n\n    this.#tooltipEl = document.createElement('div')\n    this.#tooltipEl.className = 'ytz-icon-button-tooltip'\n    this.#tooltipEl.textContent = label\n    this.#tooltipEl.setAttribute('role', 'tooltip')\n\n    // Position tooltip below button\n    // Use inner button for rect since parent may have display:contents\n    const button = this.querySelector('button.ytz-icon-button-inner')\n    const rect = (button || this).getBoundingClientRect()\n    this.#tooltipEl.style.cssText = `\n      position: fixed;\n      left: ${rect.left + rect.width / 2}px;\n      top: ${rect.bottom + 4}px;\n      transform: translateX(-50%);\n      z-index: 9999;\n    `\n\n    document.body.appendChild(this.#tooltipEl)\n  }\n\n  #hideTooltip = () => {\n    this.#removeTooltip()\n  }\n\n  #removeTooltip() {\n    if (this.#tooltipEl) {\n      this.#tooltipEl.remove()\n      this.#tooltipEl = null\n    }\n  }\n\n  /**\n   * Get/set the disabled state.\n   * @type {boolean}\n   */\n  get disabled() {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled(value) {\n    if (value) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n  }\n}\n\nregister('ytz-icon-button', YtzIconButton)\n\nexport { YtzIconButton }\n"]}