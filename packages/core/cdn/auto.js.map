{"version":3,"sources":["../src/utils/register.js","../src/accordion.js","../src/utils/position.js","../src/utils/key-nav.js","../src/utils/click-outside.js","../src/autocomplete.js","../src/button.js","../src/chip.js","../src/utils/virtual-scroll.js","../src/datagrid.js","../src/utils/focus-trap.js","../src/dialog.js","../src/disclosure.js","../src/drawer.js","../src/icon-button.js","../src/listbox.js","../src/menu.js","../src/popover.js","../src/select.js","../src/slider.js","../src/tabs.js","../src/toggle.js","../src/theme-toggle.js","../src/tooltip.js","../src/index.js","../src/cdn-entry.js"],"names":["register","name","constructor","accordionItemId","YtzAccordion","#handleItemToggle","value","e","openedItem","item","YtzAccordionItem","#trigger","#content","#contentId","#setup","#updateState","#handleClick","oldVal","newVal","isOpen","willOpen","position","anchor","floating","options","placement","offset","anchorRect","floatingRect","viewport","x","y","finalPlacement","createKeyNav","getItems","orientation","wrap","autoActivate","onActivate","prevKey","nextKey","items","currentIndex","newIndex","clickOutside","element","callback","ignore","handleClick","autocompleteId","YtzAutocomplete","#input","#listbox","#listboxId","#keyNav","#clickOutsideHandler","#selected","#justClosed","#cleanup","#showListbox","#hideListbox","#updateLoadingState","v","val","#updateSelectedState","opt","#handleInput","#handleInputFocus","#handleInputKeyDown","#handleKeyDown","#handleOptionClick","#filterOptions","firstOption","#selectOption","focused","option","isSelected","query","text","#updatePosition","loadingSlot","label","disabled","YtzOption","ANCHOR_DEFAULTS","BUTTON_DEFAULTS","YtzButton","#render","href","userClass","isAnchor","el","defaults","attr","#contentCache","YtzChip","#deleteButton","#handleDelete","#handleKeydown","createVirtualScroller","container","content","itemCount","itemHeight","renderItem","buffer","scrollTop","renderedRange","rafId","totalHeight","calculateVisibleRange","containerHeight","start","visibleCount","end","render","range","i","handleScroll","scrollToIndex","index","targetTop","currentScrollTop","destroy","refresh","newTotalHeight","YtzDatagridColumn","YtzDatagrid","#data","#filteredData","#columns","#sortState","#filterState","#virtualScroller","#header","#body","#viewport","#focusedRow","#focusedCol","#columnWidths","#resizeState","#handleResizeMove","#handleResizeEnd","#createStructure","columns","col","#renderHeader","#applyFiltersAndSort","#initVirtualScroller","cell","storedWidth","#handleSort","indicator","input","resizeHandle","#handleResizeStart","field","headerCell","startX","startWidth","delta","newWidth","#updateBodyColumnWidths","#extractNumber","cleaned","num","row","colIndex","result","searchLower","direction","a","b","aVal","bVal","aNum","bNum","cmp","rowHeight","#renderRow","rowData","#updateFocus","maxRow","maxCol","#applyFocusStyling","targetRow","headers","rows","filename","csv","blob","url","link","FOCUSABLE","createFocusTrap","handleKeydown","focusable","first","last","YtzDialog","#previousFocus","#focusTrap","#previousOverflow","#handleBackdropClick","#open","#close","#handleEscape","firstFocusable","disclosureId","YtzDisclosure","VALID_ANCHORS","YtzDrawer","DEFAULTS","YtzIconButton","#tooltipEl","#checkAccessibility","#removeTooltip","#showTooltip","#hideTooltip","button","isNew","#setupTooltip","rect","listboxId","YtzListbox","#id","#updateDisabledState","#handleFocus","selected","menuId","YtzMenu","#popup","#menuId","#lastCloseTime","#showMenu","#hideMenu","#handleTriggerClick","basePlacement","YtzMenuItem","menu","popoverId","YtzPopover","#show","#hide","#handleOutsideClick","selectId","YtzSelect","#customTrigger","#updateTriggerText","#handleTriggerKeyDown","#handleListboxKeyDown","o","YtzSlider","#track","#thumb","#dragging","#updateDisplay","#handleMouseDown","#handleMouseMove","#handleMouseUp","#handleTouchStart","#handleTouchMove","#handleTouchEnd","#handleTrackClick","step","bigStep","newValue","#dispatchChange","#updateValueFromPointer","touch","clientX","percent","tabId","YtzTabs","#setupKeyNav","firstTab","#updateSelection","tab","panel","YtzTab","panelId","tabs","YtzTabPanel","#linkToTab","YtzToggle","willCheck","DEFAULT_STORAGE_KEY","DARK_CLASS","THEME_ATTR","YtzThemeToggle","#toggle","#initializeTheme","#handleChange","savedTheme","#loadTheme","prefersDark","isDark","#applyTheme","#updateToggle","#saveTheme","root","theme","tooltipId","YtzTooltip","#showTimeout","#hideTimeout","#isVisible","#handleMouseEnter","#handleMouseLeave","#handleContentMouseEnter","#handleFocusIn","#handleFocusOut","VERSION","getRegistrationStatus","components","status","whenAllDefined"],"mappings":"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","file":"auto.js","sourcesContent":["/**\r\n * Idempotent custom element registration utility.\r\n * Prevents duplicate registration errors when scripts load multiple times.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/register\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Register a custom element if not already registered.\r\n * Safe to call multiple times with the same name.\r\n *\r\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\r\n * @param {CustomElementConstructor} constructor - The element class\r\n */\r\nexport function register(name, constructor) {\r\n  if (!customElements.get(name)) {\r\n    customElements.define(name, constructor)\r\n  }\r\n}\r\n","/**\r\n * ytz-accordion - Coordinated disclosure container.\r\n * Manages multiple accordion items with optional exclusive mode.\r\n *\r\n * @module @grimoire/yetzirah-core/accordion\r\n * @example\r\n * <ytz-accordion>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 1</button>\r\n *     <div>Content 1</div>\r\n *   </ytz-accordion-item>\r\n *   <ytz-accordion-item>\r\n *     <button>Section 2</button>\r\n *     <div>Content 2</div>\r\n *   </ytz-accordion-item>\r\n * </ytz-accordion>\r\n *\r\n * @example\r\n * // Exclusive mode - only one item open at a time\r\n * <ytz-accordion exclusive>\r\n *   <ytz-accordion-item open>...</ytz-accordion-item>\r\n *   <ytz-accordion-item>...</ytz-accordion-item>\r\n * </ytz-accordion>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\nlet accordionItemId = 0\r\n\r\n/**\r\n * @class YtzAccordion\r\n * @extends HTMLElement\r\n */\r\nclass YtzAccordion extends HTMLElement {\r\n  connectedCallback() {\r\n    this.addEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('toggle', this.#handleItemToggle)\r\n  }\r\n\r\n  /**\r\n   * Whether exclusive mode is enabled (only one item open at a time).\r\n   * @type {boolean}\r\n   */\r\n  get exclusive() {\r\n    return this.hasAttribute('exclusive')\r\n  }\r\n\r\n  set exclusive(value) {\r\n    if (value) {\r\n      this.setAttribute('exclusive', '')\r\n    } else {\r\n      this.removeAttribute('exclusive')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all accordion items.\r\n   * @returns {YtzAccordionItem[]}\r\n   */\r\n  get items() {\r\n    return Array.from(this.querySelectorAll(':scope > ytz-accordion-item'))\r\n  }\r\n\r\n  /**\r\n   * Handle toggle event from accordion item.\r\n   * In exclusive mode, close other items when one opens.\r\n   * @param {CustomEvent} e\r\n   */\r\n  #handleItemToggle = (e) => {\r\n    if (!this.exclusive || !e.detail.open) return\r\n\r\n    const openedItem = e.target\r\n    this.items.forEach(item => {\r\n      if (item !== openedItem && item.open) {\r\n        item.open = false\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * ytz-accordion-item - Individual accordion panel.\r\n * Functions like ytz-disclosure but coordinates with parent accordion.\r\n *\r\n * @attr open - When present, content is visible\r\n *\r\n * @example\r\n * <ytz-accordion-item>\r\n *   <button>Toggle Section</button>\r\n *   <div>\r\n *     <div>Content goes here...</div>\r\n *   </div>\r\n * </ytz-accordion-item>\r\n */\r\nclass YtzAccordionItem extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-accordion-content-${++accordionItemId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Generate ID for trigger if needed (for aria-labelledby on content)\r\n    this.#trigger.id = this.#trigger.id || `ytz-accordion-trigger-${accordionItemId}`\r\n\r\n    // Set up ARIA attributes\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n    this.#content.setAttribute('aria-labelledby', this.#trigger.id)\r\n    this.#content.setAttribute('role', 'region')\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the accordion item open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-accordion', YtzAccordion)\r\nregister('ytz-accordion-item', YtzAccordionItem)\r\n\r\nexport { YtzAccordion, YtzAccordionItem }\r\n","/**\r\n * Position utility for tooltips, menus, popovers.\r\n * Places an element relative to an anchor with flip/shift logic.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/position\r\n * @internal Not exported from package\r\n *\r\n * Limitations (by design):\r\n * - Does not handle nested scroll containers\r\n * - Does not support virtual elements\r\n * - No middleware system\r\n */\r\n\r\n/**\r\n * Position a floating element relative to an anchor.\r\n *\r\n * @param {HTMLElement} anchor - Element to position relative to\r\n * @param {HTMLElement} floating - Element to position\r\n * @param {Object} [options] - Positioning options\r\n * @param {'top'|'bottom'|'left'|'right'} [options.placement='top'] - Preferred placement\r\n * @param {number} [options.offset=8] - Gap between anchor and floating element\r\n * @returns {{ x: number, y: number, placement: string }}\r\n */\r\nexport function position(anchor, floating, options = {}) {\r\n  const { placement = 'top', offset = 8 } = options\r\n\r\n  const anchorRect = anchor.getBoundingClientRect()\r\n  const floatingRect = floating.getBoundingClientRect()\r\n  const viewport = { width: window.innerWidth, height: window.innerHeight }\r\n\r\n  let x, y\r\n  let finalPlacement = placement\r\n\r\n  // Calculate position based on placement\r\n  switch (placement) {\r\n    case 'top':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.top - floatingRect.height - offset\r\n      break\r\n    case 'bottom':\r\n      x = anchorRect.left + (anchorRect.width - floatingRect.width) / 2\r\n      y = anchorRect.bottom + offset\r\n      break\r\n    case 'left':\r\n      x = anchorRect.left - floatingRect.width - offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n    case 'right':\r\n      x = anchorRect.right + offset\r\n      y = anchorRect.top + (anchorRect.height - floatingRect.height) / 2\r\n      break\r\n  }\r\n\r\n  // Flip if outside viewport\r\n  if (placement === 'top' && y < 0) {\r\n    y = anchorRect.bottom + offset\r\n    finalPlacement = 'bottom'\r\n  } else if (placement === 'bottom' && y + floatingRect.height > viewport.height) {\r\n    y = anchorRect.top - floatingRect.height - offset\r\n    finalPlacement = 'top'\r\n  } else if (placement === 'left' && x < 0) {\r\n    x = anchorRect.right + offset\r\n    finalPlacement = 'right'\r\n  } else if (placement === 'right' && x + floatingRect.width > viewport.width) {\r\n    x = anchorRect.left - floatingRect.width - offset\r\n    finalPlacement = 'left'\r\n  }\r\n\r\n  // Shift to stay in viewport\r\n  if (finalPlacement === 'top' || finalPlacement === 'bottom') {\r\n    x = Math.max(0, Math.min(x, viewport.width - floatingRect.width))\r\n  } else {\r\n    y = Math.max(0, Math.min(y, viewport.height - floatingRect.height))\r\n  }\r\n\r\n  return { x, y, placement: finalPlacement }\r\n}\r\n","/**\r\n * Keyboard navigation utility for arrow key navigation.\r\n * @module @grimoire/yetzirah-core/utils/key-nav\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates keyboard navigation for a set of elements.\r\n * @param {() => HTMLElement[]} getItems - Function returning navigable elements\r\n * @param {Object} options\r\n * @param {'horizontal'|'vertical'} [options.orientation='horizontal']\r\n * @param {boolean} [options.wrap=true]\r\n * @param {boolean} [options.autoActivate=true]\r\n * @param {(item: HTMLElement) => void} [options.onActivate]\r\n * @returns {{ handleKeyDown: (e: KeyboardEvent) => void }}\r\n */\r\nexport function createKeyNav(getItems, options = {}) {\r\n  const { orientation = 'horizontal', wrap = true, autoActivate = true, onActivate } = options\r\n  const prevKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\r\n  const nextKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\r\n\r\n  return {\r\n    handleKeyDown(e) {\r\n      const items = getItems()\r\n      const currentIndex = items.indexOf(document.activeElement)\r\n      if (currentIndex === -1) return\r\n\r\n      let newIndex = currentIndex\r\n      if (e.key === prevKey) {\r\n        newIndex = currentIndex - 1\r\n        if (newIndex < 0) newIndex = wrap ? items.length - 1 : 0\r\n      } else if (e.key === nextKey) {\r\n        newIndex = currentIndex + 1\r\n        if (newIndex >= items.length) newIndex = wrap ? 0 : items.length - 1\r\n      } else if (e.key === 'Home') {\r\n        newIndex = 0\r\n      } else if (e.key === 'End') {\r\n        newIndex = items.length - 1\r\n      } else {\r\n        return\r\n      }\r\n\r\n      e.preventDefault()\r\n      items[newIndex].focus()\r\n      if (autoActivate && onActivate) onActivate(items[newIndex])\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Click outside utility for dismissing popups.\r\n * @module @grimoire/yetzirah-core/utils/click-outside\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates a click outside listener.\r\n * @param {HTMLElement} element - Element to detect clicks outside of\r\n * @param {Function} callback - Called when click outside occurs\r\n * @param {Object} [options]\r\n * @param {HTMLElement} [options.ignore] - Additional element to ignore clicks on (e.g., trigger)\r\n * @returns {{ destroy: () => void }}\r\n */\r\nexport function clickOutside(element, callback, options = {}) {\r\n  const { ignore } = options\r\n\r\n  const handleClick = (e) => {\r\n    if (element.contains(e.target)) return\r\n    if (ignore && ignore.contains(e.target)) return\r\n    callback(e)\r\n  }\r\n\r\n  // Use capture to catch clicks before they're stopped\r\n  document.addEventListener('click', handleClick, true)\r\n\r\n  return {\r\n    destroy() {\r\n      document.removeEventListener('click', handleClick, true)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-autocomplete - Text input with filterable dropdown selection.\r\n * Supports single and multi-select modes with async loading.\r\n *\r\n * @module @grimoire/yetzirah-core/autocomplete\r\n * @example\r\n * <ytz-autocomplete>\r\n *   <input slot=\"input\" placeholder=\"Search...\">\r\n *   <ytz-option value=\"apple\">Apple</ytz-option>\r\n *   <ytz-option value=\"banana\">Banana</ytz-option>\r\n * </ytz-autocomplete>\r\n *\r\n * @example\r\n * // Multi-select mode\r\n * <ytz-autocomplete multiple>\r\n *   <input slot=\"input\" placeholder=\"Select...\">\r\n *   <ytz-option value=\"a\">Option A</ytz-option>\r\n *   <ytz-option value=\"b\">Option B</ytz-option>\r\n * </ytz-autocomplete>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { clickOutside } from './utils/click-outside.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet autocompleteId = 0\r\n\r\n/**\r\n * @class YtzAutocomplete\r\n * @extends HTMLElement\r\n */\r\nclass YtzAutocomplete extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'loading']\r\n\r\n  /** @type {HTMLInputElement|null} */\r\n  #input = null\r\n  /** @type {HTMLElement|null} */\r\n  #listbox = null\r\n  /** @type {string|null} */\r\n  #listboxId = null\r\n  /** @type {ReturnType<typeof createKeyNav>|null} */\r\n  #keyNav = null\r\n  /** @type {ReturnType<typeof clickOutside>|null} */\r\n  #clickOutsideHandler = null\r\n  /** @type {Set<string>} */\r\n  #selected = new Set()\r\n  /** @type {boolean} - Flag to prevent focus from re-opening after selection */\r\n  #justClosed = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#showListbox() : this.#hideListbox()\r\n    }\r\n    if (name === 'loading') {\r\n      this.#updateLoadingState()\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n\r\n  /** @returns {boolean} */\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n\r\n  /** @returns {boolean} */\r\n  get loading() { return this.hasAttribute('loading') }\r\n  set loading(v) { v ? this.setAttribute('loading', '') : this.removeAttribute('loading') }\r\n\r\n  /** @returns {boolean} */\r\n  get filter() { return this.getAttribute('filter') !== 'false' }\r\n  set filter(v) { this.setAttribute('filter', (v && v !== 'false') ? 'true' : 'false') }\r\n\r\n  /** @returns {string|string[]} */\r\n  get value() {\r\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\r\n  }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) {\r\n      v.forEach(val => this.#selected.add(val))\r\n    } else if (v) {\r\n      this.#selected.add(v)\r\n    }\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  /** @returns {string} */\r\n  get inputValue() { return this.#input?.value || '' }\r\n  set inputValue(v) { if (this.#input) this.#input.value = v }\r\n\r\n  #setup() {\r\n    this.#input = this.querySelector('[slot=\"input\"]') || this.querySelector('input')\r\n    if (!this.#input) return\r\n\r\n    this.#listboxId = `ytz-autocomplete-${++autocompleteId}`\r\n\r\n    // Create listbox wrapper\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.id = this.#listboxId\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) {\r\n      this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    }\r\n\r\n    // Move option children into listbox\r\n    const options = [...this.querySelectorAll('ytz-option')]\r\n    options.forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n\r\n    // ARIA on input\r\n    this.#input.setAttribute('role', 'combobox')\r\n    this.#input.setAttribute('aria-autocomplete', 'list')\r\n    this.#input.setAttribute('aria-controls', this.#listboxId)\r\n    this.#input.setAttribute('aria-expanded', 'false')\r\n    this.#input.setAttribute('aria-haspopup', 'listbox')\r\n\r\n    // Keyboard navigation\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([hidden]):not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.#input.addEventListener('input', this.#handleInput)\r\n    this.#input.addEventListener('focus', this.#handleInputFocus)\r\n    this.#input.addEventListener('keydown', this.#handleInputKeyDown)\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n\r\n    // Read initial selected state from HTML\r\n    this.#listbox.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n\r\n    // Initialize loading slot visibility\r\n    this.#updateLoadingState()\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#input?.removeEventListener('input', this.#handleInput)\r\n    this.#input?.removeEventListener('focus', this.#handleInputFocus)\r\n    this.#input?.removeEventListener('keydown', this.#handleInputKeyDown)\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    this.#clickOutsideHandler?.destroy()\r\n  }\r\n\r\n  #handleInput = () => {\r\n    if (!this.open) this.open = true\r\n    if (this.filter) this.#filterOptions()\r\n    this.dispatchEvent(new CustomEvent('input-change', {\r\n      bubbles: true,\r\n      detail: { value: this.#input.value }\r\n    }))\r\n  }\r\n\r\n  #handleInputFocus = () => {\r\n    // Don't re-open if we just closed from a selection\r\n    if (this.#justClosed) {\r\n      this.#justClosed = false\r\n      return\r\n    }\r\n    const hasOptions = this.#listbox?.querySelector('ytz-option:not([hidden])')\r\n    if (hasOptions && !this.loading) this.open = true\r\n  }\r\n\r\n  #handleInputKeyDown = (e) => {\r\n    if (e.key === 'ArrowDown') {\r\n      e.preventDefault()\r\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\r\n      if (!this.open) this.open = true\r\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\r\n      firstOption?.focus()\r\n    } else if (e.key === 'ArrowUp') {\r\n      e.preventDefault()\r\n      e.stopPropagation() // Prevent bubbling to #handleKeyDown\r\n      if (!this.open) this.open = true\r\n      const options = this.#listbox?.querySelectorAll('ytz-option:not([hidden]):not([disabled])')\r\n      options?.[options.length - 1]?.focus()\r\n    } else if (e.key === 'Escape' && this.open) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      this.open = false\r\n    } else if (e.key === 'Enter' && this.open) {\r\n      // Select first visible option on Enter from input\r\n      const firstOption = this.#listbox?.querySelector('ytz-option:not([hidden]):not([disabled])')\r\n      if (firstOption) {\r\n        e.preventDefault()\r\n        this.#selectOption(firstOption)\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (!this.open) return\r\n\r\n    if (e.key === 'Escape') {\r\n      e.preventDefault()\r\n      this.open = false\r\n      this.#input?.focus()\r\n      return\r\n    }\r\n\r\n    // Handle navigation when option is focused\r\n    if (document.activeElement?.tagName === 'YTZ-OPTION') {\r\n      this.#keyNav?.handleKeyDown(e)\r\n\r\n      if (e.key === 'Enter' || e.key === ' ') {\r\n        const focused = this.#listbox?.querySelector('ytz-option:focus')\r\n        if (focused && !focused.hasAttribute('disabled')) {\r\n          e.preventDefault()\r\n          this.#selectOption(focused)\r\n        }\r\n      }\r\n\r\n      if (e.key === 'Tab') {\r\n        e.preventDefault()\r\n        this.#input?.focus()\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) {\r\n      this.#selectOption(option)\r\n    }\r\n  }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n\r\n    if (this.multiple) {\r\n      if (this.#selected.has(value)) {\r\n        this.#selected.delete(value)\r\n      } else {\r\n        this.#selected.add(value)\r\n      }\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.#input.value = option.textContent?.trim() || value\r\n      this.#justClosed = true // Prevent focus from re-opening\r\n      this.open = false\r\n      this.#input?.focus()\r\n    }\r\n\r\n    this.#updateSelectedState()\r\n\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { value: this.value, option }\r\n    }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\r\n    options.forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(value)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #filterOptions() {\r\n    const query = this.#input?.value.toLowerCase() || ''\r\n    const options = this.#listbox?.querySelectorAll('ytz-option') || []\r\n\r\n    options.forEach(opt => {\r\n      const text = opt.textContent?.toLowerCase() || ''\r\n      opt.hidden = !text.includes(query)\r\n    })\r\n  }\r\n\r\n  #showListbox() {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    this.#listbox.hidden = false\r\n    this.#input.setAttribute('aria-expanded', 'true')\r\n    this.#updatePosition()\r\n\r\n    this.#clickOutsideHandler = clickOutside(this, () => {\r\n      this.open = false\r\n    })\r\n\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hideListbox() {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    this.#listbox.hidden = true\r\n    this.#input.setAttribute('aria-expanded', 'false')\r\n\r\n    this.#clickOutsideHandler?.destroy()\r\n    this.#clickOutsideHandler = null\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#input || !this.#listbox) return\r\n\r\n    const { x, y } = position(this.#input, this.#listbox, {\r\n      placement: 'bottom',\r\n      offset: 4\r\n    })\r\n\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#input.offsetWidth}px`\r\n  }\r\n\r\n  #updateLoadingState() {\r\n    const loadingSlot = this.querySelector('[slot=\"loading\"]')\r\n    if (loadingSlot) {\r\n      loadingSlot.hidden = !this.loading\r\n    }\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (this.#input) this.#input.value = ''\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n\r\n  /**\r\n   * Add options programmatically.\r\n   * @param {Array<{value: string, label: string, disabled?: boolean}>} options\r\n   */\r\n  setOptions(options) {\r\n    if (!this.#listbox) return\r\n    this.#listbox.innerHTML = ''\r\n    options.forEach(({ value, label, disabled }) => {\r\n      const opt = document.createElement('ytz-option')\r\n      opt.setAttribute('value', value)\r\n      opt.textContent = label\r\n      if (disabled) opt.setAttribute('disabled', '')\r\n      this.#listbox.appendChild(opt)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n}\r\n\r\n/**\r\n * ytz-option - Individual option in autocomplete.\r\n * @attr value - Option value\r\n * @attr disabled - When present, option is not selectable\r\n * @attr selected - When present, option is selected\r\n */\r\nclass YtzOption extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'option')\r\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n    if (this.hasAttribute('disabled')) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n    }\r\n    this.setAttribute('aria-selected', this.hasAttribute('selected') ? 'true' : 'false')\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = (e) => {\r\n    if (this.hasAttribute('disabled')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      return\r\n    }\r\n    this.dispatchEvent(new CustomEvent('option-click', {\r\n      bubbles: true,\r\n      detail: { option: this }\r\n    }))\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) {\r\n    if (v) {\r\n      this.setAttribute('disabled', '')\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get selected() { return this.hasAttribute('selected') }\r\n  set selected(v) {\r\n    v ? this.setAttribute('selected', '') : this.removeAttribute('selected')\r\n    this.setAttribute('aria-selected', String(v))\r\n  }\r\n\r\n  /** @returns {string|null} */\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n}\r\n\r\nregister('ytz-autocomplete', YtzAutocomplete)\r\nregister('ytz-option', YtzOption)\r\n\r\nexport { YtzAutocomplete, YtzOption }\r\n","/**\r\n * ytz-button - Polymorphic button/anchor Web Component.\r\n * Renders <a> when href provided, <button> otherwise.\r\n *\r\n * @module @grimoire/yetzirah-core/button\r\n * @example\r\n * // Link button\r\n * <ytz-button href=\"/dashboard\" class=\"ph3 pv2 br2 white bg-blue\">Dashboard</ytz-button>\r\n *\r\n * @example\r\n * // Action button\r\n * <ytz-button onclick=\"handleSubmit()\" class=\"ph3 pv2 br2 white bg-blue\">Submit</ytz-button>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Default classes for anchor elements */\r\nconst ANCHOR_DEFAULTS = 'pointer font-inherit no-underline dib'\r\n\r\n/** @type {string} Default classes for button elements (no border reset - user controls borders) */\r\nconst BUTTON_DEFAULTS = 'pointer font-inherit bg-transparent'\r\n\r\n/**\r\n * @class YtzButton\r\n * @extends HTMLElement\r\n */\r\nclass YtzButton extends HTMLElement {\r\n  connectedCallback() {\r\n    this.#render()\r\n  }\r\n\r\n  static get observedAttributes() {\r\n    return ['href', 'disabled', 'type', 'class']\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.isConnected) this.#render()\r\n  }\r\n\r\n  #render() {\r\n    const href = this.getAttribute('href')\r\n    const userClass = this.getAttribute('class') || ''\r\n    const isAnchor = href != null\r\n\r\n    const el = document.createElement(isAnchor ? 'a' : 'button')\r\n    const defaults = isAnchor ? ANCHOR_DEFAULTS : BUTTON_DEFAULTS\r\n    el.className = defaults + (userClass ? ' ' + userClass : '')\r\n\r\n    if (isAnchor) {\r\n      el.href = href\r\n    } else {\r\n      el.type = this.getAttribute('type') || 'button'\r\n      if (this.hasAttribute('disabled')) el.disabled = true\r\n    }\r\n\r\n    // Copy aria-* and data-* attributes\r\n    for (const attr of this.attributes) {\r\n      if (attr.name.startsWith('aria-') || attr.name.startsWith('data-')) {\r\n        el.setAttribute(attr.name, attr.value)\r\n      }\r\n    }\r\n\r\n    el.innerHTML = this.#contentCache || this.innerHTML\r\n    this.#contentCache = el.innerHTML\r\n\r\n    this.replaceChildren(el)\r\n  }\r\n\r\n  /** @type {string|null} Cache innerHTML to preserve across re-renders */\r\n  #contentCache = null\r\n}\r\n\r\nregister('ytz-button', YtzButton)\r\n\r\nexport { YtzButton }\r\n","/**\r\n * ytz-chip - Deletable tag/label Web Component.\r\n * A chip with optional delete button and keyboard support.\r\n *\r\n * @module @grimoire/yetzirah-core/chip\r\n * @example\r\n * <ytz-chip>Tag</ytz-chip>\r\n *\r\n * @example\r\n * // Deletable chip\r\n * <ytz-chip deletable>Remove me</ytz-chip>\r\n *\r\n * @example\r\n * // Disabled chip\r\n * <ytz-chip deletable disabled>Can't delete</ytz-chip>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzChip\r\n * @extends HTMLElement\r\n */\r\nclass YtzChip extends HTMLElement {\r\n  static observedAttributes = ['deletable', 'disabled']\r\n\r\n  /** @type {HTMLButtonElement|null} */\r\n  #deleteButton = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#deleteButton?.removeEventListener('click', this.#handleDelete)\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected) {\r\n      this.#setup()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Remove existing delete button if any\r\n    this.#deleteButton?.remove()\r\n    this.#deleteButton = null\r\n\r\n    // Add delete button if deletable\r\n    if (this.hasAttribute('deletable')) {\r\n      this.#deleteButton = document.createElement('button')\r\n      this.#deleteButton.type = 'button'\r\n      this.#deleteButton.setAttribute('aria-label', 'Delete')\r\n      this.#deleteButton.className = 'ytz-chip-delete'\r\n      this.#deleteButton.textContent = '\\u00D7' //  character\r\n      this.#deleteButton.disabled = this.disabled\r\n      this.#deleteButton.addEventListener('click', this.#handleDelete)\r\n      this.appendChild(this.#deleteButton)\r\n    }\r\n\r\n    // Keyboard support for delete\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    if (this.hasAttribute('deletable')) {\r\n      this.addEventListener('keydown', this.#handleKeydown)\r\n    }\r\n  }\r\n\r\n  #handleDelete = (e) => {\r\n    e.stopPropagation()\r\n    if (this.disabled) return\r\n\r\n    this.dispatchEvent(new CustomEvent('delete', {\r\n      bubbles: true,\r\n      detail: { chip: this }\r\n    }))\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    if (e.key === 'Delete' || e.key === 'Backspace') {\r\n      e.preventDefault()\r\n      this.dispatchEvent(new CustomEvent('delete', {\r\n        bubbles: true,\r\n        detail: { chip: this }\r\n      }))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the disabled state.\r\n   * @type {boolean}\r\n   */\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(value) {\r\n    if (value) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n    if (this.#deleteButton) {\r\n      this.#deleteButton.disabled = value\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the deletable state.\r\n   * @type {boolean}\r\n   */\r\n  get deletable() {\r\n    return this.hasAttribute('deletable')\r\n  }\r\n\r\n  set deletable(value) {\r\n    if (value) {\r\n      this.setAttribute('deletable', '')\r\n    } else {\r\n      this.removeAttribute('deletable')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-chip', YtzChip)\r\n\r\nexport { YtzChip }\r\n","/**\r\n * Virtual Scroll utility for efficient rendering of large lists.\r\n * Only renders visible items plus a buffer for smooth scrolling.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/virtual-scroll\r\n */\r\n\r\n/**\r\n * Create a virtual scroller instance.\r\n * @param {Object} options - Configuration options\r\n * @param {HTMLElement} options.container - Scrollable container element\r\n * @param {HTMLElement} options.content - Content element to hold rendered items\r\n * @param {number} options.itemCount - Total number of items\r\n * @param {number} options.itemHeight - Height of each item in pixels\r\n * @param {Function} options.renderItem - Function to render an item by index\r\n * @param {number} [options.buffer=5] - Number of items to render above/below viewport\r\n * @returns {Object} Virtual scroller instance\r\n */\r\nexport function createVirtualScroller({\r\n  container,\r\n  content,\r\n  itemCount,\r\n  itemHeight,\r\n  renderItem,\r\n  buffer = 5\r\n}) {\r\n  let scrollTop = 0\r\n  let renderedRange = { start: 0, end: 0 }\r\n  let rafId = null\r\n\r\n  // Set up content height to enable scrolling\r\n  const totalHeight = itemCount * itemHeight\r\n  content.style.height = `${totalHeight}px`\r\n  content.style.position = 'relative'\r\n\r\n  function calculateVisibleRange() {\r\n    const containerHeight = container.clientHeight\r\n    const start = Math.max(0, Math.floor(scrollTop / itemHeight) - buffer)\r\n    const visibleCount = Math.ceil(containerHeight / itemHeight)\r\n    const end = Math.min(itemCount, start + visibleCount + buffer * 2)\r\n    return { start, end }\r\n  }\r\n\r\n  function render() {\r\n    const range = calculateVisibleRange()\r\n\r\n    // Skip if range hasn't changed\r\n    if (range.start === renderedRange.start && range.end === renderedRange.end) {\r\n      return\r\n    }\r\n\r\n    renderedRange = range\r\n\r\n    // Clear and re-render\r\n    content.innerHTML = ''\r\n\r\n    for (let i = range.start; i < range.end; i++) {\r\n      const item = renderItem(i)\r\n      if (item) {\r\n        item.style.position = 'absolute'\r\n        item.style.top = `${i * itemHeight}px`\r\n        item.style.height = `${itemHeight}px`\r\n        item.style.left = '0'\r\n        item.style.right = '0'\r\n        content.appendChild(item)\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleScroll() {\r\n    scrollTop = container.scrollTop\r\n\r\n    // Use RAF for smooth rendering\r\n    if (rafId) {\r\n      cancelAnimationFrame(rafId)\r\n    }\r\n    rafId = requestAnimationFrame(render)\r\n  }\r\n\r\n  function scrollToIndex(index) {\r\n    const targetTop = index * itemHeight\r\n    const containerHeight = container.clientHeight\r\n    const currentScrollTop = container.scrollTop\r\n\r\n    // Only scroll if item is not fully visible\r\n    if (targetTop < currentScrollTop) {\r\n      container.scrollTop = targetTop\r\n    } else if (targetTop + itemHeight > currentScrollTop + containerHeight) {\r\n      container.scrollTop = targetTop - containerHeight + itemHeight\r\n    }\r\n  }\r\n\r\n  function destroy() {\r\n    container.removeEventListener('scroll', handleScroll)\r\n    if (rafId) {\r\n      cancelAnimationFrame(rafId)\r\n    }\r\n    content.innerHTML = ''\r\n  }\r\n\r\n  function refresh() {\r\n    const newTotalHeight = itemCount * itemHeight\r\n    content.style.height = `${newTotalHeight}px`\r\n    renderedRange = { start: 0, end: 0 }\r\n    render()\r\n  }\r\n\r\n  // Initialize\r\n  container.addEventListener('scroll', handleScroll)\r\n  render()\r\n\r\n  return {\r\n    scrollToIndex,\r\n    refresh,\r\n    destroy,\r\n    get renderedRange() {\r\n      return { ...renderedRange }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-datagrid - Data Grid Web Component.\r\n * Virtual scrolling, sorting, filtering, keyboard navigation, and export.\r\n *\r\n * @module @grimoire/yetzirah-core/datagrid\r\n * @example\r\n * <ytz-datagrid>\r\n *   <ytz-datagrid-column field=\"name\" header=\"Name\" sortable></ytz-datagrid-column>\r\n *   <ytz-datagrid-column field=\"email\" header=\"Email\"></ytz-datagrid-column>\r\n * </ytz-datagrid>\r\n *\r\n * // Set data via JavaScript:\r\n * grid.data = [{ name: 'John', email: 'john@example.com' }, ...]\r\n */\r\n\r\nimport { createVirtualScroller } from './utils/virtual-scroll.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzDatagridColumn\r\n * @extends HTMLElement\r\n */\r\nclass YtzDatagridColumn extends HTMLElement {\r\n  get field() { return this.getAttribute('field') || '' }\r\n  set field(val) { this.setAttribute('field', val) }\r\n\r\n  get header() { return this.getAttribute('header') || this.field }\r\n  set header(val) { this.setAttribute('header', val) }\r\n\r\n  get sortable() { return this.hasAttribute('sortable') }\r\n  set sortable(val) { val ? this.setAttribute('sortable', '') : this.removeAttribute('sortable') }\r\n\r\n  get filterable() { return this.hasAttribute('filterable') }\r\n  set filterable(val) { val ? this.setAttribute('filterable', '') : this.removeAttribute('filterable') }\r\n\r\n  get width() { return this.getAttribute('width') || 'auto' }\r\n  set width(val) { this.setAttribute('width', val) }\r\n}\r\n\r\nregister('ytz-datagrid-column', YtzDatagridColumn)\r\n\r\n/**\r\n * @class YtzDatagrid\r\n * @extends HTMLElement\r\n */\r\nclass YtzDatagrid extends HTMLElement {\r\n  static observedAttributes = ['row-height', 'page-size']\r\n\r\n  /** @type {Array<Object>} */\r\n  #data = []\r\n  /** @type {Array<Object>} */\r\n  #filteredData = []\r\n  /** @type {Array<YtzDatagridColumn>} */\r\n  #columns = []\r\n  /** @type {Object|null} */\r\n  #sortState = null\r\n  /** @type {Object} */\r\n  #filterState = {}\r\n  /** @type {Object|null} */\r\n  #virtualScroller = null\r\n  /** @type {HTMLElement|null} */\r\n  #header = null\r\n  /** @type {HTMLElement|null} */\r\n  #body = null\r\n  /** @type {HTMLElement|null} */\r\n  #viewport = null\r\n  /** @type {number} */\r\n  #focusedRow = 0\r\n  /** @type {number} */\r\n  #focusedCol = 0\r\n  /** @type {Map<string, number>} */\r\n  #columnWidths = new Map()\r\n  /** @type {Object|null} */\r\n  #resizeState = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#virtualScroller?.destroy()\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    document.removeEventListener('mousemove', this.#handleResizeMove)\r\n    document.removeEventListener('mouseup', this.#handleResizeEnd)\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.isConnected) {\r\n      this.#render()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Collect column definitions\r\n    this.#columns = Array.from(this.querySelectorAll('ytz-datagrid-column'))\r\n\r\n    // Set up ARIA\r\n    this.setAttribute('role', 'grid')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Create structure\r\n    this.#createStructure()\r\n\r\n    // Event listeners\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n\r\n    // Initial render\r\n    this.#render()\r\n  }\r\n\r\n  #createStructure() {\r\n    // Clear existing content (except columns)\r\n    const columns = Array.from(this.querySelectorAll('ytz-datagrid-column'))\r\n    this.innerHTML = ''\r\n    columns.forEach(col => this.appendChild(col))\r\n\r\n    // Create header\r\n    this.#header = document.createElement('div')\r\n    this.#header.className = 'ytz-datagrid-header'\r\n    this.#header.setAttribute('role', 'row')\r\n    this.appendChild(this.#header)\r\n\r\n    // Create viewport for virtual scrolling\r\n    this.#viewport = document.createElement('div')\r\n    this.#viewport.className = 'ytz-datagrid-viewport'\r\n    this.appendChild(this.#viewport)\r\n\r\n    // Create body container\r\n    this.#body = document.createElement('div')\r\n    this.#body.className = 'ytz-datagrid-body'\r\n    this.#body.setAttribute('role', 'rowgroup')\r\n    this.#viewport.appendChild(this.#body)\r\n  }\r\n\r\n  #render() {\r\n    this.#renderHeader()\r\n    this.#applyFiltersAndSort()\r\n    this.#initVirtualScroller()\r\n  }\r\n\r\n  #renderHeader() {\r\n    if (!this.#header) return\r\n\r\n    this.#header.innerHTML = ''\r\n\r\n    this.#columns.forEach((col, index) => {\r\n      const cell = document.createElement('div')\r\n      cell.className = 'ytz-datagrid-header-cell'\r\n      cell.setAttribute('role', 'columnheader')\r\n      cell.setAttribute('data-field', col.field)\r\n\r\n      // Use stored width or fall back to column attribute\r\n      const storedWidth = this.#columnWidths.get(col.field)\r\n      if (storedWidth) {\r\n        cell.style.width = `${storedWidth}px`\r\n        cell.style.flex = 'none'\r\n      } else if (col.width && col.width !== 'auto') {\r\n        cell.style.width = col.width\r\n        cell.style.flex = 'none'\r\n      }\r\n\r\n      // Create content wrapper to keep text separate from resize handle\r\n      const content = document.createElement('span')\r\n      content.className = 'ytz-datagrid-header-content'\r\n      content.textContent = col.header\r\n      cell.appendChild(content)\r\n\r\n      if (col.sortable) {\r\n        cell.classList.add('ytz-datagrid-sortable')\r\n        cell.addEventListener('click', (e) => {\r\n          // Don't sort when clicking resize handle\r\n          if (e.target.classList.contains('ytz-datagrid-resize-handle')) return\r\n          this.#handleSort(col.field)\r\n        })\r\n\r\n        // Add sort indicator\r\n        const indicator = document.createElement('span')\r\n        indicator.className = 'ytz-datagrid-sort-indicator'\r\n        if (this.#sortState?.field === col.field) {\r\n          indicator.textContent = this.#sortState.direction === 'asc' ? ' \\u25B2' : ' \\u25BC'\r\n          cell.setAttribute('aria-sort', this.#sortState.direction === 'asc' ? 'ascending' : 'descending')\r\n        }\r\n        content.appendChild(indicator)\r\n      }\r\n\r\n      if (col.filterable) {\r\n        const input = document.createElement('input')\r\n        input.type = 'text'\r\n        input.className = 'ytz-datagrid-filter'\r\n        input.placeholder = `Filter ${col.header}...`\r\n        input.value = this.#filterState[col.field] || ''\r\n        input.addEventListener('input', (e) => {\r\n          this.#filterState[col.field] = e.target.value\r\n          this.#applyFiltersAndSort()\r\n          this.#initVirtualScroller()\r\n        })\r\n        input.addEventListener('click', (e) => e.stopPropagation())\r\n        cell.appendChild(input)\r\n      }\r\n\r\n      // Add resize handle\r\n      const resizeHandle = document.createElement('div')\r\n      resizeHandle.className = 'ytz-datagrid-resize-handle'\r\n      resizeHandle.addEventListener('mousedown', (e) => this.#handleResizeStart(e, col.field, cell))\r\n      cell.appendChild(resizeHandle)\r\n\r\n      this.#header.appendChild(cell)\r\n    })\r\n  }\r\n\r\n  #handleResizeStart(e, field, headerCell) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    const startX = e.clientX\r\n    const startWidth = headerCell.offsetWidth\r\n\r\n    this.#resizeState = { field, startX, startWidth, headerCell }\r\n\r\n    document.addEventListener('mousemove', this.#handleResizeMove)\r\n    document.addEventListener('mouseup', this.#handleResizeEnd)\r\n\r\n    // Add resizing class for visual feedback\r\n    this.classList.add('ytz-datagrid-resizing')\r\n  }\r\n\r\n  #handleResizeMove = (e) => {\r\n    if (!this.#resizeState) return\r\n\r\n    const { field, startX, startWidth, headerCell } = this.#resizeState\r\n    const delta = e.clientX - startX\r\n    const newWidth = Math.max(50, startWidth + delta) // Minimum 50px\r\n\r\n    // Update header cell width\r\n    headerCell.style.width = `${newWidth}px`\r\n    headerCell.style.flex = 'none'\r\n\r\n    // Update body cells width\r\n    this.#columnWidths.set(field, newWidth)\r\n    this.#updateBodyColumnWidths()\r\n  }\r\n\r\n  #handleResizeEnd = () => {\r\n    if (this.#resizeState) {\r\n      this.dispatchEvent(new CustomEvent('columnresize', {\r\n        bubbles: true,\r\n        detail: {\r\n          field: this.#resizeState.field,\r\n          width: this.#columnWidths.get(this.#resizeState.field)\r\n        }\r\n      }))\r\n    }\r\n\r\n    this.#resizeState = null\r\n    document.removeEventListener('mousemove', this.#handleResizeMove)\r\n    document.removeEventListener('mouseup', this.#handleResizeEnd)\r\n    this.classList.remove('ytz-datagrid-resizing')\r\n  }\r\n\r\n  /**\r\n   * Extract a numeric value from a string, handling currency, percentages, etc.\r\n   * @param {*} value - The value to parse\r\n   * @returns {number|null} - The numeric value or null if not parseable\r\n   */\r\n  #extractNumber(value) {\r\n    if (typeof value === 'number') return value\r\n    if (typeof value !== 'string') return null\r\n\r\n    // Remove currency symbols, commas, spaces, and percentage signs\r\n    const cleaned = value.replace(/[$,\\s%]/g, '')\r\n\r\n    // Check if it looks like a number (possibly negative, possibly decimal)\r\n    if (!/^-?\\d+\\.?\\d*$/.test(cleaned)) return null\r\n\r\n    const num = parseFloat(cleaned)\r\n    return isNaN(num) ? null : num\r\n  }\r\n\r\n  #updateBodyColumnWidths() {\r\n    const rows = this.querySelectorAll('.ytz-datagrid-row')\r\n    rows.forEach(row => {\r\n      this.#columns.forEach((col, colIndex) => {\r\n        const cell = row.querySelector(`[data-col-index=\"${colIndex}\"]`)\r\n        if (cell) {\r\n          const storedWidth = this.#columnWidths.get(col.field)\r\n          if (storedWidth) {\r\n            cell.style.width = `${storedWidth}px`\r\n            cell.style.flex = 'none'\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  #handleSort(field) {\r\n    if (this.#sortState?.field === field) {\r\n      if (this.#sortState.direction === 'asc') {\r\n        this.#sortState.direction = 'desc'\r\n      } else if (this.#sortState.direction === 'desc') {\r\n        this.#sortState = null\r\n      }\r\n    } else {\r\n      this.#sortState = { field, direction: 'asc' }\r\n    }\r\n\r\n    this.#applyFiltersAndSort()\r\n    this.#renderHeader()\r\n    this.#initVirtualScroller()\r\n\r\n    this.dispatchEvent(new CustomEvent('sort', {\r\n      bubbles: true,\r\n      detail: { ...this.#sortState }\r\n    }))\r\n  }\r\n\r\n  #applyFiltersAndSort() {\r\n    let result = [...this.#data]\r\n\r\n    // Apply filters\r\n    for (const [field, value] of Object.entries(this.#filterState)) {\r\n      if (value) {\r\n        const searchLower = value.toLowerCase()\r\n        result = result.filter(row => {\r\n          const cellValue = String(row[field] ?? '').toLowerCase()\r\n          return cellValue.includes(searchLower)\r\n        })\r\n      }\r\n    }\r\n\r\n    // Apply sort\r\n    if (this.#sortState) {\r\n      const { field, direction } = this.#sortState\r\n      result.sort((a, b) => {\r\n        const aVal = a[field] ?? ''\r\n        const bVal = b[field] ?? ''\r\n\r\n        // Try to extract numeric values (handles currency, percentages, etc.)\r\n        const aNum = this.#extractNumber(aVal)\r\n        const bNum = this.#extractNumber(bVal)\r\n\r\n        let cmp\r\n        if (aNum !== null && bNum !== null) {\r\n          // Both values are numeric - compare as numbers\r\n          cmp = aNum - bNum\r\n        } else {\r\n          // Fall back to string comparison\r\n          cmp = String(aVal).localeCompare(String(bVal), undefined, { numeric: true })\r\n        }\r\n\r\n        return direction === 'asc' ? cmp : -cmp\r\n      })\r\n    }\r\n\r\n    this.#filteredData = result\r\n  }\r\n\r\n  #initVirtualScroller() {\r\n    // Guard: ensure DOM structure is ready\r\n    if (!this.#viewport || !this.#body) return\r\n\r\n    this.#virtualScroller?.destroy()\r\n\r\n    const rowHeight = parseInt(this.getAttribute('row-height')) || 40\r\n\r\n    this.#virtualScroller = createVirtualScroller({\r\n      container: this.#viewport,\r\n      content: this.#body,\r\n      itemCount: this.#filteredData.length,\r\n      itemHeight: rowHeight,\r\n      renderItem: (index) => this.#renderRow(index)\r\n    })\r\n  }\r\n\r\n  #renderRow(index) {\r\n    const rowData = this.#filteredData[index]\r\n    if (!rowData) return null\r\n\r\n    const row = document.createElement('div')\r\n    row.className = 'ytz-datagrid-row'\r\n    row.setAttribute('role', 'row')\r\n    row.setAttribute('data-row-index', String(index))\r\n    row.tabIndex = -1\r\n\r\n    this.#columns.forEach((col, colIndex) => {\r\n      const cell = document.createElement('div')\r\n      cell.className = 'ytz-datagrid-cell'\r\n      cell.setAttribute('role', 'gridcell')\r\n\r\n      // Use stored width or fall back to column attribute\r\n      const storedWidth = this.#columnWidths.get(col.field)\r\n      if (storedWidth) {\r\n        cell.style.width = `${storedWidth}px`\r\n        cell.style.flex = 'none'\r\n      } else if (col.width && col.width !== 'auto') {\r\n        cell.style.width = col.width\r\n        cell.style.flex = 'none'\r\n      }\r\n\r\n      cell.textContent = String(rowData[col.field] ?? '')\r\n      cell.setAttribute('data-col-index', String(colIndex))\r\n      row.appendChild(cell)\r\n    })\r\n\r\n    row.addEventListener('click', (e) => {\r\n      this.#focusedRow = index\r\n      // Determine which cell was clicked\r\n      const cell = e.target.closest('.ytz-datagrid-cell')\r\n      if (cell) {\r\n        const colIndex = parseInt(cell.getAttribute('data-col-index'), 10)\r\n        if (!isNaN(colIndex)) {\r\n          this.#focusedCol = colIndex\r\n        }\r\n      }\r\n      this.#updateFocus()\r\n      this.dispatchEvent(new CustomEvent('rowselect', {\r\n        bubbles: true,\r\n        detail: { row: rowData, index }\r\n      }))\r\n    })\r\n\r\n    return row\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    const maxRow = this.#filteredData.length - 1\r\n    const maxCol = this.#columns.length - 1\r\n\r\n    switch (e.key) {\r\n      case 'ArrowDown':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.min(maxRow, this.#focusedRow + 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'ArrowUp':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.max(0, this.#focusedRow - 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'ArrowRight':\r\n        e.preventDefault()\r\n        this.#focusedCol = Math.min(maxCol, this.#focusedCol + 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'ArrowLeft':\r\n        e.preventDefault()\r\n        this.#focusedCol = Math.max(0, this.#focusedCol - 1)\r\n        this.#updateFocus()\r\n        break\r\n      case 'Home':\r\n        e.preventDefault()\r\n        if (e.ctrlKey) {\r\n          this.#focusedRow = 0\r\n        }\r\n        this.#focusedCol = 0\r\n        this.#updateFocus()\r\n        break\r\n      case 'End':\r\n        e.preventDefault()\r\n        if (e.ctrlKey) {\r\n          this.#focusedRow = maxRow\r\n        }\r\n        this.#focusedCol = maxCol\r\n        this.#updateFocus()\r\n        break\r\n      case 'PageDown':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.min(maxRow, this.#focusedRow + 10)\r\n        this.#updateFocus()\r\n        break\r\n      case 'PageUp':\r\n        e.preventDefault()\r\n        this.#focusedRow = Math.max(0, this.#focusedRow - 10)\r\n        this.#updateFocus()\r\n        break\r\n      case 'Enter':\r\n        e.preventDefault()\r\n        this.dispatchEvent(new CustomEvent('rowactivate', {\r\n          bubbles: true,\r\n          detail: { row: this.#filteredData[this.#focusedRow], index: this.#focusedRow }\r\n        }))\r\n        break\r\n    }\r\n  }\r\n\r\n  #updateFocus() {\r\n    // Scroll row into view via virtual scroller\r\n    this.#virtualScroller?.scrollToIndex(this.#focusedRow)\r\n\r\n    // Apply focus styling after any scroll-triggered re-render completes\r\n    // (scrollToIndex may trigger scroll event  RAF render that clears DOM)\r\n    requestAnimationFrame(() => {\r\n      this.#applyFocusStyling()\r\n    })\r\n  }\r\n\r\n  #applyFocusStyling() {\r\n    // Update row focus styling\r\n    this.querySelectorAll('.ytz-datagrid-row').forEach(row => {\r\n      row.classList.remove('ytz-datagrid-row-focused')\r\n    })\r\n\r\n    const targetRow = this.querySelector(`[data-row-index=\"${this.#focusedRow}\"]`)\r\n    targetRow?.classList.add('ytz-datagrid-row-focused')\r\n\r\n    // Update cell focus\r\n    this.querySelectorAll('.ytz-datagrid-cell').forEach(cell => {\r\n      cell.classList.remove('ytz-datagrid-cell-focused')\r\n    })\r\n\r\n    const targetCell = targetRow?.querySelector(`[data-col-index=\"${this.#focusedCol}\"]`)\r\n    targetCell?.classList.add('ytz-datagrid-cell-focused')\r\n  }\r\n\r\n  /**\r\n   * Export data to CSV format.\r\n   * @returns {string} CSV string\r\n   */\r\n  exportCSV() {\r\n    const headers = this.#columns.map(col => `\"${col.header.replace(/\"/g, '\"\"')}\"`)\r\n    const rows = this.#filteredData.map(row => {\r\n      return this.#columns.map(col => {\r\n        const value = String(row[col.field] ?? '')\r\n        return `\"${value.replace(/\"/g, '\"\"')}\"`\r\n      }).join(',')\r\n    })\r\n    return [headers.join(','), ...rows].join('\\n')\r\n  }\r\n\r\n  /**\r\n   * Download data as CSV file.\r\n   * @param {string} filename - File name (default: 'data.csv')\r\n   */\r\n  downloadCSV(filename = 'data.csv') {\r\n    const csv = this.exportCSV()\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' })\r\n    const url = URL.createObjectURL(blob)\r\n    const link = document.createElement('a')\r\n    link.href = url\r\n    link.download = filename\r\n    link.click()\r\n    URL.revokeObjectURL(url)\r\n  }\r\n\r\n  // Property accessors\r\n  get data() {\r\n    return this.#data\r\n  }\r\n\r\n  set data(value) {\r\n    this.#data = Array.isArray(value) ? value : []\r\n    this.#applyFiltersAndSort()\r\n    this.#initVirtualScroller()\r\n  }\r\n\r\n  get sortState() {\r\n    return this.#sortState ? { ...this.#sortState } : null\r\n  }\r\n\r\n  get filteredData() {\r\n    return [...this.#filteredData]\r\n  }\r\n}\r\n\r\nregister('ytz-datagrid', YtzDatagrid)\r\n\r\nexport { YtzDatagrid, YtzDatagridColumn }\r\n","/**\r\n * Focus trap utility for modals/dialogs.\r\n * Keeps focus within a container element.\r\n *\r\n * @module @grimoire/yetzirah-core/utils/focus-trap\r\n * @internal Not exported from package\r\n */\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * Creates a focus trap for a container element.\r\n *\r\n * @param {HTMLElement} container - Element to trap focus within\r\n * @returns {{ activate: () => void, deactivate: () => void }}\r\n */\r\nexport function createFocusTrap(container) {\r\n  /** @param {KeyboardEvent} e */\r\n  function handleKeydown(e) {\r\n    if (e.key !== 'Tab') return\r\n\r\n    const focusable = [...container.querySelectorAll(FOCUSABLE)]\r\n      .filter(el => !el.hidden && !el.closest('[hidden]')) // visible only\r\n\r\n    if (focusable.length === 0) return\r\n\r\n    const first = focusable[0]\r\n    const last = focusable[focusable.length - 1]\r\n\r\n    if (e.shiftKey && document.activeElement === first) {\r\n      e.preventDefault()\r\n      last.focus()\r\n    } else if (!e.shiftKey && document.activeElement === last) {\r\n      e.preventDefault()\r\n      first.focus()\r\n    }\r\n  }\r\n\r\n  return {\r\n    activate() {\r\n      container.addEventListener('keydown', handleKeydown)\r\n    },\r\n    deactivate() {\r\n      container.removeEventListener('keydown', handleKeydown)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-dialog - Modal dialog Web Component.\r\n * Provides focus trap, scroll lock, escape-to-close, and backdrop dismiss.\r\n *\r\n * @module @grimoire/yetzirah-core/dialog\r\n * @example\r\n * <ytz-dialog id=\"my-dialog\" class=\"pa4 bg-white br3 shadow-2\">\r\n *   <h2>Dialog Title</h2>\r\n *   <p>Content goes here.</p>\r\n *   <button onclick=\"this.closest('ytz-dialog').removeAttribute('open')\">Close</button>\r\n * </ytz-dialog>\r\n *\r\n * @example\r\n * // Open dialog\r\n * document.getElementById('my-dialog').setAttribute('open', '')\r\n *\r\n * @example\r\n * // Static dialog (no backdrop dismiss)\r\n * <ytz-dialog static>...</ytz-dialog>\r\n */\r\n\r\nimport { createFocusTrap } from './utils/focus-trap.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * @class YtzDialog\r\n * @extends HTMLElement\r\n */\r\nclass YtzDialog extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #previousFocus = null\r\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\r\n  #focusTrap = null\r\n  /** @type {string} */\r\n  #previousOverflow = ''\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'dialog')\r\n    this.setAttribute('aria-modal', 'true')\r\n    this.hidden = !this.hasAttribute('open')\r\n\r\n    // Set up backdrop click handler\r\n    this.addEventListener('click', this.#handleBackdropClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleBackdropClick)\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      newVal !== null ? this.#open() : this.#close()\r\n    }\r\n  }\r\n\r\n  #open() {\r\n    // Save current focus for restoration\r\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\r\n\r\n    // Show dialog\r\n    this.hidden = false\r\n\r\n    // Lock body scroll\r\n    this.#previousOverflow = document.body.style.overflow\r\n    document.body.style.overflow = 'hidden'\r\n\r\n    // Set up focus trap\r\n    this.#focusTrap = createFocusTrap(this)\r\n    this.#focusTrap.activate()\r\n\r\n    // Add escape key listener\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    // Focus first focusable element (or dialog itself)\r\n    requestAnimationFrame(() => {\r\n      const firstFocusable = this.querySelector(FOCUSABLE)\r\n      if (firstFocusable) {\r\n        /** @type {HTMLElement} */ (firstFocusable).focus()\r\n      } else {\r\n        this.setAttribute('tabindex', '-1')\r\n        this.focus()\r\n      }\r\n    })\r\n  }\r\n\r\n  #close() {\r\n    this.hidden = true\r\n    this.#cleanup()\r\n\r\n    // Dispatch close event\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #cleanup() {\r\n    // Restore body scroll\r\n    document.body.style.overflow = this.#previousOverflow\r\n\r\n    // Deactivate focus trap\r\n    this.#focusTrap?.deactivate()\r\n    this.#focusTrap = null\r\n\r\n    // Remove escape listener\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n\r\n    // Restore focus\r\n    this.#previousFocus?.focus()\r\n    this.#previousFocus = null\r\n  }\r\n\r\n  /** @param {KeyboardEvent} e */\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\r\n      e.preventDefault()\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @param {MouseEvent} e */\r\n  #handleBackdropClick = (e) => {\r\n    // Only close if clicking directly on dialog element (backdrop), not children\r\n    if (e.target === this && !this.hasAttribute('static')) {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close the dialog programmatically.\r\n   */\r\n  close() {\r\n    this.removeAttribute('open')\r\n  }\r\n\r\n  /**\r\n   * Show the dialog programmatically.\r\n   */\r\n  showModal() {\r\n    this.setAttribute('open', '')\r\n  }\r\n}\r\n\r\nregister('ytz-dialog', YtzDialog)\r\n\r\nexport { YtzDialog }\r\n","/**\r\n * ytz-disclosure - Expandable content Web Component.\r\n * Toggles content visibility with proper ARIA attributes.\r\n *\r\n * @module @grimoire/yetzirah-core/disclosure\r\n * @example\r\n * <ytz-disclosure>\r\n *   <button>Show Details</button>\r\n *   <div>Hidden content...</div>\r\n * </ytz-disclosure>\r\n *\r\n * @example\r\n * // Initially open\r\n * <ytz-disclosure open>\r\n *   <button>Hide Details</button>\r\n *   <div>Visible content...</div>\r\n * </ytz-disclosure>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\nlet disclosureId = 0\r\n\r\n/**\r\n * @class YtzDisclosure\r\n * @extends HTMLElement\r\n */\r\nclass YtzDisclosure extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-disclosure-${++disclosureId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA linkage\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the disclosure open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-disclosure', YtzDisclosure)\r\n\r\nexport { YtzDisclosure }\r\n","/**\r\n * ytz-drawer - Slide-in panel Web Component.\r\n * Inherits modal behavior: focus trap, scroll lock, escape-to-close, backdrop dismiss.\r\n *\r\n * @module @grimoire/yetzirah-core/drawer\r\n * @example\r\n * <ytz-drawer id=\"menu\" anchor=\"left\" class=\"w5 h-100 bg-white shadow-2\">\r\n *   <nav class=\"pa4\">\r\n *     <a href=\"/home\">Home</a>\r\n *   </nav>\r\n *   <button onclick=\"this.closest('ytz-drawer').close()\">Close</button>\r\n * </ytz-drawer>\r\n *\r\n * @example\r\n * // Open drawer\r\n * document.getElementById('menu').open = true\r\n *\r\n * @example\r\n * // Different anchors\r\n * <ytz-drawer anchor=\"right\">...</ytz-drawer>\r\n * <ytz-drawer anchor=\"top\">...</ytz-drawer>\r\n * <ytz-drawer anchor=\"bottom\">...</ytz-drawer>\r\n */\r\n\r\nimport { createFocusTrap } from './utils/focus-trap.js'\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/** @type {string[]} Valid anchor positions */\r\nconst VALID_ANCHORS = ['left', 'right', 'top', 'bottom']\r\n\r\n/**\r\n * @class YtzDrawer\r\n * @extends HTMLElement\r\n */\r\nclass YtzDrawer extends HTMLElement {\r\n  static observedAttributes = ['open', 'anchor']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #previousFocus = null\r\n  /** @type {{ activate: () => void, deactivate: () => void }|null} */\r\n  #focusTrap = null\r\n  /** @type {string} */\r\n  #previousOverflow = ''\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'dialog')\r\n    this.setAttribute('aria-modal', 'true')\r\n    this.hidden = !this.hasAttribute('open')\r\n\r\n    if (!this.hasAttribute('anchor')) {\r\n      this.setAttribute('anchor', 'left')\r\n    }\r\n\r\n    this.addEventListener('click', this.#handleBackdropClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleBackdropClick)\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      newVal !== null ? this.#open() : this.#close()\r\n    }\r\n    if (name === 'anchor' && newVal && !VALID_ANCHORS.includes(newVal)) {\r\n      this.setAttribute('anchor', 'left')\r\n    }\r\n  }\r\n\r\n  #open() {\r\n    this.#previousFocus = /** @type {HTMLElement} */ (document.activeElement)\r\n    this.hidden = false\r\n    this.#previousOverflow = document.body.style.overflow\r\n    document.body.style.overflow = 'hidden'\r\n    this.#focusTrap = createFocusTrap(this)\r\n    this.#focusTrap.activate()\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    requestAnimationFrame(() => {\r\n      const firstFocusable = this.querySelector(FOCUSABLE)\r\n      if (firstFocusable) {\r\n        /** @type {HTMLElement} */ (firstFocusable).focus()\r\n      } else {\r\n        this.setAttribute('tabindex', '-1')\r\n        this.focus()\r\n      }\r\n    })\r\n  }\r\n\r\n  #close() {\r\n    this.hidden = true\r\n    this.#cleanup()\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #cleanup() {\r\n    document.body.style.overflow = this.#previousOverflow\r\n    this.#focusTrap?.deactivate()\r\n    this.#focusTrap = null\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.#previousFocus?.focus()\r\n    this.#previousFocus = null\r\n  }\r\n\r\n  /** @param {KeyboardEvent} e */\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.hasAttribute('open')) {\r\n      e.preventDefault()\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @param {MouseEvent} e */\r\n  #handleBackdropClick = (e) => {\r\n    if (e.target === this && !this.hasAttribute('static')) {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  /** @type {boolean} */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    value ? this.setAttribute('open', '') : this.removeAttribute('open')\r\n  }\r\n\r\n  /** @type {'left'|'right'|'top'|'bottom'} */\r\n  get anchor() {\r\n    return /** @type {'left'|'right'|'top'|'bottom'} */ (this.getAttribute('anchor') || 'left')\r\n  }\r\n\r\n  set anchor(value) {\r\n    if (VALID_ANCHORS.includes(value)) this.setAttribute('anchor', value)\r\n  }\r\n\r\n  /** Close the drawer programmatically. */\r\n  close() {\r\n    this.removeAttribute('open')\r\n  }\r\n\r\n  /** Show the drawer programmatically. */\r\n  show() {\r\n    this.setAttribute('open', '')\r\n  }\r\n}\r\n\r\nregister('ytz-drawer', YtzDrawer)\r\n\r\nexport { YtzDrawer }\r\n","/**\r\n * ytz-icon-button - Icon button Web Component.\r\n * A button variant requiring aria-label for accessibility.\r\n *\r\n * @module @grimoire/yetzirah-core/icon-button\r\n * @example\r\n * <ytz-icon-button aria-label=\"Close\">\r\n *   <svg>...</svg>\r\n * </ytz-icon-button>\r\n *\r\n * @example\r\n * // With tooltip integration\r\n * <ytz-icon-button aria-label=\"Settings\" tooltip>\r\n *   <svg>...</svg>\r\n * </ytz-icon-button>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-icon-button aria-label=\"Delete\" disabled>\r\n *   <svg>...</svg>\r\n * </ytz-icon-button>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/** @type {string} Default classes for icon button */\r\nconst DEFAULTS = 'pointer bn bg-transparent pa0 dib'\r\n\r\n/**\r\n * @class YtzIconButton\r\n * @extends HTMLElement\r\n */\r\nclass YtzIconButton extends HTMLElement {\r\n  static observedAttributes = ['disabled', 'aria-label', 'tooltip', 'class']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #tooltipEl = null\r\n\r\n  connectedCallback() {\r\n    this.#render()\r\n    this.#checkAccessibility()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#removeTooltip()\r\n    this.removeEventListener('mouseenter', this.#showTooltip)\r\n    this.removeEventListener('mouseleave', this.#hideTooltip)\r\n    this.removeEventListener('focus', this.#showTooltip)\r\n    this.removeEventListener('blur', this.#hideTooltip)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected) {\r\n      this.#render()\r\n      if (name === 'aria-label') {\r\n        this.#checkAccessibility()\r\n      }\r\n    }\r\n  }\r\n\r\n  #checkAccessibility() {\r\n    if (!this.hasAttribute('aria-label')) {\r\n      console.warn('ytz-icon-button: aria-label is required for accessibility')\r\n    }\r\n  }\r\n\r\n  #render() {\r\n    const userClass = this.getAttribute('class') || ''\r\n    const button = this.querySelector('button.ytz-icon-button-inner') || document.createElement('button')\r\n    const isNew = !button.parentNode\r\n\r\n    button.type = 'button'\r\n    button.className = 'ytz-icon-button-inner ' + DEFAULTS + (userClass ? ' ' + userClass : '')\r\n    button.disabled = this.hasAttribute('disabled')\r\n\r\n    // Copy aria-label to inner button\r\n    const label = this.getAttribute('aria-label')\r\n    if (label) {\r\n      button.setAttribute('aria-label', label)\r\n    }\r\n\r\n    // Copy aria-* and data-* attributes\r\n    for (const attr of this.attributes) {\r\n      if ((attr.name.startsWith('aria-') || attr.name.startsWith('data-')) && attr.name !== 'aria-label') {\r\n        button.setAttribute(attr.name, attr.value)\r\n      }\r\n    }\r\n\r\n    if (isNew) {\r\n      // Move icon content into button\r\n      while (this.firstChild && this.firstChild !== button) {\r\n        button.appendChild(this.firstChild)\r\n      }\r\n      this.appendChild(button)\r\n    }\r\n\r\n    // Setup tooltip if requested\r\n    this.#setupTooltip()\r\n  }\r\n\r\n  #setupTooltip() {\r\n    // Remove old listeners\r\n    this.removeEventListener('mouseenter', this.#showTooltip)\r\n    this.removeEventListener('mouseleave', this.#hideTooltip)\r\n    this.removeEventListener('focus', this.#showTooltip)\r\n    this.removeEventListener('blur', this.#hideTooltip)\r\n\r\n    if (this.hasAttribute('tooltip')) {\r\n      this.addEventListener('mouseenter', this.#showTooltip)\r\n      this.addEventListener('mouseleave', this.#hideTooltip)\r\n      this.addEventListener('focus', this.#showTooltip)\r\n      this.addEventListener('blur', this.#hideTooltip)\r\n    }\r\n  }\r\n\r\n  #showTooltip = () => {\r\n    const label = this.getAttribute('aria-label')\r\n    if (!label) return\r\n\r\n    this.#tooltipEl = document.createElement('div')\r\n    this.#tooltipEl.className = 'ytz-icon-button-tooltip'\r\n    this.#tooltipEl.textContent = label\r\n    this.#tooltipEl.setAttribute('role', 'tooltip')\r\n\r\n    // Position tooltip below button\r\n    // Use inner button for rect since parent may have display:contents\r\n    const button = this.querySelector('button.ytz-icon-button-inner')\r\n    const rect = (button || this).getBoundingClientRect()\r\n    this.#tooltipEl.style.cssText = `\r\n      position: fixed;\r\n      left: ${rect.left + rect.width / 2}px;\r\n      top: ${rect.bottom + 4}px;\r\n      transform: translateX(-50%);\r\n      z-index: 9999;\r\n    `\r\n\r\n    document.body.appendChild(this.#tooltipEl)\r\n  }\r\n\r\n  #hideTooltip = () => {\r\n    this.#removeTooltip()\r\n  }\r\n\r\n  #removeTooltip() {\r\n    if (this.#tooltipEl) {\r\n      this.#tooltipEl.remove()\r\n      this.#tooltipEl = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the disabled state.\r\n   * @type {boolean}\r\n   */\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(value) {\r\n    if (value) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-icon-button', YtzIconButton)\r\n\r\nexport { YtzIconButton }\r\n","/**\r\n * ytz-listbox - Keyboard-navigable list selection with single/multi-select modes.\r\n * @module @grimoire/yetzirah-core/listbox\r\n */\r\n\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet listboxId = 0\r\n\r\nclass YtzListbox extends HTMLElement {\r\n  static observedAttributes = ['multiple', 'disabled']\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n\r\n  connectedCallback() { this.#setup() }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'multiple') this.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n\r\n  get value() {\r\n    return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '')\r\n  }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-listbox-${++listboxId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.setAttribute('role', 'listbox')\r\n    if (this.multiple) this.setAttribute('aria-multiselectable', 'true')\r\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '0')\r\n\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n    this.addEventListener('focus', this.#handleFocus)\r\n\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n\r\n  #cleanup() {\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    this.removeEventListener('focus', this.#handleFocus)\r\n  }\r\n\r\n  #handleFocus = () => {\r\n    const selected = this.querySelector('ytz-option[selected]:not([disabled])')\r\n    const first = this.querySelector('ytz-option:not([disabled])')\r\n    ;(selected || first)?.focus()\r\n  }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) {\r\n        e.preventDefault()\r\n        this.#selectOption(focused)\r\n      }\r\n    }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n    }\r\n    this.#updateSelectedState()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(value)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n\r\n  selectAll() {\r\n    if (!this.multiple) return\r\n    this.querySelectorAll('ytz-option:not([disabled])').forEach(opt => {\r\n      const value = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (value) this.#selected.add(value)\r\n    })\r\n    this.#updateSelectedState()\r\n  }\r\n}\r\n\r\nregister('ytz-listbox', YtzListbox)\r\n\r\nexport { YtzListbox }\r\n","/**\r\n * ytz-menu - Dropdown menu with keyboard navigation.\r\n * Opens on trigger click, positions relative to trigger, closes on click outside/escape.\r\n *\r\n * @module @grimoire/yetzirah-core/menu\r\n * @example\r\n * <ytz-menu>\r\n *   <button slot=\"trigger\">Open Menu</button>\r\n *   <ytz-menuitem>Edit</ytz-menuitem>\r\n *   <ytz-menuitem>Delete</ytz-menuitem>\r\n * </ytz-menu>\r\n *\r\n * @example\r\n * <ytz-menu placement=\"bottom-start\">\r\n *   <button slot=\"trigger\">Actions</button>\r\n *   <ytz-menuitem value=\"edit\">Edit</ytz-menuitem>\r\n *   <ytz-menuitem disabled>Archive</ytz-menuitem>\r\n * </ytz-menu>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { clickOutside } from './utils/click-outside.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet menuId = 0\r\n\r\n/**\r\n * @class YtzMenu\r\n * @extends HTMLElement\r\n */\r\nclass YtzMenu extends HTMLElement {\r\n  static observedAttributes = ['open', 'placement']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #popup = null\r\n  /** @type {string|null} */\r\n  #menuId = null\r\n  /** @type {ReturnType<typeof createKeyNav>|null} */\r\n  #keyNav = null\r\n  /** @type {ReturnType<typeof clickOutside>|null} */\r\n  #clickOutsideHandler = null\r\n  /** @type {number} */\r\n  #lastCloseTime = 0\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#showMenu() : this.#hideMenu()\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n\r\n  /** @returns {string} */\r\n  get placement() { return this.getAttribute('placement') || 'bottom-start' }\r\n  set placement(v) { v ? this.setAttribute('placement', v) : this.removeAttribute('placement') }\r\n\r\n  #setup() {\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    if (!this.#trigger) return\r\n\r\n    this.#menuId = `ytz-menu-${++menuId}`\r\n\r\n    // Create popup wrapper for menu items\r\n    this.#popup = document.createElement('div')\r\n    this.#popup.setAttribute('role', 'menu')\r\n    this.#popup.id = this.#menuId\r\n    this.#popup.hidden = true\r\n\r\n    // Move all menuitem children into popup\r\n    const items = [...this.querySelectorAll('ytz-menuitem')]\r\n    items.forEach(item => this.#popup.appendChild(item))\r\n    this.appendChild(this.#popup)\r\n\r\n    // ARIA on trigger\r\n    this.#trigger.setAttribute('aria-haspopup', 'menu')\r\n    this.#trigger.setAttribute('aria-controls', this.#menuId)\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n\r\n    // Keyboard navigation\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#popup.querySelectorAll('ytz-menuitem:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.removeEventListener('keydown', this.#handleKeyDown)\r\n    this.#clickOutsideHandler?.destroy()\r\n  }\r\n\r\n  #handleTriggerClick = () => { this.open = !this.open }\r\n\r\n  #handleKeyDown = (e) => {\r\n    if (!this.open) return\r\n\r\n    if (e.key === 'Escape') {\r\n      e.preventDefault()\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n      return\r\n    }\r\n\r\n    this.#keyNav?.handleKeyDown(e)\r\n\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#popup?.querySelector('ytz-menuitem:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) {\r\n        e.preventDefault()\r\n        focused.click()\r\n      }\r\n    }\r\n  }\r\n\r\n  #showMenu() {\r\n    if (!this.#trigger || !this.#popup) return\r\n    // Prevent re-opening if we just closed (e.g., click-outside + toggle in same event)\r\n    if (performance.now() - this.#lastCloseTime < 10) {\r\n      // Remove attribute to keep state consistent since we're blocking the open\r\n      this.removeAttribute('open')\r\n      return\r\n    }\r\n\r\n    // Pre-position as fixed but invisible to get correct layout\r\n    this.#popup.style.position = 'fixed'\r\n    this.#popup.style.visibility = 'hidden'\r\n    this.#popup.hidden = false\r\n\r\n    // Force synchronous reflow so popup has layout dimensions\r\n    void this.#popup.offsetHeight\r\n\r\n    // Calculate and apply position\r\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\r\n    const { x, y } = position(this.#trigger, this.#popup, {\r\n      placement: basePlacement,\r\n      offset: 4\r\n    })\r\n    this.#popup.style.left = `${x}px`\r\n    this.#popup.style.top = `${y}px`\r\n\r\n    // Now make visible\r\n    this.#popup.style.visibility = ''\r\n    this.#trigger.setAttribute('aria-expanded', 'true')\r\n\r\n    const firstItem = this.#popup.querySelector('ytz-menuitem:not([disabled])')\r\n    firstItem?.focus()\r\n\r\n    // Defer click-outside setup to next event loop tick to avoid triggering on same click\r\n    setTimeout(() => {\r\n      // Only set up if still open (user might have closed it already)\r\n      if (!this.open) return\r\n      this.#clickOutsideHandler = clickOutside(this.#popup, () => {\r\n        this.open = false\r\n      }, { ignore: this.#trigger })\r\n    }, 0)\r\n\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hideMenu() {\r\n    if (!this.#trigger || !this.#popup) return\r\n\r\n    // Record close time to prevent re-opening in the same event\r\n    this.#lastCloseTime = performance.now()\r\n\r\n    this.#popup.hidden = true\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n\r\n    this.#clickOutsideHandler?.destroy()\r\n    this.#clickOutsideHandler = null\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#popup) return\r\n\r\n    const basePlacement = this.placement.split('-')[0] || 'bottom'\r\n    const { x, y } = position(this.#trigger, this.#popup, {\r\n      placement: basePlacement,\r\n      offset: 4\r\n    })\r\n\r\n    this.#popup.style.position = 'fixed'\r\n    this.#popup.style.left = `${x}px`\r\n    this.#popup.style.top = `${y}px`\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n}\r\n\r\n/**\r\n * ytz-menuitem - Individual menu item.\r\n * @attr disabled - When present, item is not selectable\r\n * @attr value - Optional value for select event\r\n */\r\nclass YtzMenuItem extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'menuitem')\r\n    if (!this.hasAttribute('tabindex') && !this.hasAttribute('disabled')) {\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n    if (this.hasAttribute('disabled')) {\r\n      this.setAttribute('aria-disabled', 'true')\r\n    }\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = (e) => {\r\n    if (this.hasAttribute('disabled')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      return\r\n    }\r\n\r\n    const menu = this.closest('ytz-menu')\r\n    if (menu) {\r\n      this.dispatchEvent(new CustomEvent('select', {\r\n        bubbles: true,\r\n        detail: { value: this.getAttribute('value') || this.textContent?.trim() }\r\n      }))\r\n      menu.open = false\r\n    }\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) {\r\n    if (v) {\r\n      this.setAttribute('disabled', '')\r\n      this.setAttribute('aria-disabled', 'true')\r\n      this.removeAttribute('tabindex')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n      this.removeAttribute('aria-disabled')\r\n      this.setAttribute('tabindex', '-1')\r\n    }\r\n  }\r\n\r\n  /** @returns {string|null} */\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n}\r\n\r\nregister('ytz-menu', YtzMenu)\r\nregister('ytz-menuitem', YtzMenuItem)\r\n\r\nexport { YtzMenu, YtzMenuItem }\r\n","/**\r\n * ytz-popover - Click-triggered positioned content Web Component.\r\n * Shows interactive content anchored to a trigger element.\r\n *\r\n * @module @grimoire/yetzirah-core/popover\r\n * @example\r\n * <ytz-popover>\r\n *   <button>Open menu</button>\r\n *   <div slot=\"content\">\r\n *     <p>Popover content with interactive elements</p>\r\n *     <button onclick=\"this.closest('ytz-popover').open = false\">Close</button>\r\n *   </div>\r\n * </ytz-popover>\r\n *\r\n * @example\r\n * // With placement\r\n * <ytz-popover placement=\"bottom\">\r\n *   <button>Settings</button>\r\n *   <div slot=\"content\" class=\"pa3 bg-white shadow-2 br2\">\r\n *     <label class=\"db mb2\">\r\n *       <input type=\"checkbox\"> Enable notifications\r\n *     </label>\r\n *     <button>Save</button>\r\n *   </div>\r\n * </ytz-popover>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet popoverId = 0\r\n\r\n/** @type {string} Selector for focusable elements */\r\nconst FOCUSABLE = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\r\n\r\n/**\r\n * @class YtzPopover\r\n * @extends HTMLElement\r\n */\r\nclass YtzPopover extends HTMLElement {\r\n  static observedAttributes = ['open', 'placement', 'offset']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    // Check initial open state\r\n    if (this.hasAttribute('open')) {\r\n      this.#show()\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n\r\n    if (name === 'open') {\r\n      newVal !== null ? this.#show() : this.#hide()\r\n    } else if (this.hasAttribute('open')) {\r\n      // Reposition if placement/offset changed while open\r\n      this.#updatePosition()\r\n    }\r\n  }\r\n\r\n  /** @returns {'top'|'bottom'|'left'|'right'} */\r\n  get placement() {\r\n    return this.getAttribute('placement') || 'bottom'\r\n  }\r\n\r\n  set placement(value) {\r\n    this.setAttribute('placement', value)\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get offset() {\r\n    return parseInt(this.getAttribute('offset') || '8', 10)\r\n  }\r\n\r\n  set offset(value) {\r\n    this.setAttribute('offset', String(value))\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\r\n    this.#trigger = this.firstElementChild\r\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\r\n\r\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\r\n\r\n    // Generate unique ID for content\r\n    this.#contentId = this.#content.id || `ytz-popover-${++popoverId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA - popover uses aria-expanded on trigger\r\n    this.#trigger.setAttribute('aria-haspopup', 'dialog')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n\r\n    // Content hidden initially\r\n    this.#content.hidden = true\r\n\r\n    // Click listener on trigger\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => {\r\n    e.stopPropagation()\r\n    this.open = !this.open\r\n  }\r\n\r\n  #handleOutsideClick = (e) => {\r\n    // Close if click is outside popover content and trigger\r\n    if (!this.#content?.contains(e.target) && !this.#trigger?.contains(e.target)) {\r\n      this.open = false\r\n    }\r\n  }\r\n\r\n  #handleEscape = (e) => {\r\n    if (e.key === 'Escape' && this.open) {\r\n      e.preventDefault()\r\n      this.open = false\r\n      // Return focus to trigger\r\n      this.#trigger?.focus()\r\n    }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#content) return\r\n\r\n    // Update ARIA\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n\r\n    // Show content\r\n    this.#content.hidden = false\r\n    this.#updatePosition()\r\n\r\n    // Add listeners for dismiss\r\n    // Use setTimeout to avoid immediate close from the same click\r\n    setTimeout(() => {\r\n      document.addEventListener('click', this.#handleOutsideClick)\r\n    }, 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n\r\n    // Reposition on scroll/resize\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    // Focus first focusable element in content\r\n    requestAnimationFrame(() => {\r\n      const focusable = this.#content?.querySelector(FOCUSABLE)\r\n      if (focusable) {\r\n        /** @type {HTMLElement} */ (focusable).focus()\r\n      }\r\n    })\r\n\r\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#content) return\r\n\r\n    // Update ARIA\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n\r\n    // Hide content\r\n    this.#content.hidden = true\r\n\r\n    // Remove listeners\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\r\n      placement: this.placement,\r\n      offset: this.offset\r\n    })\r\n\r\n    // Position popover fixed relative to viewport\r\n    this.#content.style.position = 'fixed'\r\n    this.#content.style.left = `${x}px`\r\n    this.#content.style.top = `${y}px`\r\n\r\n    // Set data attribute for CSS styling based on actual placement\r\n    this.#content.dataset.placement = finalPlacement\r\n  }\r\n\r\n  // Public API\r\n\r\n  /** Show the popover programmatically */\r\n  show() {\r\n    this.open = true\r\n  }\r\n\r\n  /** Hide the popover programmatically */\r\n  hide() {\r\n    this.open = false\r\n  }\r\n\r\n  /** Toggle the popover open/closed */\r\n  toggle() {\r\n    this.open = !this.open\r\n  }\r\n}\r\n\r\nregister('ytz-popover', YtzPopover)\r\n\r\nexport { YtzPopover }\r\n","/**\r\n * ytz-select - Dropdown select with trigger button and listbox.\r\n * @module @grimoire/yetzirah-core/select\r\n */\r\nimport { position } from './utils/position.js'\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet selectId = 0\r\n\r\nclass YtzSelect extends HTMLElement {\r\n  static observedAttributes = ['open', 'multiple', 'disabled', 'placeholder']\r\n  #trigger = null\r\n  #listbox = null\r\n  #keyNav = null\r\n  #selected = new Set()\r\n  #id = null\r\n  #customTrigger = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    if (this.hasAttribute('open')) this.#show()\r\n    if (this.disabled) this.#updateDisabledState()\r\n  }\r\n  disconnectedCallback() { this.#cleanup() }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'open') newVal !== null ? this.#show() : this.#hide()\r\n    if (name === 'multiple') this.#listbox?.setAttribute('aria-multiselectable', newVal !== null ? 'true' : 'false')\r\n    if (name === 'disabled') this.#updateDisabledState()\r\n  }\r\n\r\n  get open() { return this.hasAttribute('open') }\r\n  set open(v) { v ? this.setAttribute('open', '') : this.removeAttribute('open') }\r\n  get multiple() { return this.hasAttribute('multiple') }\r\n  set multiple(v) { v ? this.setAttribute('multiple', '') : this.removeAttribute('multiple') }\r\n  get disabled() { return this.hasAttribute('disabled') }\r\n  set disabled(v) { v ? this.setAttribute('disabled', '') : this.removeAttribute('disabled') }\r\n  get placeholder() { return this.getAttribute('placeholder') || 'Select...' }\r\n  set placeholder(v) { this.setAttribute('placeholder', v) }\r\n\r\n  get value() { return this.multiple ? [...this.#selected] : ([...this.#selected][0] || '') }\r\n  set value(v) {\r\n    this.#selected.clear()\r\n    if (Array.isArray(v)) v.forEach(val => this.#selected.add(val))\r\n    else if (v) this.#selected.add(v)\r\n    this.#updateSelectedState()\r\n    this.#updateTriggerText()\r\n  }\r\n\r\n  get options() { return [...this.querySelectorAll('ytz-option')] }\r\n  get selectedOptions() { return [...this.querySelectorAll('ytz-option[selected]')] }\r\n\r\n  #setup() {\r\n    this.#id = `ytz-select-${++selectId}`\r\n    if (!this.id) this.id = this.#id\r\n    this.#trigger = this.querySelector('[slot=\"trigger\"]')\r\n    this.#customTrigger = !!this.#trigger\r\n    if (!this.#trigger) {\r\n      this.#trigger = document.createElement('button')\r\n      this.#trigger.setAttribute('slot', 'trigger')\r\n      this.#trigger.className = this.getAttribute('trigger-class') || ''\r\n      this.prepend(this.#trigger)\r\n    }\r\n    this.#listbox = document.createElement('div')\r\n    this.#listbox.id = `${this.#id}-listbox`\r\n    this.#listbox.setAttribute('role', 'listbox')\r\n    this.#listbox.hidden = true\r\n    if (this.multiple) this.#listbox.setAttribute('aria-multiselectable', 'true')\r\n    this.querySelectorAll('ytz-option').forEach(opt => this.#listbox.appendChild(opt))\r\n    this.appendChild(this.#listbox)\r\n    this.#trigger.setAttribute('aria-haspopup', 'listbox')\r\n    this.#trigger.setAttribute('aria-expanded', 'false')\r\n    this.#trigger.setAttribute('aria-controls', this.#listbox.id)\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.#listbox.querySelectorAll('ytz-option:not([disabled])')],\r\n      { orientation: 'vertical', wrap: true, autoActivate: false }\r\n    )\r\n    this.querySelectorAll('ytz-option[selected]').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      if (val) this.#selected.add(val)\r\n    })\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.#trigger.addEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger.addEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox.addEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.addEventListener('option-click', this.#handleOptionClick)\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('click', this.#handleTriggerClick)\r\n    this.#trigger?.removeEventListener('keydown', this.#handleTriggerKeyDown)\r\n    this.#listbox?.removeEventListener('keydown', this.#handleListboxKeyDown)\r\n    this.removeEventListener('option-click', this.#handleOptionClick)\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n  }\r\n\r\n  #handleTriggerClick = (e) => { if (this.disabled) return; e.stopPropagation(); this.open = !this.open }\r\n  #handleTriggerKeyDown = (e) => {\r\n    if (this.disabled) return\r\n    if (['ArrowDown', 'ArrowUp', 'Enter', ' '].includes(e.key)) { e.preventDefault(); this.open = true }\r\n  }\r\n\r\n  #handleListboxKeyDown = (e) => {\r\n    this.#keyNav?.handleKeyDown(e)\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      const focused = this.#listbox.querySelector('ytz-option:focus')\r\n      if (focused && !focused.hasAttribute('disabled')) { e.preventDefault(); this.#selectOption(focused) }\r\n    }\r\n    if (e.key === 'Tab') { e.preventDefault(); this.open = false; this.#trigger?.focus() }\r\n  }\r\n\r\n  #handleOptionClick = (e) => {\r\n    if (this.disabled) return\r\n    const option = e.detail?.option\r\n    if (option && !option.hasAttribute('disabled')) this.#selectOption(option)\r\n  }\r\n\r\n  #handleOutsideClick = (e) => { if (!this.contains(e.target)) this.open = false }\r\n  #handleEscape = (e) => { if (e.key === 'Escape' && this.open) { e.preventDefault(); this.open = false; this.#trigger?.focus() } }\r\n\r\n  #selectOption(option) {\r\n    const value = option.getAttribute('value') || option.textContent?.trim()\r\n    if (!value) return\r\n    if (this.multiple) {\r\n      this.#selected.has(value) ? this.#selected.delete(value) : this.#selected.add(value)\r\n    } else {\r\n      this.#selected.clear()\r\n      this.#selected.add(value)\r\n      this.open = false\r\n      this.#trigger?.focus()\r\n    }\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: this.value, option } }))\r\n  }\r\n\r\n  #updateSelectedState() {\r\n    this.querySelectorAll('ytz-option').forEach(opt => {\r\n      const val = opt.getAttribute('value') || opt.textContent?.trim()\r\n      const isSelected = this.#selected.has(val)\r\n      opt.toggleAttribute('selected', isSelected)\r\n      opt.setAttribute('aria-selected', String(isSelected))\r\n    })\r\n  }\r\n\r\n  #updateTriggerText() {\r\n    if (!this.#trigger || this.#customTrigger) return\r\n    const selected = this.selectedOptions\r\n    if (selected.length === 0) this.#trigger.textContent = this.placeholder\r\n    else if (this.multiple) this.#trigger.textContent = selected.map(o => o.textContent?.trim()).join(', ')\r\n    else this.#trigger.textContent = selected[0]?.textContent?.trim() || this.placeholder\r\n  }\r\n\r\n  #updateDisabledState() {\r\n    if (this.disabled) { this.#trigger?.setAttribute('disabled', ''); this.#trigger?.setAttribute('aria-disabled', 'true') }\r\n    else { this.#trigger?.removeAttribute('disabled'); this.#trigger?.removeAttribute('aria-disabled') }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#listbox || this.disabled) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'true')\r\n    this.#listbox.hidden = false\r\n    this.#updatePosition()\r\n    setTimeout(() => document.addEventListener('click', this.#handleOutsideClick), 0)\r\n    document.addEventListener('keydown', this.#handleEscape)\r\n    requestAnimationFrame(() => {\r\n      const selected = this.#listbox.querySelector('ytz-option[selected]:not([disabled])')\r\n      const first = this.#listbox.querySelector('ytz-option:not([disabled])')\r\n      ;(selected || first)?.focus()\r\n    })\r\n    this.dispatchEvent(new CustomEvent('open', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#listbox) return\r\n    this.#trigger?.setAttribute('aria-expanded', 'false')\r\n    this.#listbox.hidden = true\r\n    document.removeEventListener('click', this.#handleOutsideClick)\r\n    document.removeEventListener('keydown', this.#handleEscape)\r\n    this.dispatchEvent(new CustomEvent('close', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#listbox) return\r\n    const { x, y, placement } = position(this.#trigger, this.#listbox, { placement: 'bottom', offset: 4 })\r\n    this.#listbox.style.position = 'fixed'\r\n    this.#listbox.style.left = `${x}px`\r\n    this.#listbox.style.top = `${y}px`\r\n    this.#listbox.style.minWidth = `${this.#trigger.offsetWidth}px`\r\n    this.#listbox.dataset.placement = placement\r\n  }\r\n\r\n  show() { this.open = true }\r\n  hide() { this.open = false }\r\n  toggle() { this.open = !this.open }\r\n  clear() {\r\n    this.#selected.clear()\r\n    this.#updateSelectedState()\r\n    if (!this.#customTrigger) this.#updateTriggerText()\r\n    this.dispatchEvent(new CustomEvent('clear', { bubbles: true }))\r\n  }\r\n}\r\n\r\nregister('ytz-select', YtzSelect)\r\nexport { YtzSelect }\r\n","/**\r\n * ytz-slider - Slider/Range Web Component.\r\n * An accessible slider with keyboard control and optional range support.\r\n *\r\n * @module @grimoire/yetzirah-core/slider\r\n * @example\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\"></ytz-slider>\r\n *\r\n * @example\r\n * // With step\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" step=\"10\"></ytz-slider>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-slider min=\"0\" max=\"100\" value=\"50\" disabled></ytz-slider>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzSlider\r\n * @extends HTMLElement\r\n */\r\nclass YtzSlider extends HTMLElement {\r\n  static observedAttributes = ['min', 'max', 'value', 'step', 'disabled']\r\n\r\n  /** @type {HTMLDivElement|null} */\r\n  #track = null\r\n  /** @type {HTMLDivElement|null} */\r\n  #thumb = null\r\n  /** @type {boolean} */\r\n  #dragging = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateDisplay()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb?.removeEventListener('mousedown', this.#handleMouseDown)\r\n    document.removeEventListener('mousemove', this.#handleMouseMove)\r\n    document.removeEventListener('mouseup', this.#handleMouseUp)\r\n    this.#thumb?.removeEventListener('touchstart', this.#handleTouchStart)\r\n    document.removeEventListener('touchmove', this.#handleTouchMove)\r\n    document.removeEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected && oldVal !== newVal) {\r\n      this.#updateDisplay()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Set up ARIA\r\n    this.setAttribute('role', 'slider')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Create track and thumb if not present\r\n    if (!this.#track) {\r\n      this.#track = document.createElement('div')\r\n      this.#track.className = 'ytz-slider-track'\r\n      this.appendChild(this.#track)\r\n    }\r\n\r\n    if (!this.#thumb) {\r\n      this.#thumb = document.createElement('div')\r\n      this.#thumb.className = 'ytz-slider-thumb'\r\n      this.appendChild(this.#thumb)\r\n    }\r\n\r\n    // Event listeners\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n    this.#thumb.addEventListener('mousedown', this.#handleMouseDown)\r\n    this.#thumb.addEventListener('touchstart', this.#handleTouchStart, { passive: false })\r\n    this.addEventListener('click', this.#handleTrackClick)\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    const step = this.step\r\n    const bigStep = step * 10\r\n    let newValue = this.value\r\n\r\n    switch (e.key) {\r\n      case 'ArrowRight':\r\n      case 'ArrowUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + step)\r\n        break\r\n      case 'ArrowLeft':\r\n      case 'ArrowDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - step)\r\n        break\r\n      case 'PageUp':\r\n        e.preventDefault()\r\n        newValue = Math.min(this.max, this.value + bigStep)\r\n        break\r\n      case 'PageDown':\r\n        e.preventDefault()\r\n        newValue = Math.max(this.min, this.value - bigStep)\r\n        break\r\n      case 'Home':\r\n        e.preventDefault()\r\n        newValue = this.min\r\n        break\r\n      case 'End':\r\n        e.preventDefault()\r\n        newValue = this.max\r\n        break\r\n      default:\r\n        return\r\n    }\r\n\r\n    if (newValue !== this.value) {\r\n      this.value = newValue\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleMouseDown = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('mousemove', this.#handleMouseMove)\r\n    document.addEventListener('mouseup', this.#handleMouseUp)\r\n  }\r\n\r\n  #handleMouseMove = (e) => {\r\n    if (!this.#dragging) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n  }\r\n\r\n  #handleMouseUp = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('mousemove', this.#handleMouseMove)\r\n      document.removeEventListener('mouseup', this.#handleMouseUp)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTouchStart = (e) => {\r\n    if (this.disabled) return\r\n    e.preventDefault()\r\n    this.#dragging = true\r\n    document.addEventListener('touchmove', this.#handleTouchMove, { passive: false })\r\n    document.addEventListener('touchend', this.#handleTouchEnd)\r\n  }\r\n\r\n  #handleTouchMove = (e) => {\r\n    if (!this.#dragging) return\r\n    e.preventDefault()\r\n    const touch = e.touches[0]\r\n    this.#updateValueFromPointer(touch.clientX)\r\n  }\r\n\r\n  #handleTouchEnd = () => {\r\n    if (this.#dragging) {\r\n      this.#dragging = false\r\n      document.removeEventListener('touchmove', this.#handleTouchMove)\r\n      document.removeEventListener('touchend', this.#handleTouchEnd)\r\n      this.#dispatchChange()\r\n    }\r\n  }\r\n\r\n  #handleTrackClick = (e) => {\r\n    if (this.disabled) return\r\n    if (e.target === this.#thumb) return\r\n    this.#updateValueFromPointer(e.clientX)\r\n    this.#dispatchChange()\r\n  }\r\n\r\n  #updateValueFromPointer(clientX) {\r\n    const rect = this.getBoundingClientRect()\r\n    const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width))\r\n    const range = this.max - this.min\r\n    let newValue = this.min + percent * range\r\n\r\n    // Snap to step\r\n    const step = this.step\r\n    newValue = Math.round(newValue / step) * step\r\n    newValue = Math.max(this.min, Math.min(this.max, newValue))\r\n\r\n    this.value = newValue\r\n  }\r\n\r\n  #updateDisplay() {\r\n    const percent = ((this.value - this.min) / (this.max - this.min)) * 100\r\n\r\n    // Update ARIA attributes\r\n    this.setAttribute('aria-valuemin', String(this.min))\r\n    this.setAttribute('aria-valuemax', String(this.max))\r\n    this.setAttribute('aria-valuenow', String(this.value))\r\n    this.setAttribute('aria-disabled', String(this.disabled))\r\n\r\n    // Position thumb\r\n    if (this.#thumb) {\r\n      this.#thumb.style.left = `${percent}%`\r\n    }\r\n\r\n    // Update track fill (via CSS custom property)\r\n    this.style.setProperty('--slider-percent', `${percent}%`)\r\n  }\r\n\r\n  #dispatchChange() {\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { value: this.value }\r\n    }))\r\n  }\r\n\r\n  // Property getters/setters\r\n  get min() {\r\n    return parseFloat(this.getAttribute('min')) || 0\r\n  }\r\n\r\n  set min(val) {\r\n    this.setAttribute('min', String(val))\r\n  }\r\n\r\n  get max() {\r\n    return parseFloat(this.getAttribute('max')) || 100\r\n  }\r\n\r\n  set max(val) {\r\n    this.setAttribute('max', String(val))\r\n  }\r\n\r\n  get value() {\r\n    const val = parseFloat(this.getAttribute('value'))\r\n    if (isNaN(val)) return this.min\r\n    return Math.max(this.min, Math.min(this.max, val))\r\n  }\r\n\r\n  set value(val) {\r\n    const num = Math.max(this.min, Math.min(this.max, parseFloat(val) || 0))\r\n    this.setAttribute('value', String(num))\r\n  }\r\n\r\n  get step() {\r\n    return parseFloat(this.getAttribute('step')) || 1\r\n  }\r\n\r\n  set step(val) {\r\n    this.setAttribute('step', String(val))\r\n  }\r\n\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(val) {\r\n    if (val) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-slider', YtzSlider)\r\n\r\nexport { YtzSlider }\r\n","/**\r\n * ytz-tabs - Tabbed interface Web Components.\r\n * @module @grimoire/yetzirah-core/tabs\r\n * @example\r\n * <ytz-tabs>\r\n *   <ytz-tab panel=\"tab1\">Account</ytz-tab>\r\n *   <ytz-tabpanel id=\"tab1\">Account content</ytz-tabpanel>\r\n * </ytz-tabs>\r\n */\r\n\r\nimport { createKeyNav } from './utils/key-nav.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet tabId = 0\r\n\r\n/** @class YtzTabs */\r\nclass YtzTabs extends HTMLElement {\r\n  static observedAttributes = ['value', 'orientation']\r\n  #keyNav = null\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tablist')\r\n    this.#setupKeyNav()\r\n    if (!this.hasAttribute('value')) {\r\n      const firstTab = this.querySelector('ytz-tab')\r\n      if (firstTab?.getAttribute('panel')) {\r\n        this.setAttribute('value', firstTab.getAttribute('panel'))\r\n      }\r\n    }\r\n    this.#updateSelection()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'value' && oldVal !== newVal) {\r\n      this.#updateSelection()\r\n      if (oldVal !== null) {\r\n        this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: newVal } }))\r\n      }\r\n    }\r\n    if (name === 'orientation') this.#setupKeyNav()\r\n  }\r\n\r\n  #setupKeyNav() {\r\n    const orientation = this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.querySelectorAll('ytz-tab')],\r\n      {\r\n        orientation,\r\n        wrap: true,\r\n        autoActivate: true,\r\n        onActivate: (tab) => {\r\n          const panel = tab.getAttribute('panel')\r\n          if (panel) this.value = panel\r\n        }\r\n      }\r\n    )\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n  }\r\n\r\n  #handleKeyDown = (e) => this.#keyNav?.handleKeyDown(e)\r\n\r\n  #updateSelection() {\r\n    const value = this.getAttribute('value')\r\n    this.querySelectorAll('ytz-tab').forEach((tab) => {\r\n      const isSelected = tab.getAttribute('panel') === value\r\n      tab.setAttribute('aria-selected', String(isSelected))\r\n      tab.setAttribute('tabindex', isSelected ? '0' : '-1')\r\n    })\r\n    this.querySelectorAll('ytz-tabpanel').forEach((panel) => {\r\n      panel.hidden = panel.id !== value\r\n    })\r\n  }\r\n\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n\r\n  get orientation() {\r\n    return this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n  }\r\n  set orientation(v) { this.setAttribute('orientation', v) }\r\n}\r\n\r\n/** @class YtzTab */\r\nclass YtzTab extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tab')\r\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '-1')\r\n    if (!this.id) this.id = `ytz-tab-${++tabId}`\r\n    const panelId = this.getAttribute('panel')\r\n    if (panelId) this.setAttribute('aria-controls', panelId)\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() { this.removeEventListener('click', this.#handleClick) }\r\n\r\n  #handleClick = () => {\r\n    const tabs = this.closest('ytz-tabs')\r\n    const panel = this.getAttribute('panel')\r\n    if (tabs && panel) tabs.value = panel\r\n  }\r\n\r\n  get panel() { return this.getAttribute('panel') }\r\n  set panel(v) {\r\n    if (v) {\r\n      this.setAttribute('panel', v)\r\n      this.setAttribute('aria-controls', v)\r\n    } else {\r\n      this.removeAttribute('panel')\r\n      this.removeAttribute('aria-controls')\r\n    }\r\n  }\r\n}\r\n\r\n/** @class YtzTabPanel */\r\nclass YtzTabPanel extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tabpanel')\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (tabs) {\r\n      this.hidden = this.id !== tabs.getAttribute('value')\r\n    } else {\r\n      this.hidden = true\r\n    }\r\n    this.#linkToTab()\r\n  }\r\n\r\n  #linkToTab() {\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (!tabs || !this.id) return\r\n    const tab = tabs.querySelector(`ytz-tab[panel=\"${this.id}\"]`)\r\n    if (tab) {\r\n      if (!tab.id) tab.id = `ytz-tab-${++tabId}`\r\n      this.setAttribute('aria-labelledby', tab.id)\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-tabs', YtzTabs)\r\nregister('ytz-tab', YtzTab)\r\nregister('ytz-tabpanel', YtzTabPanel)\r\n\r\nexport { YtzTabs, YtzTab, YtzTabPanel }\r\n","/**\r\n * ytz-toggle - Switch/Toggle Web Component.\r\n * A toggle switch with checkbox semantics and aria-checked.\r\n *\r\n * @module @grimoire/yetzirah-core/toggle\r\n * @example\r\n * <ytz-toggle>Enable notifications</ytz-toggle>\r\n *\r\n * @example\r\n * // Initially checked\r\n * <ytz-toggle checked>Dark mode</ytz-toggle>\r\n *\r\n * @example\r\n * // Disabled\r\n * <ytz-toggle disabled>Premium feature</ytz-toggle>\r\n */\r\n\r\nimport { register } from './utils/register.js'\r\n\r\n/**\r\n * @class YtzToggle\r\n * @extends HTMLElement\r\n */\r\nclass YtzToggle extends HTMLElement {\r\n  static observedAttributes = ['checked', 'disabled']\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  #setup() {\r\n    // Set role and make focusable\r\n    this.setAttribute('role', 'switch')\r\n    if (!this.hasAttribute('tabindex')) {\r\n      this.setAttribute('tabindex', '0')\r\n    }\r\n\r\n    // Event listeners\r\n    this.addEventListener('click', this.#handleClick)\r\n    this.addEventListener('keydown', this.#handleKeydown)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener('click', this.#handleClick)\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #handleClick = () => {\r\n    if (this.disabled) return\r\n    this.toggle()\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    if (e.key === ' ' || e.key === 'Enter') {\r\n      e.preventDefault()\r\n      this.toggle()\r\n    }\r\n  }\r\n\r\n  #updateState() {\r\n    this.setAttribute('aria-checked', String(this.checked))\r\n    this.setAttribute('aria-disabled', String(this.disabled))\r\n  }\r\n\r\n  /**\r\n   * Toggle the checked state.\r\n   * Dispatches a 'change' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willCheck = !this.checked\r\n\r\n    if (willCheck) {\r\n      this.setAttribute('checked', '')\r\n    } else {\r\n      this.removeAttribute('checked')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('change', {\r\n      bubbles: true,\r\n      detail: { checked: willCheck }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the checked state.\r\n   * @type {boolean}\r\n   */\r\n  get checked() {\r\n    return this.hasAttribute('checked')\r\n  }\r\n\r\n  set checked(value) {\r\n    if (value) {\r\n      this.setAttribute('checked', '')\r\n    } else {\r\n      this.removeAttribute('checked')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the disabled state.\r\n   * @type {boolean}\r\n   */\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(value) {\r\n    if (value) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n  }\r\n}\r\n\r\nregister('ytz-toggle', YtzToggle)\r\n\r\nexport { YtzToggle }\r\n","/**\n * ytz-theme-toggle - Theme switching Web Component.\n * A toggle switch that controls light/dark theme with persistence.\n *\n * @module @grimoire/yetzirah-core/theme-toggle\n * @example\n * <ytz-theme-toggle></ytz-theme-toggle>\n *\n * @example\n * // With custom storage key\n * <ytz-theme-toggle storage-key=\"my-app-theme\"></ytz-theme-toggle>\n *\n * @example\n * // Without persistence\n * <ytz-theme-toggle no-persist></ytz-theme-toggle>\n */\n\nimport './toggle.js'\nimport { register } from './utils/register.js'\n\n/** @type {string} Default localStorage key */\nconst DEFAULT_STORAGE_KEY = 'yetzirah-theme'\n\n/** @type {string} CSS class applied to document for dark mode */\nconst DARK_CLASS = 'dark-mode'\n\n/** @type {string} Data attribute for theme */\nconst THEME_ATTR = 'data-theme'\n\n/**\n * @class YtzThemeToggle\n * @extends HTMLElement\n */\nclass YtzThemeToggle extends HTMLElement {\n  static observedAttributes = ['storage-key', 'no-persist']\n\n  /** @type {HTMLElement|null} */\n  #toggle = null\n\n  connectedCallback() {\n    this.#setup()\n    this.#initializeTheme()\n  }\n\n  disconnectedCallback() {\n    this.#toggle?.removeEventListener('change', this.#handleChange)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected && name === 'storage-key') {\n      this.#initializeTheme()\n    }\n  }\n\n  #setup() {\n    // Create inner toggle if not present\n    if (!this.#toggle) {\n      this.#toggle = document.createElement('ytz-toggle')\n      this.#toggle.setAttribute('aria-label', 'Toggle dark mode')\n\n      // Move existing children into toggle as label\n      while (this.firstChild) {\n        this.#toggle.appendChild(this.firstChild)\n      }\n\n      // Default label if no children provided\n      // Use hasChildNodes() instead of textContent to preserve element children like styling spans\n      if (!this.#toggle.hasChildNodes()) {\n        this.#toggle.textContent = 'Dark mode'\n      }\n\n      this.appendChild(this.#toggle)\n    }\n\n    this.#toggle.addEventListener('change', this.#handleChange)\n  }\n\n  #initializeTheme() {\n    const savedTheme = this.#loadTheme()\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches\n\n    // Determine initial theme: saved > system preference > light\n    const isDark = savedTheme === 'dark' || (savedTheme === null && prefersDark)\n\n    this.#applyTheme(isDark)\n    this.#updateToggle(isDark)\n\n    // Listen for system preference changes\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {\n      if (!this.#loadTheme()) {\n        // Only respond to system changes if no saved preference\n        this.#applyTheme(e.matches)\n        this.#updateToggle(e.matches)\n      }\n    })\n  }\n\n  #handleChange = (e) => {\n    const isDark = e.detail.checked\n    this.#applyTheme(isDark)\n    this.#saveTheme(isDark ? 'dark' : 'light')\n\n    this.dispatchEvent(new CustomEvent('themechange', {\n      bubbles: true,\n      detail: { theme: isDark ? 'dark' : 'light', isDark }\n    }))\n  }\n\n  #applyTheme(isDark) {\n    const root = document.documentElement\n\n    if (isDark) {\n      root.classList.add(DARK_CLASS)\n      root.setAttribute(THEME_ATTR, 'dark')\n    } else {\n      root.classList.remove(DARK_CLASS)\n      root.setAttribute(THEME_ATTR, 'light')\n    }\n  }\n\n  #updateToggle(isDark) {\n    if (!this.#toggle) return\n\n    if (isDark) {\n      this.#toggle.setAttribute('checked', '')\n    } else {\n      this.#toggle.removeAttribute('checked')\n    }\n  }\n\n  #loadTheme() {\n    if (this.hasAttribute('no-persist')) return null\n\n    try {\n      return localStorage.getItem(this.storageKey)\n    } catch {\n      // localStorage may be unavailable\n      return null\n    }\n  }\n\n  #saveTheme(theme) {\n    if (this.hasAttribute('no-persist')) return\n\n    try {\n      localStorage.setItem(this.storageKey, theme)\n    } catch {\n      // localStorage may be unavailable\n    }\n  }\n\n  /**\n   * Get the storage key for theme persistence.\n   * @type {string}\n   */\n  get storageKey() {\n    return this.getAttribute('storage-key') || DEFAULT_STORAGE_KEY\n  }\n\n  set storageKey(value) {\n    this.setAttribute('storage-key', value)\n  }\n\n  /**\n   * Get the current theme.\n   * @type {'light'|'dark'}\n   */\n  get theme() {\n    return document.documentElement.classList.contains(DARK_CLASS) ? 'dark' : 'light'\n  }\n\n  /**\n   * Set the theme programmatically.\n   * @param {'light'|'dark'} value\n   */\n  set theme(value) {\n    const isDark = value === 'dark'\n    this.#applyTheme(isDark)\n    this.#updateToggle(isDark)\n    this.#saveTheme(value)\n  }\n\n  /**\n   * Check if dark mode is active.\n   * @type {boolean}\n   */\n  get isDark() {\n    return this.theme === 'dark'\n  }\n\n  /**\n   * Toggle the theme.\n   */\n  toggle() {\n    this.theme = this.isDark ? 'light' : 'dark'\n  }\n}\n\nregister('ytz-theme-toggle', YtzThemeToggle)\n\nexport { YtzThemeToggle }\n","/**\r\n * ytz-tooltip - Positioned hint text Web Component.\r\n * Shows on hover/focus with configurable delay and placement.\r\n *\r\n * @module @grimoire/yetzirah-core/tooltip\r\n * @example\r\n * <ytz-tooltip>\r\n *   <button>Hover me</button>\r\n *   <span slot=\"content\">Tooltip text</span>\r\n * </ytz-tooltip>\r\n *\r\n * @example\r\n * // With placement and delay\r\n * <ytz-tooltip placement=\"bottom\" delay=\"200\">\r\n *   <button>Hover me</button>\r\n *   <span slot=\"content\">Bottom tooltip</span>\r\n * </ytz-tooltip>\r\n */\r\n\r\nimport { position } from './utils/position.js'\r\nimport { register } from './utils/register.js'\r\n\r\nlet tooltipId = 0\r\n\r\n/**\r\n * @class YtzTooltip\r\n * @extends HTMLElement\r\n */\r\nclass YtzTooltip extends HTMLElement {\r\n  static observedAttributes = ['placement', 'delay', 'offset']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n  /** @type {number|null} */\r\n  #showTimeout = null\r\n  /** @type {number|null} */\r\n  #hideTimeout = null\r\n  /** @type {boolean} */\r\n  #isVisible = false\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#cleanup()\r\n    clearTimeout(this.#showTimeout)\r\n    clearTimeout(this.#hideTimeout)\r\n  }\r\n\r\n  attributeChangedCallback() {\r\n    if (this.#isVisible) this.#updatePosition()\r\n  }\r\n\r\n  /** @returns {'top'|'bottom'|'left'|'right'} */\r\n  get placement() {\r\n    return this.getAttribute('placement') || 'top'\r\n  }\r\n\r\n  /** @param {'top'|'bottom'|'left'|'right'} value */\r\n  set placement(value) {\r\n    if (value) {\r\n      this.setAttribute('placement', value)\r\n    } else {\r\n      this.removeAttribute('placement')\r\n    }\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get delay() {\r\n    return parseInt(this.getAttribute('delay') || '0', 10)\r\n  }\r\n\r\n  /** @param {number} value */\r\n  set delay(value) {\r\n    if (value != null) {\r\n      this.setAttribute('delay', String(value))\r\n    } else {\r\n      this.removeAttribute('delay')\r\n    }\r\n  }\r\n\r\n  /** @returns {number} */\r\n  get offset() {\r\n    return parseInt(this.getAttribute('offset') || '8', 10)\r\n  }\r\n\r\n  /** @param {number} value */\r\n  set offset(value) {\r\n    if (value != null) {\r\n      this.setAttribute('offset', String(value))\r\n    } else {\r\n      this.removeAttribute('offset')\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first child) and content ([slot=\"content\"] or last child)\r\n    this.#trigger = this.firstElementChild\r\n    this.#content = this.querySelector('[slot=\"content\"]') || this.lastElementChild\r\n\r\n    if (!this.#trigger || !this.#content || this.#trigger === this.#content) return\r\n\r\n    // Generate unique ID for content\r\n    this.#contentId = this.#content.id || `ytz-tooltip-${++tooltipId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA\r\n    this.#trigger.setAttribute('aria-describedby', this.#contentId)\r\n    this.#content.setAttribute('role', 'tooltip')\r\n    this.#content.hidden = true\r\n\r\n    // Hover listeners\r\n    this.#trigger.addEventListener('mouseenter', this.#handleMouseEnter)\r\n    this.#trigger.addEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#content.addEventListener('mouseenter', this.#handleContentMouseEnter)\r\n    this.#content.addEventListener('mouseleave', this.#handleMouseLeave)\r\n\r\n    // Focus listeners\r\n    this.#trigger.addEventListener('focusin', this.#handleFocusIn)\r\n    this.#trigger.addEventListener('focusout', this.#handleFocusOut)\r\n\r\n    // Touch support\r\n    this.#trigger.addEventListener('touchstart', this.#handleTouchStart, { passive: true })\r\n  }\r\n\r\n  #cleanup() {\r\n    this.#trigger?.removeEventListener('mouseenter', this.#handleMouseEnter)\r\n    this.#trigger?.removeEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#content?.removeEventListener('mouseenter', this.#handleContentMouseEnter)\r\n    this.#content?.removeEventListener('mouseleave', this.#handleMouseLeave)\r\n    this.#trigger?.removeEventListener('focusin', this.#handleFocusIn)\r\n    this.#trigger?.removeEventListener('focusout', this.#handleFocusOut)\r\n    this.#trigger?.removeEventListener('touchstart', this.#handleTouchStart)\r\n  }\r\n\r\n  #handleMouseEnter = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#showTimeout = setTimeout(() => this.#show(), this.delay)\r\n  }\r\n\r\n  #handleMouseLeave = () => {\r\n    clearTimeout(this.#showTimeout)\r\n    this.#hideTimeout = setTimeout(() => this.#hide(), 100)\r\n  }\r\n\r\n  #handleContentMouseEnter = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n  }\r\n\r\n  #handleFocusIn = () => {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#show() // No delay for focus (accessibility)\r\n  }\r\n\r\n  #handleFocusOut = () => {\r\n    this.#hide()\r\n  }\r\n\r\n  #handleTouchStart = () => {\r\n    if (this.#isVisible) {\r\n      this.#hide()\r\n    } else {\r\n      this.#show()\r\n    }\r\n  }\r\n\r\n  #show() {\r\n    if (!this.#content || this.#isVisible) return\r\n\r\n    this.#content.hidden = false\r\n    this.#isVisible = true\r\n    this.#updatePosition()\r\n\r\n    // Listen for scroll/resize to reposition\r\n    window.addEventListener('scroll', this.#updatePosition, { passive: true, capture: true })\r\n    window.addEventListener('resize', this.#updatePosition, { passive: true })\r\n\r\n    this.dispatchEvent(new CustomEvent('show', { bubbles: true }))\r\n  }\r\n\r\n  #hide() {\r\n    if (!this.#content || !this.#isVisible) return\r\n\r\n    this.#content.hidden = true\r\n    this.#isVisible = false\r\n\r\n    window.removeEventListener('scroll', this.#updatePosition, { capture: true })\r\n    window.removeEventListener('resize', this.#updatePosition)\r\n\r\n    this.dispatchEvent(new CustomEvent('hide', { bubbles: true }))\r\n  }\r\n\r\n  #updatePosition = () => {\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    const { x, y, placement: finalPlacement } = position(this.#trigger, this.#content, {\r\n      placement: this.placement,\r\n      offset: this.offset\r\n    })\r\n\r\n    // Position tooltip fixed relative to viewport\r\n    this.#content.style.position = 'fixed'\r\n    this.#content.style.left = `${x}px`\r\n    this.#content.style.top = `${y}px`\r\n\r\n    // Set data attribute for CSS arrow styling\r\n    this.#content.dataset.placement = finalPlacement\r\n  }\r\n\r\n  // Public API\r\n\r\n  /** Show the tooltip programmatically */\r\n  show() {\r\n    clearTimeout(this.#hideTimeout)\r\n    this.#show()\r\n  }\r\n\r\n  /** Hide the tooltip programmatically */\r\n  hide() {\r\n    clearTimeout(this.#showTimeout)\r\n    this.#hide()\r\n  }\r\n}\r\n\r\nregister('ytz-tooltip', YtzTooltip)\r\n\r\nexport { YtzTooltip }\r\n","/**\r\n * @grimoire/yetzirah-core\r\n *\r\n * Web Components for behavioral UI patterns.\r\n * Zero dependencies, framework-agnostic, accessibility-first.\r\n *\r\n * @packageDocumentation\r\n */\r\n\r\n// Components\r\nexport { YtzAccordion, YtzAccordionItem } from './accordion.js'\r\nexport { YtzButton } from './button.js'\r\nexport { YtzDialog } from './dialog.js'\r\nexport { YtzDisclosure } from './disclosure.js'\r\nexport { YtzDrawer } from './drawer.js'\r\nexport { YtzTabs, YtzTab, YtzTabPanel } from './tabs.js'\r\nexport { YtzTooltip } from './tooltip.js'\r\nexport { YtzPopover } from './popover.js'\r\nexport { YtzMenu, YtzMenuItem } from './menu.js'\r\nexport { YtzAutocomplete, YtzOption } from './autocomplete.js'\r\nexport { YtzListbox } from './listbox.js'\r\nexport { YtzSelect } from './select.js'\r\nexport { YtzToggle } from './toggle.js'\r\nexport { YtzChip } from './chip.js'\r\nexport { YtzIconButton } from './icon-button.js'\r\nexport { YtzSlider } from './slider.js'\r\nexport { YtzDatagrid, YtzDatagridColumn } from './datagrid.js'\r\n\r\n/**\r\n * Yetzirah version\r\n * @type {string}\r\n */\r\nexport const VERSION = '0.1.0'\r\nexport { YtzThemeToggle } from './theme-toggle.js'\r\n","/**\r\n * CDN Entry Point with Auto-Registration\r\n *\r\n * This is the primary entry point for CDN usage via <script type=\"module\">.\r\n * All components are automatically registered as custom elements when this\r\n * module is loaded - no additional JavaScript required.\r\n *\r\n * Usage:\r\n *   <script type=\"module\" src=\"https://cdn.jsdelivr.net/npm/@grimoire/yetzirah-core@latest/cdn/auto.js\"></script>\r\n *\r\n * After loading, all ytz-* elements are available:\r\n *   <ytz-dialog>...</ytz-dialog>\r\n *   <ytz-button>...</ytz-button>\r\n *   etc.\r\n *\r\n * Features:\r\n * - Idempotent: Safe to load multiple times (no duplicate registration errors)\r\n * - Self-contained: All components bundled, no external dependencies\r\n * - Side-effect module: Registers elements on import\r\n *\r\n * @module @grimoire/yetzirah-core/cdn/auto\r\n */\r\n\r\n// Import all components (triggers their registration via side effects)\r\nimport './accordion.js'\r\nimport './autocomplete.js'\r\nimport './button.js'\r\nimport './chip.js'\r\nimport './datagrid.js'\r\nimport './dialog.js'\r\nimport './disclosure.js'\r\nimport './drawer.js'\r\nimport './icon-button.js'\r\nimport './listbox.js'\r\nimport './menu.js'\r\nimport './popover.js'\r\nimport './select.js'\r\nimport './slider.js'\r\nimport './tabs.js'\r\nimport './theme-toggle.js'\r\nimport './toggle.js'\r\nimport './tooltip.js'\r\n\r\n// Re-export everything for programmatic access\r\nexport * from './index.js'\r\n\r\n/**\r\n * Verify all components are registered.\r\n * Useful for debugging registration issues.\r\n *\r\n * @returns {Object} Registration status for all components\r\n */\r\nexport function getRegistrationStatus() {\r\n  const components = [\r\n    'ytz-accordion',\r\n    'ytz-accordion-item',\r\n    'ytz-autocomplete',\r\n    'ytz-option',\r\n    'ytz-button',\r\n    'ytz-chip',\r\n    'ytz-datagrid',\r\n    'ytz-datagrid-column',\r\n    'ytz-dialog',\r\n    'ytz-disclosure',\r\n    'ytz-drawer',\r\n    'ytz-icon-button',\r\n    'ytz-listbox',\r\n    'ytz-menu',\r\n    'ytz-menuitem',\r\n    'ytz-popover',\r\n    'ytz-select',\r\n    'ytz-slider',\r\n    'ytz-tab',\r\n    'ytz-tabpanel',\r\n    'ytz-tabs',\r\n    'ytz-theme-toggle',\r\n    'ytz-toggle',\r\n    'ytz-tooltip',\r\n  ]\r\n\r\n  const status = {}\r\n  for (const name of components) {\r\n    status[name] = customElements.get(name) !== undefined\r\n  }\r\n  return status\r\n}\r\n\r\n/**\r\n * Wait for all components to be defined.\r\n * Useful when components need to be ready before use.\r\n *\r\n * @returns {Promise<void>} Resolves when all components are defined\r\n */\r\nexport async function whenAllDefined() {\r\n  const components = [\r\n    'ytz-accordion',\r\n    'ytz-accordion-item',\r\n    'ytz-autocomplete',\r\n    'ytz-option',\r\n    'ytz-button',\r\n    'ytz-chip',\r\n    'ytz-datagrid',\r\n    'ytz-datagrid-column',\r\n    'ytz-dialog',\r\n    'ytz-disclosure',\r\n    'ytz-drawer',\r\n    'ytz-icon-button',\r\n    'ytz-listbox',\r\n    'ytz-menu',\r\n    'ytz-menuitem',\r\n    'ytz-popover',\r\n    'ytz-select',\r\n    'ytz-slider',\r\n    'ytz-tab',\r\n    'ytz-tabpanel',\r\n    'ytz-tabs',\r\n    'ytz-theme-toggle',\r\n    'ytz-toggle',\r\n    'ytz-tooltip',\r\n  ]\r\n\r\n  await Promise.all(\r\n    components.map(name => customElements.whenDefined(name))\r\n  )\r\n}\r\n\r\n// Log registration on load (development aid, tree-shaken in production)\r\nif (typeof window !== 'undefined' && window.location?.hostname === 'localhost') {\r\n  console.log('[Yetzirah] Components auto-registered via CDN entry')\r\n}\r\n"]}