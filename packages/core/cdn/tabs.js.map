{"version":3,"sources":["../src/utils/key-nav.js","../src/tabs.js"],"names":["createKeyNav","getItems","options","orientation","wrap","autoActivate","onActivate","prevKey","nextKey","e","items","currentIndex","newIndex","tabId","YtzTabs","#keyNav","#setupKeyNav","firstTab","#updateSelection","name","oldVal","newVal","tab","panel","#handleKeyDown","value","isSelected","v","YtzTab","panelId","#handleClick","tabs","YtzTabPanel","#linkToTab"],"mappings":"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","file":"tabs.js","sourcesContent":["/**\r\n * Keyboard navigation utility for arrow key navigation.\r\n * @module @grimoire/yetzirah-core/utils/key-nav\r\n * @internal Not exported from package\r\n */\r\n\r\n/**\r\n * Creates keyboard navigation for a set of elements.\r\n * @param {() => HTMLElement[]} getItems - Function returning navigable elements\r\n * @param {Object} options\r\n * @param {'horizontal'|'vertical'} [options.orientation='horizontal']\r\n * @param {boolean} [options.wrap=true]\r\n * @param {boolean} [options.autoActivate=true]\r\n * @param {(item: HTMLElement) => void} [options.onActivate]\r\n * @returns {{ handleKeyDown: (e: KeyboardEvent) => void }}\r\n */\r\nexport function createKeyNav(getItems, options = {}) {\r\n  const { orientation = 'horizontal', wrap = true, autoActivate = true, onActivate } = options\r\n  const prevKey = orientation === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\r\n  const nextKey = orientation === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\r\n\r\n  return {\r\n    handleKeyDown(e) {\r\n      const items = getItems()\r\n      const currentIndex = items.indexOf(document.activeElement)\r\n      if (currentIndex === -1) return\r\n\r\n      let newIndex = currentIndex\r\n      if (e.key === prevKey) {\r\n        newIndex = currentIndex - 1\r\n        if (newIndex < 0) newIndex = wrap ? items.length - 1 : 0\r\n      } else if (e.key === nextKey) {\r\n        newIndex = currentIndex + 1\r\n        if (newIndex >= items.length) newIndex = wrap ? 0 : items.length - 1\r\n      } else if (e.key === 'Home') {\r\n        newIndex = 0\r\n      } else if (e.key === 'End') {\r\n        newIndex = items.length - 1\r\n      } else {\r\n        return\r\n      }\r\n\r\n      e.preventDefault()\r\n      items[newIndex].focus()\r\n      if (autoActivate && onActivate) onActivate(items[newIndex])\r\n    }\r\n  }\r\n}\r\n","/**\r\n * ytz-tabs - Tabbed interface Web Components.\r\n * @module @grimoire/yetzirah-core/tabs\r\n * @example\r\n * <ytz-tabs>\r\n *   <ytz-tab panel=\"tab1\">Account</ytz-tab>\r\n *   <ytz-tabpanel id=\"tab1\">Account content</ytz-tabpanel>\r\n * </ytz-tabs>\r\n */\r\n\r\nimport { createKeyNav } from './utils/key-nav.js'\r\n\r\nlet tabId = 0\r\n\r\n/** @class YtzTabs */\r\nclass YtzTabs extends HTMLElement {\r\n  static observedAttributes = ['value', 'orientation']\r\n  #keyNav = null\r\n\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tablist')\r\n    this.#setupKeyNav()\r\n    if (!this.hasAttribute('value')) {\r\n      const firstTab = this.querySelector('ytz-tab')\r\n      if (firstTab?.getAttribute('panel')) {\r\n        this.setAttribute('value', firstTab.getAttribute('panel'))\r\n      }\r\n    }\r\n    this.#updateSelection()\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (!this.isConnected) return\r\n    if (name === 'value' && oldVal !== newVal) {\r\n      this.#updateSelection()\r\n      if (oldVal !== null) {\r\n        this.dispatchEvent(new CustomEvent('change', { bubbles: true, detail: { value: newVal } }))\r\n      }\r\n    }\r\n    if (name === 'orientation') this.#setupKeyNav()\r\n  }\r\n\r\n  #setupKeyNav() {\r\n    const orientation = this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n    this.#keyNav = createKeyNav(\r\n      () => [...this.querySelectorAll('ytz-tab')],\r\n      {\r\n        orientation,\r\n        wrap: true,\r\n        autoActivate: true,\r\n        onActivate: (tab) => {\r\n          const panel = tab.getAttribute('panel')\r\n          if (panel) this.value = panel\r\n        }\r\n      }\r\n    )\r\n    this.addEventListener('keydown', this.#handleKeyDown)\r\n  }\r\n\r\n  #handleKeyDown = (e) => this.#keyNav?.handleKeyDown(e)\r\n\r\n  #updateSelection() {\r\n    const value = this.getAttribute('value')\r\n    this.querySelectorAll('ytz-tab').forEach((tab) => {\r\n      const isSelected = tab.getAttribute('panel') === value\r\n      tab.setAttribute('aria-selected', String(isSelected))\r\n      tab.setAttribute('tabindex', isSelected ? '0' : '-1')\r\n    })\r\n    this.querySelectorAll('ytz-tabpanel').forEach((panel) => {\r\n      panel.hidden = panel.id !== value\r\n    })\r\n  }\r\n\r\n  get value() { return this.getAttribute('value') }\r\n  set value(v) { v ? this.setAttribute('value', v) : this.removeAttribute('value') }\r\n\r\n  get orientation() {\r\n    return this.getAttribute('orientation') === 'vertical' ? 'vertical' : 'horizontal'\r\n  }\r\n  set orientation(v) { this.setAttribute('orientation', v) }\r\n}\r\n\r\n/** @class YtzTab */\r\nclass YtzTab extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tab')\r\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '-1')\r\n    if (!this.id) this.id = `ytz-tab-${++tabId}`\r\n    const panelId = this.getAttribute('panel')\r\n    if (panelId) this.setAttribute('aria-controls', panelId)\r\n    this.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  disconnectedCallback() { this.removeEventListener('click', this.#handleClick) }\r\n\r\n  #handleClick = () => {\r\n    const tabs = this.closest('ytz-tabs')\r\n    const panel = this.getAttribute('panel')\r\n    if (tabs && panel) tabs.value = panel\r\n  }\r\n\r\n  get panel() { return this.getAttribute('panel') }\r\n  set panel(v) {\r\n    if (v) {\r\n      this.setAttribute('panel', v)\r\n      this.setAttribute('aria-controls', v)\r\n    } else {\r\n      this.removeAttribute('panel')\r\n      this.removeAttribute('aria-controls')\r\n    }\r\n  }\r\n}\r\n\r\n/** @class YtzTabPanel */\r\nclass YtzTabPanel extends HTMLElement {\r\n  connectedCallback() {\r\n    this.setAttribute('role', 'tabpanel')\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (tabs) {\r\n      this.hidden = this.id !== tabs.getAttribute('value')\r\n    } else {\r\n      this.hidden = true\r\n    }\r\n    this.#linkToTab()\r\n  }\r\n\r\n  #linkToTab() {\r\n    const tabs = this.closest('ytz-tabs')\r\n    if (!tabs || !this.id) return\r\n    const tab = tabs.querySelector(`ytz-tab[panel=\"${this.id}\"]`)\r\n    if (tab) {\r\n      if (!tab.id) tab.id = `ytz-tab-${++tabId}`\r\n      this.setAttribute('aria-labelledby', tab.id)\r\n    }\r\n  }\r\n}\r\n\r\ncustomElements.define('ytz-tabs', YtzTabs)\r\ncustomElements.define('ytz-tab', YtzTab)\r\ncustomElements.define('ytz-tabpanel', YtzTabPanel)\r\n\r\nexport { YtzTabs, YtzTab, YtzTabPanel }\r\n"]}