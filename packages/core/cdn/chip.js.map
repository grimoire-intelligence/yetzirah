{"version":3,"sources":["../src/utils/register.js","../src/chip.js"],"names":["register","name","constructor","YtzChip","#deleteButton","#setup","#handleDelete","#handleKeydown","oldVal","newVal","value"],"mappings":"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","file":"chip.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-chip - Deletable tag/label Web Component.\n * A chip with optional delete button and keyboard support.\n *\n * @module @grimoire/yetzirah-core/chip\n * @example\n * <ytz-chip>Tag</ytz-chip>\n *\n * @example\n * // Deletable chip\n * <ytz-chip deletable>Remove me</ytz-chip>\n *\n * @example\n * // Disabled chip\n * <ytz-chip deletable disabled>Can't delete</ytz-chip>\n */\n\nimport { register } from './utils/register.js'\n\n/**\n * @class YtzChip\n * @extends HTMLElement\n */\nclass YtzChip extends HTMLElement {\n  static observedAttributes = ['deletable', 'disabled']\n\n  /** @type {HTMLButtonElement|null} */\n  #deleteButton = null\n\n  connectedCallback() {\n    this.#setup()\n  }\n\n  disconnectedCallback() {\n    this.#deleteButton?.removeEventListener('click', this.#handleDelete)\n    this.removeEventListener('keydown', this.#handleKeydown)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (this.isConnected) {\n      this.#setup()\n    }\n  }\n\n  #setup() {\n    // Remove existing delete button if any\n    this.#deleteButton?.remove()\n    this.#deleteButton = null\n\n    // Add delete button if deletable\n    if (this.hasAttribute('deletable')) {\n      this.#deleteButton = document.createElement('button')\n      this.#deleteButton.type = 'button'\n      this.#deleteButton.setAttribute('aria-label', 'Delete')\n      this.#deleteButton.className = 'ytz-chip-delete'\n      this.#deleteButton.textContent = '\\u00D7' // Ã— character\n      this.#deleteButton.disabled = this.disabled\n      this.#deleteButton.addEventListener('click', this.#handleDelete)\n      this.appendChild(this.#deleteButton)\n    }\n\n    // Keyboard support for delete\n    this.removeEventListener('keydown', this.#handleKeydown)\n    if (this.hasAttribute('deletable')) {\n      this.addEventListener('keydown', this.#handleKeydown)\n    }\n  }\n\n  #handleDelete = (e) => {\n    e.stopPropagation()\n    if (this.disabled) return\n\n    this.dispatchEvent(new CustomEvent('delete', {\n      bubbles: true,\n      detail: { chip: this }\n    }))\n  }\n\n  #handleKeydown = (e) => {\n    if (this.disabled) return\n\n    if (e.key === 'Delete' || e.key === 'Backspace') {\n      e.preventDefault()\n      this.dispatchEvent(new CustomEvent('delete', {\n        bubbles: true,\n        detail: { chip: this }\n      }))\n    }\n  }\n\n  /**\n   * Get/set the disabled state.\n   * @type {boolean}\n   */\n  get disabled() {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled(value) {\n    if (value) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n    if (this.#deleteButton) {\n      this.#deleteButton.disabled = value\n    }\n  }\n\n  /**\n   * Get/set the deletable state.\n   * @type {boolean}\n   */\n  get deletable() {\n    return this.hasAttribute('deletable')\n  }\n\n  set deletable(value) {\n    if (value) {\n      this.setAttribute('deletable', '')\n    } else {\n      this.removeAttribute('deletable')\n    }\n  }\n}\n\nregister('ytz-chip', YtzChip)\n\nexport { YtzChip }\n"]}