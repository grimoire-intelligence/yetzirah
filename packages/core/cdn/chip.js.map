{"version":3,"sources":["../src/chip.js"],"names":["YtzChip","#deleteButton","#setup","#handleDelete","#handleKeydown","name","oldVal","newVal","value"],"mappings":"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","file":"chip.js","sourcesContent":["/**\r\n * ytz-chip - Deletable tag/label Web Component.\r\n * A chip with optional delete button and keyboard support.\r\n *\r\n * @module @grimoire/yetzirah-core/chip\r\n * @example\r\n * <ytz-chip>Tag</ytz-chip>\r\n *\r\n * @example\r\n * // Deletable chip\r\n * <ytz-chip deletable>Remove me</ytz-chip>\r\n *\r\n * @example\r\n * // Disabled chip\r\n * <ytz-chip deletable disabled>Can't delete</ytz-chip>\r\n */\r\n\r\n/**\r\n * @class YtzChip\r\n * @extends HTMLElement\r\n */\r\nclass YtzChip extends HTMLElement {\r\n  static observedAttributes = ['deletable', 'disabled']\r\n\r\n  /** @type {HTMLButtonElement|null} */\r\n  #deleteButton = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#deleteButton?.removeEventListener('click', this.#handleDelete)\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (this.isConnected) {\r\n      this.#setup()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Remove existing delete button if any\r\n    this.#deleteButton?.remove()\r\n    this.#deleteButton = null\r\n\r\n    // Add delete button if deletable\r\n    if (this.hasAttribute('deletable')) {\r\n      this.#deleteButton = document.createElement('button')\r\n      this.#deleteButton.type = 'button'\r\n      this.#deleteButton.setAttribute('aria-label', 'Delete')\r\n      this.#deleteButton.className = 'ytz-chip-delete'\r\n      this.#deleteButton.textContent = '\\u00D7' // Ã— character\r\n      this.#deleteButton.disabled = this.disabled\r\n      this.#deleteButton.addEventListener('click', this.#handleDelete)\r\n      this.appendChild(this.#deleteButton)\r\n    }\r\n\r\n    // Keyboard support for delete\r\n    this.removeEventListener('keydown', this.#handleKeydown)\r\n    if (this.hasAttribute('deletable')) {\r\n      this.addEventListener('keydown', this.#handleKeydown)\r\n    }\r\n  }\r\n\r\n  #handleDelete = (e) => {\r\n    e.stopPropagation()\r\n    if (this.disabled) return\r\n\r\n    this.dispatchEvent(new CustomEvent('delete', {\r\n      bubbles: true,\r\n      detail: { chip: this }\r\n    }))\r\n  }\r\n\r\n  #handleKeydown = (e) => {\r\n    if (this.disabled) return\r\n\r\n    if (e.key === 'Delete' || e.key === 'Backspace') {\r\n      e.preventDefault()\r\n      this.dispatchEvent(new CustomEvent('delete', {\r\n        bubbles: true,\r\n        detail: { chip: this }\r\n      }))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the disabled state.\r\n   * @type {boolean}\r\n   */\r\n  get disabled() {\r\n    return this.hasAttribute('disabled')\r\n  }\r\n\r\n  set disabled(value) {\r\n    if (value) {\r\n      this.setAttribute('disabled', '')\r\n    } else {\r\n      this.removeAttribute('disabled')\r\n    }\r\n    if (this.#deleteButton) {\r\n      this.#deleteButton.disabled = value\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get/set the deletable state.\r\n   * @type {boolean}\r\n   */\r\n  get deletable() {\r\n    return this.hasAttribute('deletable')\r\n  }\r\n\r\n  set deletable(value) {\r\n    if (value) {\r\n      this.setAttribute('deletable', '')\r\n    } else {\r\n      this.removeAttribute('deletable')\r\n    }\r\n  }\r\n}\r\n\r\ncustomElements.define('ytz-chip', YtzChip)\r\n\r\nexport { YtzChip }\r\n"]}