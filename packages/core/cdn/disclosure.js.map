{"version":3,"sources":["../src/disclosure.js"],"names":["disclosureId","YtzDisclosure","#trigger","#content","#contentId","#setup","#updateState","#handleClick","name","oldVal","newVal","isOpen","willOpen","value"],"mappings":"AAmBA,IAAIA,CAAAA,CAAe,EAMbC,CAAAA,CAAN,cAA4B,WAAY,CACtC,OAAO,mBAAqB,CAAC,MAAM,EAGnCC,EAAAA,CAAW,IAAA,CAEXC,GAAW,IAAA,CAEXC,EAAAA,CAAa,KAEb,iBAAA,EAAoB,CAClB,KAAKC,EAAAA,EAAO,CACZ,KAAKC,EAAAA,GACP,CAEA,oBAAA,EAAuB,CACrB,KAAKJ,EAAAA,EAAU,mBAAA,CAAoB,QAAS,IAAA,CAAKK,EAAY,EAC/D,CAEA,wBAAA,CAAyBC,EAAMC,CAAAA,CAAQC,CAAAA,CAAQ,CACzCF,CAAAA,GAAS,MAAA,EAAU,IAAA,CAAK,WAAA,EAC1B,IAAA,CAAKF,EAAAA,GAET,CAEAD,EAAAA,EAAS,CAEP,IAAA,CAAKH,EAAAA,CAAW,KAAK,aAAA,CAAc,QAAQ,EAC3C,IAAA,CAAKC,EAAAA,CAAW,KAAKD,EAAAA,EAAU,kBAAA,CAE3B,GAAC,IAAA,CAAKA,EAAAA,EAAY,CAAC,IAAA,CAAKC,EAAAA,CAAAA,GAG5B,IAAA,CAAKC,EAAAA,CAAa,IAAA,CAAKD,EAAAA,CAAS,IAAM,CAAA,eAAA,EAAkB,EAAEH,CAAY,CAAA,CAAA,CACtE,IAAA,CAAKG,GAAS,EAAA,CAAK,IAAA,CAAKC,GAGxB,IAAA,CAAKF,EAAAA,CAAS,aAAa,eAAA,CAAiB,IAAA,CAAKE,EAAU,CAAA,CAG3D,IAAA,CAAKF,GAAS,gBAAA,CAAiB,OAAA,CAAS,IAAA,CAAKK,EAAY,CAAA,EAC3D,CAEAA,GAAe,IAAM,CACnB,KAAK,MAAA,GACP,EAEAD,EAAAA,EAAe,CACb,IAAMK,CAAAA,CAAS,IAAA,CAAK,aAAa,MAAM,CAAA,CAEnC,KAAKT,EAAAA,EACP,IAAA,CAAKA,GAAS,YAAA,CAAa,eAAA,CAAiB,OAAOS,CAAM,CAAC,EAGxD,IAAA,CAAKR,EAAAA,GACP,KAAKA,EAAAA,CAAS,MAAA,CAAS,CAACQ,CAAAA,EAE5B,CAMA,QAAS,CACP,IAAMC,EAAW,CAAC,IAAA,CAAK,aAAa,MAAM,CAAA,CAEtCA,EACF,IAAA,CAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,CAAA,CAE5B,IAAA,CAAK,gBAAgB,MAAM,CAAA,CAG7B,KAAK,aAAA,CAAc,IAAI,YAAY,QAAA,CAAU,CAC3C,QAAS,IAAA,CACT,MAAA,CAAQ,CAAE,IAAA,CAAMA,CAAS,CAC3B,CAAC,CAAC,EACJ,CAMA,IAAI,IAAA,EAAO,CACT,OAAO,IAAA,CAAK,aAAa,MAAM,CACjC,CAEA,IAAI,IAAA,CAAKC,EAAO,CACVA,CAAAA,CACF,KAAK,YAAA,CAAa,MAAA,CAAQ,EAAE,CAAA,CAE5B,IAAA,CAAK,gBAAgB,MAAM,EAE/B,CACF,EAEA,cAAA,CAAe,MAAA,CAAO,gBAAA,CAAkBZ,CAAa,CAAA","file":"disclosure.js","sourcesContent":["/**\r\n * ytz-disclosure - Expandable content Web Component.\r\n * Toggles content visibility with proper ARIA attributes.\r\n *\r\n * @module @grimoire/yetzirah-core/disclosure\r\n * @example\r\n * <ytz-disclosure>\r\n *   <button>Show Details</button>\r\n *   <div>Hidden content...</div>\r\n * </ytz-disclosure>\r\n *\r\n * @example\r\n * // Initially open\r\n * <ytz-disclosure open>\r\n *   <button>Hide Details</button>\r\n *   <div>Visible content...</div>\r\n * </ytz-disclosure>\r\n */\r\n\r\nlet disclosureId = 0\r\n\r\n/**\r\n * @class YtzDisclosure\r\n * @extends HTMLElement\r\n */\r\nclass YtzDisclosure extends HTMLElement {\r\n  static observedAttributes = ['open']\r\n\r\n  /** @type {HTMLElement|null} */\r\n  #trigger = null\r\n  /** @type {HTMLElement|null} */\r\n  #content = null\r\n  /** @type {string|null} */\r\n  #contentId = null\r\n\r\n  connectedCallback() {\r\n    this.#setup()\r\n    this.#updateState()\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.#trigger?.removeEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  attributeChangedCallback(name, oldVal, newVal) {\r\n    if (name === 'open' && this.isConnected) {\r\n      this.#updateState()\r\n    }\r\n  }\r\n\r\n  #setup() {\r\n    // Find trigger (first button) and content (next sibling element)\r\n    this.#trigger = this.querySelector('button')\r\n    this.#content = this.#trigger?.nextElementSibling\r\n\r\n    if (!this.#trigger || !this.#content) return\r\n\r\n    // Generate unique ID for content if needed\r\n    this.#contentId = this.#content.id || `ytz-disclosure-${++disclosureId}`\r\n    this.#content.id = this.#contentId\r\n\r\n    // Set up ARIA linkage\r\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\r\n\r\n    // Attach click listener\r\n    this.#trigger.addEventListener('click', this.#handleClick)\r\n  }\r\n\r\n  #handleClick = () => {\r\n    this.toggle()\r\n  }\r\n\r\n  #updateState() {\r\n    const isOpen = this.hasAttribute('open')\r\n\r\n    if (this.#trigger) {\r\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\r\n    }\r\n\r\n    if (this.#content) {\r\n      this.#content.hidden = !isOpen\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle the disclosure open/closed state.\r\n   * Dispatches a 'toggle' event with the new state.\r\n   */\r\n  toggle() {\r\n    const willOpen = !this.hasAttribute('open')\r\n\r\n    if (willOpen) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n\r\n    this.dispatchEvent(new CustomEvent('toggle', {\r\n      bubbles: true,\r\n      detail: { open: willOpen }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Get/set the open state.\r\n   * @type {boolean}\r\n   */\r\n  get open() {\r\n    return this.hasAttribute('open')\r\n  }\r\n\r\n  set open(value) {\r\n    if (value) {\r\n      this.setAttribute('open', '')\r\n    } else {\r\n      this.removeAttribute('open')\r\n    }\r\n  }\r\n}\r\n\r\ncustomElements.define('ytz-disclosure', YtzDisclosure)\r\n\r\nexport { YtzDisclosure }\r\n"]}