{"version":3,"sources":["../src/utils/register.js","../src/disclosure.js"],"names":["register","name","constructor","disclosureId","YtzDisclosure","#trigger","#content","#contentId","#setup","#updateState","#handleClick","oldVal","newVal","isOpen","willOpen","value"],"mappings":"AAeO,SAASA,CAAAA,CAASC,EAAMC,CAAAA,CAAa,CACrC,eAAe,GAAA,CAAID,CAAI,CAAA,EAC1B,cAAA,CAAe,MAAA,CAAOA,CAAAA,CAAMC,CAAW,EAE3C,KCEIC,CAAAA,CAAe,CAAA,CAMbC,EAAN,cAA4B,WAAY,CACtC,OAAO,kBAAA,CAAqB,CAAC,MAAM,CAAA,CAGnCC,EAAAA,CAAW,KAEXC,EAAAA,CAAW,IAAA,CAEXC,GAAa,IAAA,CAEb,iBAAA,EAAoB,CAClB,IAAA,CAAKC,EAAAA,EAAO,CACZ,KAAKC,EAAAA,GACP,CAEA,oBAAA,EAAuB,CACrB,IAAA,CAAKJ,IAAU,mBAAA,CAAoB,OAAA,CAAS,IAAA,CAAKK,EAAY,EAC/D,CAEA,yBAAyBT,CAAAA,CAAMU,CAAAA,CAAQC,EAAQ,CACzCX,CAAAA,GAAS,QAAU,IAAA,CAAK,WAAA,EAC1B,IAAA,CAAKQ,EAAAA,GAET,CAEAD,IAAS,CAEP,IAAA,CAAKH,GAAW,IAAA,CAAK,aAAA,CAAc,QAAQ,CAAA,CAC3C,IAAA,CAAKC,EAAAA,CAAW,IAAA,CAAKD,EAAAA,EAAU,kBAAA,CAE3B,GAAC,IAAA,CAAKA,EAAAA,EAAY,CAAC,IAAA,CAAKC,EAAAA,CAAAA,GAG5B,KAAKC,EAAAA,CAAa,IAAA,CAAKD,EAAAA,CAAS,EAAA,EAAM,CAAA,eAAA,EAAkB,EAAEH,CAAY,CAAA,CAAA,CACtE,IAAA,CAAKG,EAAAA,CAAS,EAAA,CAAK,IAAA,CAAKC,EAAAA,CAGxB,KAAKF,EAAAA,CAAS,YAAA,CAAa,eAAA,CAAiB,IAAA,CAAKE,EAAU,CAAA,CAG3D,KAAKF,EAAAA,CAAS,gBAAA,CAAiB,QAAS,IAAA,CAAKK,EAAY,GAC3D,CAEAA,EAAAA,CAAe,IAAM,CACnB,IAAA,CAAK,MAAA,GACP,CAAA,CAEAD,EAAAA,EAAe,CACb,IAAMI,CAAAA,CAAS,KAAK,YAAA,CAAa,MAAM,CAAA,CAEnC,IAAA,CAAKR,EAAAA,EACP,IAAA,CAAKA,GAAS,YAAA,CAAa,eAAA,CAAiB,OAAOQ,CAAM,CAAC,EAGxD,IAAA,CAAKP,EAAAA,GACP,IAAA,CAAKA,EAAAA,CAAS,MAAA,CAAS,CAACO,GAE5B,CAMA,MAAA,EAAS,CACP,IAAMC,CAAAA,CAAW,CAAC,KAAK,YAAA,CAAa,MAAM,CAAA,CAEtCA,CAAAA,CACF,IAAA,CAAK,YAAA,CAAa,OAAQ,EAAE,CAAA,CAE5B,KAAK,eAAA,CAAgB,MAAM,EAG7B,IAAA,CAAK,aAAA,CAAc,IAAI,WAAA,CAAY,QAAA,CAAU,CAC3C,QAAS,IAAA,CACT,MAAA,CAAQ,CAAE,IAAA,CAAMA,CAAS,CAC3B,CAAC,CAAC,EACJ,CAMA,IAAI,IAAA,EAAO,CACT,OAAO,IAAA,CAAK,aAAa,MAAM,CACjC,CAEA,IAAI,IAAA,CAAKC,CAAAA,CAAO,CACVA,CAAAA,CACF,IAAA,CAAK,aAAa,MAAA,CAAQ,EAAE,CAAA,CAE5B,IAAA,CAAK,eAAA,CAAgB,MAAM,EAE/B,CACF,EAEAf,CAAAA,CAAS,gBAAA,CAAkBI,CAAa,CAAA","file":"disclosure.js","sourcesContent":["/**\n * Idempotent custom element registration utility.\n * Prevents duplicate registration errors when scripts load multiple times.\n *\n * @module @grimoire/yetzirah-core/utils/register\n * @internal Not exported from package\n */\n\n/**\n * Register a custom element if not already registered.\n * Safe to call multiple times with the same name.\n *\n * @param {string} name - Custom element tag name (e.g., 'ytz-button')\n * @param {CustomElementConstructor} constructor - The element class\n */\nexport function register(name, constructor) {\n  if (!customElements.get(name)) {\n    customElements.define(name, constructor)\n  }\n}\n","/**\n * ytz-disclosure - Expandable content Web Component.\n * Toggles content visibility with proper ARIA attributes.\n *\n * @module @grimoire/yetzirah-core/disclosure\n * @example\n * <ytz-disclosure>\n *   <button>Show Details</button>\n *   <div>Hidden content...</div>\n * </ytz-disclosure>\n *\n * @example\n * // Initially open\n * <ytz-disclosure open>\n *   <button>Hide Details</button>\n *   <div>Visible content...</div>\n * </ytz-disclosure>\n */\n\nimport { register } from './utils/register.js'\n\nlet disclosureId = 0\n\n/**\n * @class YtzDisclosure\n * @extends HTMLElement\n */\nclass YtzDisclosure extends HTMLElement {\n  static observedAttributes = ['open']\n\n  /** @type {HTMLElement|null} */\n  #trigger = null\n  /** @type {HTMLElement|null} */\n  #content = null\n  /** @type {string|null} */\n  #contentId = null\n\n  connectedCallback() {\n    this.#setup()\n    this.#updateState()\n  }\n\n  disconnectedCallback() {\n    this.#trigger?.removeEventListener('click', this.#handleClick)\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (name === 'open' && this.isConnected) {\n      this.#updateState()\n    }\n  }\n\n  #setup() {\n    // Find trigger (first button) and content (next sibling element)\n    this.#trigger = this.querySelector('button')\n    this.#content = this.#trigger?.nextElementSibling\n\n    if (!this.#trigger || !this.#content) return\n\n    // Generate unique ID for content if needed\n    this.#contentId = this.#content.id || `ytz-disclosure-${++disclosureId}`\n    this.#content.id = this.#contentId\n\n    // Set up ARIA linkage\n    this.#trigger.setAttribute('aria-controls', this.#contentId)\n\n    // Attach click listener\n    this.#trigger.addEventListener('click', this.#handleClick)\n  }\n\n  #handleClick = () => {\n    this.toggle()\n  }\n\n  #updateState() {\n    const isOpen = this.hasAttribute('open')\n\n    if (this.#trigger) {\n      this.#trigger.setAttribute('aria-expanded', String(isOpen))\n    }\n\n    if (this.#content) {\n      this.#content.hidden = !isOpen\n    }\n  }\n\n  /**\n   * Toggle the disclosure open/closed state.\n   * Dispatches a 'toggle' event with the new state.\n   */\n  toggle() {\n    const willOpen = !this.hasAttribute('open')\n\n    if (willOpen) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n\n    this.dispatchEvent(new CustomEvent('toggle', {\n      bubbles: true,\n      detail: { open: willOpen }\n    }))\n  }\n\n  /**\n   * Get/set the open state.\n   * @type {boolean}\n   */\n  get open() {\n    return this.hasAttribute('open')\n  }\n\n  set open(value) {\n    if (value) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n  }\n}\n\nregister('ytz-disclosure', YtzDisclosure)\n\nexport { YtzDisclosure }\n"]}