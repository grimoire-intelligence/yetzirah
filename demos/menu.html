<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu Component - Yetzirah</title>
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4/css/tachyons.min.css">
  <script type="module" src="../packages/core/dist/index.js"></script>
  <style>
    /* Demo layout */
    .demo-section {
      border-bottom: 1px solid #e0e0e0;
    }
    .demo-section:last-child {
      border-bottom: none;
    }

    /* Menu popup styling - users provide their own */
    ytz-menu [role="menu"] {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      min-width: 160px;
      z-index: 1000;
    }

    ytz-menuitem {
      display: block;
      padding: 8px 16px;
      cursor: pointer;
      transition: background 0.1s;
    }

    ytz-menuitem:hover,
    ytz-menuitem:focus {
      background: #f4f4f4;
      outline: none;
    }

    ytz-menuitem[disabled] {
      color: #999;
      cursor: not-allowed;
    }

    ytz-menuitem[disabled]:hover,
    ytz-menuitem[disabled]:focus {
      background: transparent;
    }

    /* Gap utility for older browsers */
    .gap3 > * + * {
      margin-left: 1rem;
    }
  </style>
</head>
<body class="sans-serif pa4 mw8 center">
  <header class="mb5">
    <nav class="mb3">
      <a href="index.html" class="link blue">&larr; All Components</a>
    </nav>
    <h1 class="f2 fw6 mb2">Menu</h1>
    <p class="f5 lh-copy gray mt0">
      Dropdown menu with keyboard navigation, click-outside dismissal, and positioning.
    </p>
  </header>

  <main>
    <!-- Basic Usage -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Basic Usage</h2>
      <p class="lh-copy mb3">
        Click the trigger to open the menu. Select an item or click outside to close.
        The trigger element must have <code class="bg-near-white ph1">slot="trigger"</code>.
      </p>

      <div class="mb3">
        <ytz-menu>
          <button slot="trigger" class="ph3 pv2 br2 bg-blue white bn pointer">
            Actions &#9662;
          </button>
          <ytz-menuitem>Edit</ytz-menuitem>
          <ytz-menuitem>Duplicate</ytz-menuitem>
          <ytz-menuitem>Share</ytz-menuitem>
          <ytz-menuitem disabled>Archive</ytz-menuitem>
          <ytz-menuitem>Delete</ytz-menuitem>
        </ytz-menu>
      </div>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>&lt;ytz-menu&gt;
  &lt;button slot="trigger"&gt;Actions &#9662;&lt;/button&gt;
  &lt;ytz-menuitem&gt;Edit&lt;/ytz-menuitem&gt;
  &lt;ytz-menuitem&gt;Duplicate&lt;/ytz-menuitem&gt;
  &lt;ytz-menuitem disabled&gt;Archive&lt;/ytz-menuitem&gt;
&lt;/ytz-menu&gt;</code></pre>
    </section>

    <!-- Placement Options -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Placement Options</h2>
      <p class="lh-copy mb3">
        Use the <code class="bg-near-white ph1">placement</code> attribute to control
        where the menu appears. It will flip automatically if there's not enough space.
      </p>

      <div class="flex flex-wrap gap3 mb3">
        <ytz-menu placement="bottom-start">
          <button slot="trigger" class="ph3 pv2 br2 ba b--blue blue bg-white pointer">
            Bottom Start
          </button>
          <ytz-menuitem>Option 1</ytz-menuitem>
          <ytz-menuitem>Option 2</ytz-menuitem>
        </ytz-menu>

        <ytz-menu placement="bottom">
          <button slot="trigger" class="ph3 pv2 br2 ba b--blue blue bg-white pointer">
            Bottom
          </button>
          <ytz-menuitem>Option 1</ytz-menuitem>
          <ytz-menuitem>Option 2</ytz-menuitem>
        </ytz-menu>

        <ytz-menu placement="right">
          <button slot="trigger" class="ph3 pv2 br2 ba b--blue blue bg-white pointer">
            Right
          </button>
          <ytz-menuitem>Option 1</ytz-menuitem>
          <ytz-menuitem>Option 2</ytz-menuitem>
        </ytz-menu>
      </div>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>&lt;ytz-menu placement="bottom-start"&gt;...&lt;/ytz-menu&gt;
&lt;ytz-menu placement="bottom"&gt;...&lt;/ytz-menu&gt;
&lt;ytz-menu placement="right"&gt;...&lt;/ytz-menu&gt;</code></pre>
    </section>

    <!-- With Icons and Shortcuts -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">With Icons and Shortcuts</h2>
      <p class="lh-copy mb3">
        Menu items can contain any content - icons, keyboard shortcuts, or custom HTML.
      </p>

      <div class="mb3">
        <ytz-menu>
          <button slot="trigger" class="ph3 pv2 br2 bg-dark-gray white bn pointer">
            File &#9662;
          </button>
          <ytz-menuitem class="flex justify-between items-center">
            <span>New</span>
            <span class="f7 gray ml3">Ctrl+N</span>
          </ytz-menuitem>
          <ytz-menuitem class="flex justify-between items-center">
            <span>Open</span>
            <span class="f7 gray ml3">Ctrl+O</span>
          </ytz-menuitem>
          <ytz-menuitem class="flex justify-between items-center">
            <span>Save</span>
            <span class="f7 gray ml3">Ctrl+S</span>
          </ytz-menuitem>
          <ytz-menuitem class="bt b--light-gray">Export as PDF</ytz-menuitem>
        </ytz-menu>
      </div>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>&lt;ytz-menuitem class="flex justify-between items-center"&gt;
  &lt;span&gt;Save&lt;/span&gt;
  &lt;span class="f7 gray ml3"&gt;Ctrl+S&lt;/span&gt;
&lt;/ytz-menuitem&gt;</code></pre>
    </section>

    <!-- Grouped Items -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Grouped Items</h2>
      <p class="lh-copy mb3">
        Use borders or visual separators to group related items together.
      </p>

      <div class="mb3">
        <ytz-menu>
          <button slot="trigger" class="ph3 pv2 br2 bg-blue white bn pointer">
            Account &#9662;
          </button>
          <ytz-menuitem class="fw5">Profile</ytz-menuitem>
          <ytz-menuitem>Settings</ytz-menuitem>
          <ytz-menuitem>Billing</ytz-menuitem>
          <ytz-menuitem class="bt b--light-gray dark-red">Sign Out</ytz-menuitem>
        </ytz-menu>
      </div>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>&lt;ytz-menuitem class="fw5"&gt;Profile&lt;/ytz-menuitem&gt;
&lt;ytz-menuitem&gt;Settings&lt;/ytz-menuitem&gt;
&lt;ytz-menuitem class="bt b--light-gray dark-red"&gt;Sign Out&lt;/ytz-menuitem&gt;</code></pre>
    </section>

    <!-- With Values -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">With Values</h2>
      <p class="lh-copy mb3">
        Use the <code class="bg-near-white ph1">value</code> attribute to associate data
        with menu items. The value is included in the <code class="bg-near-white ph1">select</code> event.
      </p>

      <div class="mb3">
        <ytz-menu id="value-menu">
          <button slot="trigger" class="ph3 pv2 br2 bg-green white bn pointer">
            Select Action &#9662;
          </button>
          <ytz-menuitem value="copy">Copy</ytz-menuitem>
          <ytz-menuitem value="cut">Cut</ytz-menuitem>
          <ytz-menuitem value="paste">Paste</ytz-menuitem>
        </ytz-menu>
        <span id="value-output" class="ml3 f6 gray"></span>
      </div>

      <script>
        document.querySelector('#value-menu').addEventListener('select', (e) => {
          document.querySelector('#value-output').textContent = `Selected: ${e.detail.value}`
        })
      </script>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>&lt;ytz-menuitem value="copy"&gt;Copy&lt;/ytz-menuitem&gt;
&lt;ytz-menuitem value="cut"&gt;Cut&lt;/ytz-menuitem&gt;

menu.addEventListener('select', (e) =&gt; {
  console.log('Selected:', e.detail.value)
})</code></pre>
    </section>

    <!-- Programmatic Control -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Programmatic Control</h2>
      <p class="lh-copy mb3">
        Control the menu via JavaScript using methods and properties.
      </p>

      <div class="mb3">
        <button onclick="document.querySelector('#prog-menu').show()"
                class="ph3 pv2 br2 bg-blue white bn pointer mr2">
          Open Menu
        </button>
        <button onclick="document.querySelector('#prog-menu').hide()"
                class="ph3 pv2 br2 ba b--blue blue bg-transparent pointer mr2">
          Close Menu
        </button>
        <button onclick="document.querySelector('#prog-menu').toggle()"
                class="ph3 pv2 br2 ba b--gray gray bg-transparent pointer">
          Toggle Menu
        </button>
      </div>

      <ytz-menu id="prog-menu">
        <button slot="trigger" class="ph3 pv2 br2 bg-purple white bn pointer">
          Controlled Menu &#9662;
        </button>
        <ytz-menuitem>Item 1</ytz-menuitem>
        <ytz-menuitem>Item 2</ytz-menuitem>
        <ytz-menuitem>Item 3</ytz-menuitem>
      </ytz-menu>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto mt3"><code>const menu = document.querySelector('ytz-menu')

// Open/close/toggle
menu.show()
menu.hide()
menu.toggle()

// Check state
console.log(menu.open) // true/false

// Set state
menu.open = true</code></pre>
    </section>

    <!-- Keyboard Navigation -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Keyboard Support</h2>
      <p class="lh-copy mb3">
        Full keyboard navigation is built-in:
      </p>
      <ul class="lh-copy pl3 mb3">
        <li><kbd class="ph2 pv1 bg-light-gray br1 f6">Enter</kbd> / <kbd class="ph2 pv1 bg-light-gray br1 f6">Space</kbd> on trigger - Open menu</li>
        <li><kbd class="ph2 pv1 bg-light-gray br1 f6">&#8595;</kbd> / <kbd class="ph2 pv1 bg-light-gray br1 f6">&#8593;</kbd> - Navigate items</li>
        <li><kbd class="ph2 pv1 bg-light-gray br1 f6">Home</kbd> / <kbd class="ph2 pv1 bg-light-gray br1 f6">End</kbd> - Jump to first/last item</li>
        <li><kbd class="ph2 pv1 bg-light-gray br1 f6">Enter</kbd> / <kbd class="ph2 pv1 bg-light-gray br1 f6">Space</kbd> on item - Select</li>
        <li><kbd class="ph2 pv1 bg-light-gray br1 f6">Escape</kbd> - Close menu and return focus to trigger</li>
      </ul>

      <div class="mb3">
        <ytz-menu>
          <button slot="trigger" class="ph3 pv2 br2 bg-blue white bn pointer">
            Try keyboard nav &#9662;
          </button>
          <ytz-menuitem>First item</ytz-menuitem>
          <ytz-menuitem>Second item</ytz-menuitem>
          <ytz-menuitem>Third item</ytz-menuitem>
          <ytz-menuitem>Last item</ytz-menuitem>
        </ytz-menu>
      </div>
    </section>

    <!-- API Reference -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">API Reference</h2>

      <h3 class="f5 fw6 mb2">ytz-menu Attributes</h3>
      <table class="collapse ba b--light-gray w-100 mb4">
        <thead>
          <tr class="bg-light-gray">
            <th class="pa2 tl">Attribute</th>
            <th class="pa2 tl">Type</th>
            <th class="pa2 tl">Default</th>
            <th class="pa2 tl">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>open</code></td>
            <td class="pa2">Boolean</td>
            <td class="pa2">false</td>
            <td class="pa2">Menu visibility</td>
          </tr>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>placement</code></td>
            <td class="pa2">String</td>
            <td class="pa2">"bottom-start"</td>
            <td class="pa2">Position relative to trigger</td>
          </tr>
        </tbody>
      </table>

      <h3 class="f5 fw6 mb2">ytz-menuitem Attributes</h3>
      <table class="collapse ba b--light-gray w-100 mb4">
        <thead>
          <tr class="bg-light-gray">
            <th class="pa2 tl">Attribute</th>
            <th class="pa2 tl">Type</th>
            <th class="pa2 tl">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>disabled</code></td>
            <td class="pa2">Boolean</td>
            <td class="pa2">Item is not selectable</td>
          </tr>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>value</code></td>
            <td class="pa2">String</td>
            <td class="pa2">Value passed in select event</td>
          </tr>
        </tbody>
      </table>

      <h3 class="f5 fw6 mb2">Events</h3>
      <table class="collapse ba b--light-gray w-100 mb4">
        <thead>
          <tr class="bg-light-gray">
            <th class="pa2 tl">Event</th>
            <th class="pa2 tl">Target</th>
            <th class="pa2 tl">Detail</th>
            <th class="pa2 tl">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>open</code></td>
            <td class="pa2">ytz-menu</td>
            <td class="pa2">-</td>
            <td class="pa2">Menu opened</td>
          </tr>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>close</code></td>
            <td class="pa2">ytz-menu</td>
            <td class="pa2">-</td>
            <td class="pa2">Menu closed</td>
          </tr>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>select</code></td>
            <td class="pa2">ytz-menuitem</td>
            <td class="pa2"><code>{ value }</code></td>
            <td class="pa2">Item selected</td>
          </tr>
        </tbody>
      </table>

      <h3 class="f5 fw6 mb2">ARIA</h3>
      <ul class="lh-copy pl3 mb4">
        <li>Trigger gets <code class="bg-near-white ph1">aria-haspopup="menu"</code></li>
        <li>Trigger gets <code class="bg-near-white ph1">aria-expanded</code> (true/false)</li>
        <li>Trigger gets <code class="bg-near-white ph1">aria-controls</code> pointing to menu</li>
        <li>Menu popup gets <code class="bg-near-white ph1">role="menu"</code></li>
        <li>Items get <code class="bg-near-white ph1">role="menuitem"</code></li>
        <li>Disabled items get <code class="bg-near-white ph1">aria-disabled="true"</code></li>
      </ul>
    </section>

    <!-- Styling -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Styling</h2>
      <p class="lh-copy mb3">
        Yetzirah provides structure, you provide styles. Target these selectors:
      </p>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>/* The menu popup container */
ytz-menu [role="menu"] {
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  min-width: 160px;
  z-index: 1000;
}

/* Individual items */
ytz-menuitem {
  display: block;
  padding: 8px 16px;
  cursor: pointer;
}

/* Hover/focus states */
ytz-menuitem:hover,
ytz-menuitem:focus {
  background: #f5f5f5;
  outline: none;
}

/* Disabled items */
ytz-menuitem[disabled] {
  color: #999;
  cursor: not-allowed;
}

ytz-menuitem[disabled]:hover {
  background: transparent;
}

/* Visual separators using borders */
ytz-menuitem.separator {
  border-top: 1px solid #eee;
  margin-top: 4px;
  padding-top: 12px;
}</code></pre>
    </section>

    <!-- React Usage -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">React Usage</h2>

      <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>import { Menu, MenuItem } from '@yetzirah/react'

function ActionsMenu() {
  const handleSelect = (detail) =&gt; {
    console.log('Selected:', detail.value)
  }

  return (
    &lt;Menu onClose={() =&gt; console.log('closed')}&gt;
      &lt;button slot="trigger"&gt;Actions&lt;/button&gt;
      &lt;MenuItem onSelect={handleSelect} value="edit"&gt;Edit&lt;/MenuItem&gt;
      &lt;MenuItem onSelect={handleSelect} value="delete"&gt;Delete&lt;/MenuItem&gt;
      &lt;MenuItem disabled&gt;Archive&lt;/MenuItem&gt;
    &lt;/Menu&gt;
  )
}

// Controlled mode
function ControlledMenu() {
  const [open, setOpen] = useState(false)

  return (
    &lt;Menu
      open={open}
      onOpen={() =&gt; setOpen(true)}
      onClose={() =&gt; setOpen(false)}
    &gt;
      &lt;button slot="trigger"&gt;Open&lt;/button&gt;
      &lt;MenuItem&gt;Option 1&lt;/MenuItem&gt;
      &lt;MenuItem&gt;Option 2&lt;/MenuItem&gt;
    &lt;/Menu&gt;
  )
}</code></pre>
    </section>

    <!-- MUI Migration -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Migrating from MUI Menu</h2>

      <div class="flex flex-wrap nl2 nr2">
        <div class="w-50-ns w-100 ph2 mb3">
          <h4 class="f6 fw6 mb2 gray ttu">MUI</h4>
          <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>const [anchorEl, setAnchorEl] = useState(null)
const open = Boolean(anchorEl)

&lt;Button onClick={(e) =&gt; setAnchorEl(e.currentTarget)}&gt;
  Open
&lt;/Button&gt;
&lt;Menu
  anchorEl={anchorEl}
  open={open}
  onClose={() =&gt; setAnchorEl(null)}
&gt;
  &lt;MenuItem onClick={handleEdit}&gt;Edit&lt;/MenuItem&gt;
  &lt;MenuItem onClick={handleDelete}&gt;Delete&lt;/MenuItem&gt;
&lt;/Menu&gt;</code></pre>
        </div>
        <div class="w-50-ns w-100 ph2 mb3">
          <h4 class="f6 fw6 mb2 gray ttu">Yetzirah</h4>
          <pre class="f6 bg-near-white pa3 br2 overflow-auto"><code>&lt;Menu&gt;
  &lt;button slot="trigger"&gt;Open&lt;/button&gt;
  &lt;MenuItem onSelect={handleEdit}&gt;Edit&lt;/MenuItem&gt;
  &lt;MenuItem onSelect={handleDelete}&gt;Delete&lt;/MenuItem&gt;
&lt;/Menu&gt;

{/* No anchorEl state needed! */}
{/* Trigger is inside the component */}</code></pre>
        </div>
      </div>

      <h4 class="f6 fw6 mb2">Key Differences</h4>
      <table class="collapse ba b--light-gray w-100 mb4">
        <thead>
          <tr class="bg-light-gray">
            <th class="pa2 tl">MUI</th>
            <th class="pa2 tl">Yetzirah</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bb b--light-gray">
            <td class="pa2">Separate <code>anchorEl</code> state</td>
            <td class="pa2">Trigger inside component with <code>slot="trigger"</code></td>
          </tr>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>onClick</code> on MenuItem</td>
            <td class="pa2"><code>select</code> event / <code>onSelect</code></td>
          </tr>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>anchorOrigin</code> / <code>transformOrigin</code></td>
            <td class="pa2"><code>placement</code> attribute</td>
          </tr>
          <tr class="bb b--light-gray">
            <td class="pa2"><code>TransitionComponent</code></td>
            <td class="pa2">CSS transitions on <code>[role="menu"]</code></td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Menu vs Popover -->
    <section class="demo-section pv4">
      <h2 class="f4 fw6 mb3">Menu vs Popover</h2>
      <p class="lh-copy mb3">
        When to use each component:
      </p>
      <table class="w-100 collapse ba b--light-gray">
        <thead>
          <tr class="bg-near-white">
            <th class="pa2 tl bb b--light-gray">Use Case</th>
            <th class="pa2 tl bb b--light-gray">Component</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="pa2 bb b--light-gray">List of actions/commands</td>
            <td class="pa2 bb b--light-gray"><code>&lt;ytz-menu&gt;</code></td>
          </tr>
          <tr>
            <td class="pa2 bb b--light-gray">Keyboard navigation needed</td>
            <td class="pa2 bb b--light-gray"><code>&lt;ytz-menu&gt;</code></td>
          </tr>
          <tr>
            <td class="pa2 bb b--light-gray">Rich interactive content (forms, etc.)</td>
            <td class="pa2 bb b--light-gray"><code>&lt;ytz-popover&gt;</code></td>
          </tr>
          <tr>
            <td class="pa2">Click-triggered info overlay</td>
            <td class="pa2"><code>&lt;ytz-popover&gt;</code></td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <footer class="mt5 pt4 bt b--light-gray">
    <p class="f6 gray">
      <a href="index.html" class="link blue">Back to all components</a>
    </p>
  </footer>
</body>
</html>
